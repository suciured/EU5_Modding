EU5 Authority Ledger — Codex Index (Authoritative)
[DATE] 2025-12-30
[SCOPE] Canon / Knowledge Base / Explainers
[STATUS] Design-Phase, Implementation-Pending

PURPOSE
- Canonical navigation index for Codex agents.
- Explicitly defines what exists, what does not, and where intent is documented.
- Prevents Codex from hallucinating missing engine paths or scripts.

IMPORTANT RULE
- If something is not implemented in /Canon/Raw/, it MUST be defined here as intent.

============================================================
CORE TERMINOLOGY
============================================================
CA = Central Authority (country-scoped)
LA = Local Authority (country-scoped)
NA = Net Authority (CA − LA)
TA = Title Authority (persistent country accumulator)
TR = Title Rank (hidden tier derived from TA)
T-rank = UI node tree (Tn.m, m = slot 1..6)

============================================================
AUTHORITATIVE FILE MAP
============================================================

[FORMULAS — WHAT IS CALCULATED]

(1) Authority math (derived variables only)
File:
  Canon/Knowledge Base/Explainers/Formulas/Formulas_Only.txt

Defines:
- BaseLoc
- CapitalBase
- LocalBase
- CA / LA / NA
- TA = TA + NA
- TR dependency on thresholds

Does NOT define:
- Variable storage
- Update hooks
- GUI exposure

--------------------------------------------

(2) Balance constants (editable)
File:
  Canon/Knowledge Base/Explainers/Formulas/Variables.txt

Defines:
- POP_CAP_K
- CA_STATE_MIN
- CA_TR_COEFF
- TR_MAX

--------------------------------------------

(3) TR thresholds & hysteresis
File:
  Canon/Knowledge Base/Explainers/Formulas/TR_Thresholds.txt

Defines:
- TA → TR mapping (TR0–TR15)
- Demotion buffer rule
- Independence gate (TR10 → TR11)

============================================================
INTENT-DEFINED (NOT YET IMPLEMENTED)
============================================================

The following systems are NOT present in /Canon/Raw/.
They are defined by intent and must NOT be assumed by Codex.

--------------------------------------------

(4) Authority variable storage model
File:
  Canon/Knowledge Base/Explainers/Authority/Authority_Ledger_Exposure.txt

Defines (by intent):
- CA, LA, NA, TA are country-scoped values
- Values are recomputed on a regular pulse
- Values are readable by UI systems

This file is the authoritative answer to:
- “Where do CA/LA/TA live?”
- “Are they GUI-readable?”

--------------------------------------------

(5) Monthly authority update hook
STATUS: NOT IMPLEMENTED

Defined by intent in:
- Authority_Ledger_Exposure.txt
- T_Rank_System_Handoff.txt

Explicitly NOT defined:
- Which on_action is used
- Which script file performs the update

Codex must treat this as:
> “A monthly scripted effect exists by design, but is not yet implemented.”

--------------------------------------------

(6) GovP_norm definition
STATUS: NOT IMPLEMENTED

Defined by intent:
- GovP_norm is a normalized government power scalar in range [0,1]
- It represents state administrative capacity
- Used ONLY via StateScore in authority math

Authoritative intent reference:
- T_Rank_System_Handoff.txt

Codex must NOT assume:
- Which base-game value is used
- Which file defines it
- Any specific scaling

--------------------------------------------

(7) Eligible provinces for CA
STATUS: DEFINED BY INTENT

Authoritative rule:
- ONLY locations in the capital province contribute to CA
- All other locations contribute to LA

Defined in:
- Formulas_Only.txt
- T_Rank_System_Handoff.txt

--------------------------------------------

(8) TR derivation & storage
STATUS: PARTIALLY DEFINED

Defined:
- TR is derived from TA via thresholds + hysteresis
- TR feeds back into CA via TRMult

Not defined:
- Script variable names
- Persistence layer

Authoritative source:
- TR_Thresholds.txt
- T_Rank_System_Handoff.txt

============================================================
UI / LEDGER SYSTEM
============================================================

(9) Ledger exposure model
STATUS: INTENT-DEFINED

Authoritative file:
  Canon/Knowledge Base/Explainers/Authority/Authority_Ledger_Exposure.txt

Defines:
- CA / LA / TA are exposed via ledger-style UI
- Read-only
- Pattern follows existing ledgers (cultures, religions, wars)

Explicitly NOT defined:
- GUI file names
- Ledger tab registration method
- Widget bindings

============================================================
T-RANK (UI TREE, NOT TIERS)
============================================================

(10) T-rank UI node structure
File:
  Canon/Knowledge Base/Explainers/T-Rank/EU5_T-RANK_TEMPLATE.txt

Defines:
- T0–T15 rows
- Tn.1–Tn.6 slots
- EMPTY handling
- Locked upgrade paths (T0 → T1)

IMPORTANT:
- T-rank ≠ TR
- T-rank is player-facing structure
- TR is hidden progression tier

============================================================
SYSTEM HANDOFF
============================================================

(11) Full system handoff
File:
  Canon/Knowledge Base/Explainers/T-Rank/T_Rank_System_Handoff.txt

Defines:
- All renames (R → T)
- Authority math summary
- TR logic summary
- Design principles
- Explicit non-assumptions

============================================================
CODEX INSTRUCTIONS
============================================================

(12) Codex guardrails
File:
  CODEX_INSTRUCTIONS.txt

Defines:
- Source-only rules
- No hallucination policy
- Stop conditions

============================================================
CODING STATUS SUMMARY
============================================================

Defined in KB:
✔ Authority math
✔ Thresholds
✔ Intent for storage
✔ Intent for ledger exposure

NOT defined yet:
✘ Script hooks
✘ Variable declarations in Raw
✘ GUI bindings

Codex must treat missing items as:
> “Design-defined, implementation-pending”

END
