change_rgo_to_new_location_mod = {
	type = situation

	ai_tick = never
	ai_tick_frequency = 12
	automation_tick = never
	automation_tick_frequency = 12

	potential = {
	}

	allow = {

	}
	
	price = price:rgo_change_mod_price

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:change_rgo_mod_situation = this
			situation_is_active = yes
		}
	}

	#goods in scope:goods
	select_trigger = {
		looking_for_a = goods
		target_flag = target_good
		
		name = "spread_select_goods"
		none_available_msg_key = "move_nw_good_to_new_location_no_available_good"
		column = { data = name }
		visible = {
			OR = {
				has_tag = old_world_goods
				has_tag = new_world_goods

				this = goods:lumber
				this = goods:fiber_crops
				this = goods:tea
				this = goods:incense
				this = goods:dyes
				this = goods:silk
				this = goods:salt
				this = goods:medicaments
				this = goods:elephants
				this = goods:saffron
				this = goods:pepper
				this = goods:cloves

				this = goods:wool
				this = goods:fish
				this = goods:legumes
				this = goods:fruit
				this = goods:beeswax

			}
			scope:actor ?= {
				any_market_present_in_country = {
					OR = {
						is_produced_in_market = root
						is_traded_in_market = root
					}
				}
			}
		}
	}
	
	#Select Region
	select_trigger = {
		looking_for_a = region
		source = actor
		target_flag = target_region
		name = "choose_a_region"
		none_available_msg_key = "no_regions_available"
		column = { data = name }
		visible = {
			any_area_in_region = {
				scope:actor = { has_discovered_area = prev }
				any_location_in_area = {
					OR = {
						owner ?= scope:actor
						top_owner ?= scope:actor
					}
				}
			}
		}
	}
	#Select the owned location where to spread the new resource
	select_trigger = {
		looking_for_a = location
		source = target_region
		source_flags = only_actual_locations
		target_flag = target_location
		
		map_mode = raw_material
		name = "choose_location"
		none_available_msg_key = "move_nw_good_to_new_location_no_available_location"
		column = { data = rank }
		column = { data = name }
		column = { data = raw_material }
		column = { data = population }
		visible = {
			is_ownable = yes
			has_owner = yes
			OR = {
				owner ?= scope:actor
				top_owner ?= scope:actor
			}


			trigger_if = {
			    limit = { scope:target_good = goods:lumber }
			    NOT = { raw_material ?= goods:lumber }
			    NOR = { vegetation = desert }

			    OR = {
			        vegetation = woods
			        vegetation = forest
			        vegetation = jungle
			    }

			    OR = {
			        topography = flatland
			        topography = hills
			        topography = mountains
			        topography = plateau
			    }

			    OR = {
			        climate = tropical
			        climate = subtropical
			        climate = oceanic
			        climate = continental
			        climate = cold_arid
			        climate = mediterranean
			        climate = arctic
			    }
			}

			trigger_if = {
			    limit = { scope:target_good = goods:salt }
			    NOT = { raw_material ?= goods:salt }

			    NOR = { climate = arctic }

       			is_coastal = yes
        	}
			trigger_if = {
			    limit = { scope:target_good = goods:fiber_crops }
			    NOT = { raw_material ?= goods:fiber_crops }

			    NOR = {
			        vegetation = desert
			        vegetation = jungle
			    }

			    OR = {
			        vegetation = grasslands
			        vegetation = sparse
			        vegetation = farmland
			        vegetation = woods
			    }

			    OR = {
			        topography = flatland
			        topography = hills
			        topography = plateau
			    }

			    OR = {
			        climate = continental
			        climate = oceanic
			        climate = mediterranean
			        climate = subtropical
			        climate = cold_arid
			    }
			}
			trigger_if = {
			    limit = { scope:target_good = goods:tea }
			    NOT = { raw_material ?= goods:tea }

			    NOR = { vegetation = desert }

			    OR = {
			        vegetation = grasslands
			        vegetation = farmland
			        vegetation = woods
			        vegetation = forest
			        vegetation = hills
			    }

			    OR = {
			        topography = hills
			        topography = plateau
			        topography = mountains
			        topography = flatland
			    }

			    OR = {
			        climate = subtropical
			        climate = tropical
			        climate = oceanic
			        climate = mediterranean
			    }
			}
			trigger_if = {
			    limit = { scope:target_good = goods:incense }
			    NOT = { raw_material ?= goods:incense }

			    OR = {
			        vegetation = desert
			        vegetation = sparse
			        vegetation = grasslands
			    }

			    OR = {
			        topography = flatland
			        topography = hills
			        topography = plateau
			    }

			    OR = {
			        climate = arid
			        climate = cold_arid
			        climate = subtropical
			        climate = mediterranean
			    }
			}
			trigger_if = {
			    limit = { scope:target_good = goods:dyes }
			    NOT = { raw_material ?= goods:dyes }

			    NOR = { vegetation = desert }

			    OR = {
			        vegetation = jungle
			        vegetation = forest
			        vegetation = woods
			        vegetation = farmland
			    }

			    OR = {
			        topography = flatland
			        topography = hills
			        topography = plateau
			    }

			    OR = {
			        climate = tropical
			        climate = subtropical
			        climate = oceanic
			        climate = mediterranean
			    }
			}
			trigger_if = {
			    limit = { scope:target_good = goods:silk }
			    NOT = { raw_material ?= goods:silk }

			    NOR = { vegetation = desert }

			    OR = {
			        vegetation = farmland
			        vegetation = grasslands
			        vegetation = sparse
			        vegetation = woods
			    }

			    OR = {
			        topography = flatland
			        topography = hills
			        topography = plateau
			    }

			    OR = {
			        climate = subtropical
			        climate = continental
			        climate = oceanic
			        climate = mediterranean
			    }
			}
			trigger_if = {
			    limit = { scope:target_good = goods:medicaments }
			    NOT = { raw_material ?= goods:medicaments }

			    NOR = { vegetation = desert }

			    OR = {
			        vegetation = woods
			        vegetation = forest
			        vegetation = jungle
			        vegetation = grasslands
			        vegetation = farmland
			    }

			    OR = {
			        topography = hills
			        topography = flatland
			        topography = plateau
			        topography = mountains
			    }

			    OR = {
			        climate = tropical
			        climate = subtropical
			        climate = oceanic
			        climate = continental
			        climate = mediterranean
			    }
			}

			trigger_if = {
				limit = { scope:target_good = goods:wool }
				NOT = { raw_material ?= goods:wool }

				NOR = {
					vegetation = desert
					vegetation = jungle
				}

				OR = {
					vegetation = sparse
					vegetation = grasslands
					vegetation = farmland
					vegetation = woods
					vegetation = forest
				}

				OR = {
					topography = flatland
					topography = hills
					topography = plateau
					topography = mountains
				}

				OR = {
					climate = continental
					climate = oceanic
					climate = mediterranean
					climate = cold_arid
					climate = subtropical
					climate = arid
				}
			}
			trigger_if = {
				limit = { scope:target_good = goods:fish }
				NOT = { raw_material ?= goods:fish }

				NOR = {
					climate = arctic
				}

				OR = {
					is_coastal = yes

					AND = {
						topography = wetlands

						NOR = {
							vegetation = desert
						}

						OR = {
							vegetation = grasslands
							vegetation = sparse
							vegetation = farmland
							vegetation = woods
						}

						OR = {
							climate = oceanic
							climate = continental
							climate = subtropical
							climate = mediterranean
							climate = cold_arid
							climate = arid
						}
					}
				}
			}
			trigger_if = {
				limit = { scope:target_good = goods:legumes }
				NOT = { raw_material ?= goods:legumes }

				NOR = {
					vegetation = desert
					vegetation = jungle
				}

				OR = {
					vegetation = farmland
					vegetation = grasslands
					vegetation = sparse
					vegetation = woods
				}

				OR = {
					topography = flatland
					topography = hills
					topography = plateau
				}

				OR = {
					climate = continental
					climate = oceanic
					climate = mediterranean
					climate = subtropical
					climate = tropical
				}
			}

			trigger_if = {
				limit = { scope:target_good = goods:fruit }
				NOT = { raw_material ?= goods:fruit }

				NOR = {
					vegetation = desert
					climate = arctic
				}

				OR = {
					vegetation = farmland
					vegetation = grasslands
					vegetation = sparse
					vegetation = woods
					vegetation = forest
				}

				OR = {
					topography = flatland
					topography = hills
					topography = plateau
				}

				OR = {
					climate = subtropical
					climate = mediterranean
					climate = oceanic
					climate = continental
					climate = tropical
				}
			}

			trigger_if = {
				limit = { scope:target_good = goods:beeswax }
				NOT = { raw_material ?= goods:beeswax }

				NOR = {
					vegetation = desert
					climate = arctic
				}

				OR = {
					vegetation = farmland
					vegetation = grasslands
					vegetation = sparse
					vegetation = woods
					vegetation = forest
					vegetation = jungle
				}

				OR = {
					topography = flatland
					topography = hills
					topography = plateau
				}

				OR = {
					climate = continental
					climate = oceanic
					climate = mediterranean
					climate = subtropical
					climate = tropical
				}
			}


			#Cotton https://ipad.fas.usda.gov/cropexplorer/cropview/commodityView.aspx?cropid=2631000
			trigger_if = {
				limit = {
					scope:target_good = goods:cotton
				}
				NOT = { raw_material ?= goods:cotton }
				NOR = {
					vegetation = desert
					vegetation = jungle
					vegetation = forest
				}
				OR = {
					topography = flatland
				}
				OR = {
					climate = subtropical
					climate = tropical
					climate = arid
					climate = cold_arid
					climate = mediterranean
				}
			}
			#wheat https://ipad.fas.usda.gov/cropexplorer/cropview/commodityView.aspx?cropid=0410000
			trigger_if = {
				limit = {
					scope:target_good = goods:wheat
				}
				NOT = { raw_material ?= goods:wheat }
				NOR = {
					vegetation = desert
					vegetation = jungle
					vegetation = forest
				}
				OR = {
					topography = flatland
					topography = plateau
				}
				OR = {
					climate = subtropical
					climate = continental
					climate = mediterranean
					climate = oceanic
					climate = cold_arid
				}
			}
			#millet https://ipad.fas.usda.gov/cropexplorer/cropview/commodityView.aspx?cropid=0410000
			trigger_if = {
				limit = {
					scope:target_good = goods:millet
				}
				NOT = { raw_material ?= goods:millet }
				NOR = {
					vegetation = desert
					vegetation = jungle
					vegetation = forest
				}
				OR = {
					topography = flatland
					topography = hills
					topography = plateau
				}
				OR = {
					climate = subtropical
					climate = tropical
					climate = continental
					climate = mediterranean
					climate = oceanic
					climate = arid
					climate = cold_arid
				}
			}
			#olives https://www.reddit.com/r/MapPorn/comments/1bjstdu/major_olive_growing_regions_of_the_world/#lightbox
			trigger_if = {
				limit = {
					scope:target_good = goods:olives
				}
				NOT = { raw_material ?= goods:olives }
				NOR = {
					vegetation = desert
					vegetation = jungle
					vegetation = forest
				}
				OR = {
					topography = flatland
					topography = hills
					topography = plateau
				}
				OR = {
					climate = mediterranean
					climate = cold_arid
				}
			}
			#coffee https://www.researchgate.net/profile/Christian-Bunn/publication/269419801/figure/fig1/AS:295281645113350@1447412038471/Global-coffee-location-database-and-major-coffee-growing-regions-Blue-points-represent.png
			trigger_if = {
				limit = {
					scope:target_good = goods:coffee
				}
				NOT = { raw_material ?= goods:coffee }
				OR = {
					vegetation = woods
					vegetation = jungle
					vegetation = forest
				}
				OR = {
					topography = flatland
					topography = hills
					topography = plateau
					topography = mountains
				}
				OR = {
					climate = subtropical
					climate = tropical
				}
			}
			#rice https://ipad.fas.usda.gov/cropexplorer/cropview/commodityView.aspx?cropid=0422110
			trigger_if = {
				limit = {
					scope:target_good = goods:rice
				}
				NOT = { raw_material ?= goods:rice }
				OR = {
					vegetation = farmland
					vegetation = grasslands
					vegetation = woods
					vegetation = jungle
					vegetation = forest
				}
				OR = {
					topography = flatland
					topography = wetlands
				}
				OR = {
					climate = subtropical
					climate = tropical
				}
			}
			#sugar https://sugar.ca/sites/default/uploads/images/Geography%20of%20sugar%20graph.png
			trigger_if = {
				limit = {
					scope:target_good = goods:sugar
				}
				NOT = { raw_material ?= goods:sugar }
				NOR = {
					vegetation = desert
					vegetation = sparse
				}
				OR = {
					topography = plateau
					topography = flatland
					topography = wetlands
				}
				OR = {
					climate = tropical
					climate = subtropical
					climate = mediterranean
				}
			}
			#wine https://www.reddit.com/media?url=https%3A%2F%2Fexternal-preview.redd.it%2FneRHDZFAEL_Mthmtcg1XdV7njNkMfnlsR2KSMdBYLg8.jpg%3Fauto%3Dwebp%26s%3Dd114383394d6b5b719ba097dc6e14c07d8cc82f7
			trigger_if = {
				limit = {
					scope:target_good = goods:wine
				}
				NOT = { raw_material ?= goods:wine }
				NOR = {
					vegetation = jungle
					vegetation = forest
				}
				OR = {
					topography = plateau
					topography = flatland
					topography = hills
					topography = mountains
				}
				OR = {
					climate = cold_arid
					climate = mediterranean
					climate = oceanic
					climate = continental
				}

			}
			#horses https://www.researchgate.net/publication/281822984/figure/fig11/AS:341927150014466@1458533193400/Potential-habitat-suitable-land-cover-for-feral-horses-E-ferus-The-distribution-of.png
			trigger_if = {
				limit = {
					scope:target_good = goods:horses
				}
				NOT = { raw_material ?= goods:horses }
				NOR = {
					vegetation = jungle
					vegetation = forest
					vegetation = woods
				}
				OR = {
					topography = plateau
					topography = flatland
					topography = hills
				}
				OR = {
					climate = cold_arid
					climate = arid
					climate = mediterranean
					climate = oceanic
					climate = continental
				}
			}
			#livestock https://platform.vox.com/wp-content/uploads/sites/2/chorus/assets/4643285/cattle_distribution.png
			trigger_if = {
				limit = {
					scope:target_good = goods:livestock
				}
				NOT = { raw_material ?= goods:livestock }
				NOR = {
					vegetation = jungle
					vegetation = forest
					vegetation = woods
				}
				OR = {
					topography = plateau
					topography = flatland
					topography = hills
				}
				NOR = {
					climate = arctic
				}
			}
			#Saffron https://es.wikipedia.org/wiki/Crocus_sativus
			trigger_if = {
				limit = {
					scope:target_good = goods:saffron
				}
				NOT = { raw_material ?= goods:saffron }
				OR = {
					vegetation = sparse
					vegetation = grasslands
					vegetation = farmland
				}
				OR = {
					topography = plateau
					topography = flatland
					topography = hills
				}
				OR = {
					climate = arid
					climate = cold_arid
					climate = mediterranean
				}
			}
			#Pepper https://en.wikipedia.org/wiki/Black_pepper
			trigger_if = {
				limit = {
					scope:target_good = goods:pepper
				}
				NOT = { raw_material ?= goods:pepper }
				OR = {
					vegetation = jungle
					vegetation = woods
					vegetation = forest
				}
				OR = {
					topography = plateau
					topography = flatland
					topography = hills
				}
				climate = tropical
			}
			#Cloves https://en.wikipedia.org/wiki/Clove
			trigger_if = {
				limit = {
					scope:target_good = goods:cloves
				}
				NOT = { raw_material ?= goods:cloves }
				vegetation = jungle
				OR = {
					topography = plateau
					topography = flatland
					topography = hills
				}
				climate = tropical
			}

			trigger_if = {
				limit = {
					scope:target_good ?= goods:tobacco
				}
				NOT = { raw_material ?= goods:tobacco }
				NOT = {vegetation = desert }
				OR = {
					topography = flatland
					topography = hills
				}
				OR = {					
					climate = tropical
					climate = subtropical
					climate = mediterranean
					climate = oceanic
					climate = continental
				}
				
			}
			#Cocoa https://www.researchgate.net/profile/Rachel-Friedman-12/publication/269616565/figure/fig1/AS:392096088379400@1470494400663/Map-of-current-global-distribution-of-cocoa-developed-in-ArcGIS-based-on-data-from.png
			trigger_if = {
				limit = {
					scope:target_good ?= goods:cocoa
				}
				NOT = { raw_material ?= goods:cocoa }
				NOR = {
					vegetation = desert
					vegetation = sparse
					vegetation = grasslands
				}
				area = {
					is_area_sea = no
				}
				NOR = { 
					topography = atoll
					topography = wetlands
				}
				climate = tropical
				
			}
			#Maize https://ipad.fas.usda.gov/cropexplorer/cropview/commodityView.aspx?cropid=0440000
			trigger_if = {
				limit = {
					scope:target_good ?= goods:maize
				}
				NOT = { raw_material ?= goods:maize }
				OR = {
					vegetation = farmland
					vegetation = forest
					vegetation = woods
					vegetation = grasslands
				}
				area = {
					is_area_sea = no
				}
				OR = { 
					topography = flatland
					topography = hills
				}
				OR = {
					climate = tropical
					climate = subtropical
					climate = continental
					climate = oceanic
					climate = mediterranean
				}
			}
			#Chili https://es.wikipedia.org/wiki/Capsicum
			trigger_if = {
				limit = {
					scope:target_good ?= goods:chili
				}
				NOT = { raw_material ?= goods:chili }
				OR = {
					vegetation = farmland
					vegetation = forest
					vegetation = woods
					vegetation = grasslands
					vegetation = sparse
				}
				area = {
					is_area_sea = no
				}
				OR = { 
					topography = wetlands
					topography = flatland
					topography = hills
					topography = plateau
				}
				OR = {
					climate = tropical
					climate = subtropical
					climate = mediterranean
					climate = oceanic
					climate = continental
				}
			}
			#Potato
			trigger_if = {
				limit = {
					scope:target_good ?= goods:potato
				}
				NOT = { raw_material ?= goods:potato }
				NOT = {
					vegetation = desert
				}
				area = {
					is_area_sea = no
				}
				NOR = {
					climate = tropical
					climate = arid
					climate = cold_arid
					climate = arctic
				}
			}

		}
	}

	effect = {
		scope:target_location ?= {			
			change_max_raw_material_workers = {
				value = rgo_workers
				subtract = 1
				min = 0
				multiply = -1
			}
			change_prosperity = prosperity_weak_penalty
			change_raw_material = scope:target_good
		}
	}
	
	ai_will_do = {
		#If the action is doable by the AI, 
		#meaning there is a combination of target good and target location where it can replace the RGO it should do it
		value = -1
	}
}
