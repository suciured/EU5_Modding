namespace = hussite_flavor

scripted_trigger hussite_loc_with_other_christian_dominant = {
	dominant_religion.group = religion_group:christian
	dominant_religion != religion:hussite
	region = root.capital.region
}

scripted_trigger heretic_cabinet_member_not_banned = {
	religion != root.religion
	religion.group = root.religion.group
	NOT = { has_character_modifier = permanently_banned_from_cabinet }
}

scripted_trigger hussite_loc_root_region_with_temple_or_cathedral = {
	region = root.capital.region
	dominant_religion = religion:hussite
	OR = {
		has_building_with_at_least_one_level = temple
		has_building_with_at_least_one_level = cathedral
	}
}


hussite_flavor.1 = { #A Man of Culture
	type = country_event
	title = hussite_flavor.1.title
	desc = hussite_flavor.1.desc
	trigger = {
		religion = religion:hussite
		exists = character:boh_jan_hus
	}
	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		random_list = {
			10 = {
				create_character = {
					religion = root.religion
					estate = estate_type:clergy_estate
					age = 33
					adm = 78
					female = no
					artist = painter
					save_scope_as = target_artist
					create_in_limbo = yes
				}
			}
			10 = {
				create_character = {
					religion = root.religion
					estate = estate_type:clergy_estate
					age = 33
					adm = 78
					female = no
					artist = writer
					save_scope_as = target_artist
					create_in_limbo = yes
				}
			}
			10 = {
				create_character = {
					religion = root.religion
					estate = estate_type:clergy_estate
					age = 33
					adm = 78
					artist = philosopher
					female = no
					save_scope_as = target_artist
					create_in_limbo = yes
				}
			}
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
	}

	option = {
		name = hussite_flavor.1.a

		change_gold_effect = { scale = -3 }
		scope:target_character = { move_country = root }
		if = {
			limit = {
				scope:target_artist = {
					artist_type = architect
				}
			}
			capital = {
				change_prosperity = prosperity_very_weak_bonus
			}
		}
		else_if = {
			limit = {
				scope:target_artist = {
					artist_type = writer
				}
			}
			add_religious_influence = religious_influence_weak_bonus
		}
		else_if = {
			limit = {
				scope:target_artist = {
					artist_type = painter
				}
			}
			culture = {
				add_cultural_influence = cultural_influence_weak_bonus
				add_cultural_tradition = cultural_tradition_weak_bonus
			}
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_weak_bonus }

	}
	option = {
		name = hussite_flavor.1.b

		trigger = {
			exists = scope:target_country
		}
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_minor_move_to_right
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_penalty }
	}
}

hussite_flavor.2 = { #Prominent [ROOT.GetCountry.GetGovernment.GetEstateName('clergy_estate')] Disagree with our Policies
	type = country_event
	title = hussite_flavor.2.title
	desc = hussite_flavor.2.desc
	trigger = {
		religion = religion:hussite
		num_possible_estate_privileges:clergy_estate > 0
	}
	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
	}

	option = {
		name = hussite_flavor.2.a

		add_government_power = government_power_extreme_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_bonus }

		"estate(estate_type:clergy_estate)" = {
			random_possible_privilege = {
				root = { grant_estate_privilege = prev }
			}
		}
	}

	option = {
		name = hussite_flavor.2.b

		add_stability = stability_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_extreme_penalty }
	}
}

hussite_flavor.3 = { #"Friends Beyond our Borders"
	hide_portraits = yes
	type = country_event
	title = hussite_flavor.3.title
	desc = hussite_flavor.3.desc
	trigger = {
		religion = religion:hussite
		any_neighbor_country = {
			religion.group = religion_group:christian
			OR = {
				modifier:tolerance_heretic >= 0
				opinion = {
                    target = ROOT
                    value >= 25
                }
			}
			at_war = no
			NOT = { is_rival_of = ROOT }
			NOT = { is_enemy_of = ROOT }
			NOT = { has_trust = { modifier = trust_religious_comprehension target = ROOT } }
		}
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:peasants_estate }
		random_neighbor_country = {
			limit = {
				religion.group = religion_group:christian
				OR = {
					modifier:tolerance_heretic >= 0
					opinion = {
						target = ROOT
						value >= 25
					}
				}
				at_war = no
				NOT = { is_rival_of = ROOT }
				NOT = { is_enemy_of = ROOT }
				NOT = { has_trust = { modifier = trust_religious_comprehension target = ROOT } }
			}
			save_scope_as = target_country
		}
		scope:target_country = {
			if = {
				limit = {
					has_ruler = yes
				}
				ruler = {
					save_scope_as = target_character
				}
			}
		}
	}

	option = {
		name = hussite_flavor.3.a

		add_trust = {
			modifier = trust_religious_comprehension
			target = scope:target_country
		}
		reverse_add_trust = {
			modifier = trust_religious_comprehension
			target = scope:target_country
		}
	}
	option = {
		name = hussite_flavor.3.b

		add_stability = stability_weak_bonus
	}
}

hussite_flavor.4 = { #"Out of Tune with the Divine"
	hide_portraits = yes
	type = country_event
	title = hussite_flavor.4.title
	desc = hussite_flavor.4.desc
	trigger = {
		religion = religion:hussite
		capital = {
			dominant_religion = religion:hussite
		}
		any_cabinet_character = {
			has_estate = estate_type:clergy_estate
			count >= 1
		}
	}

	immediate = {
		capital = {
			save_scope_as = target_location
			change_prosperity = prosperity_severe_penalty
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:peasants
				}
				add_pop_size = {
					value = pop_size
					multiply = -0.1
				}
				add_pop_satisfaction = pop_satisfaction_mild_penalty
			}
		}
		random_cabinet_character = {
			limit = {
				has_estate = estate_type:clergy_estate
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = hussite_flavor.4.a

		add_government_power = government_power_mild_penalty
	}
	option = {
		name = hussite_flavor.4.b


		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_penalty }
		if = {
			limit = {
				exists = scope:target_character
			}
			custom_tooltip = target_character_dies_very_violently_tt
			hidden_effect = {
				kill_character = scope:target_character
			}
		}
	}
}

hussite_flavor.5 = { #Location Strays Away
	type = country_event
	title = hussite_flavor.5.title
	desc = hussite_flavor.5.desc
	trigger = {
		religion = religion:hussite
		any_owned_location = {
			hussite_loc_with_other_christian_dominant = yes
		}
	}

	illustration_tags = {
		10 = happy
		10 = regular
	}

	immediate = {
		event_illustration_peasants_foreign_religion_pop_type_effect = yes
		random_owned_location = {
			limit = {
				hussite_loc_with_other_christian_dominant = yes
			}
			save_scope_as = target_location
		}
	}

	option = {
		name = hussite_flavor.5.a

		trigger = {
			has_policy = no_censorship
		}
		scope:target_location = {
			change_control = control_mild_penalty
			every_pop = {
				limit = {
					owner = root
				}
				add_pop_satisfaction = pop_satisfaction_extreme_bonus
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}

	option = {
		name = hussite_flavor.5.b

		trigger = {
			has_policy = limited_censorship
		}
		scope:target_location = {
			change_control = control_weak_bonus
			every_pop = {
				limit = {
					owner = root
				}
				add_pop_satisfaction = pop_satisfaction_severe_penalty

			}
		}
	}

	option = {
		name = hussite_flavor.5.c

		trigger = {
			has_policy = strict_censorship
		}
		scope:target_location = {
			change_prosperity = prosperity_weak_penalty
			change_control = control_weak_bonus
			every_pop = {
				limit = {
					owner = root
				}
				add_pop_satisfaction = pop_satisfaction_ultimate_penalty
				split_pop = {
					fraction = 0.1
					religion = religion:hussite
				}
			}
		}
	}

	option = {
		name = hussite_flavor.5.d

		trigger = {
			has_religious_aspect = religious_aspect:translated_bibles
		}
		change_societal_value = {
			type = spiritualist_vs_humanist
			value = societal_value_minor_move_to_right
		}
		scope:target_location = { change_control = control_weak_penalty }
	}

	option = {
		name = hussite_flavor.5.e

		trigger = {
			NOR = {
				has_policy = no_censorship
				has_policy = limited_censorship
				has_policy = strict_censorship
			}
		}
		scope:target_location = {
			change_prosperity = prosperity_very_weak_penalty
			change_control = control_weak_bonus
			every_pop = {
				limit = {
					owner = root
				}
				add_pop_satisfaction = pop_satisfaction_extreme_penalty
				split_pop = {
					fraction = 0.05
					religion = religion:hussite
				}
			}
		}
	}
}

hussite_flavor.6 = { #Heretic in the Cabinet
	type = country_event
	title = hussite_flavor.6.title
	desc = hussite_flavor.6.desc
	trigger = {
		religion = religion:hussite
		any_cabinet_character = {
			heretic_cabinet_member_not_banned = yes
		}
	}
	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		random_cabinet_character = {
			limit = {
				heretic_cabinet_member_not_banned = yes
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = hussite_flavor.6.a

		scope:target_character = {
			add_character_modifier = {
				modifier = permanently_banned_from_cabinet
				years = -1
				mode = add_and_extend
			}
		}
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_minor_move_to_left
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		add_government_power = government_power_weak_penalty
	}

	option = {
		name = hussite_flavor.6.b

		add_stability = stability_weak_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_extreme_penalty
		}
	}

	option = {
		name = hussite_flavor.6.c

		trigger = {
			has_religious_aspect = religious_aspect:freedom_to_preach
			NOT = { has_policy = strict_censorship }
			NOT = { has_country_modifier = tolerant_court_modifier }
		}

		add_country_modifier = {
			modifier = tolerant_court_modifier
			years = 5
			mode = add_and_extend
		}

		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_extreme_penalty
		}
	}
}


hussite_flavor.7 = { #Sermon in Location
	type = country_event
	title = hussite_flavor.7.title
	desc = hussite_flavor.7.desc
	trigger = {
		religion = religion:hussite
		any_owned_location = {
			hussite_loc_root_region_with_temple_or_cathedral = yes
		}
	}

	immediate = {
		random_owned_location = {
			limit = {
				hussite_loc_root_region_with_temple_or_cathedral = yes
			}
			save_scope_as = target_location
		}
		ruler ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = hussite_flavor.7.a

		add_religious_influence = {
			value = 10
			multiply = root.estate_satisfaction:clergy_estate
			add = 3
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_weak_bonus
		}
	}

	option = {
		name = hussite_flavor.7.b

		trigger = {
			has_ruler = yes
		}

		add_government_power = {
			value = 5
			multiply = "estate_power(estate_type:crown_estate)"
			add = 3
		}
	}

	option = {
		name = hussite_flavor.7.c

		add_stability = stability_weak_bonus
	}
}

hussite_flavor.8 = { #Religious Clashes in location
	type = country_event
	title = hussite_flavor.7.title
	desc = hussite_flavor.7.desc
	trigger = {
		religion = religion:hussite
		any_owned_location = {
			hussite_loc_with_other_christian_dominant = yes
		}
	}

	illustration_tags = {
		10 = angry
		10 = exterior
	}

	immediate = {
		event_illustration_peasants_foreign_religion_pop_type_effect = yes
		random_owned_location = {
			limit = {
				hussite_loc_with_other_christian_dominant = yes
			}
			save_scope_as = target_location
		}
	}

	option = {
		name = hussite_flavor.8.a

		scope:target_location = {
			every_pop = {
				limit = {
					owner = root
					NOT = { religion = religion:hussite }
				}
				add_pop_satisfaction = {
					value = "root.estate_power(estate_type:clergy_estate)"
					max = 0.75
					multiply = 1.5
					multiply = -1
				}
			}
		}

		add_government_power = {
			value = "root.estate_power(estate_type:clergy_estate)"
			min = 3
			max = 15
			multiply = -1
		}
	}

	option = {
		name = hussite_flavor.8.b

		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = {
				value = "root.estate_power(estate_type:clergy_estate)"
				min = 0.15
				max = 0.5
				multiply = -1
			}
		}
		add_stability = stability_weak_penalty
	}
}

hussite_flavor.9 = {
	type = country_event
	title = hussite_flavor.9.title
	desc = hussite_flavor.9.desc
	trigger = {
		country_type = location
		religion != religion:hussite
		situation:hussite_wars = {
			situation_is_active = yes
		}
		"religion_percentage_in_country(religion:hussite)" > 0
	}

	illustration_tags = {
		10 = happy
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = hussite_flavor.9.a
		ordered_owned_location = {
			order_by = population
			limit = {
				dominant_religion != religion:hussite
			}
			max = {
				value = 1
				add = {
					value = root.num_provinces
					multiply = 0.1
				}
			}

			every_pop = {
				limit = {
					religion != religion:hussite
					religion.group = religion_group:christian
				}
				split_pop = {
					fraction = 0.10
					religion = religion:hussite
				}
			}

		}

	}
	option = {
		name = hussite_flavor.9.b
		trigger = {
			any_neighbor_country = {
				religion != religion:hussite
				religion.group = religion_group:christian
			}
		}

		random_neighbor_country = {
			limit = {
				religion != religion:hussite
				religion.group = religion_group:christian
			}

			ordered_owned_location = {
				order_by = population
				limit = {
					any_neighbor_location = {
						owner ?= root
					}
				}
				max = 1

				every_pop = {
					limit = {
						religion != religion:hussite
						religion.group = religion_group:christian
					}
					split_pop = {
						fraction = 0.20
						religion = religion:hussite
					}
				}
			}
		}
	}
}

hussite_flavor.10 = {	#Reform of the Hussite Armies
	type = country_event
	title = hussite_flavor.10.title
	desc = hussite_flavor.10.desc
	image = "gfx/interface/illustrations/situation/hussite_wars.dds"
	
	trigger = {
		religion = religion:hussite
		NOT = { has_country_modifier = hussite_military_reform_modifier }
		current_year > 1430
		is_situation_active = situation:hussite_wars
		NOT = { has_variable = hussite_flavor_10_cooldown_variable }
	}

	immediate = {
		set_variable = {
			name = hussite_flavor_10_cooldown_variable
			years = 20
		}
	}


	option = {
		name = hussite_flavor.10.a

		change_societal_value = {
			type = offensive_vs_defensive
			value = societal_value_minor_move_to_left
		}
		add_army_tradition = army_tradition_mild_bonus

		custom_tooltip = event_may_reoccur_after_20_years_tt
	}
	option = {
		name = hussite_flavor.10.b

		add_stability = {
			value = 0
			if = {
				limit = { societal_value:offensive_vs_defensive > 25 }
				add = {
					value = societal_value:offensive_vs_defensive
					multiply = -1
				}
				divide = 2
			}
		}
		custom_tooltip = stability_loss_depends_on_defensive_sv_tt
		add_country_modifier = {
			modifier = hussite_military_reform_modifier
			years = 20
			mode = replace
		}
		if = {
			limit = { modifier:has_a_parliamentary_system = yes }
			custom_tooltip = reform_hussite_army_tt
		}
		else = { 
			unlock_policy_effect = { type = reformed_hussite_armies_policy } 
			add_policy = policy:reformed_hussite_armies_policy
		}
	}
}

hussite_flavor.11 = {	#Hymns of the Faithful
	type = country_event
	title = hussite_flavor.11.title
	desc = hussite_flavor.11.desc
	trigger = {
		religion = religion:hussite
	}

	illustration_tags = {
		10 = happy
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:clergy_estate }
		random_list = {
			1 = { set_variable = hussite_flavor1 }
			1 = { set_variable = hussite_flavor2 }
			1 = { set_variable = hussite_flavor3 }
			1 = { set_variable = hussite_flavor4 }
			1 = { set_variable = hussite_flavor5 }
			1 = { set_variable = hussite_flavor6 }
		}
	}

	option = {
		name = hussite_flavor.11.a
		trigger = { has_variable = hussite_flavor1 }
		add_religious_influence = religious_influence_mild_bonus
	}

	option = {
		name = hussite_flavor.11.a
		trigger = { has_variable = hussite_flavor2 }

		add_war_exhaustion = war_exhaustion_mild_bonus
	}

	option = {
		name = hussite_flavor.11.a
		trigger = { has_variable = hussite_flavor3 }

		add_stability = stability_mild_bonus
	}

	option = {
		name = hussite_flavor.11.a
		trigger = { has_variable = hussite_flavor4 }

		add_government_power = government_power_mild_bonus
	}

	option = {
		name = hussite_flavor.11.a
		trigger = { has_variable = hussite_flavor5 }

		culture = { add_cultural_tradition = cultural_tradition_mild_bonus }
	}

	option = {
		name = hussite_flavor.11.a
		trigger = { has_variable = hussite_flavor6 }

		culture = { add_cultural_influence = cultural_influence_mild_bonus }
	}

	after = {
		switch = {
			trigger = has_variable
			hussite_flavor1 = { remove_variable = hussite_flavor1 }
			hussite_flavor2 = { remove_variable = hussite_flavor2 }
			hussite_flavor3 = { remove_variable = hussite_flavor3 }
			hussite_flavor4 = { remove_variable = hussite_flavor4 }
			hussite_flavor5 = { remove_variable = hussite_flavor5 }
			hussite_flavor6 = { remove_variable = hussite_flavor6 }
		}
	}
}

hussite_flavor.12 = {	#Schism within Hussitism
	type = country_event
	title = hussite_flavor.12.title
	desc = hussite_flavor.12.desc
	trigger = {
		"religion_percentage_in_country(religion:hussite)" > 0
	}

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		ordered_province = {
			order_by = {
				add = "religion_percentage(religion:hussite)"
				if = {
					limit = { province_satisfaction >= 0 }
					divide = 0.01
				}
				else = { divide = province_satisfaction }
			}
			check_range_bounds = no
			max = 1
			save_scope_as = target_province
		}
	}

	option = {
		name = hussite_flavor.12.a	#Give in to the Hussite Zealot demands

		custom_tooltip = {
			text = every_hussite_in_target_province_10_sat_tt
			scope:target_province = {
				every_location_in_province = {
					every_pop = {
						limit = {
							owner = root
							religion = religion:hussite
						}
						add_pop_satisfaction = pop_satisfaction_mild_bonus
					}
				}
			}
		}
		if = {
			limit = { religion = religion:hussite }
			change_societal_value = {
				type = spiritualist_vs_humanist
				value = societal_value_minor_move_to_left
			}
			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_weak_bonus
			}
		}

		else = {
			change_societal_value = {
				type = spiritualist_vs_humanist
				value = societal_value_minor_move_to_right
			}

			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_mild_penalty
			}
		}
	}

	option = {
		name = hussite_flavor.12.b	#Deny them


		if = {
			limit = { religion = religion:hussite }
			change_societal_value = {
				type = spiritualist_vs_humanist
				value = societal_value_minor_move_to_right
			}

			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_mild_penalty
			}
		}
		else = {
			change_societal_value = {
				type = spiritualist_vs_humanist
				value = societal_value_minor_move_to_left
			}

			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_mild_bonus
			}
		}
	}
}

hussite_flavor.13 = {
	type = country_event
	title = hussite_flavor.13.title
	desc = hussite_flavor.13.desc
	trigger = {
		"religion_percentage_in_country(religion:hussite)" > 0
	}

	immediate = {
		random_owned_location = {
			limit = { any_pop = { religion = religion:hussite } }
			save_scope_as = target_location
		}

		create_character = {
			birth_location = scope:target_location
			estate = estate_type:clergy_estate
			female = no
			min_age = 30
			religion = religion:hussite
			adm = { 20 100 }	#Somewhat better than usual
			dip = { 20 100 }
			mil = { 20 100 }
			save_scope_as = target_character
			create_in_limbo = yes
		}

		if = {
			limit = { religion != religion:hussite }
			scope:target_location = {
				ordered_pop = {
					limit = {
						owner = root
						religion = religion:hussite
					}
					order_by = pop_size
					check_range_bounds = no
					max = 1
					save_scope_as = target_pop
				}
			}
		}
	}

	option = {
		name = hussite_flavor.13.a

		scope:target_character = { move_country = root }
		if = {
			limit = { religion = religion:hussite }
			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_weak_bonus
			}
		}
		else = {
			change_societal_value = {
				type = spiritualist_vs_humanist
				value = societal_value_minor_move_to_right
			}

			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_mild_penalty
			}
		}
	}
	option = {
		name = hussite_flavor.13.b

		custom_tooltip = {
			text = target_character_disappears
			kill_character_silently = scope:target_character
		}
		if = {
			limit = { religion = religion:hussite }
			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_weak_penalty
			}
			change_societal_value = {
				type = spiritualist_vs_humanist
				value = societal_value_minor_move_to_right
			}
		}
		else = {
			add_estate_satisfaction = {
				type = estate_type:clergy_estate
				value = estate_satisfaction_weak_bonus
			}
		}
	}

	option = {
		name = hussite_flavor.13.c

		trigger = { religion != religion:hussite }

		custom_tooltip = {
			text = target_character_disappears
			kill_character_silently = scope:target_character
		}

		add_estate_satisfaction = {
			type = estate_type:clergy_estate
			value = estate_satisfaction_weak_bonus
		}

		scope:target_pop = {
			add_pop_satisfaction = pop_satisfaction_severe_penalty
			split_pop = {
				fraction = 0.5
				religion = root.religion
			}
		}
	}
}

hussite_flavor.14 = {
	type = country_event
	title = hussite_flavor.14.title
	desc = hussite_flavor.14.desc
	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_books.dds"
	
	trigger = {
		religion = religion:hussite
		is_during_bankruptcy = no
		any_character = {
			count > 2
			has_estate = estate_type:clergy_estate
		}
	}

	immediate = {
		ordered_character = {
			limit = { has_estate = estate_type:clergy_estate }
			order_by = total_abilities
			check_range_bounds = no
			max = 1
			save_scope_as = target_character_1
		}
		ordered_character = {
			limit = {
				has_estate = estate_type:clergy_estate
				this != scope:target_character_1
			}
			order_by = total_abilities
			check_range_bounds = no
			max = 1
			save_scope_as = target_character_2
		}
		ordered_character = {
			limit = {
				has_estate = estate_type:clergy_estate
				this != scope:target_character_1
				this != scope:target_character_2
			}
			order_by = total_abilities
			check_range_bounds = no
			max = 1
			save_scope_as = target_character_3
		}
	}



	option = {
		name = hussite_flavor.14.a

		change_gold_effect = { scale = -4 }

		culture = {
			add_cultural_tradition = {
				value = cultural_tradition_mild_bonus
				add = {
					value = scope:target_character_1.total_abilities
					divide = 10
				}
			}
		}
	}
	option = {
		name = hussite_flavor.14.b

		change_gold_effect = { scale = -4 }

		culture = {
			add_cultural_influence = {
				value = cultural_influence_mild_bonus
				add = {
					value = scope:target_character_2.total_abilities
					divide = 10
				}
			}
		}
	}

	option = {
		name = hussite_flavor.14.c

		change_gold_effect = { scale = -4 }
		add_research_progress = {
			value = research_progress_mild_bonus
			add = {
				value = scope:target_character_3.total_abilities
				divide = 20
			}
		}
	}

	option = { name = hussite_flavor.14.d }
}

hussite_flavor.15 = {
	type = country_event
	title = hussite_flavor.15.title
	desc = hussite_flavor.15.desc
	image = "gfx/interface/illustrations/situation/hussite_wars.dds"

	trigger = {
		current_year > 1400
		religion = religion:hussite
		at_war = yes
		manpower > 0
		manpower_percentage < 0.5
		war_exhaustion_percentage > 0.25
	}



	option = {
		name = hussite_flavor.15.a

		change_societal_value = {
			type = offensive_vs_defensive
			value = societal_value_move_to_left
		}
		add_manpower = {
			value = monthly_manpower
			add = {
				value = modifier:tolerance_own
				multiply = 3
			}
		}
		custom_tooltip = scales_with_tolerance_own_tt
	}

	option = {
		name = hussite_flavor.15.b

		add_war_exhaustion = war_exhaustion_mild_bonus
		change_societal_value = {
			type = offensive_vs_defensive
			value = societal_value_move_to_right
		}
	}
}