namespace = muslim_school_events
muslim_school_events.1 = {
	type = country_event
	title = muslim_school_events.1.title
	desc = muslim_school_events.1.desc
	trigger = {
		
		religion.group = religion_group:muslim
		religion = { has_religious_schools = yes}
		NOT = {	religion = religion:shia }
		NOT = { has_country_modifier = talented_mufti }

		any_owned_location = {
			integration_level = core
			has_building_with_at_least_one_level = madrasa
			NOT = {	area = owner.capital.area 	}
			NOT = {
				province = {
					any_location_in_province = {
						has_location_modifier = talented_qadi
					}
				}
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					integration_level = core
					has_building_with_at_least_one_level = madrasa
					NOT = {	area = owner.capital.area	}
					NOT = {
						province = {
							any_location_in_province = {
								has_location_modifier = talented_qadi
							}
						}
					}
				}
				save_scope_as = mufti_province
			}
		}
	}

	option = {
		name = muslim_school_events.1.a
		scope:mufti_province = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = talented_qadi years = 10 mode = add_and_extend }  
				}
			}
		}
	}
	option = {
		name = muslim_school_events.1.b
		add_country_modifier = { modifier = talented_mufti years = 10 mode = add_and_extend }
	}
}

muslim_school_events.2 = {
	type = country_event
	title = muslim_school_events.2.title
	desc = muslim_school_events.2.desc

	trigger = {
		religion.group = religion_group:muslim
		religion = { has_religious_schools = yes}
		has_ruler = yes
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = muslim_school_events.2.a
		trigger = {
			hidden_trigger = {
				NOT = {	has_global_variable = wahabism_founded	}
			}
			NOT = { religious_school ?= religious_school:hanbali_school }
		}
		ruler = { add_character_modifier = { modifier = loyal_mufti_modifier months = -1 mode = add_and_extend } } 
	}
	option = {
		name = muslim_school_events.2.b
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		ruler = { add_character_modifier = { modifier = pious_mufti_modifier months = -1 mode = add_and_extend } } 
	}
	option = {
		name = muslim_school_events.2.c
		trigger = {
			NOT = {	has_global_variable = wahabism_founded	}
			NOT = { religious_school ?= religious_school:hanbali_school }
		}

		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_left }
		ruler = { add_character_modifier = { modifier = sufi_modifier months = -1 mode = add_and_extend } } 
	}
}

muslim_school_events.3 = {
	type = country_event
	title = muslim_school_events.3.title
	desc = muslim_school_events.3.desc
	trigger = {
		
		religion.group = religion_group:muslim
		any_owned_non_rural_location = {
			has_building_with_at_least_one_level = temple
			has_building_with_at_least_one_level = madrasa
			NOT = { has_building = building_type:great_madrasa }
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {		
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_non_rural_location = {
				limit = {
					has_building_with_at_least_one_level = temple
					has_building_with_at_least_one_level = madrasa
					NOT = { has_building = building_type:great_madrasa }
				}
				save_scope_as = madrassah_province
			}
		}
	}

	option = {
		name = muslim_school_events.3.a
		scope:madrassah_province = {
			change_building_level_in_location = {
				building = building_type:great_madrasa
				value = 1
			}
		}
	}
}

muslim_school_events.4 = {
	hide_portraits = yes
	type = country_event
	title = muslim_school_events.4.title
	desc = muslim_school_events.4.desc
	trigger = {
		
		religion.group = religion_group:muslim
		any_country_at_war_with = { NOT = { religion = root.religion } }
		any_neighbor_country = { NOT = { religion = root.religion } }
		any_country = {
			num_of_non_rural >= root.num_of_non_rural
			is_at_war_with = root
			NOT = {
				religion.group = religion_group:muslim
			}
		}
		monthly_manpower > 0.1
		NOT = { has_country_modifier = ghazis_from_abroad }
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_country = {
				limit = {
					num_of_non_rural >= root.num_of_non_rural
					is_at_war_with = root
					NOT = {
						religion.group = religion_group:muslim
					}
				}
				save_scope_as = infidel
			}
		}
	}

	option = {
		name = muslim_school_events.4.a
		add_manpower = { value = root.monthly_manpower multiply = 6 }
		add_country_modifier = { modifier = ghazis_from_abroad years = 10 mode = add_and_extend }  
	}
}

muslim_school_events.5 = {
	hide_portraits = yes
	type = country_event
	title = muslim_school_events.5.title
	desc = muslim_school_events.5.desc
	trigger = {
		
		religion.group = religion_group:muslim
		any_country = {
			religion = root.religion
		}
		OR = {
			AND = {
				owns = location:jerusalem
				location:jerusalem = { integration_level = core }
			}
			AND = {
				owns = location:medina
				location:medina = { integration_level = core }
			}
			AND = {
				owns = location:mecca
				location:mecca = { integration_level = core }
			}

			AND = {
				NOT = {
					religious_school ?= religious_school:hanbali_school
				}
				any_owned_location = {
					is_core_of = root
					has_location_modifier = sufi_shrine
				}
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:burghers_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					OR = {
						location_key = jerusalem
						location_key = medina
						location_key = mecca

						AND = {
							owner = {
								NOT = {
									religious_school ?= religious_school:hanbali_school
								}
							}
							is_core_of = root
							has_location_modifier = sufi_shrine
						}
					}
				}
				save_scope_as = holy_city
			}
			
		}
	}

	option = {
		name = muslim_school_events.5.a
		change_gold_effect = { scale = 2.00 }
		add_prestige = prestige_mild_bonus
	}
}

muslim_school_events.6 = {
	type = country_event
	title = muslim_school_events.6.title
	desc = muslim_school_events.6.desc
	trigger = {
		
		religion = religion:shia
		is_subject = no

		societal_value:mysticism_vs_jurisprudence >= 75



		any_owned_non_rural_location = {
			integration_level = core
			NOT = {	has_location_modifier = foreign_shia_urbanites	}
		}
		any_owned_location = {
			integration_level = core
			
			any_neighbor_location = { 
				has_owner = yes 
				NOT = {	owner = root  }  
			}
			
			NOT = {	has_location_modifier = foreign_shia_settlers	}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_non_rural_location = {
				limit = {
					integration_level = core
				}
				save_scope_as = urban_province
			}
			random_owned_location = {
				limit = {
					integration_level = core
					dominant_religion = owner.religion
					any_neighbor_location = { 
						NOT = {	owner = root  }  
						has_owner = yes 
					}
				}
				save_scope_as = frontier_province
			}
		}
	}

	option = {
		name = muslim_school_events.6.a
		scope:urban_province = {
			change_development  = development_weak_bonus
			add_location_modifier = { modifier = foreign_shia_urbanites years = 10 mode = add_and_extend }  
		}
	}
	option = {
		name = muslim_school_events.6.b
	trigger = {
		any_owned_location = {
			integration_level = core
		}
	}
		scope:frontier_province = {
			change_development  = development_weak_bonus
			add_location_modifier = { modifier = foreign_shia_settlers years = 10 mode = add_and_extend }  
		}
	}
}

muslim_school_events.7 = {
	type = country_event
	title = muslim_school_events.7.title
	desc = muslim_school_events.7.desc
	trigger = {
		
		religion.group = religion_group:muslim
		NOT = {
			has_global_variable = neo_sufism
		}
		any_owned_location = {
			NOT = {
				dominant_religion.group = religion_group:muslim
			}
			NOT = {
				has_location_modifier = local_sufi
			}
			NOT = {
				has_location_modifier = local_sufi_chased_away
			}
		}
	}

	illustration_tags = {
        10 = angry
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					NOT = {
						dominant_religion.group = religion_group:muslim
					}
					NOT = {
						has_location_modifier = local_sufi
					}
					NOT = {
						has_location_modifier = local_sufi_chased_away
					}
				}
				save_scope_as = sufi_province
			}
		}
	}

	option = {
		name = muslim_school_events.7.a
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_left }
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
		scope:sufi_province = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = local_sufi years = 12 mode = add_and_extend }  
				}
			}
		}
	}
	option = {
		name = muslim_school_events.7.b
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		scope:sufi_province = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = local_sufi_chased_away years = 12 mode = add_and_extend }  
				}
			}
		}
	}
}

muslim_school_events.8 = {
	type = country_event
	title = muslim_school_events.8.title
	desc = muslim_school_events.8.desc
	trigger = {
		religion.group = religion_group:muslim
		has_invited_religious_figure = yes
	}

	illustration_tags = {
        10 = happy
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = muslim_school_events.8.a
		add_government_power = government_power_mild_bonus
	}
	option = {
		name = muslim_school_events.8.b
		add_stability = stability_weak_bonus
	}
}

muslim_school_events.9 = {
	type = country_event
	title = muslim_school_events.9.title
	desc = muslim_school_events.9.desc
	trigger = {
		religion.group = religion_group:muslim
		has_invited_religious_figure = yes
		any_invited_religious_figure = {
			religious_school ?= {
				any_country_in_religious_school = {
					count > 0
				}
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_invited_religious_figure = {
				limit = {
					religious_school ?= {
						any_country_in_religious_school = {
							count > 0
						}
					}
				}
				religious_school = {
					random_country_in_religious_school = {
						save_scope_as = scholar_country
					}
				}
			}
		}
	}

	option = {
		name = muslim_school_events.9.a
		scope:scholar_country = {
			add_opinion = { target = root modifier = academic_respect }
		}
		add_prestige = prestige_weak_bonus
	}
}

muslim_school_events.10 = {
	type = country_event
	title = muslim_school_events.10.title
	desc = muslim_school_events.10.desc
	trigger = {
		religion.group = religion_group:muslim
		has_invited_religious_figure = yes
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = muslim_school_events.10.a
		add_government_power = government_power_weak_penalty
		add_prestige = prestige_mild_penalty
	}
}

muslim_school_events.11 = {
	type = country_event
	title = muslim_school_events.11.title
	desc = muslim_school_events.11.desc
	trigger = {
		religion.group = religion_group:muslim
		any_owned_location = {
			dominant_religion = owner.religion
			integration_level = core
			NOT = { area = owner.capital.area }
			
			NOT = {	has_location_modifier = courtly_disorder }
			NOT = {	has_location_modifier = ruler_overriding_ulema }
		}
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					dominant_religion = owner.religion
					integration_level = core
					NOT = { area = owner.capital.area }
			
					NOT = {	has_location_modifier = courtly_disorder }
					NOT = {	has_location_modifier = ruler_overriding_ulema }
				}
				save_scope_as = selected_location
			}
		}
	}

	option = {
		name = muslim_school_events.11.a
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		scope:selected_location = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = courtly_disorder years = 5 mode = add_and_extend }  
				}
			}
		}
	}
	option = {
		name = muslim_school_events.11.b
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_left }
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_bonus
		}
		scope:selected_location = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = ruler_overriding_ulema years = 5 mode = add_and_extend }  
				}
			}
		}
	}
}

muslim_school_events.12 = {
	hide_portraits = yes
	type = country_event
	title = muslim_school_events.12.title
	desc = muslim_school_events.12.desc
	trigger = {
		
		religion.group = religion_group:muslim
		NOT = {
			religion = religion:shia
		}
		any_owned_location = {
			dominant_religion = owner.religion
			integration_level = core
			is_capital = no
			NOT = {
				has_location_modifier = upset_lodges
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					dominant_religion = owner.religion
					integration_level = core
					is_capital = no
					NOT = {
						has_location_modifier = upset_lodges
					}
				}
				save_scope_as = shia_here
			}
		}
	}

	option = {
		name = muslim_school_events.12.a
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_right }
		add_prestige = prestige_mild_penalty
		scope:shia_here = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = upset_lodges years = 12 mode = add_and_extend }  
				}
			}
		}
	}
	option = {
		name = muslim_school_events.12.b
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_left }
		scope:shia_here = {
			province = {
				every_location_in_province = {
					limit = {
						NOT = { dominant_religion = religion:shia }
					}
					custom_tooltip = {
						text = 10_percent_of_all_pops_become_shia_tt
						every_pop = {
							limit = {
								NOT = { religion = religion:shia }
								owner = root
							}
							split_pop = {
								fraction = 0.1
								religion = religion:shia
							}
						}
					}
				}
			}
		}
	}
}

muslim_school_events.13 = {
	type = country_event
	title = muslim_school_events.13.title
	desc = muslim_school_events.13.desc
	trigger = {
		
		religion.group = religion_group:muslim
		any_owned_location = {
			dominant_religion = owner.religion
			integration_level = core
			is_capital = no
			is_city = yes
			NOT = {	has_location_modifier = agreed_with_mufti }
			NOT = {	has_location_modifier = disagreed_with_mufti }
		}
	}

	illustration_tags = {
        10 = angry
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:peasants_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					dominant_religion = owner.religion
					integration_level = core
					is_capital = no
					NOT = {	has_location_modifier = agreed_with_mufti }
					NOT = {	has_location_modifier = disagreed_with_mufti }
				}
				save_scope_as = target_location
			}
		}
	}

	option = {
		name = muslim_school_events.13.a
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_right }
		add_prestige = prestige_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		scope:target_location = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = agreed_with_mufti years = 12 mode = add_and_extend }  
				}
			}
		}
	}
	option = {
		name = muslim_school_events.13.b
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_left }
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
		scope:target_location = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = disagreed_with_mufti years = 12 mode = add_and_extend }  
				}
			}
		}
	}
}

muslim_school_events.14 = {
	type = country_event
	title = muslim_school_events.14.title
	desc = muslim_school_events.14.desc
	trigger = {
		
		religion.group = religion_group:muslim
		any_owned_non_rural_location = {
			dominant_religion = owner.religion
			population > 20
			integration_level = core
			is_capital = no
			NOT = {	has_location_modifier = waqfs_donated }
			NOT = {	has_location_modifier = urban_decay	}
		}
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:peasants_estate }
		hidden_effect = {
			random_owned_non_rural_location = {
				limit = {
					dominant_religion = owner.religion
					population > 20
					integration_level = core
					is_capital = no
					NOT = {	has_location_modifier = waqfs_donated }
					NOT = {	has_location_modifier = urban_decay	}
				}
				save_scope_as = urbanization_province
			}
		}
	}

	option = {
		name = muslim_school_events.14.a
		add_gold = {
			value = 0.1
			add = scope:urbanization_province.location_tax_base
			multiply = -6
		}
		scope:urbanization_province = {
			add_location_modifier = { modifier = waqfs_donated years = 15 mode = add_and_extend }  
		}
	}
	option = {
		name = muslim_school_events.14.b
		add_prestige = prestige_weak_penalty
		scope:urbanization_province = {
			add_location_modifier = { modifier = urban_decay years = 15 mode = add_and_extend }  
		}
	}
}

muslim_school_events.15 = {
	type = country_event
	title = muslim_school_events.15.title
	desc = muslim_school_events.15.desc
	trigger = {
		has_ruler = yes
		religion.group = religion_group:muslim
		NOT = {
			has_country_modifier = upkeep_of_holy_cities
		}
		OR = {
			AND = {
				owns = location:jerusalem
				location:jerusalem = { integration_level = core }
			}
			
			AND = {
				owns = location:medina
				location:medina = { integration_level = core }
			}
			
			AND = {
				owns = location:mecca
				location:mecca = { integration_level = core }
			}
			
			AND = {
				owns = location:qom
				location:qom = { integration_level = core }
				religion = religion:shia
			}
			AND = {
				owns = location:karbala
				location:karbala = { integration_level = core }
				religion = religion:shia
			}

			AND = {
				NOT = {
					religious_school ?= religious_school:hanbali_school
				}
				any_owned_location = {
					is_core_of = root
					has_location_modifier = sufi_shrine
				}
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		ruler = { save_scope_as = target_ruler }
		random_owned_location = {
			limit = {
				OR = {
					location_key = jerusalem
					location_key = medina
					location_key = mecca
					AND = {
						location_key = qom
						owner = {
							religion = religion:shia
						}
					}
					AND = {
						location_key = karbala
						owner = {
							religion = religion:shia
						}
					}
					AND = {
						owner = {
							NOT = {
								religious_school ?= religious_school:hanbali_school
							}
						}
						is_core_of = root
						has_location_modifier = sufi_shrine
					}
				}
			}
			save_scope_as = holy_city
		}
	}

	option = {
		name = muslim_school_events.15.a
		add_country_modifier = { modifier = upkeep_of_holy_cities years = 10 mode = add_and_extend }  
	}
	option = {
		name = muslim_school_events.15.b
		add_stability = stability_mild_penalty
	}
}

muslim_school_events.16 = {
	type = country_event
	title = muslim_school_events.16.title
	desc = muslim_school_events.16.desc
	trigger = {
		has_ruler = yes
		religion.group = religion_group:muslim
		has_invited_religious_figure = yes
		any_owned_location = {
			dominant_religion = owner.religion
			integration_level = core
			is_capital = no
			has_building_with_at_least_one_level = madrasa
			NOT = {
				has_location_modifier = expanded_madrasah
			}
			NOT = {
				has_location_modifier = hampered_expansion_of_madrasah
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:peasants_estate }
		ruler = { save_scope_as = target_ruler }
		random_owned_location = {
			limit = {
				dominant_religion = owner.religion
				integration_level = core
				is_capital = no
				has_building_with_at_least_one_level = madrasa
				NOT = {
					has_location_modifier = expanded_madrasah
				}
				NOT = {
					has_location_modifier = hampered_expansion_of_madrasah
				}
			}
			save_scope_as = madrasa_province
		}
		
		random_invited_religious_figure = {
			religious_school = {
				save_scope_as = inv_school
			}
		}
	}

	option = {
		name = muslim_school_events.16.a
		add_gold = {
			value = 0.1
			add = scope:madrasa_province.location_tax_base
			multiply = -6
		}
		scope:madrasa_province = {
			add_location_modifier = { modifier = expanded_madrasah years = 12 mode = add_and_extend }  
		}
	}
	option = {
		name = muslim_school_events.16.b
		scope:madrasa_province = {
			add_location_modifier = { modifier = hampered_expansion_of_madrasah years = 12 mode = add_and_extend }  
		}
	}
}

muslim_school_events.17 = {
	type = country_event
	title = muslim_school_events.17.title
	desc = muslim_school_events.17.desc
	trigger = {
		
		religion.group = religion_group:muslim
		exists = ruler
		NOT = {	ruler = { has_character_modifier = sought_sufi_sheikh }	}
		NOT = {	ruler = { has_character_modifier = ruler_not_favoring_sufis }	}
		any_owned_location = {
			dominant_religion = owner.religion
			integration_level = core
			is_capital = no
			num_pop_type:clergy > 0.01
			NOT = {
				has_location_modifier = sufi_shrine
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					dominant_religion = owner.religion
					integration_level = core
					is_capital = no
					num_pop_type:clergy > 0.01
					NOT = {
						has_location_modifier = sufi_shrine
					}
				}
				save_scope_as = dargah_province
			}
		}
	}

	option = {
		name = muslim_school_events.17.a
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_left }
		ruler = { add_character_modifier = { modifier = sought_sufi_sheikh months = -1 mode = add_and_extend } } 

		scope:dargah_province = {
			add_location_modifier = { modifier = sufi_shrine months = -1 mode = add_and_extend }  
		}
	}
	option = {
		name = muslim_school_events.17.b
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_right }
		ruler = { add_character_modifier = { modifier = ruler_not_favoring_sufis months = -1 mode = add_and_extend } } 

		scope:dargah_province = {
			add_location_modifier = { modifier = sufi_shrine years = 12 mode = add_and_extend }  
		}
	}
}

muslim_school_events.18 = {
	type = country_event
	title = muslim_school_events.18.title
	desc = muslim_school_events.18.desc
	trigger = {
		religion = religion:shia
		any_owned_location = {
			dominant_religion = owner.religion
			is_capital = no
			integration_level = conquered
			region = region:anatolia_region
			NOT = {	has_location_modifier = alevi_modifier }
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			random_owned_location = {
				limit = {
					dominant_religion = owner.religion
					is_capital = no
					integration_level = conquered
					region = region:anatolia_region
					NOT = {	has_location_modifier = alevi_modifier }
				}
				save_scope_as = alevi_province
			}
		}
	}

	option = {
		name = muslim_school_events.18.a
		scope:alevi_province = {
			province = {
				every_location_in_province = {
					add_location_modifier = { modifier = alevi_modifier years = 20 mode = add_and_extend }  
				}
			}
		}
	}
	option = {
		name = muslim_school_events.18.b
		add_prestige = prestige_weak_bonus
	}
}

muslim_school_events.19 = {
	type = country_event
	title = muslim_school_events.19.title
	desc = muslim_school_events.19.desc
	trigger = {
		religion.group = religion_group:muslim
		stability < 50
		has_ruler = yes
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		ruler = { save_scope_as = target_ruler }
	}

	option = {
		name = muslim_school_events.19.a
		add_country_modifier = { modifier = corrupt_sadrs years = 12 mode = add_and_extend }  
	}
	option = {
		name = muslim_school_events.19.b
		add_country_modifier = { modifier = ulema_displeased years = 12 mode = add_and_extend }  
	}
}


muslim_school_events.21 = {
	type = country_event
	title = muslim_school_events.21.title
	desc = muslim_school_events.21.desc
	trigger = {
		
		current_date >= 1600.1.1
		religion.group = religion_group:muslim
		societal_value:mysticism_vs_jurisprudence < 30
		NOT = {	has_global_variable = neo_sufism }
		NOT = {	dominant_religion = root.religion }
		any_owned_location = {
			NOT = {	dominant_religion.group = religion_group:muslim	}
		}
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			set_global_variable = neo_sufism
		}
	}

	option = {
		name = muslim_school_events.21.a
		add_country_modifier = { modifier = est_val_neo_sufism years = 12 mode = add_and_extend }  
	}
}

muslim_school_events.22 = {
	type = country_event
	title = muslim_school_events.22.title
	desc = muslim_school_events.22.desc
	trigger = {
		religious_school ?= religious_school:hanbali_school
		current_date >= 1700.1.1
		societal_value:mysticism_vs_jurisprudence >= 65
		OR = {
			current_date >= 1780.1.1
			has_global_variable = neo_sufism
		}
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		hidden_effect = {
			set_global_variable = wahabism_founded
		}
	}

	option = {
		name = muslim_school_events.22.a
		custom_tooltip = muslim_school_events.22.a.tt
	}

	option = {
		name = muslim_school_events.22.b
		set_religious_school = religious_school:wahhabi_school
	}
}

muslim_school_events.23 = {
	type = country_event
	title = muslim_school_events.23.title
	desc = muslim_school_events.23.desc
	trigger = {
		
		religion.group = religion_group:muslim
		exists = ruler
		OR = {
			ruler = { has_character_modifier = pious_mufti_modifier }
			has_global_variable = neo_sufism
		}
		any_owned_location = {
			has_location_modifier = sufi_shrine
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = muslim_school_events.23.a
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		random_owned_location = {
			limit = {
				has_location_modifier = sufi_shrine
			}
			remove_location_modifier = sufi_shrine
		}
		add_country_modifier = { modifier = ruler_not_favoring_sufis years = 12 mode = add_and_extend }  
	}
	option = {
		name = muslim_school_events.23.b
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_left }
		add_legitimacy = legitimacy_mild_bonus
	}
}

