namespace = flavor_hsa
flavor_hsa.1 = {
	type = country_event
	title = flavor_hsa.1.title
	desc = flavor_hsa.1.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		from = 1520.1.1
		to = 1540.1.1
		monthly_chance = 5
	}

	trigger = {
		location:gdansk = { owner = { is_subject_of = root } }
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		create_character = {
			first_name = name_george
			last_name = Giese
			birth_date = 1497.4.2
			adm = 75
			dip = 90
			mil = 40
			birth_location = location:gdansk
			culture = culture:prussian
			save_scope_as = target_character
			create_in_limbo = yes
		}
	}

	option = {
		name = flavor_hsa.1.a
		historical_option = yes
		add_government_power = government_power_severe_bonus
		scope:target_character = { move_country = root }
	}

	option = {
		name = flavor_hsa.1.b
		add_stability = stability_mild_bonus
		hidden_effect = {
   			kill_character_silently = scope:target_character
  		}
	}
}

flavor_hsa.2 = {
	type = country_event
	title = flavor_hsa.2.title
	desc = flavor_hsa.2.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		from = 1300.1.1
		to = 1500.1.1
		monthly_chance = 5
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	trigger = {
		tag = HSA
		location:lubeck = { owner = { is_subject_of = root } }
		country_exists = c:HOL
		c:HOL = {
			expected_navy_size > root.expected_navy_size
		}
	}

	option = {
		name = flavor_hsa.2.a
		historical_option = yes
		add_country_modifier = { modifier = hsa_stop_shipbuilding_technology years = 20 mode = add_and_extend }
	}
	option = {
		name = flavor_hsa.2.b
		add_country_modifier = { modifier = hsa_spread_shipbuilding_technology years = 20 mode = add_and_extend }
	}
}

flavor_hsa.3 = {
	hide_portraits = yes
	type = country_event
	title = flavor_hsa.3.title
	desc = flavor_hsa.3.desc
	trigger = {
		tag = HSA
		has_parliament = yes
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		ruler_or_regent ?= { save_scope_as = target_character }
	}

	option = {
		name = flavor_hsa.3.a

		trigger = {
			country_has_estate = estate_type:nobles_estate
			modifier:nobles_estate_can_participate_in_parliament = yes
		}
		scope:target_character = {
			add_character_modifier = {
				modifier = matters_of_the_nobles_modifier
				years = -1
				mode = replace
			}
		}

	}
	option = {
		name = flavor_hsa.3.b

		trigger = {
			country_has_estate = estate_type:burghers_estate
			modifier:burghers_estate_can_participate_in_parliament = yes
		}

		scope:target_character = {
			add_character_modifier = {
				modifier = matters_of_the_burghers_modifier
				years = -1
				mode = replace
			}
		}

	}
	option = {
		name = flavor_hsa.3.c

		trigger = {
			country_has_estate = estate_type:peasants_estate
			modifier:peasants_estate_can_participate_in_parliament = yes
		}

		scope:target_character = {
			add_character_modifier = {
				modifier = matters_of_the_peasants_modifier
				years = -1
				mode = replace
			}
		}

	}

	option = {
		name = flavor_hsa.3.d


		scope:target_character = {
			add_character_modifier = {
				modifier = matters_of_the_crown_modifier
				years = -1
				mode = replace
			}
		}

	}
}

flavor_hsa.4 = {
	type = country_event
	title = flavor_hsa.4.title
	desc = flavor_hsa.4.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		from = 1555.1.1
		to = 1580.1.1
		monthly_chance = 5
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:nobles_estate }
		create_character = {
			first_name = name_henry
			last_name = Sudermann

			birth_date = 1520.8.31
			adm = 66
			dip = 74
			mil = 68
			culture = culture:rhine_franconian
			birth_location = location:cologne
			create_in_limbo = yes
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_hsa.4.a
		add_prestige = prestige_mild_bonus
		scope:target_character = { move_country = root }
	}
}

flavor_hsa.5 = {	#Adoption of the League's Seal
	type = country_event
	title = flavor_hsa.5.title
	desc = flavor_hsa.5.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		from = 1355.1.1
		to = 1385.1.1
		monthly_chance = 1
	}
	trigger = {
		location:lubeck = { has_building = building_type:hanseatic_kontor }
		total_effective_building_levels:hanseatic_kontor > 15
		country_type = building
	}
	
	illustration_tags = {
        10 = happy
        10 = interior
    }
	
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		ordered_owned_foreign_building = {
			limit = {
				location.region = region:north_german_region
				location != location:lubeck
			}
			order_by = {
				value = location.population
				if = {
					limit = {
						location = { location_rank = location_rank:city }
					}
					multiply = 1.5
				}
				add = {
					value = "location.distance_to(location:lubeck)"
					multiply = -1
				}
			}
			max = 3
			check_range_bounds = no
			location = { set_variable = { name = eligible_for_event_variable years = 1 } }
		}
		region:north_german_region = {
			random_location_in_region = {
				limit = { has_variable = eligible_for_event_variable }
				save_scope_as = target_location2
				remove_variable = eligible_for_event_variable
			}
			random_location_in_region = {
				limit = { has_variable = eligible_for_event_variable }
				save_scope_as = target_location3
				remove_variable = eligible_for_event_variable
			}
		}
		if = {
			limit = {
				location:lubeck = { has_building = building_type:hanseatic_kontor }
			}
			location:lubeck = { save_scope_as = target_location }
		}
	}

	option = {	#
		name = flavor_hsa.5.a
		trigger = {
			exists = scope:target_location
		}
		scope:target_location = {
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:burghers
				}
				add_pop_satisfaction = pop_satisfaction_ultimate_bonus
			}
		}
		add_country_modifier = {
			modifier = seal_of_hansa_modifier
			years = 15
			mode = add_and_extend
		}
		add_government_power = government_power_extreme_bonus
		change_gold_effect = { scale = -12 }
	}

	option = {
		name = flavor_hsa.5.b
		trigger = {
			exists = scope:target_location2
		}
		scope:target_location = {
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:burghers
				}
				add_pop_satisfaction = pop_satisfaction_extreme_bonus
			}
		}
		add_country_modifier = {
			modifier = seal_of_hansa_modifier
			years = 10
			mode = add_and_extend
		}
		add_government_power = {
			value = government_power_extreme_bonus
			multiply = 0.5
		}
		change_gold_effect = { scale = -6 }
	}

	option = {
		name = flavor_hsa.5.c
		trigger = {
			exists = scope:target_location3
		}
		scope:target_location = {
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:burghers
				}
				add_pop_satisfaction = pop_satisfaction_severe_bonus
			}
		}
		add_country_modifier = {
			modifier = seal_of_hansa_modifier
			years = 5
			mode = add_and_extend
		}
		add_government_power = {
			value = government_power_extreme_bonus
			multiply = 0.25
		}
		change_gold_effect = { scale = -3 }
	}
}

flavor_hsa.6 = {
	type = country_event
	title = flavor_hsa.6.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					character:ulman_stromer_script ?= {
						owner = root
					}
				}
				desc = flavor_hsa.6.desc
			}
			triggered_desc = {
				desc = flavor_hsa.6.desc.a
			}
		}
	}
	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		from = 1370.6.1
		to = 1430.12.13
		monthly_chance = 5
	}

	trigger = {
		at_war = no
		OR = {
			location:lubeck.owner = {
				is_subject_or_below_of = ROOT
			}
			location:lubeck.owner = {
				this = ROOT
			}
			location:lubeck = {
				NOT = {
					any_buildings_in_location = {
						building_type = building_type:paper_guild
						is_at_max_level = yes
					}
				}
			}
		}
		OR = {
			character:ulman_stromer_script ?= {
				owner = root
			}
			current_year > 1390
		}
	}

	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_paper.dds"

	immediate = {
		location:lubeck = { save_scope_as = target_location }
		character:ulman_stromer_script ?= { save_scope_as = target_character }
	}

	option = {	#Establish it
		name = flavor_hsa.6.a

		scope:target_location = {
			construct_building = {
				building_type = building_type:paper_guild
				cost_multiplier = 0
				cost_multiplier_reason = burghers_cheap_sponsorship
			}
			change_prosperity = prosperity_severe_bonus
		}
		change_societal_value = {
			type = capital_economy_vs_traditional_economy
			value = societal_value_large_move_to_left
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_extreme_penalty
		}
	}

	option = {	#Better not
		name = flavor_hsa.6.b

		change_societal_value = {
			type = capital_economy_vs_traditional_economy
			value = societal_value_large_move_to_right
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_bonus
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_extreme_penalty
		}
		add_prestige = prestige_mild_penalty
	}
}

flavor_hsa.7 = {
	type = country_event
	title = flavor_hsa.7.title
	desc = flavor_hsa.7.desc
	historical_info = flavor_hsa.7.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		from = 1340.6.1
		to = 1500.6.1
		monthly_chance = 10
	}

	trigger = {
		capital = {
			any_buildings_in_location = {
				building_type = building_type:hanseatic_town_hall
				is_at_max_level = yes
			}
		}
	}

	illustration_tags = {
        10 = happy
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		save_scope_as = target_country
		ordered_known_country = {
			limit = {
				NOR = {
					is_rival_of = root
					is_enemy_of = root
					is_at_war_with = root
				}
				any_owned_location = {
					OR = {
						has_building = building_type:hanseatic_kontor
						has_building = building_type:hanseatic_shipwright_guild
						has_building = building_type:hanseatic_town_hall
					}
				}
			}
			order_by = monthly_income_trade_and_tax
			max = 1
			check_range_bounds = no
			save_scope_as = target_country2
		}
	}

	option = {
		name = flavor_hsa.7.a

		add_government_power = government_power_extreme_bonus
		custom_tooltip = every_known_country_hansa_tt
		hidden_effect = {
			every_known_country = {
				limit = {
					NOR = {
						is_rival_of = root
						is_enemy_of = root
						is_at_war_with = root
					}
					any_owned_location = {
						OR = {
							has_building = building_type:hanseatic_kontor
							has_building = building_type:hanseatic_shipwright_guild
							has_building = building_type:hanseatic_town_hall
						}
					}
				}
				add_opinion_mutual_effect = {
					target = PREV
					modifier = opinion_diplomacy_with_the_hansa_modifier
				}
			}
		}
	}
}

flavor_hsa.8 = {
	hide_portraits = yes
	type = country_event
	title = flavor_hsa.8.title
	desc = flavor_hsa.8.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		tag = LUB
		from = 1460.6.1
		to = 1515.6.1
		monthly_chance = 2
	}

	trigger = {
		cultural_maintenance > 0.8
		prestige > 30
		has_embraced_institution = institution:renaissance
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		save_scope_as = target_country
		create_character = {
			first_name = name_bernard
			last_name = Notke
			estate = estate_type:burghers_estate
			birth_date = 1440.6.1
			adm = 27
			dip = 33
			mil = 15
			birth_location = location:tallinn
			culture = culture:german_baltic
			artist = painter
			artist_skill = 0.75
			create_in_limbo = yes
			script = bernt_notke_script
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_hsa.8.a

		character:bernt_notke_script = { move_country = root }
		custom_tooltip = hsa_bernt_notke_tt
		change_gold_effect = { scale = -3 }
	}

	option = {
		name = flavor_hsa.8.b

		culture = {
			add_cultural_tradition = cultural_tradition_mild_penalty
			add_cultural_influence = cultural_influence_mild_penalty
		}
		add_prestige = prestige_mild_penalty
		scope:target_character = { banish_character = yes }
	}
}

flavor_hsa.9 = {
	hide_portraits = yes
	type = country_event
	title = flavor_hsa.9.title
	desc = flavor_hsa.9.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = HSA
		from = 1465.6.1
		to = 1550.6.1
		monthly_chance = 1
	}

	trigger = {
		character:bernt_notke_script ?= {
			owner = ROOT
			is_alive = yes
		}
		at_war = no
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		character:bernt_notke_script = {
			save_scope_as = target_character
		}
		capital = {
			create_art = {
				artist = scope:target_character
				type = work_of_art_type:painting
				quality = 84
				key = danse_macabre_art
			}
		}
	}

	option = {
		name = flavor_hsa.9.a

		culture = {
			add_cultural_tradition = cultural_tradition_weak_bonus
			add_cultural_influence = cultural_influence_weak_bonus
		}
		add_prestige = prestige_mild_bonus
	}

	option = {
		name = flavor_hsa.9.b

		add_prestige = prestige_mild_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		destroy_art = work_of_art:danse_macabre_art
	}
}