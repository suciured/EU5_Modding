namespace = council_of_trent

council_of_trent.2 = { #on end event
	type = country_event
	category = situation_event
	title = council_of_trent.2.title
	desc = council_of_trent.2.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	after = {
		hidden_effect = {
			international_organization:catholic_church = {
				remove_variable = council_of_trent_reforms_done_counter
			}
		}
	}
	
	option = { #Neutral "Historical" Outcome - not full hatred but not tolerant
		name = council_of_trent.2.a

		trigger = {
			international_organization:catholic_church = {
				OR = {
					NOT = { has_variable = council_of_trent_reforms_done_counter }
					AND = {
						var:council_of_trent_reforms_done_counter <= 2
						var:council_of_trent_reforms_done_counter >= -2
					}
				}
			}
		}
		religion:catholic = {
			change_protestant_view = { value = negative }
		}
	}

	option = { #Hostile Aggressive Outcome 
		name = council_of_trent.2.b

		trigger = {
			international_organization:catholic_church = {
				has_variable = council_of_trent_reforms_done_counter
				var:council_of_trent_reforms_done_counter < -2
			}
		}
		religion:catholic = {
			change_protestant_view = { value = enemy }
		}
	}

	option = { #Friendly Reconiciliation Outcome
		name = council_of_trent.2.c

		trigger = {
			international_organization:catholic_church = {
				has_variable = council_of_trent_reforms_done_counter
				var:council_of_trent_reforms_done_counter > 2
			}
		}
		religion:catholic = {
			change_protestant_view = { value = kindred }
		}
	}
}

council_of_trent.3 = { #Feast of Fools
	type = country_event
	category = situation_event
	title = council_of_trent.3.title
	desc = council_of_trent.3.desc

	fire_only_once = yes
	
	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}
	
	option = {
		name = council_of_trent.3.a

		international_organization:catholic_church = {
			set_variable = feast_of_fools_outlawed
		}
		custom_tooltip = disables_feast_of_fools
	}

	option = {
		name = council_of_trent.3.b
		add_prestige = prestige_weak_penalty		
	}
}

#The Reformation of the Catholic Faith - On Start
council_of_trent.1000 = {
	type = country_event
	category = situation_event
	title = council_of_trent.1000.title
	desc = council_of_trent.1000.desc

	image = "gfx/interface/illustrations/situation/council_of_trent.dds"

	immediate = {

		ruler_or_regent ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = council_of_trent.1000.a
		international_organization:catholic_church = {
			custom_tooltip = allow_law_changes_tt
		}
		change_gold_effect = { scale = -6.00 }
		custom_tooltip = council_of_trent.1000.tt
	}
}

#The Council of Trent - Invitation
council_of_trent.1001 = {
	type = country_event
	category = situation_event
	title = council_of_trent.1001.title
	desc = council_of_trent.1001.desc

	image = "gfx/interface/illustrations/situation/council_of_trent.dds"

	immediate = {
		c:PAP = {
			ruler_or_regent ?= {
				save_scope_as = target_character
			}
		}
	}

	option = {
		name = council_of_trent.1001.a
		international_organization:catholic_church = {
			custom_tooltip = allow_law_changes_tt
		}
	}
}

council_of_trent.1002 = { #Council of Trent Protestants
	type = country_event
	category = situation_event
	title = council_of_trent.1002.title
	desc = council_of_trent.1002.desc

	image = "gfx/interface/illustrations/situation/council_of_trent.dds"

	option = {
		name = council_of_trent.1002.a
		international_organization:catholic_church = {
			custom_tooltip = allow_law_changes_tt
		}
		trigger = {
			modifier:tolerance_heretic > -1
		}
		
	}

	option = {
		name = council_of_trent.1002.b
		international_organization:catholic_church = {
			custom_tooltip = allow_law_changes_tt
		}
		trigger = {
			modifier:tolerance_heretic <= -1
		}
	}
}