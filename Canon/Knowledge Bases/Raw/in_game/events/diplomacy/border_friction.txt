namespace = border_friction
border_friction.1 = {
	type = country_event
	title = border_friction.1.title
	desc = border_friction.1.desc
	trigger = {
		any_related_country = {
			type = alliance
			count >= 1
		}
		any_related_country = {
			type = alliance
			is_neighbor_of = root
			any_owned_location = {
				is_core_of = root
				NOT = {
					has_variable = recent_border_friction
				}
			}
			NOT = { root = { has_blocked_treaties = prev } }
		}
	}

	immediate = {
		random_country = {
			limit = {
				is_allied_with = { target = root }
				is_neighbor_of = root
				any_owned_location = {
					is_core_of = root
				}
				NOT = { root = { has_blocked_treaties = prev } }
			}
			save_scope_as = border_claim_country
			random_owned_location = {
				limit = {
					is_core_of = root
					NOT = {
						has_variable = recent_border_friction
					}
				}
				set_variable = {
					name = recent_border_friction
					years = 5
				}
				province = {
					save_scope_as = border_claim_province
				}
			}
		}
	}

	option = {
		name = border_friction.1.a
		trigger = {
			this != scope:border_claim_country
		}
		scope:border_claim_country = {
			add_opinion = { target = root modifier = border_friction_from_event }
		}
		block_treaties = scope:border_claim_country
		remove_relation = {
			type = relation_type:alliance
			first = this
			second = scope:border_claim_country
		}
	}
	option = {
		name = border_friction.1.b
		add_prestige = prestige_mild_penalty
	}
	option = {
		name = border_friction.1.c
		scope:border_claim_province = {
			every_location_in_province = {
				remove_core = root
			}
		}
	}
}

border_friction.2 = {
	type = country_event
	title = border_friction.2.title
	desc = border_friction.2.desc
	trigger = {
		has_embraced_institution = institution:enlightenment
		is_ai = no
		at_war = no
		is_subject = no
		war_exhaustion < 5
		manpower_percentage >= 0.95
		stability >= -10
		has_regent = no


		any_core_location = {
			NOT = { owner = root }
			owner = {
				NOT = {	is_subject_of = root }
				NOT = { has_truce_with = root }
				NOT = {	is_allied_with = { target = root } }
			}
		}

	}


	immediate = {
		random_core_location = {
			limit = {
				NOT = { owner = root }
				owner = {
					NOT = {	is_subject_of = root }
					NOT = { has_truce_with = root }
					NOT = {	is_allied_with = { target = root } }
				}
			}
			owner = {
				save_scope_as = border_claim_country
			}
			province = {
				save_scope_as = border_claim_province
			}
		}
	}

	option = {
		name = border_friction.2.a
		scope:border_claim_country = {
			add_opinion = { target = root modifier = border_friction_from_event }
		}
	}
	option = {
		name = border_friction.2.b
		add_prestige = prestige_mild_penalty
	}
	option = {
		name = border_friction.2.c
		scope:border_claim_province = {
			every_location_in_province = {
				remove_core = root
			}
		}
	}
}

