namespace = unionevents
# Random events
#Local Nobles Protesting
unionevents.1 = {
	hide_portraits = yes
	type = country_event
	title = unionevents.1.title
	desc = unionevents.1.desc
	trigger = {
        union ?= {
            any_international_organization_member = {
				total_population > root.total_population
				societal_value:aristocracy_vs_plutocracy < root.societal_value:aristocracy_vs_plutocracy
				has_ruler = yes
				ruler.culture = culture
			}
		}
		has_ruler = yes
		ruler = {
			NOT = { culture = root.culture }
		}
	}
	
	immediate = {
        union ?= {
            random_international_organization_member = {
				limit = {
					total_population > root.total_population
					societal_value:aristocracy_vs_plutocracy < root.societal_value:aristocracy_vs_plutocracy
					has_ruler = yes
					ruler.culture = culture
				}
				save_scope_as = union_target
			}
		}
	}

	option = {
		name = unionevents.1.a
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_restrict_nobles }
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_weak_bonus
		}
	}
	option = {
		name = unionevents.1.b
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_reconcile }
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

#Ruler ignores Union Member
unionevents.2 = {
	type = country_event
	title = unionevents.2.title
	desc = unionevents.2.desc
	trigger = {
        union ?= {
            any_international_organization_member = {
				has_ruler = yes
				ruler.culture = culture
			}
		}
		has_ruler = yes
		ruler = {
			NOT = { culture = root.culture }
		}
	}
	
	immediate = {
        union ?= {
            random_international_organization_member = {
				limit = {
					has_ruler = yes
					ruler.culture = culture
				}
				save_scope_as = union_target
			}
		}
		ruler = { save_scope_as = target_ruler }
	}

	option = {
		name = unionevents.2.a
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_ignorant_monarch }
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_weak_penalty
		}
	}
	option = {
		name = unionevents.2.b
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_supportive_monarch }
		}
	}
}

#Country neglected economically
unionevents.3 = {
	hide_portraits = yes
	type = country_event
	title = unionevents.3.title
	desc = unionevents.3.desc
	trigger = {
        union ?= {
            any_international_organization_member = {
				has_ruler = yes
				ruler.culture = culture
				num_loans > 2
			}
		}
		has_ruler = yes
		ruler = {
			NOT = { culture = root.culture }
		}
	}

	immediate = {
        union ?= {
            random_international_organization_member = {
				limit = {
					has_ruler = yes
					ruler.culture = culture
					num_loans > 2
				}
				save_scope_as = union_target
			}
		}
	}

	
	
	option = {
		name = unionevents.3.a
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_union_in_name }
		}
	}
}

#Cultural Differences
unionevents.4 = {
	hide_portraits = yes
	type = country_event
	title = unionevents.4.title
	desc = unionevents.4.desc
	trigger = {
        union ?= {
            any_international_organization_member = {
				has_ruler = yes
				ruler.culture = culture
				culture = { cultural_influence < root.culture.cultural_influence }
			}
		}
		has_ruler = yes
		ruler = {
			NOT = { culture = root.culture }
		}
	}
	
	immediate = {
        union ?= {
            random_international_organization_member = {
				limit = {
					has_ruler = yes
					ruler.culture = culture
					culture = { cultural_influence < root.culture.cultural_influence }
				}
				save_scope_as = union_target
			}
		}
	}

	option = {
		name = unionevents.4.a
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_backward_monarch }
		}
	}
}

#Our Union has a bad reputation
unionevents.5 = {
	hide_portraits = yes
	type = country_event
	title = unionevents.5.title
	desc = unionevents.5.desc
	trigger = {
        union ?= {
            any_international_organization_member = {
				has_countries_with_coalition_grade_antagonism = yes
			}
		}
		has_countries_with_timed_antagonism = no
	}
	immediate = {
        union ?= {
            random_international_organization_member = {
				limit = {
					has_countries_with_coalition_grade_antagonism = yes
				}
				save_scope_as = union_target
			}
		}
	}

	#we are not the same
	option = {
		name = unionevents.5.a
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_bad_monarch }
		}
		add_legitimacy = legitimacy_extreme_penalty
	}

	#we are one
	option = {
		name = unionevents.5.b
		scope:union_target = {
			reverse_add_opinion = { target = root modifier = opinion_one_and_same }
		}
		drop_antagonism_bomb = {
			target = scope:union_target.capital
			modifier = antagonism_embraced_antagonism
			value = 5
		}
	}
}

#The Union and the Republic
unionevents.98 = {
	type = country_event
	title = {
		first_valid = {
			triggered_desc = {
				desc = unionevents.98.title
				trigger = { is_in_union = yes }
			}
			triggered_desc = {
				desc = unionevents.98.title.fallback
				trigger = { is_in_union = no }
			}
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				desc = unionevents.98.desc.union_has_leader
				trigger = {
					is_in_union = yes
					union ?= {
						international_organization_has_leader = yes
						leader_country ?= {
							NOT = { this = root }
							has_ruler = yes
						}
					}
				}
			}
			triggered_desc = {
				desc = unionevents.98.desc.union_has_no_leader
				trigger = {
					is_in_union = yes
					union ?= {
						international_organization_has_leader = yes
						leader_country ?= {
							NOT = { this = root }
						}
					}
				}
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = unionevents.98.fallback
			}
		}
	}
	trigger = {
		is_in_union = yes
		union ?= {
			international_organization_has_leader = yes
			leader_country ?= {
				NOT = { this = root }
			}
		}
		government_type = government_type:republic
		has_regent = yes
	}
	immediate = {
		previous_ruler ?= { save_scope_as = root_character }
		union ?= {
			leader_country ?= {
				ruler_or_heir_if_regent ?= { save_scope_as = target_character }
				if = {
					limit = { NOT = { exists = scope:target_character } }
					ruler_or_regent = { save_scope_as = target_character }
				}
			}
		}
	}
	#Elect [target_character.GetShortNameWithNoTooltip]!
	option = {
		name = unionevents.98.a
		trigger = { exists = scope:target_character }
		if = {
			limit = { scope:target_character = { is_adult = yes } }
			set_new_foreign_ruler = scope:target_character
		}
		else = {
			set_as_designated_heir = { target = scope:target_character }
		}
		add_republican_tradition = republican_tradition_mild_penalty
	}
	#It is time for us to separate from the [ROOT.GetCountry.GetDiplomacy.GetUnion.GetNameWithNoTooltip].
	option = {
		name = unionevents.98.b
		trigger = { is_in_union = yes }
		union ?= { remove_country_from_international_organization = root }
		if = {
			limit = { NOT = { has_country_modifier = forbidden_from_joining_unions } }
			add_country_modifier = {
				modifier = forbidden_from_joining_unions
				years = modifier_duration_years_long
				mode = add_and_extend
			}
			add_republican_tradition = republican_tradition_mild_bonus
			add_stability = stability_mild_bonus
		}
	}
	#Long live the Republic
	option = {
		name = unionevents.98.b
		trigger = { is_in_union = no }
		add_republican_tradition = republican_tradition_mild_bonus
		add_stability = stability_mild_bonus
	}
}