namespace = nobles_estate_events
nobles_estate_events.1 = {
	type = country_event
	title = nobles_estate_events.1.title
	desc = nobles_estate_events.1.desc

	trigger = {
		"estate_power(estate_type:nobles_estate)" >= 0.25
		NOT = { has_estate_privilege = estate_privilege:noble_leaders_only }
	}

	illustration_tags = {
		10 = angry
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = nobles_estate_events.1.a
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_severe_bonus }
		grant_estate_privilege = estate_privilege:noble_leaders_only
	}
	option = {
		name = nobles_estate_events.1.b
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_extreme_penalty }
	}
}

nobles_estate_events.2 = {
	type = country_event
	title = nobles_estate_events.2.title
	desc = nobles_estate_events.2.desc
	trigger = {
		"estate_power(estate_type:nobles_estate)" >= 0.25
	}

	illustration_tags = {
		10 = happy
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = nobles_estate_events.2.a
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_bonus }
	}
}

nobles_estate_events.3 = {
	type = country_event
	title = nobles_estate_events.3.title
	desc = nobles_estate_events.3.desc
	trigger = {
		"estate_power(estate_type:nobles_estate)" >= 0.25
		any_owned_location = {
			modifier:local_nobles_estate_power > 0.5
			is_capital = no
			local_control > 0.1
			any_pop = {
				estate_type = estate_type:nobles_estate
			}
		}
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		random_owned_location = {
			limit = {
				modifier:local_nobles_estate_power > 0.5
				is_capital = no
				local_control > 0.1
			}
			save_scope_as = noble_encroachment
			random_pop = {
				limit = {
					estate_type = estate_type:nobles_estate
				}
				save_scope_as = target_pop
				save_scope_as = target_pop_bckg
			}
		}
	}

	option = {
		name = nobles_estate_events.3.a
		scope:noble_encroachment = {
			change_control = control_mild_penalty
		}
	}
	option = {
		name = nobles_estate_events.3.b
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_weak_penalty }
	}
}

nobles_estate_events.4 = {
	type = country_event
	title = nobles_estate_events.4.title
	desc = nobles_estate_events.4.desc
	trigger = {
		"estate_power(estate_type:nobles_estate)" > 0.2
		has_ruler = yes
	}

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler = { save_scope_as = target_character }
	}

	option = {
		name = nobles_estate_events.4.a
		add_estate_satisfaction = { type = estate_type:peasants_estate value = estate_satisfaction_severe_penalty }
	}
	option = {
		name = nobles_estate_events.4.b
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_penalty }
	}
}

nobles_estate_events.5 = {
	type = country_event
	title = nobles_estate_events.5.title
	desc = nobles_estate_events.5.desc
	trigger = {
		"estate_power(estate_type:nobles_estate)" < 0.1
	}

	illustration_tags = {
		10 = angry
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = nobles_estate_events.5.a
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_penalty }
	}
}

nobles_estate_events.6 = {
	type = country_event
	title = nobles_estate_events.6.title
	desc = nobles_estate_events.6.desc
	trigger = {
		"estate_power(estate_type:nobles_estate)" >= 0.20
		has_estate_privilege = estate_privilege:trade_monopolies
	}

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:burghers_estate }
	}

	option = {
		name = nobles_estate_events.6.a
		revoke_estate_privilege = estate_privilege:trade_monopolies
		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_extreme_penalty }
		add_stability = stability_mild_penalty
	}
	option = {
		name = nobles_estate_events.6.b
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_penalty }
		add_stability = stability_weak_penalty
	}
}

nobles_estate_events.7 = {
	type = country_event
	title = nobles_estate_events.7.title
	desc = nobles_estate_events.7.desc
	trigger = {
		government_type = government_type:monarchy
		has_regent = no
		has_ruler = yes
		NOT = { has_estate_privilege = estate_privilege:elaborate_court_ceremonies }
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler = { save_scope_as = target_character }
	}

	option = {
		name = nobles_estate_events.7.a
		grant_estate_privilege = estate_privilege:elaborate_court_ceremonies
	}
	option = {
		name = nobles_estate_events.7.b
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_extreme_penalty }
	}
}

nobles_estate_events.8 = {
	type = country_event
	title = nobles_estate_events.8.title
	desc = nobles_estate_events.8.desc
	trigger = {
		estate_satisfaction:nobles_estate < 0.30
	}

	illustration_tags = {
		10 = angry
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}


	option = {
		name = nobles_estate_events.8.a
		add_prestige = prestige_weak_penalty
	}
	option = {
		name = nobles_estate_events.8.b
		add_government_power = government_power_extreme_penalty
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_bonus }
	}
}

nobles_estate_events.9 = {
	type = country_event
	title = nobles_estate_events.9.title
	desc = nobles_estate_events.9.desc
	trigger = {
		at_war = yes
		estate_satisfaction:nobles_estate < 0.30
		has_estate_privilege = estate_privilege:noble_leaders_only
	}

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler ?= {
			dynasty ?= {
				save_scope_as = target_dynasty
			}
		}
	}

	option = {
		name = nobles_estate_events.9.a
		every_character = {
			limit = {
				is_adult = yes
				has_dynasty = yes
				trigger_if = {
					limit = { exists = scope:target_dynasty }
					NOT = { dynasty = scope:target_dynasty }
				}
			}
			add_character_modifier = { modifier = disloyal_noble_officer years = 5 mode = add_and_extend }
		}
		every_unit = {
			limit = {
				has_commander = yes
				leader = {
					is_adult = yes
					has_dynasty = yes
					trigger_if = {
						limit = { exists = scope:target_dynasty }
						NOT = { dynasty = scope:target_dynasty }
					}
				}
			}
			remove_commander = leader
		}
	}
	option = {
		name = nobles_estate_events.9.b
		revoke_estate_privilege = estate_privilege:noble_leaders_only
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_penalty }
	}
}

nobles_estate_events.10 = {
	type = country_event
	title = nobles_estate_events.10.title
	desc = nobles_estate_events.10.desc

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = nobles_estate_events.10.a
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_mild_bonus }
	}
	option = {
		name = nobles_estate_events.10.b
		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_mild_bonus }
	}
	option = {
		name = nobles_estate_events.10.c
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_bonus }
	}
}

nobles_estate_events.11 = {
	type = country_event
	title = nobles_estate_events.11.title
	desc = nobles_estate_events.11.desc

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	trigger = {
		estate_satisfaction:nobles_estate >= 0.5
		has_estate_privilege = estate_privilege:noble_leaders_only
		"estate_power(estate_type:nobles_estate)" >= 0.10
	}



	option = {
		name = nobles_estate_events.11.a
		add_army_tradition = army_tradition_extreme_bonus
	}
}

