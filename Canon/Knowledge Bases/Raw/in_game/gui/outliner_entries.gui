
template button_outliner_texture {
	texture = "gfx/interface/buttons/paper_outliner_button.dds"
	texture_density = 2
	spriteType = corneredstretched
	spriteborder = { 30 0 }
	frame_grid = { 4 1 }

	block "texture_color" {

		modify_texture = {
			using = color_paper_texture
			blend_mode = add
		}
		modify_texture = {
			using = overlay_paper_03
			blend_mode = overlay
			alpha = 0.3
		}
		modify_texture = {
			using = overlay_cloth_texture
			blend_mode = overlay
			alpha = 0.1
		}
	}
}

template button_outliner_category_texture {
	texture = "gfx/interface/buttons/outliner/outliner_category_button.dds"
	texture_density = 2
	spriteType = corneredstretched
	spriteborder = { 50 0 }
	frame_grid = {4 1}
}

template button_outliner_effect {
	modify_texture = {
		visible = "[OutlinerEntry.IsHighlighted]"
		using = color_white_texture
		blend_mode = add
		alpha = 0.1
	}

	modify_texture = {
		block "category_color" { using = color_white_texture }
		alpha = 1
	}

	modify_texture = {
		block "category_color_variant" { visible = no}
		blend_mode = overlay
		alpha = 1
	}

	modify_texture = {
		using = overlay_cloth_texture
		blend_mode = overlay
		alpha = 0.2
	}

	# modify_texture = {
	# 	texture = "gfx/interface/component_overlay/grunge_texture.dds"
	# 	blend_mode = overlay
	# 	alpha = 0.3
	# }

	# modify_texture = {
	# 	using = color_black_texture
	# 	blend_mode = overlay
	# 	alpha = 0.3
	# }
}

template cabinet_entry_color {
	using = color_government_texture
}

types OutlinerEntriesTypes
{
	# entries iconbg
	type OutlinerIconBg = widget {
		alwaystransparent = yes
		size = { 100% 100% }
		# using = bg_paper_card
		background = {
			texture = "gfx/interface/component_tiles/balance_card_bg.dds"
			texture_density = 2
			using = button_outliner_effect
		}
		widget = {
			size = {100% 100%}
			ignore_layout = yes
			alwaystransparent = yes
			using = bg_cabinet_card_frame
		}

		# texture = "gfx/interface/colors/grey.dds"

		# modify_texture = {
		# 	block "category_color" {}
		# 	blend_mode = overlay
		# 	alpha = 1
		# }
	}

	type OutlinerTextBase = text_single {
		align = right
		fontsize = 13
	}

	type OutlinerButtonBase = button {
		parentanchor = right
		using = button_outliner_texture

		# using = button_outliner_effect
		using = button_common_template

		background = {
			using = button_outliner_texture
			blockoverride "texture_color" {
				modify_texture = {
					using = color_black_texture
					blend_mode = add
				}
			}
			margin_bottom = 1
			alpha = 0.7
		}

		block "button_setup" {
			tooltip_enabled = no
		}
	}

	type OutlinerCategoryButtonBase = button {
		parentanchor = right
		using = button_outliner_category_texture
		
		using = button_common_template
		using = button_outliner_effect

		block "button_setup" {}
	}

	type OutlinerEntryBase = widget {
		layoutpolicy_horizontal = expanding
		using = outliner_base_entry_size
		alwaystransparent = yes

		visible = "[OutlinerEntry.IsVisible]"

		block "outliner_entry_size" {
			size = { 405 31 }
		}

		widget = {
			alwaystransparent = yes
			visible = "[Or3(Outliner.IsSettingsShowing, Outliner.IsMouseOver, And(Outliner.IsPinned, Not(Outliner.IsAnyOccludingPanelOpened)))]"
			size = { 100% 100% }
			parentanchor = right

			state = {
				using = outliner_hide_animation_template
				position = { 400 0 }
			}

			state = {
				using = outliner_show_animation_template
				position = { 0 0 }
			}

			# Expanded Big
			widget = {
				visible = "[Outliner.IsExpanded]"
				size = { 100% 100% }
				parentanchor = right
				using = outliner_mouseover_template
				alwaystransparent = no

				widget = {
					using = outliner_inner_entry_size
					block "expanded_big_content" {}
				}
			}

			# Expanded Small
			widget = {
				visible = "[Not(Outliner.IsExpanded)]"
				size = { 30% 100% }
				parentanchor = right
				using = outliner_mouseover_template
				alwaystransparent = no

				widget = {
					using = outliner_inner_entry_size
					block "expanded_small_content" {}
				}
			}
		}

		# Icon
		widget = {
			using = outliner_entry_icon_size
			using = outliner_mouseover_template
			parentanchor = right
			alwaystransparent = "[Or(Outliner.IsMouseOver, And(Outliner.IsPinned, Not(Outliner.IsAnyOccludingPanelOpened)))]"

			block "icon_content" {}
		}
	}
}

# Available contexts
# "OutlinerPlayerEntry"
# "Outliner"
OutlinerEntryBase = {
	name = "player_entry"

	blockoverride "outliner_entry_size" {
		size = { 405 31 }
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 8
				icon = {
					visible = "[And(OutlinerPlayerEntry.GetCountry.GetDiplomacy.IsAtWar, IsPlayerAtWarWithOtherPlayer(OutlinerPlayerEntry.GetCountry))]"
					size = {20 20}
					texture = "gfx/interface/icons/flat_icons/war_human_enemy.dds"
					tooltip_enabled = "[DataModelHasItems(OutlinerPlayerEntry.GetCountry.GetDiplomacy.GetCurrentWars)]"
					tooltipwidget = {
						using = War_list_tooltip
					}
				}
				icon = {
					visible = "[And(OutlinerPlayerEntry.GetCountry.GetDiplomacy.IsAtWar, Not(IsPlayerAtWarWithOtherPlayer(OutlinerPlayerEntry.GetCountry)))]"
					size = {20 20}
					texture = "gfx/interface/icons/diplomatic_status/war.dds"
					tooltip_enabled = "[DataModelHasItems(OutlinerPlayerEntry.GetCountry.GetDiplomacy.GetCurrentWars)]"
					tooltipwidget = {
						using = War_list_tooltip
					}
				}
				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					text = "[OutlinerPlayerEntry.GetName]"
				}
				
				widget = {
					size = { 32 20 }
					icon = {
						parentanchor = center
						visible = "[Not(OutlinerPlayerEntry.GetCountry.IsValid)]"
						size = { 20 20 }
						texture = "gfx/interface/icons/messages_settings/map.dds"
					}

					country_flag_very_small = {
						parentanchor = center
						visible = "[OutlinerPlayerEntry.GetCountry.IsValid]"
						datacontext = "[OutlinerPlayerEntry.GetCountry]"
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin

				widget = {
					size = { 32 20 }
					icon = {
						parentanchor = center
						visible = "[Not(OutlinerPlayerEntry.GetCountry.IsValid)]"
						size = { 20 20 }
						texture = "gfx/interface/icons/messages_settings/map.dds"
					}

					country_flag_very_small = {
						parentanchor = center
						visible = "[OutlinerPlayerEntry.GetCountry.IsValid]"
						datacontext = "[OutlinerPlayerEntry.GetCountry]"
					}
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			icon = {
				size = {20 20}
				parentanchor = center
				texture = "[OutlinerPlayerEntry.GetIcon]"
			}
			blockoverride "category_color" {
				using = color_light_blue_texture
			}
		}
	}

	blockoverride "button_setup" {
		action_tooltip = {
			visible = "[OutlinerPlayerEntry.GetCountry.IsValid]"
			click_type = left
			click_mode = single
			title = "COUNTRY_CLICK_TOOLTIP_LEFT_CLICK"
			on_action = "[OpenDiplomacy(OutlinerPlayerEntry.GetCountry)]"
		}

		action_tooltip = {
			visible = "[OutlinerPlayerEntry.GetCountry.IsValid]"
			click_type = right
			click_mode = single

			cursor = "country_menu"
			title = "CLICK_ACTION_COUNTRY_CONTEXT_MENU"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}

		datacontext = "[OutlinerPlayerEntry.GetCountry]"
		tooltip_enabled = "[Country.Exists]"
		tagtooltip_enabled = "[Country.IsValid]"
		tooltip = "[Country.GetName]"

		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(Country.Self)]"

		contextmenu_enabled = "[Country.IsValid]"
		contextmenu_widget = {
			CountryContextMenu = {}
		}
	}
}

# Available contexts
# "OutlinerAgendaEntry"
# "Outliner"

types AgendaTypes
{
	type AgendaCheck = widget {
		using = bg_text_mask_container_dark_brown
		size = { 15 15 }

		icon = {
			block "check_yes" { visible = no }
			texture = "gfx/interface/icons/text_icons/trigger_yes.dds"
			size = { 100% 100% }
			parentanchor = center
		}

		# icon = {
		# 	block "check_no" { visible = no }
		# 	texture = "gfx/interface/icons/text_icons/trigger_no.dds"
		# 	size = { 100% 100% }
		# 	parentanchor = center
		# }
	}

	# type AgendaIcon = widget {
	# 	using = outliner_entry_icon_size
	# 	using = outliner_mouseover_template
	# 	layoutpolicy_vertical = expanding

	# 	background = {
	# 		texture = "gfx/interface/component_tiles/balance_card_bg.dds"
	# 		texture_density = 2
	# 		using = button_outliner_effect
	# 	}

	# 	widget = {
	# 		size = { 100% 100% }
	# 		ignore_layout = yes
	# 		alwaystransparent = yes
	# 		using = bg_cabinet_card_frame
	# 	}

	# 	OutlinerTextBase = {
	# 		visible = "[OutlinerAgendaEntry.AreMissionsEnabled]"
	# 		parentanchor = center
	# 		size = { 100% 100% }
	# 		autoresize = yes
	# 		text = "[CountYes3(GetQuickMissionList.ArePlaystyleMissionsCompletedWithKey('ADMINISTRATIVE'), GetQuickMissionList.ArePlaystyleMissionsCompletedWithKey('DIPLOMATIC'), GetQuickMissionList.ArePlaystyleMissionsCompletedWithKey('MILITARY'))]"
	# 	}

	# 	icon = {
	# 		parentanchor = center
	# 		visible = "[Not(OutlinerAgendaEntry.AreMissionsEnabled)]"
	# 		size = { 20 20 }
	# 		texture = "gfx/interface/icons/missions/agenda.dds"
	# 	}
	# }

	type AgendaMissionEntry = hbox {
		visible = "[OutlinerAgendaEntry.AreMissionsEnabled]"
		layoutpolicy_horizontal = expanding
		spacing = 5

		# AgendaCheck = {
		# 	visible = "[And(OutlinerAgendaEntry.HasMissionActive, Player.GetMissionProgress.GetActiveMission.IsFromPlayStyle(PlayStyleItem.Self))]"
		# 	blockoverride "check_yes" { visible = "[GetQuickMissionList.ArePlaystyleMissionsCompletedWithItem(PlayStyleItem.Self)]" }
		# }

		button = {
			block "remove_for_short" { 
				visible = "[Not(And(OutlinerAgendaEntry.HasMissionActive, Player.GetMissionProgress.GetActiveMission.IsFromPlayStyle(PlayStyleItem.Self)))]"
			}

			using = bg_square_tile_shadow
			using = mission_color_texture
			blockoverride "mission_color_texture_frames" {
				using = button_common_properties_template
			}
			size = { -1 30 }
			layoutpolicy_horizontal = expanding
			using = playstyle_button_actions

			hbox = {	
				block "count_button_minsize" { minimumsize = { 70 30 } }
				block "remove_for_short" {
					margin_left = 2
					margin_right = 12
					spacing = 5
				}

				widget = {
					size = { 30 30 }
					background = {
						using = color_black_texture
						alpha = 0.4
					}
					AgendaCheck = {
						parentanchor = center
						blockoverride "check_yes" { visible = "[GetQuickMissionList.ArePlaystyleMissionsCompletedWithItem(PlayStyleItem.Self)]" }
					}
				}
				
				icon = {
					block "icon_visible" { visible = yes }
					block "icon_texture" { using = icon_colored_mil_texture }
					size = { 20 20 }

					glow = {
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}

				text_single = {
					visible = "[PlayStyleItem.IsPlayStyleEnabled]"
					autoresize = yes
					align = center
					text = "MISSIONS_ITEM_COMPLETED_SHORT"
				}

				block "remove_for_short" {
					text_single = {
						visible = "[Not(PlayStyleItem.IsPlayStyleEnabled)]"
						autoresize = yes
						text = "MISSION_LOCKED_MISSIONS"
					}

					text_single = {
						autoresize = yes
						block "playstyle_name" { title = "PLAYER_PLAYSTYLE_ADMINISTRATIVE_LONG" }
					}

					expand = {}
				}
			}
		}

		block "remove_for_short" {
			button = {
				visible = "[And(OutlinerAgendaEntry.HasMissionActive, Player.GetMissionProgress.GetActiveMission.IsFromPlayStyle(PlayStyleItem.Self))]"
				using = bg_square_tile_shadow
				using = mission_color_texture
				blockoverride "mission_color_texture_frames" {
					using = button_common_properties_template
				}
				using = playstyle_button_actions

				hbox = {
					set_parent_size_to_minimum = yes
					block "count_button_minsize" { minimumsize = { 70 30 } }
					margin_left = 2
					margin_right = 12
					spacing = 5

					widget = {
						size = { 30 30 }
						background = {
							using = color_black_texture
							alpha = 0.4
						}
						AgendaCheck = {
							parentanchor = center
							blockoverride "check_yes" { visible = "[GetQuickMissionList.ArePlaystyleMissionsCompletedWithItem(PlayStyleItem.Self)]" }
						}
					}

					icon = {
						block "icon_texture" { using = icon_colored_mil_texture }
						size = { 20 20 }

						glow = {
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					text_single = {
						visible = "[PlayStyleItem.IsPlayStyleEnabled]"
						autoresize = yes
						text = "MISSIONS_ITEM_COMPLETED_SHORT"
					}
				}
			}

			button = {
				visible = "[And(OutlinerAgendaEntry.HasMissionActive, Player.GetMissionProgress.GetActiveMission.IsFromPlayStyle(PlayStyleItem.Self))]"
				using = bg_square_tile_shadow
				using = mission_color_texture
				blockoverride "mission_color_texture_frames" {
					using = button_common_properties_template
				}
				
				layoutpolicy_horizontal = expanding
				size = { -1 30 }

				hbox = {
					spacing = 5
					margin = { 10 0 }

					icon = {
						size = { 24 24 }
						texture = "gfx/interface/icons/missions/_default.dds"
					}

					text_single = {
						using = layoutpolicy_expanding
						autoresize = no
						text = "OUTLINER_AGENDA_MISSIONS"
					}

					text_single = {
						autoresize = yes
						text = "[Player.GetMissionProgress.GetActiveMission.GetProgress(Player.Self)|0%]"
					}
				}

				action_tooltip = {
					click_type = left
					click_mode = single
					title = "OPEN_MISSIONS_TREE_TEXT"
					on_action = "[ShowMission(Player.GetMissionProgress.GetActiveMission)]"
				}

				datacontext = "[Player.GetMissionProgress.GetActiveMission]"
				tooltipwidget = { using = Mission_tooltip }
			}
		}
		
		expand = {}
	}
}

OutlinerEntryBase = {
	name = "agenda_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/missions/_default.dds"

		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/missions/_default.dds"
		} 
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "outliner_category_count" {
		text = "[CountYes3(GetQuickMissionList.ArePlaystyleMissionsCompletedWithKey('ADMINISTRATIVE'), GetQuickMissionList.ArePlaystyleMissionsCompletedWithKey('DIPLOMATIC'), GetQuickMissionList.ArePlaystyleMissionsCompletedWithKey('MILITARY'))]"
	}

	blockoverride "category_color" {
		using = color_light_blue_texture
	}
}

widget = {
	name = "agenda_entry"
	alwaystransparent = yes
	size = { 405 122 }
	parentanchor = right

	visible = "[OutlinerEntry.IsVisible]"
	vbox = {
		using = outliner_mouseover_template
		ignoreinvisible = yes

		state = {
			using = outliner_hide_animation_template
			position = { 400 0 }
		}

		state = {
			using = outliner_show_animation_template
			position = { 0 0 }
		}

		# EXPANDED
		vbox = {
			visible = "[And(Outliner.IsExpanded, Or3(Outliner.IsSettingsShowing, Outliner.IsMouseOver, And(Outliner.IsPinned, Not(Outliner.IsAnyOccludingPanelOpened))))]"
			vbox = {
				using = outliner_agenda_entry_size
				layoutpolicy_horizontal = expanding

				vbox = {
					using = layoutpolicy_expanding
					using = outliner_mouseover_template
					alwaystransparent = no
					visible = "[And(OutlinerAgendaEntry.IsOpened, OutlinerAgendaEntry.AreMissionsEnabled)]"
					margin_left = 10
					margin_right = 4
					margin_bottom = 10
					margin_top = 2

					vbox = {
						using = layoutpolicy_expanding
						using = bg_cabinet_card_frame_mission
						blockoverride "card_header_pattern" {}
						blockoverride "card_header_shadow" {}
						
						margin = { 5 5 }
						margin_left = 15
						spacing = 5

						AgendaMissionEntry = {
							datacontext = "[GetPlayStyleItem('ADMINISTRATIVE')]"
							blockoverride "icon_texture" { using = icon_colored_adm_texture }
							blockoverride "playstyle_name" { text = "PLAYER_PLAYSTYLE_ADMINISTRATIVE_LONG" }
							blockoverride "playstyle_name_action" { title = "PLAYER_PLAYSTYLE_ADMINISTRATIVE_LONG" }
							blockoverride "playstyle_replay_action" { title = "REPLAY_ADM_TUTORIAL" }	
							blockoverride "mission_color_modify_texture" {
								modify_texture = {
									blend_mode = overlay
									using = color_yellow_texture
								}
							}
						}

						AgendaMissionEntry = {
							datacontext = "[GetPlayStyleItem('DIPLOMATIC')]"
							blockoverride "icon_texture" { using = icon_colored_dip_texture }
							blockoverride "playstyle_name" { text = "PLAYER_PLAYSTYLE_DIPLOMATIC_LONG" }
							blockoverride "playstyle_name_action" { title = "PLAYER_PLAYSTYLE_DIPLOMATIC_LONG" }
							blockoverride "playstyle_replay_action" { title = "REPLAY_DIP_TUTORIAL" }
							blockoverride "mission_color_modify_texture" {
								modify_texture = {
									blend_mode = overlay
									using = color_blue_texture
								}
							}
						}

						AgendaMissionEntry = {
							datacontext = "[GetPlayStyleItem('MILITARY')]"
							blockoverride "icon_texture" { using = icon_colored_mil_texture }
							blockoverride "playstyle_name" { text = "PLAYER_PLAYSTYLE_MILITARY_LONG" }
							blockoverride "playstyle_name_action" { title = "PLAYER_PLAYSTYLE_MILITARY_LONG" }
							blockoverride "playstyle_replay_action" { title = "REPLAY_MIL_TUTORIAL" }			
						}

						hbox = {
							visible = no
							layoutpolicy_horizontal = expanding
							spacing = 5
							AgendaCheck = {
								blockoverride "check_yes" { visible = "[Player.GetCurrentResearch.IsActive]" }
							}

							text_single = {
								visible = "[Player.GetCurrentResearch.IsActive]"
								layoutpolicy_horizontal = expanding
								size = { -1 30 }
								autoresize = no
								text = "OUTLINER_AGENDA_RESEARCH"
							}

							button_regular = {
								visible = "[Not(Player.GetCurrentResearch.IsActive)]"
								using = button_resize_to_fit_text
								size = { -1 30 }
								text = "OUTLINER_AGENDA_NO_RESEARCH"

								action_tooltip = {
									click_type = left
									title = "TAB_TOOLTIP_ADVANCES_LEFT_CLICK"
									on_action = "[OpenLateralGroup('advances_group')]"
								}

								tooltipwidget = { BasicFunctionalTooltip = {} }
							}

							expand = {}
						}

						hbox = {
							visible = no
							layoutpolicy_horizontal = expanding
							spacing = 5
							AgendaCheck = {
								blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_GREEN'))]" }
							}

							icon = {
								size = { 12 20 }
								texture = "gfx/interface/buttons/banner_button_vertical.dds"
								modify_texture = { using = color_light_green_texture }
							}

							text_single = {
								layoutpolicy_horizontal = expanding
								size = { -1 30 }
								autoresize = no
								text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_GREEN'), 'OUTLINER_AGENDA_GREEN_ALERTS', 'OUTLINER_AGENDA_NO_GREEN_ALERTS')]"
							}
						}

						hbox = {
							visible = no
							layoutpolicy_horizontal = expanding
							spacing = 5
							AgendaCheck = {
								blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_YELLOW'))]" }
							}

							icon = {
								size = { 12 20 }
								texture = "gfx/interface/buttons/banner_button_vertical.dds"
								modify_texture = { using = color_yellow_texture }
							}

							text_single = {
								layoutpolicy_horizontal = expanding
								size = { -1 30 }
								autoresize = no
								text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_YELLOW'), 'OUTLINER_AGENDA_YELLOW_ALERTS', 'OUTLINER_AGENDA_NO_YELLOW_ALERTS')]"
							}
						}

						hbox = {
							visible = no
							layoutpolicy_horizontal = expanding
							spacing = 5
							AgendaCheck = {
								blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_ORANGE'))]" }
							}

							icon = {
								size = { 12 20 }
								texture = "gfx/interface/buttons/banner_button_vertical.dds"
								modify_texture = { using = color_mid_orange_texture }
							}

							text_single = {
								layoutpolicy_horizontal = expanding
								size = { -1 30 }
								autoresize = no
								text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_ORANGE'), 'OUTLINER_AGENDA_ORANGE_ALERTS', 'OUTLINER_AGENDA_NO_ORANGE_ALERTS')]"
							}
						}

						hbox = {
							visible = no
							layoutpolicy_horizontal = expanding
							spacing = 5
							AgendaCheck = {
								blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_RED'))]" }
							}

							icon = {
								size = { 12 20 }
								texture = "gfx/interface/buttons/banner_button_vertical.dds"
								modify_texture = { using = color_red_texture }
							}

							text_single = {
								layoutpolicy_horizontal = expanding
								size = { -1 30 }
								autoresize = no
								text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_RED'), 'OUTLINER_AGENDA_RED_ALERTS', 'OUTLINER_AGENDA_NO_RED_ALERTS')]"
							}
						}
					}
				}
			}
		}

		# NOT EXPANDED
		vbox = {
			layoutpolicy_horizontal = expanding
			visible = "[And(Not(Outliner.IsExpanded), Or3(Outliner.IsSettingsShowing, Outliner.IsMouseOver, And(Outliner.IsPinned, Not(Outliner.IsAnyOccludingPanelOpened))))]"

			hbox = {
				layoutpolicy_horizontal = expanding
				expand = {}
				vbox = {
					using = outliner_agenda_small_entry_size

					vbox = {
						using = layoutpolicy_expanding
						using = outliner_mouseover_template
						alwaystransparent = no
						visible = "[And(OutlinerAgendaEntry.IsOpened, OutlinerAgendaEntry.AreMissionsEnabled)]"
						margin_right = 4
						margin_bottom = 10
						margin_top = 2

						vbox = {
							using = layoutpolicy_expanding
							using = bg_scroll_card_header
							blockoverride "card_header_pattern" {}
							blockoverride "card_header_shadow" {}

							margin = { 5 5 }
							margin_left = 15
							spacing = 5

							AgendaMissionEntry = {
								datacontext = "[GetPlayStyleItem('ADMINISTRATIVE')]"
								blockoverride "icon_visible" { visible = "[Not(PlayStyleItem.IsPlayStyleEnabled)]" }
								blockoverride "icon_texture" { using = icon_colored_adm_texture }
								blockoverride "playstyle_name" { text = "PLAYER_PLAYSTYLE_ADMINISTRATIVE_LONG" }
								blockoverride "playstyle_name_action" { title = "PLAYER_PLAYSTYLE_ADMINISTRATIVE_LONG" }
								blockoverride "playstyle_replay_action" { title = "REPLAY_ADM_TUTORIAL" }	
								blockoverride "remove_for_short" {}
								blockoverride "count_button_minsize" { minimumsize = { 50 30 } }
								blockoverride "mission_color_modify_texture" {
									modify_texture = {
										blend_mode = overlay
										using = color_yellow_texture
									}
								}
							}

							AgendaMissionEntry = {
								datacontext = "[GetPlayStyleItem('DIPLOMATIC')]"
								blockoverride "icon_visible" { visible = "[Not(PlayStyleItem.IsPlayStyleEnabled)]" }
								blockoverride "icon_texture" { using = icon_colored_dip_texture }
								blockoverride "playstyle_name" { text = "PLAYER_PLAYSTYLE_DIPLOMATIC_LONG" }
								blockoverride "playstyle_name_action" { title = "PLAYER_PLAYSTYLE_DIPLOMATIC_LONG" }
								blockoverride "playstyle_replay_action" { title = "REPLAY_DIP_TUTORIAL" }
								blockoverride "remove_for_short" {}
								blockoverride "count_button_minsize" { minimumsize = { 50 30 } }
								blockoverride "mission_color_modify_texture" {
									modify_texture = {
										blend_mode = overlay
										using = color_blue_texture
									}
								}
							}

							AgendaMissionEntry = {
								datacontext = "[GetPlayStyleItem('MILITARY')]"
								blockoverride "icon_visible" { visible = "[Not(PlayStyleItem.IsPlayStyleEnabled)]" }
								blockoverride "icon_texture" { using = icon_colored_mil_texture }
								blockoverride "playstyle_name" { text = "PLAYER_PLAYSTYLE_MILITARY_LONG" }
								blockoverride "playstyle_name_action" { title = "PLAYER_PLAYSTYLE_MILITARY_LONG" }
								blockoverride "playstyle_replay_action" { title = "REPLAY_MIL_TUTORIAL" }	
								blockoverride "button_texture" { using = button_regular_red_texture }
								blockoverride "remove_for_short" {}
								blockoverride "count_button_minsize" { minimumsize = { 50 30 } }
							}

							hbox = {
								visible = no
								using = layoutpolicy_expanding
								spacing = 5
								AgendaCheck = {
									blockoverride "check_yes" { visible = "[Player.GetCurrentResearch.IsActive]" }
								}
								
								button = {
									size = { 20 20 }
									texture = "gfx/interface/icons/flat_icons/tabicons/advances.dds"
									visible = "[Not(OutlinerAgendaEntry.HasMissionActive)]"

									action_tooltip = {
										click_type = left
										title = "TAB_TOOLTIP_ADVANCES_LEFT_CLICK"
										on_action = "[OpenLateralGroup('advances_group')]"
									}

									tooltipwidget = { BasicFunctionalTooltip = {} }
								}

								expand = {
									size = { -1 30 }
								}
							}

							hbox = {
								visible = no
								using = layoutpolicy_expanding
								spacing = 5
								AgendaCheck = {
									blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_GREEN'))]" }
								}

								icon = {
									size = { 12 20 }
									texture = "gfx/interface/buttons/banner_button_vertical.dds"
									modify_texture = { using = color_light_green_texture }
								}

								text_single = {
									layoutpolicy_horizontal = expanding
									size = { -1 30 }
									autoresize = no
									text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_GREEN'), 'OUTLINER_AGENDA_GREEN_ALERTS_SHORT', 'OUTLINER_AGENDA_NO_ALERTS_SHORT')]"
								}
							}

							hbox = {
								visible = no
								using = layoutpolicy_expanding
								spacing = 5
								AgendaCheck = {
									blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_YELLOW'))]" }
								}

								icon = {
									size = { 12 20 }
									texture = "gfx/interface/buttons/banner_button_vertical.dds"
									modify_texture = { using = color_yellow_texture }
								}

								text_single = {
									layoutpolicy_horizontal = expanding
									size = { -1 30 }
									autoresize = no
									text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_YELLOW'), 'OUTLINER_AGENDA_YELLOW_ALERTS_SHORT', 'OUTLINER_AGENDA_NO_ALERTS_SHORT')]"
								}
							}

							hbox = {
								visible = no
								using = layoutpolicy_expanding
								spacing = 5
								AgendaCheck = {
									blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_ORANGE'))]" }
								}

								icon = {
									size = { 12 20 }
									texture = "gfx/interface/buttons/banner_button_vertical.dds"
									modify_texture = { using = color_mid_orange_texture }
								}

								text_single = {
									layoutpolicy_horizontal = expanding
									size = { -1 30 }
									autoresize = no
									text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_ORANGE'), 'OUTLINER_AGENDA_ORANGE_ALERTS_SHORT', 'OUTLINER_AGENDA_NO_ALERTS_SHORT')]"
								}
							}

							hbox = {
								visible = no
								using = layoutpolicy_expanding
								spacing = 5
								AgendaCheck = {
									blockoverride "check_yes" { visible = "[Not(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_RED'))]" }
								}

								icon = {
									size = { 12 20 }
									texture = "gfx/interface/buttons/banner_button_vertical.dds"
									modify_texture = { using = color_red_texture }
								}

								text_single = {
									layoutpolicy_horizontal = expanding
									size = { -1 30 }
									autoresize = no
									text = "[SelectLocalization(IsAnyAlertOfTypeShowing('ALERT_PRIORITY_RED'), 'OUTLINER_AGENDA_RED_ALERTS_SHORT', 'OUTLINER_AGENDA_NO_ALERTS_SHORT')]"
								}
							}
						}
					}
				}
			}
		}	
	}

	blockoverride "category_color" {
		using = color_light_blue_texture
	}
}

# OutlinerEntryBase = {
# 	name = "agenda_entry"

# 	blockoverride "expanded_big_content" {
# 		vbox = {
# 			using = outliner_agenda_entry_size
# 			set_parent_size_to_minimum = yes

# 			OutlinerButtonBase = {
# 				using = outliner_base_entry_size

# 				hbox = {
# 					using = outliner_entry_margin
# 					spacing = 8
# 					OutlinerTextBase = {
# 						using = layoutpolicy_expanding
# 						autoresize = no
# 						text = "ARGH"
# 					}
# 				}
# 			}

# 			vbox = {
# 				using = layoutpolicy_expanding
# 				margin_left = 15
# 				margin_botton = 5
# 				widget = {
# 					using = layoutpolicy_expanding
# 					using = bg_paper_card

# 					vbox = {
# 						margin = { 5 5 }

# 						text_single = {
# 							autoresize = yes
# 							text = "A"
# 						}

# 						text_single = {
# 							autoresize = yes
# 							text = "B"
# 						}

# 						text_single = {
# 							autoresize = yes
# 							text = "C"
# 						}

# 						text_single = {
# 							autoresize = yes
# 							text = "D"
# 						}
# 					}
# 				}
# 			}
# 		}
# 	}

# 	blockoverride "expanded_small_content" {
# 		OutlinerButtonBase = {
# 			size = { 95% 100% }

# 			hbox = {
# 				using = outliner_entry_margin
# 			}
# 		}
# 	}

# 	blockoverride "icon_content" {
# 		OutlinerIconBg = {
# 			icon = {
# 				size = {20 20}
# 				parentanchor = center
# 			}
# 		}
# 	}

# 	blockoverride "button_setup"
# 	{
# 		action_tooltip = {
# 			click_type = left
# 			click_mode = single
# 			title = "COUNTRY_CLICK_TOOLTIP_LEFT_CLICK"
# 		}
# 	}

# 	blockoverride "category_color"
# 	{
# 		using = color_light_blue_texture
# 	}

# }

# Available contexts
# "Outliner"
# "Country"
OutlinerEntryBase = {
	name = "country_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('country')]"
			texture_density = 2

		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('country')]"
			texture_density = 2
		} 
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_government_texture
	}
}

OutlinerEntryBase = {
	name = "fav_country_entry"
	widgetid = "fav_country_entry"

	blockoverride "category_color" {
		using = color_government_texture
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				country_flag_very_small = {
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
				}

				OutlinerTextBase = {
					maximumsize = { 160 -1 }
					autoresize = yes
					align = left
					text = "[Country.GetLongNameWithNoTooltip]"
					default_format = "#L"
				}

				icon = {
					size = { 18 18 }
					visible = "[And(Not(Country.IsLocalPlayer), Country.GetDiplomacy.IsAtWar)]"
					texture = "[GetConceptTexture('war')]"
				}

				expand = {}

				hbox = {
					spacing = 5
					hbox = {
						spacing = 3
						visible = "[And(IsPlayerValid, Country.GetDiplomacy.IsSubjectOf(GetPlayer))]"
						OutlinerTextBase = {
							maximumsize = { 50 -1 }
							minimumsize = { 50 -1 }
							autoresize = yes
							text = "[Country.GetDiplomacy.GetSubjectLoyalty|2%+=/]"
						}
		
						icon = {
							size = { 18 18 }
							texture = "[GetConceptTexture('subject_loyalty')]"
						}
					}
	
					hbox = {
						visible = "[Not(Country.IsLocalPlayer)]"
						spacing = 3
						OutlinerTextBase = {
							maximumsize = { 50 -1 }
							minimumsize = { 50 -1 }
							autoresize = yes
							text = "[Country.GetDiplomacy.GetOpinionOf(GetPlayer)|+=]"
						}
		
						icon = {
							size = { 18 18 }
							texture = "[GetConceptTexture('opinion')]"
						}
					}
				}

			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				align = left|nobaseline
				autoresize = no
				text = "[Country.GetNameWithNoTooltip]"
				default_format = "#L"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			filter_mouse = none
			country_flag_very_small = {
				filter_mouse = none
				alwaystransparent = yes
				parentanchor = center
				blockoverride "show_as_button" { visible = no }
				blockoverride "show_as_icon" { visible = yes }
				blockoverride "tooltip" {}
				blockoverride "contextmenu" {}
				blockoverride "click" {}
				blockoverride "double_click" {}
			}
		}
	}

	blockoverride "button_setup" {
		action_tooltip = {
			visible = "[Country.IsValid]"
			click_type = left
			click_mode = single
			title = "COUNTRY_CLICK_TOOLTIP_LEFT_CLICK"
			on_action = "[OpenDiplomacy(Country.Self)]"
		}

		action_tooltip = {
			visible = "[Country.IsValid]"
			click_type = right
			click_mode = single

			cursor = "country_menu"
			title = "CLICK_ACTION_COUNTRY_CONTEXT_MENU"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}

		tooltip_enabled = "[Country.Exists]"
		tagtooltip_enabled = "[Country.IsValid]"
		tooltip = "[Country.GetName]"
		contextmenu_enabled = "[Country.IsValid]"
		contextmenu_widget = {
			CountryContextMenu = {}
		}

		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(Country.Self)]"
	}
}

# Available contexts
# "Outliner"
# "InternationalOrganization"
OutlinerEntryBase = {
	name = "io_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('international_organization')]"
			texture_density = 2
		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('international_organization')]"
			texture_density = 2
		} 
	
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

OutlinerEntryBase = {
	name = "fav_io_entry"

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 20 20 }
					texture = "[InternationalOrganization.GetIcon]"
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					text = "[InternationalOrganization.GetNameWithNoTooltip]"
					default_format = "#L"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				text = "[InternationalOrganization.GetNameWithNoTooltip]"
				default_format = "#L"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			filter_mouse = none
			icon = {
				parentanchor = center
				size = {70% 70%}
				texture = "[InternationalOrganization.GetIcon]"
				texture_density = 2
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.3
				}
			}
		}
	}

	blockoverride "button_setup" {
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "ORGANIZATIONS_LEFT_CLICK"
			on_action = "[OpenInternationalOrganizationView(InternationalOrganization.Self)]"
		}

		ondoubleclick = "[PanToCountry(Country.Self)]"
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightInternationalOrganization( InternationalOrganization.Self) ]"

		tooltipwidget = {
			using = InternationalOrganization_tooltip
		}
	}
}

# Available contexts
# "Outliner"
# "Character"
OutlinerEntryBase = {
	name = "character_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/geography/characters.dds"
		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/geography/characters.dds"
		} 
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_society_texture
	}
}

OutlinerEntryBase = {
	name = "fav_character_entry"

	blockoverride "category_color" {
		using = color_society_texture
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 8
				character_role_icon = {
					blockoverride "icon_size" {
						size = { 18 18 }
					}
					blockoverride "icon_tooltip" {}
					block "character_role_icon_datacontext" {
						datacontext = "[Character.GetRoleMask]"
					}
				}
	
				OutlinerTextBase = {
					using = layoutpolicy_expanding
					align = left|nobaseline
					fontsize = 13
					autoresize = no
					text = "[Character.GetNameToFitWithNoTooltip('(int32)-1', '(bool)yes')]"
				}

				hbox = {
					text_single = {
						autoresize = yes
						align = right|nobaseline
						raw_text = " [Character.GetAge|Y]"
					}
			
					gender_icon = {
						blockoverride "tooltip_override" {}
						blockoverride "gender_icon_size" {
							size = { 18 18 }
						}
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				align = left
				autoresize = no
				text = "[Character.GetShortNameWithNoTooltip]"
				default_format = "#L"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			portrait_standard_head_button = {
				datacontext = "[Character]"
				alwaystransparent = yes
				parentanchor = center
				size = { 80% 96% }

				blockoverride "character_tooltip" { tooltip_enabled = no }
				blockoverride "character_contextmenu" {}
				blockoverride "button_setup" {}
				blockoverride "rightclick" {}
				blockoverride "hover" {}
			}
		}
	}

	blockoverride "button_setup" {
		contextmenu_enabled = "[And3(Character.IsValid, Not(IsLobbyOpen), IsPlayerValid)]"
		contextmenu_widget = {
			CharacterContextMenu = {}
		}
		
		tooltipwidget = {
			using = Character_tooltip
		}

		action_tooltip = {
			click_type = left
			click_mode = single

			visible = "[Not(IsLobbyOpen)]"
			title = "CHARACTER_CLICK_TOOLTIP_LEFT_CLICK"
			on_action = "[ShowCharacter(Character.Self)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			datacontext = "[Character]"

			cursor = "character_menu"
			title = "CHARACTER_CLICK_TOOLTIP_RIGHT_CLICK"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}
	}
}

# Available contexts
# "Outliner"
# "Conquistador Construction"
OutlinerEntryBase = {
	name = "conquistador_construction_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/unit_actions/conquistador.dds"
		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/unit_actions/conquistador.dds"
		} 
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

OutlinerEntryBase = {
	name = "conquistador_construction_entry"

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					fontsize = 13
					raw_text = "[Construction.GetNameWithNoTooltip]"
				}

				OutlinerTextBase = {
					visible = "[Not(Construction.IsStalled)]"
					autoresize = yes
					text = "CONSTRUCTION_DURATION_DAYS"
				}
				OutlinerTextBase = {
					visible = "[Construction.IsStalled]"
					autoresize = yes
					text = "CONSTRUCTION_INFO_STALLED"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				visible = "[Not(Construction.IsStalled)]"
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				text = "CONSTRUCTION_DURATION_DAYS"
			}
			OutlinerTextBase = {
				visible = "[Construction.IsStalled]"
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				text = "CONSTRUCTION_INFO_STALLED"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			piechart = {
				visible = "[Not(Construction.IsStalled)]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			piechart = {
				visible = "[Construction.IsStalled]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.5 0.5 0.5 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			icon = {
				parentanchor = center
				size = { 50% 50% }
				texture = "[GetConstructionIcon(Construction.Self)]"
				texture_density = 2
			}
		}
	}

	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Construction.GetLocation)]"

		tooltipwidget = {
			using = Construction_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_LOCATION"
			on_action = "[ShowLocation(Construction.GetLocation)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "CANCEL_CONSTRUCTION"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)no')]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			click_modifier = shift
			title = "CANCEL_CONSTRUCTION_FORCED"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)yes')]"
		}
	}
}

# Available contexts
# "Outliner"
# "Location"
OutlinerEntryBase = {
	name = "location_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/map_modes/locations.dds"
		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/map_modes/locations.dds"
		} 
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

OutlinerEntryBase = {
	name = "fav_location_entry"
	widgetid = "fav_location_entry"

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 20 20 }
					texture = "[Location.GetRankIcon]"
				}

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					text = "[Location.GetNameWithNoTooltip]"
					default_format = "#L"
				}

				OutlinerTextBase = {
					maximumsize = { 60 -1 }
					minimumsize = { 60 -1 }
					autoresize = yes
					raw_text = "[Location.GetTotalTaxBase|2] @tax_base!"
				}

				OutlinerTextBase = {
					maximumsize = { 60 -1 }
					minimumsize = { 60 -1 }
					autoresize = yes
					raw_text = "[Location.GetTotalPopulation] @population!"
				}
			}

		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = left
				text = "[Location.GetNameWithNoTooltip]"
				default_format = "#L"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			filter_mouse = none
			country_flag_very_small = {
				filter_mouse = none
				alwaystransparent = yes
				parentanchor = center
				datacontext = "[Location.GetProvince.GetCountry]"
				blockoverride "show_as_button" { visible = no }
				blockoverride "show_as_icon" { visible = yes }
				blockoverride "tooltip" {}
				blockoverride "contextmenu" {}
				blockoverride "click" {}
				blockoverride "double_click" {}
			}
		}
	}

	blockoverride "button_setup" {
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_LOCATION"
			on_action = "[ShowLocation(Location.Self)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single

			cursor = "location_menu"
			title = "CLICK_ACTION_LOCATION_CONTEXT_MENU"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}

		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Location.Self)]"

		tooltipwidget = {
			using = location_simple_tooltip
		}
		contextmenu_widget = {
			LocationContextMenu = {}
		}
	}
}

# Available contexts
# "Outliner"
# "Location"
OutlinerEntryBase = {
	name = "seazone_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('seazone')]"
			texture_density = 2
		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('seazone')]"
			texture_density = 2
		} 
	
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

OutlinerEntryBase = {
	name = "fav_seazone_entry"

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 20 20 }
					texture = "[GetTopographyIcon(Location.GetTopography)]"
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
					background =  {
						texture = "[GetClimateFrame(Location.GetClimate)]"
					}
				}
				
				OutlinerTextBase = {
					align = left
					text = "[Location.GetNameWithNoTooltip]"
					using = layoutpolicy_expanding
					default_format = "#L"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = left
				default_format = "#L"
				text = "[Location.GetNameWithNoTooltip]"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			filter_mouse = none
			icon = {
				size = { 70% 70% }
				parentanchor = center
				texture = "[GetTopographyIcon(Location.GetTopography)]"
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.3
				}
				background =  {
					texture = "[GetClimateFrame(Location.GetClimate)]"
				}
			}
		}
	}

	blockoverride "button_setup" {
		action_tooltip = {
			click_type = right
			click_mode = single

			cursor = "location_menu"
			title = "CLICK_ACTION_LOCATION_CONTEXT_MENU"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}

		tagtooltip_enabled = yes
		tooltip = "[Location.GetName]"
		contextmenu_widget = {
			SeazoneContextMenu = {}
		}
	}
}

# Available contexts
# "Outliner"
# "Location"
OutlinerEntryBase = {
	name = "goods_category_entry"
	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('goods')]"
			texture_density = 2
		} 
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('goods')]"
			texture_density = 2
		} 
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

OutlinerEntryBase = {
	name = "fav_goods_entry"

	blockoverride "category_color" {
		using = color_production_texture
	}

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				datacontext = "[Player.GetCapital.GetMarket]"
				datacontext = "[Market.GetMarketEntry(Goods.Self)]"
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 20 20 }
					texture = "[GetGoodsIcon(Goods.Self)]"
				}

				widget = {
					size = {15 22}

					progressbar = {
						parentanchor = center
						size = { 5 22 }
						using = progress_bar_green_alt
						value = "[FixedPointToFloat(GoodsMarketEntry.GetStockpile)]"
						min = 0
						max = "[FixedPointToFloat(Market.GetCenterLocation.GetModifierValueFixed('maximum_stockpile_capacity'))]"
						direction = vertical
					}
				}

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					text = "[Goods.GetNameWithNoTooltip]"
					default_format = "#L"
				}

				hbox = {
					margin_right = 3
					spacing = 5
					using = layoutpolicy_expanding

					expand = {}

					text_single = {
						size = { 65 20 }
						autoresize = no
						align = right|nobaseline
						using = Font_Size_Small
						raw_text = "[Subtract_CFixedPoint(Market.GetSupply(GoodsMarketEntry.GetGoods), Market.GetDemand(GoodsMarketEntry.GetGoods))|+=2]@balance!"
					}

					text_single = {
						size = { 68 20 }
						autoresize = no
						align = right|nobaseline
						using = Font_Size_Small
						raw_text = "[GoodsMarketEntry.GetPrice|2]@[GoodsMarketEntry.GetGoods.GetPriceDifferenceIconName(GoodsMarketEntry.GetPrice)]!"
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }
			hbox = {
				datacontext = "[Player.GetCapital.GetMarket]"
				datacontext = "[Market.GetMarketEntry(Goods.Self)]"
				using = layoutpolicy_expanding
				margin_right = 26

				widget = {
					size = { 68 20 }
					hbox = {
						hbox = {
							spacing = 3
							text_single = {
								maximumsize = { 45 20 }
								align = center|nobaseline
								using = Font_Size_Small
								text = "[GoodsMarketEntry.GetPrice|2]"
							}

							text_single = {
								maximumsize = { 20 20 }
								align = center|nobaseline
								using = Font_Size_Small
								raw_text = "@[GoodsMarketEntry.GetGoods.GetPriceDifferenceIconName(GoodsMarketEntry.GetPrice)]!"
							}
						}
					}
				}

				expand = {}

				widget = {
					size = {15 22}

					progressbar = {
						parentanchor = center
						size = { 5 22 }
						using = progress_bar_green_alt
						value = "[FixedPointToFloat(GoodsMarketEntry.GetStockpile)]"
						min = 0
						max = "[FixedPointToFloat(Market.GetCenterLocation.GetModifierValueFixed('maximum_stockpile_capacity'))]"
						direction = vertical
					}
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			filter_mouse = none
			icon = {
				size = { 70% 70% }
				parentanchor = center
				texture = "[GetGoodsIcon(Goods.Self)]"
			}
		}
	}

	blockoverride "button_setup" {
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "OPEN_GOOD_PANEL"
			on_action = "[ShowGoods(Goods.Self)]"
		}

		datacontext = "[Player.GetCapital.GetMarket]"
		datacontext = "[Market.GetMarketEntry(Goods.Self)]"
		tooltipwidget = {
			using = SpecificGoodsMarket_tooltip
		}
	}
}

# Available contexts
# "OutlinerWarEntry"
# "War"
# "WarsOverviewWar"
# "Outliner"
OutlinerEntryBase = {
	name = "war_entry"

	blockoverride "expanded_big_content"  { using = category_big_template }
	blockoverride "expanded_small_content" { using = category_small_template }
	
	blockoverride "icon_content" { using = category_icon_template }
	blockoverride "pin_object" {}

	blockoverride "category_name" {
		text = "[War.GetNameWithNoTooltip|T]"
	}

	blockoverride "outliner_category_count" {
		text = "[OutlinerWarEntry.GetEntryCount|T]"
	}

	blockoverride "category_icon_texture" { texture = "[GetConceptTexture('war')]" }
	blockoverride "small_category_icon_texture" { texture = "[GetConceptTexture('war')]" }
	blockoverride "category_is_closed_visible"  { visible = "[OutlinerWarEntry.IsClosed]"}
	blockoverride "category_is_opened_visible"  { visible = "[OutlinerWarEntry.IsOpened]"}

	blockoverride "category_big_extra_content" {
		hbox = {
			spacing = 1
			
			country_flag_very_small = {
				datacontext = "[War.GetAttackerWarLeader]"
				filter_mouse = none
				alwaystransparent = yes
				blockoverride "tooltip" {}
				blockoverride "contextmenu" {}
				blockoverride "click" {}
				blockoverride "double_click" {}
				blockoverride "show_as_button" { visible = no }
				blockoverride "show_as_icon" { visible = yes }
			}

			OutlinerTextBase = {
				maximumsize = { 34 -1 }
				minimumsize = { 34 -1 }
				align = center
				text = "[War.GetWarScore|+=0%/]"
			}

			country_flag_very_small = {
				datacontext = "[War.GetDefenderWarLeader]"
				filter_mouse = none
				alwaystransparent = yes
				blockoverride "tooltip" {}
				blockoverride "contextmenu" {}
				blockoverride "click" {}
				blockoverride "double_click" {}
				blockoverride "show_as_button" { visible = no }
				blockoverride "show_as_icon" { visible = yes }
			}
		}
	}

	blockoverride "category_small_extra_content" { 
		country_flag_very_small = {
			datacontext = "[WarsOverviewWar.GetMainEnemy]"
			filter_mouse = none
			alwaystransparent = yes
			blockoverride "tooltip" {}
			blockoverride "contextmenu" {}
			blockoverride "click" {}
			blockoverride "double_click" {}
			blockoverride "show_as_button" { visible = no }
			blockoverride "show_as_icon" { visible = yes }
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = { using = War_tooltip }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerWarEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerWarEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

# Available contexts
# "Siege"
# "War"
# "Outliner"
OutlinerEntryBase = {
	name = "siege_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 3

				country_flag_very_small = {
					datacontext = "[Siege.GetBesieger]"
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
				}

				OutlinerTextBase = {
					visible = "[And(Not(Siege.GetSiegeDefender.IsPlayer), Not(Siege.GetSiegeDefender.IsAllied))]"
					using = layoutpolicy_expanding
					alwaystransparent = yes
					align = left
					text = "[Siege.GetNameWithNoTooltip|G]"
				}

				OutlinerTextBase = {
					visible = "[Or(Siege.GetSiegeDefender.IsPlayer, Siege.GetSiegeDefender.IsAllied)]"
					using = layoutpolicy_expanding
					alwaystransparent = yes
					align = left
					text = "[Siege.GetNameWithNoTooltip|R]"
				}

				icon = {
					visible = "[Siege.GetLocation.HasCombat]"
					size = {15 15}
					texture = "gfx/interface/icons/flat_icons/disable_icon.dds"
					using = color_red
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.5
					}
				}

				icon = {
					visible = "[GreaterThan_int32(Siege.GetNumOfBreach, '(int32)0')]"
					size = {16 16}
					texture = "gfx/interface/icons/flat_icons/siege_occupation/brokenwalls.dds"
				}

				OutlinerTextBase = {
					visible = "[And(Not(Siege.IsTooFewMen), Siege.IsSiege)]"
					margin_left = 5
					margin_right = 5
					autoresize = yes
					text = "[Siege.GetFallChance|2%]"
				}

				OutlinerTextBase = {
					visible = "[And(Not(Siege.IsTooFewMen), Not(Siege.IsSiege))]"
					margin_left = 5
					margin_right = 5
					autoresize = yes
					text = "[Siege.GetOccupationDaysLeftShort]"
				}

				OutlinerTextBase = {
					visible = "[Siege.IsTooFewMen]"
					margin_left = 5
					margin_right = 5
					autoresize = yes
					align = right
					text = "SIEGE_TOO_FEW_MEN_TXT"
				}

				country_flag_very_small = {
					datacontext = "[Siege.GetSiegeDefender]"
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				country_flag_very_small = {
					datacontext = "[Siege.GetBesieger]"
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
				}

				expand = {}

				OutlinerTextBase = {
					visible = "[And3(
						Not(Siege.IsTooFewMen), 
						Siege.GetLocation.HasFort, 
						And(
							Not(Siege.GetSiegeDefender.IsPlayer), 
							Not(Siege.GetSiegeDefender.IsAllied)
						)
					)]"
					align = right
					text = "[Siege.GetFallChance|2%G]"
				}

				OutlinerTextBase = {
					visible = "[And3(
						Not(Siege.IsTooFewMen), 
						Siege.GetLocation.HasFort, 
						Or(
							Siege.GetSiegeDefender.IsPlayer, 
							Siege.GetSiegeDefender.IsAllied
						)
					)]"
					align = right
					text = "[Siege.GetFallChance|2%R]"
				}

				OutlinerTextBase = {
					visible = "[And(Not(Siege.IsTooFewMen), Not(Siege.GetLocation.HasFort))]"
					align = right
					text = "[Siege.GetOccupationDaysLeftShort]"
				}

				OutlinerTextBase = {
					visible = "[Siege.IsTooFewMen]"
					align = right
					text = "SIEGE_TOO_FEW_MEN_TXT"
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Siege.GetSiegePhaseProgress]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Siege.GetSiegePhaseProgress)]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			siege_icon = {
				size = { 60% 60% }
				parentanchor = center
			}
			icon = {
				visible = "[Siege.GetLocation.HasCombat]"
				size = {60% 60%}
				texture = "gfx/interface/icons/flat_icons/disable_icon.dds"
				using = color_red
				parentanchor = center
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.5
				}
			}
		}
	}

	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Siege.GetLocation)]"
		tooltipwidget = {
			blockoverride "shift_left_extra" {
				replacement_shift_item = {}
			}
			container = {
				container = {
					using = SiegeMarker_tooltip
					visible = "[Siege.IsSiege]"
				}

				container = {
					using = OccupationMarker_tooltip
					visible = "[Not(Siege.IsSiege)]"
				}
			}
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_SIEGE"
			on_action = "[SelectLocation(Siege.GetLocation)]"
		}

		action_tooltip = {
			click_modifier = shift
			click_type = left
			title = "ALERT_HINT"
			using = snd_UI_alert_openAndCycle
			on_action = "[SelectLocation(Siege.GetLocation)]"
			on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_siege_and_occupation')]"
			on_action = "[PdxGuiTriggerAllAnimations('reset_carousel')]"
		}
	}

	blockoverride "category_color" {
		visible = "[Not(Siege.GetSiegeDefender.IsPlayer)]"
		using = color_military_texture
	}

	blockoverride "category_color_variant" {
		visible = "[Siege.GetSiegeDefender.IsPlayer]"
		using = color_military_texture
	}
}

# Available contexts
# "Combat"
# "War"
# "Outliner"
OutlinerEntryBase = {
	name = "army_combat_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 20 20 }
					texture = "[GetConceptTexture('combat')]"
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}


				OutlinerTextBase = {
					maximumsize = { 150 -1 }
					using = layoutpolicy_expanding
					align = left
					autoresize = no
					text = "[Combat.GetNameWithNoTooltip]"
				}
				
				expand = {}

				hbox = {
					spacing = 2
					country_flag_very_small = {
						datacontext = "[Combat.GetAttacker.GetCountry]"
						filter_mouse = none
						alwaystransparent = yes
						blockoverride "tooltip" {}
						blockoverride "contextmenu" {}
						blockoverride "click" {}
						blockoverride "double_click" {}
						blockoverride "show_as_button" { visible = no }
						blockoverride "show_as_icon" { visible = yes }
					}
	
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Combat.GetAttacker.GetEngagedUnitsStrengthShort]"
					}
	
					widget = {
						size = { 20 20 }
	
						# # Player is Attacker
						# piechart = {
						# 	visible = "[Combat.GetAttacker.IsPlayerInCombat]"
						# 	parentanchor = center
						# 	size = { 90% 90% }
						# 	using = piechart_angles
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Subtract_float('(float)100.0', Combat.GetDefender.GetMoralePercent)]"
						# 		color = { 0.3 0.35 0.4 1 }
						# 	}
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Combat.GetDefender.GetMoralePercent]"
						# 		color = { 0.8 0.3 0.3 1 }
						# 	}
	
						# 	# ATTACKER SIDE
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Combat.GetAttacker.GetMoralePercent]"
						# 		color = { 0.3 0.8 0.3 1 }
						# 	}
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Subtract_float('(float)100.0', Combat.GetAttacker.GetMoralePercent)]"
						# 		color = { 0.45 0.35 0.35 1 }
						# 	}
						# }
	
						# # Player is Defender
						# piechart = {
						# 	visible = "[Combat.GetDefender.IsPlayerInCombat]"
						# 	parentanchor = center
						# 	size = { 90% 90% }
						# 	using = piechart_angles
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Subtract_float('(float)100.0', Combat.GetDefender.GetMoralePercent)]"
						# 		color = { 0.3 0.35 0.4 1 }
						# 		alwaystransparent = yes
						# 	}
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Combat.GetDefender.GetMoralePercent]"
						# 		color = { 0.3 0.8 0.3 1 }
						# 		alwaystransparent = yes
						# 	}
	
						# 	# ATTACKER SIDE
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Combat.GetAttacker.GetMoralePercent]"
						# 		color = { 0.8 0.3 0.3 1 }
						# 		alwaystransparent = yes
						# 	}
	
						# 	pieslice_no_highlight = {
						# 		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						# 		value = "[Subtract_float('(float)100.0', Combat.GetAttacker.GetMoralePercent)]"
						# 		color = { 0.45 0.35 0.35 1 }
						# 		alwaystransparent = yes
						# 	}
						# }
	
						icon = {
							size = { 100% 100% }
							parentanchor = center
							texture = "[GetConceptTexture('combat')]"
	
							modify_texture = {
								using = overlay_window_texture
								blend_mode = overlay
								alpha = 0.7
							}
	
							glow = {
								name = "drop_shadow"
								glow_radius = 3
								color = {0.0 0.0 0.0 1.0}
								alpha = 0.2
							}
						}
					}
	
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Combat.GetDefender.GetEngagedUnitsStrengthShort]"
					}
	
					country_flag_very_small = {
						datacontext = "[Combat.GetDefender.GetCountry]"
						filter_mouse = none
						alwaystransparent = yes
						blockoverride "tooltip" {}
						blockoverride "contextmenu" {}
						blockoverride "click" {}
						blockoverride "double_click" {}
						blockoverride "show_as_button" { visible = no }
						blockoverride "show_as_icon" { visible = yes }
					}
				}

			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }
			hbox = {
				using = outliner_entry_margin
				margin_left = 8
				# spacing = 1
				country_flag_very_small = {
					datacontext = "[Combat.GetAttacker.GetCountry]"
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
				}

				icon = {
					size = { 12 12 }
					texture = "[GetConceptTexture('combat')]"

					modify_texture = {
						using = overlay_window_texture
						blend_mode = overlay
						alpha = 0.7
					}

					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.2
					}
				}

				country_flag_very_small = {
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
					datacontext = "[Combat.GetDefender.GetCountry]"
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {

			# Player is Attacker
			piechart = {
				visible = "[Combat.GetAttacker.IsPlayerInCombat]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				tooltipwidget = {
					using = Combat_tooltip
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Combat.GetDefender.GetMoralePercent)]"
					color = { 0.3 0.35 0.4 1 }
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Combat.GetDefender.GetMoralePercent]"
					color = { 0.8 0.3 0.3 1 }
				}

				# ATTACKER SIDE

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Combat.GetAttacker.GetMoralePercent]"
					color = { 0.3 0.8 0.3 1 }
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Combat.GetAttacker.GetMoralePercent)]"
					color = { 0.45 0.35 0.35 1 }
				}
			}

			# Player is Defender
			piechart = {
				visible = "[Combat.GetDefender.IsPlayerInCombat]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				tooltipwidget = {
					using = Combat_tooltip
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Combat.GetDefender.GetMoralePercent)]"
					color = { 0.3 0.35 0.4 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Combat.GetDefender.GetMoralePercent]"
					color = { 0.3 0.8 0.3 1 }
					alwaystransparent = yes
				}

				# ATTACKER SIDE

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Combat.GetAttacker.GetMoralePercent]"
					color = { 0.8 0.3 0.3 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Combat.GetAttacker.GetMoralePercent)]"
					color = { 0.45 0.35 0.35 1 }
					alwaystransparent = yes
				}
			}

			icon = {
				size = { 70% 70% }
				parentanchor = center
				texture = "[GetConceptTexture('combat')]"

				modify_texture = {
					using = overlay_window_texture
					blend_mode = overlay
					alpha = 0.7
				}

				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.8
				}
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			blockoverride "shift_left_extra" {
				replacement_shift_item = {}
			}
			using = Combat_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "WAR_GO_TO"
			on_action = "[ShowCombat(Combat.Self)]"
			on_action = "[PanToLocation(Combat.GetLocation)]"
		}

		action_tooltip = {
			click_modifier = shift
			click_type = left
			title = "ALERT_HINT"
			using = snd_UI_alert_openAndCycle
			on_action = "[PanToLocation(Combat.GetLocation)]"
			on_action = "[ShowCombat(Combat.Self)]"
			on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_battle')]"
			on_action = "[PdxGuiTriggerAllAnimations('reset_carousel')]"
		}

		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Combat.GetLocation)]"
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

# Available contexts
# "Combat"
# "War"
# "Outliner"
OutlinerEntryBase = {
	name = "navy_combat_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 20 20 }
					texture = "[GetConceptTexture('combat')]"
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}


				OutlinerTextBase = {
					maximumsize = { 150 -1 }
					using = layoutpolicy_expanding
					align = left
					autoresize = no
					text = "[Combat.GetNameWithNoTooltip]"
				}
				
				expand = {}

				hbox = {
					spacing = 2
					country_flag_very_small = {
						datacontext = "[Combat.GetAttacker.GetCountry]"
						filter_mouse = none
						alwaystransparent = yes
						blockoverride "tooltip" {}
						blockoverride "contextmenu" {}
						blockoverride "click" {}
						blockoverride "double_click" {}
						blockoverride "show_as_button" { visible = no }
						blockoverride "show_as_icon" { visible = yes }
					}
	
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Combat.GetAttacker.GetEngagedUnitsStrengthShort]"
					}
	
					icon = {
						size = { 20 20 }
						texture = "[GetConceptTexture('combat')]"

						modify_texture = {
							using = overlay_window_texture
							blend_mode = overlay
							alpha = 0.7
						}

						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.2
						}
					}
	
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Combat.GetDefender.GetEngagedUnitsStrengthShort]"
					}
	
					country_flag_very_small = {
						datacontext = "[Combat.GetDefender.GetCountry]"
						filter_mouse = none
						alwaystransparent = yes
						blockoverride "tooltip" {}
						blockoverride "contextmenu" {}
						blockoverride "click" {}
						blockoverride "double_click" {}
						blockoverride "show_as_button" { visible = no }
						blockoverride "show_as_icon" { visible = yes }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				margin_left = 8
				country_flag_very_small = {
					datacontext = "[Combat.GetAttacker.GetCountry]"
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
				}

				icon = {
					size = { 12 12 }
					texture = "[GetConceptTexture('combat')]"

					modify_texture = {
						using = overlay_window_texture
						blend_mode = overlay
						alpha = 0.7
					}

					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.2
					}
				}

				country_flag_very_small = {
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
					datacontext = "[Combat.GetDefender.GetCountry]"
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				tooltipwidget = {
					using = Combat_tooltip
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Combat.GetDefender.GetMoralePercent)]"
					color = { 0.3 0.35 0.4 1 }
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Combat.GetDefender.GetMoralePercent]"
					color = { 0.2 0.5 0.9 1 }
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Combat.GetAttacker.GetMoralePercent]"
					color = { 0.8 0.3 0.3 1 }
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Combat.GetAttacker.GetMoralePercent)]"
					color = { 0.45 0.35 0.35 1 }
				}
			}

			icon = {
				size = { 70% 70% }
				parentanchor = center
				texture = "[GetConceptTexture('combat')]"

				modify_texture = {
					using = overlay_window_texture
					blend_mode = overlay
					alpha = 0.7
				}

				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.8
				}
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			blockoverride "shift_left_extra" {
				replacement_shift_item = {}
			}
			using = Combat_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "WAR_GO_TO"
			on_action = "[ShowCombat(Combat.Self)]"
			on_action = "[PanToLocation(Combat.GetLocation)]"
		}

		action_tooltip = {
			click_modifier = shift
			click_type = left
			title = "ALERT_HINT"
			using = snd_UI_alert_openAndCycle
			on_action = "[PanToLocation(Combat.GetLocation)]"
			on_action = "[ShowCombat(Combat.Self)]"
			on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_battle')]"
			on_action = "[PdxGuiTriggerAllAnimations('reset_carousel')]"
		}

		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Combat.GetLocation)]"
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

# Available contexts
# "Unit"
# "Outliner"
OutlinerEntryBase = {
	name = "army_unit_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				button = {
					size = { 20 20 }

					action_tooltip = {
						click_type = left
						click_mode = single
						title = "TOGGLE_UNIT_SELECTION_TT"
						on_action = "[ToggleSelectUnit(Unit.Self)]"
					}

					action_tooltip = {
						click_type = right
						click_mode = single
						title = "TOGGLE_ALL"
						on_action = "[SelectAllPlayerUnits(Unit.IsArmy)]"
					}

					tooltipwidget = {
						BasicFunctionalTooltip = {
						}
					}
					button_checkbox = {
						size = { 100% 100% }
						checked = "[IsUnitSelected(Unit.Self)]"
						alwaystransparent = yes
					}
				}

				OutlinerTextBase = {
					align = left
					maximumsize = { 160 20 }
					minimumsize = { 70 20 }
					raw_text = "[Unit.GetVisualStrength]@army_strength!"
				}
				widget = {
					size = { 18 18 }
					icon = {
						size = { 18 18 }
						texture = "[Unit.GetStatusTexture]"
					}
				}

				widget = {
					size = { 18 18 }
					icon = {
						size = { 18 18 }
						texture = "gfx/interface/icons/unit_view/atrittion_icon.dds"
						visible = "[GreaterThan_CFixedPoint(Unit.GetAttrition, '(CFixedPoint)0')]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {1.0 0.0 0.0 1.0}
							alpha = 0.4
						}
					}
				}

				widget = {
					size = { 18 18 }
					icon = {
						visible = "[Unit.IsAutomated]"
						size = { 18 18 }
						texture = "[GetMilitaryObjectiveIcon(Unit.GetObjectiveGroup.GetObjective.GetType)]"
						texture_density = 2
					}
				}

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = right
					text = "[Unit.GetNameWithNoTooltip]"
				}
				portrait_standard_head_button = {
					datacontext = "[Unit.GetCommander]"
					alwaystransparent = yes
					size = { 20 20 }

					blockoverride "character_tooltip" { tooltip_enabled = no }
					blockoverride "character_contextmenu" {}
					blockoverride "button_setup" {}
					blockoverride "rightclick" {}
					blockoverride "hover" {}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 1

				widget = {
					size = { 16 16 }
					icon = {
						size = { 16 16 }
						texture = "[Unit.GetStatusTexture]"
					}
				}

				widget = {
					size = { 16 16 }
					icon = {
						size = { 16 16 }
						texture = "gfx/interface/icons/unit_view/atrittion_icon.dds"
						visible = "[GreaterThan_CFixedPoint(Unit.GetAttrition, '(CFixedPoint)0')]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {1.0 0.0 0.0 1.0}
							alpha = 0.4
						}
					}
				}

				widget = {
					size = { 16 16 }
					icon = {
						visible = "[Unit.IsAutomated]"
						size = { 16 16 }
						texture = "[GetMilitaryObjectiveIcon(Unit.GetObjectiveGroup.GetObjective.GetType)]"
						texture_density = 2
					}
				}
				expand = {}

				OutlinerTextBase = {
					maximumsize = { 20 -1 }
					align = right
					text = "[Unit.GetVisualStrengthShort]"
				}
			}
			
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			icon = {
				parentanchor = center
				size = { 80% 65% }
				texture = "[GetConceptTexture('army')]"
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			using = Unit_tooltip
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "UNIT_CLICK_TOOLTIP_LEFT_CLICK"
			on_action = "[SelectUnit(Unit.Self)]"
		}

		contextmenu_widget = {
			UnitContextMenu = {}
		}

		ondoubleclick = "[PanToLocation(Unit.GetLocation)]"

		action_tooltip = {
			click_type = right
			click_mode = single

			cursor = "unit_menu"
			title = "UNIT_CLICK_TOOLTIP_RIGHT_CLICK"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			click_modifier = ctrl

			title = "TOGGLE_UNIT_SELECTION_TT"
			on_action = "[ToggleSelectUnit(Unit.Self)]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

# Available contexts
# "Unit"
# "Outliner"
OutlinerEntryBase = {
	name = "navy_unit_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				button = {
					size = { 20 20 }

					action_tooltip = {
						click_type = left
						click_mode = single
						title = "TOGGLE_UNIT_SELECTION_TT"
						on_action = "[ToggleSelectUnit(Unit.Self)]"
					}

					action_tooltip = {
						click_type = right
						click_mode = single
						title = "TOGGLE_ALL"
						on_action = "[SelectAllPlayerUnits(Unit.IsArmy)]"
					}

					tooltipwidget = {
						BasicFunctionalTooltip = {
						}
					}
					button_checkbox = {
						size = { 100% 100% }
						checked = "[IsUnitSelected(Unit.Self)]"
						alwaystransparent = yes
					}
				}

				OutlinerTextBase = {
					align = left
					maximumsize = { 160 20 }
					minimumsize = { 70 20 }
					raw_text = "[Unit.GetNumSubUnits] @ship!"
				}
				widget = {
					size = { 18 18 }
					icon = {
						size = { 18 18 }
						texture = "[Unit.GetStatusTexture]"
					}
				}

				widget = {
					size = { 18 18 }
					icon = {
						size = { 18 18 }
						texture = "gfx/interface/icons/unit_view/atrittion_icon.dds"
						visible = "[GreaterThan_CFixedPoint(Unit.GetAttrition, '(CFixedPoint)0')]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {1.0 0.0 0.0 1.0}
							alpha = 0.4
						}
					}
				}

				widget = {
					size = { 18 18 }
					icon = {
						visible = "[Unit.IsAutomated]"
						size = { 18 18 }
						texture = "[GetMilitaryObjectiveIcon(Unit.GetObjectiveGroup.GetObjective.GetType)]"
						texture_density = 2
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.2
						}
					}
				}

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = right
					text = "[Unit.GetNameWithNoTooltip]"
				}
				portrait_standard_head_button = {
					datacontext = "[Unit.GetCommander]"
					alwaystransparent = yes
					size = { 20 20 }

					blockoverride "character_tooltip" { tooltip_enabled = no }
					blockoverride "character_contextmenu" {}
					blockoverride "button_setup" {}
					blockoverride "rightclick" {}
					blockoverride "hover" {}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }
			hbox = {
				using = outliner_entry_margin
				spacing = 3

				widget = {
					size = { 16 16 }
					icon = {
						size = { 16 16 }
						texture = "[Unit.GetStatusTexture]"
					}
				}

				widget = {
					size = { 16 16 }
					icon = {
						size = { 16 16 }
						texture = "gfx/interface/icons/unit_view/atrittion_icon.dds"
						visible = "[GreaterThan_CFixedPoint(Unit.GetAttrition, '(CFixedPoint)0')]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {1.0 0.0 0.0 1.0}
							alpha = 0.4
						}
					}
				}

				widget = {
					size = { 16 16 }
					icon = {
						visible = "[Unit.IsAutomated]"
						size = { 16 16 }
						texture = "[GetMilitaryObjectiveIcon(Unit.GetObjectiveGroup.GetObjective.GetType)]"
						texture_density = 2
					}
				}

				OutlinerTextBase = {
					raw_text = "[Unit.GetNumSubUnits]"
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			icon = {
				parentanchor = center
				size = { 75% 75% }
				using = navy_strength_texture
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			using = Unit_tooltip
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "UNIT_CLICK_TOOLTIP_LEFT_CLICK"
			on_action = "[SelectUnit(Unit.Self)]"
		}

		contextmenu_widget = {
			UnitContextMenu = {}
		}

		ondoubleclick = "[PanToLocation(Unit.GetLocation)]"

		action_tooltip = {
			click_type = right
			click_mode = single

			cursor = "unit_menu"
			title = "UNIT_CLICK_TOOLTIP_RIGHT_CLICK"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			click_modifier = ctrl

			title = "TOGGLE_UNIT_SELECTION_TT"
			on_action = "[ToggleSelectUnit(Unit.Self)]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}


# Available contexts
# "Country"
# "Outliner"
OutlinerEntryBase = {
	name = "parliament_entry"
	datacontext = "[Country.GetGovernment.GetParliament]"
	

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				margin_right = 5
				spacing = 5

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					text = "PARLIAMENT_LOCATION_OUTLINER_TITLE"
				}

				OutlinerTextBase = {
					autoresize = yes
					text = "OUTLINER_ENTRY_PARLIAMENT_CURRENT_SUPPORT"
				}

				icon = {
					size = { 20 20 }
					texture = "gfx/interface/icons/flat_icons/parliament_support.dds"
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = right
				text = "OUTLINER_ENTRY_PARLIAMENT_CURRENT_SUPPORT"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			piechart = {
				visible = "[Parliament.HasOngoingParliamentDebate]"
				parentanchor = center
				size = { 80% 80% }

				using = piechart_angles

				background = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					texture_density = 2
					alpha = 0.5
					modify_texture = {
						using = color_dark_brown_texture
						blend_mode = multiply
					}
				}
				icon = {
					texture = "gfx/interface/icons/flat_icons/parliament.dds"
					parentanchor = center
					size = { 60% 60% }
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Parliament.GetBaseParliamentIssueSupport]"
					color = { 0.7 0.55 0.35 1 }
					alpha = 1

				}

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Parliament.GetAddedParliamentIssueSupport]"
					color = { 0.3 0.8 0.3 1 }
					alpha = 0.8

				}

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(Parliament.GetParliamentIssueSupport))]"
					color = { 0.8 0.3 0.3 1 }
				}
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			using = ParliamentInSession_tooltip
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "AUTOMATED_SYSTEM_PARLIAMENT_CLICK"
			on_action = "[OpenLateralViewWithParams('government', 'tabcontent = parliament')]"
		}
	}

	blockoverride "category_color" {
		using = color_government_texture
	}
}

# Available contexts
# "Outliner"
# "GovernmentReform"
OutlinerEntryBase = {
	name = "gov_reform_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				layoutpolicy_horizontal = expanding
				using = outliner_entry_margin
				spacing = 10
				margin_left = 15

				estate_reform_action_button_alt = {
					size = {16 23}
					blockoverride "estate_reform_button_visible" {
						visible = no
					}
					blockoverride "estate_reform_icon_visible" {
						visible = yes
					}
					blockoverride "icon_texture" {
						texture = "[GetGovernmentReformIllustration(GovernmentReform.Self)]"
					}
					blockoverride "reform_item_normal_visibility" {
						visible = "[And(Not(GovernmentReform.IsUnique),Not(GovernmentReform.IsMajor))]"
					}
					blockoverride "reform_item_unique_visibility" {
						visible = "[GovernmentReform.IsUnique]"
					}
					blockoverride "reform_item_major_visibility" {
						visible = "[And(Not(GovernmentReform.IsUnique),GovernmentReform.IsMajor)]"
					}
				}

				OutlinerTextBase = {
					align = left
					text = "[GovReformOutlinerEntry.GetName]"
				}

				expand = {}
	
				OutlinerTextBase = {
					maximumsize = { 40 -1 }
					align = right
					raw_text = "[GovReformOutlinerEntry.GetReformProgress|2]%"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				layoutpolicy_horizontal = expanding
				using = outliner_entry_margin
				spacing = 3
				margin_left = 14

				estate_reform_action_button_alt = {
					size = {16 23}
					blockoverride "estate_reform_button_visible" {
						visible = no
					}
					blockoverride "estate_reform_icon_visible" {
						visible = yes
					}
					blockoverride "icon_texture" {
						texture = "[GetGovernmentReformIllustration(GovernmentReform.Self)]"
					}
					blockoverride "reform_item_normal_visibility" {
						visible = "[And(Not(GovernmentReform.IsUnique),Not(GovernmentReform.IsMajor))]"
					}
					blockoverride "reform_item_unique_visibility" {
						visible = "[GovernmentReform.IsUnique]"
					}
					blockoverride "reform_item_major_visibility" {
						visible = "[And(Not(GovernmentReform.IsUnique),GovernmentReform.IsMajor)]"
					}
				}

				expand = {}
	
				OutlinerTextBase = {
					maximumsize = { 40 -1 }
					align = right
					raw_text = "[GovReformOutlinerEntry.GetReformProgress|2]%"
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {

			piechart = {
				alwaystransparent = yes
				parentanchor = center
				allow_outside = yes
				size = { 80% 80% }

				using = piechart_angles

				pieslice = {
					alwaystransparent = yes
					texture = "gfx/interface/pie_charts/pie_chart_blue_progress.dds"
					value = "[GovReformOutlinerEntry.GetReformProgress]"
					color = { 1 1 1 1 }
				}

				pieslice = {
					alwaystransparent = yes
					texture = "gfx/interface/pie_charts/pie_chart_blue_progress.dds"
					value = "[Subtract_float('(float)100.0', GovReformOutlinerEntry.GetReformProgress)]"
					color = { 0.0 0.1 0.1 1 }
				}
			}

			icon = {
				parentanchor = center
				size = { 60% 60% }
				texture = "gfx/interface/icons/flat_icons/reforms.dds"
			}
		}
	}

	blockoverride "button_setup" {
		datacontext = "[GovReformOutlinerEntry.GetReformItem.GetReform]"
		datacontext = "[GovReformOutlinerEntry.GetReformItem.GetUIAction]"

		using = button_action_provider
		enabled = yes

		tooltipwidget = {
			using = GovernmentReform_tooltip
			blockoverride "UIActionDescription" {
				TooltipStringPairList = {
					visible = "[And(Not(GovReformOutlinerEntry.GetReformItem.IsImplemented), GovReformOutlinerEntry.GetReformItem.IsValid)]"
					textcontext = "[GovReformOutlinerEntry.GetReformItem.GetUIAction.GetDescription]"
				}
				TooltipFlavorTextBlock = {
					visible = "[Not(StringIsEmpty(GovReformOutlinerEntry.GetReformItem.GetUIAction.GetConditions))]"
					blockoverride "text" {
						text = "[GovReformOutlinerEntry.GetReformItem.GetUIAction.GetConditions]"
					}
				}
			}
		}
	}

	blockoverride "category_color" {
		using = color_government_texture
	}
}

# Available contexts
# "Outliner"
# "GovernmentReform"
OutlinerEntryBase = {
	name = "law_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				layoutpolicy_horizontal = expanding
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 25 25 }
					texture = "[GetLawIcon(Law.Self)]"
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}
				OutlinerTextBase = {
					align = left
					raw_text = "[Law.GetNameWithNoTooltip]: [Player.GetGovernment.GetPolicyForLaw(Law.Self).GetNameWithNoTooltip]"
				}

				expand = {}
	
				OutlinerTextBase = {
					align = right
					raw_text = "[FixedPointToFloat(Player.GetGovernment.GetPolicyProgressForLaw(Law.Self))|2]%"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				layoutpolicy_horizontal = expanding
				using = outliner_entry_margin
				spacing = 3

				icon = {
					size = { 25 25 }
					texture = "[GetLawIcon(Law.Self)]"
				}

				expand = {}
	
				OutlinerTextBase = {
					maximumsize = { 40 -1 }
					align = right
					raw_text = "[FixedPointToFloat(Player.GetGovernment.GetPolicyProgressForLaw(Law.Self))|2]%"
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {

			piechart = {
				alwaystransparent = yes
				parentanchor = center
				allow_outside = yes
				size = { 80% 80% }

				using = piechart_angles

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(Player.GetGovernment.GetPolicyProgressForLaw(Law.Self))]"
					using = color_value_progress_blue
				}

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', FixedPointToFloat(Player.GetGovernment.GetPolicyProgressForLaw(Law.Self)))]"
					using = color_value_progress_gray
				}
			}

			icon = {
				parentanchor = center
				size = { 60% 60% }
				texture = "gfx/interface/icons/situations/_default.dds"
				texture_density = 2
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = { using = Law_tooltip }
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "[Localize('OUTLINER_LAW_SIDEMENU')] [Law.GetName]"
			on_action = "[ShowSelectPolicies(Law.Self)]"
		}
	}

	blockoverride "category_color" {
		using = color_government_texture
	}
}

## CABINET ENTRY
# Available contexts
# "Cabinet"
# "CabinetItem"
# "Outliner"
###############################################################################

template cabinet_entry_action_progress {
	hbox = {
		spacing = 4
		portrait_standard_head_button = {
			datacontext = "[Cabinet.GetCharacter]"
			visible = "[Cabinet.IsCharacterSet]"
			size = { 28 28 }
	
			action_tooltip = {
				click_type = right
				click_mode = single
	
				title = "CHANGE_CABINET"
				cost = "[Cabinet.GetPriceForAssigningCabinetMemberToSlot]"
				enabled = "[Cabinet.ArePossibleCabinetCharactersAvailable]"
				description = "[Cabinet.GetDescriptionForAssigningCabinetMemberToSlot]"
				on_action_with_params = "[Cabinet.AssigningCabinetMemberToSlot]"
			}
	
			# blockoverride "character_tooltip" { 
			# }
			blockoverride "character_contextmenu" {}
			blockoverride "button_setup" {
			}
			blockoverride "rightclick" {}
			# blockoverride "hover" {}
		}
		portrait_standard_head_button = {
			datacontext = "[Cabinet.GetCharacter]"
			visible = "[Not(Cabinet.IsCharacterSet)]"
			size = { 28 28 }
	
			action_tooltip = {
				click_type = left
				click_mode = single
	
				title = "SELECT_CABINET_CHARACTER"
				cost = "[Cabinet.GetPriceForAssigningCabinetMemberToSlot]"
				enabled = "[Cabinet.ArePossibleCabinetCharactersAvailable]"
				description = "[Cabinet.GetDescriptionForReplacingCabinetMemberToSlot]"
				on_action_with_params = "[Cabinet.AssigningCabinetMemberToSlot]"
			}
	
			blockoverride "character_tooltip" { 
				tooltipwidget = {
					BasicFunctionalTooltip = {}
				}
			}
			blockoverride "character_contextmenu" {}
			blockoverride "button_setup" {
			}
			blockoverride "rightclick" {}
			# blockoverride "hover" {}
		}
		cabinet_efficiency_icon = {
			blockoverride "icon_size" { size = { 20 20 } }
			tooltipwidget = {
				using = effective_skill_tooltip
			}
		}
	}
	block "cabinet_entry_title_text" {
		OutlinerTextBase = {
			using = layoutpolicy_expanding
			text = "[Cabinet.GetNameWithNoTooltip]"
			align = left
			default_format = "#L"
			maximumsize = { 200 -1 }
		}
	}
	expand = {}

	block "cabinet_entry_progress_text" {
		OutlinerTextBase = {
			maximumsize = { 90 -1 }
			autoresize = yes
			text = "[Cabinet.GetActionProgress]"
		}
	}
}

template cabinet_entry_small_action_progress {
	OutlinerButtonBase = {
		size = { 95% 100% }

		hbox = {
			visible = "[Not(Cabinet.IsActive)]"
			using = outliner_entry_margin
			spacing = 5

			portrait_standard_head_button = {
				datacontext = "[Cabinet.GetCharacter]"
				size = { 28 28 }
		
				action_tooltip = {
					click_type = left
					click_mode = single
		
					title = "SELECT_CABINET_CHARACTER"
					cost = "[Cabinet.GetPriceForAssigningCabinetMemberToSlot]"
					enabled = "[Cabinet.ArePossibleCabinetCharactersAvailable]"
					description = "[Cabinet.GetDescriptionForReplacingCabinetMemberToSlot]"
					on_action_with_params = "[Cabinet.AssigningCabinetMemberToSlot]"
				}
		
				blockoverride "character_tooltip" { 
					tooltipwidget = {
						BasicFunctionalTooltip = {}
					}
				}
				blockoverride "character_contextmenu" {}
				blockoverride "button_setup" {
				}
				blockoverride "rightclick" {}
				# blockoverride "hover" {}
			}

			OutlinerTextBase = {
				using = layoutpolicy_expanding
				maximumsize = { 40 -1 }
				text = "EMPTY_CABINET_SLOT_SHORT"
				default_format = "#S"
			}
		}

		hbox = {
			visible = "[Cabinet.IsActive]"
			using = outliner_entry_margin
			spacing = 5
			portrait_standard_head_button = {
				datacontext = "[Cabinet.GetCharacter]"
				visible = "[Cabinet.IsCharacterSet]"
				size = { 28 28 }
		
				action_tooltip = {
					click_type = right
					click_mode = single
		
					title = "CHANGE_CABINET"
					cost = "[Cabinet.GetPriceForAssigningCabinetMemberToSlot]"
					enabled = "[Cabinet.ArePossibleCabinetCharactersAvailable]"
					description = "[Cabinet.GetDescriptionForAssigningCabinetMemberToSlot]"
					on_action_with_params = "[Cabinet.AssigningCabinetMemberToSlot]"
				}
		
				# blockoverride "character_tooltip" { 
				# }
				blockoverride "character_contextmenu" {}
				blockoverride "button_setup" {
				}
				blockoverride "rightclick" {}
				# blockoverride "hover" {}
			}
			portrait_standard_head_button = {
				datacontext = "[Cabinet.GetCharacter]"
				visible = "[Not(Cabinet.IsCharacterSet)]"
				size = { 28 28 }
		
				action_tooltip = {
					click_type = left
					click_mode = single
		
					title = "SELECT_CABINET_CHARACTER"
					cost = "[Cabinet.GetPriceForAssigningCabinetMemberToSlot]"
					enabled = "[Cabinet.ArePossibleCabinetCharactersAvailable]"
					description = "[Cabinet.GetDescriptionForReplacingCabinetMemberToSlot]"
					on_action_with_params = "[Cabinet.AssigningCabinetMemberToSlot]"
				}
		
				blockoverride "character_tooltip" { 
					tooltipwidget = {
						BasicFunctionalTooltip = {}
					}
				}
				blockoverride "character_contextmenu" {}
				blockoverride "button_setup" {
				}
				blockoverride "rightclick" {}
				# blockoverride "hover" {}
			}
			cabinet_efficiency_icon = {
				blockoverride "icon_size" { size = { 20 20 } }
				tooltipwidget = {
					using = effective_skill_tooltip
				}
			}
			expand = {}
		}
	}
}

template cabinet_entry_icon_empty {
	OutlinerIconBg = {
		visible = "[Not(Cabinet.IsActive)]"
		portrait_standard_head_button = {
			datacontext = "[Cabinet.GetCharacter]"
			alwaystransparent = yes
			parentanchor = center
			size = { 80% 96% }

			blockoverride "character_tooltip" { tooltip_enabled = no }
			blockoverride "character_contextmenu" {}
			blockoverride "button_setup" {}
			blockoverride "rightclick" {}
			blockoverride "hover" {}
		}
	}
	OutlinerIconBg = {
		visible = "[Cabinet.IsActive]"
		icon = {
			parentanchor = center
			size = { 63% 63% }
			texture = "[GetCabinetActionIcon(Cabinet.GetAction)]"
			glow = {
				name = "drop_shadow"
				glow_radius = 3
				color = {0.0 0.0 0.0 1.0}
				alpha = 0.3
			}
			position = { 0 1 }
		}
	}
}

template cabinet_entry_icon {
	OutlinerIconBg = {
		block "cabinet_entry_icon_piechart" {
		}
		
		# cabinet_action_power_outliner = {
		# 	parentanchor = center
		# }
		icon = {
			parentanchor = center
			size = { 63% 63% }
			block "cabinet_entry_icon_texture" {}
			glow = {
				name = "drop_shadow"
				glow_radius = 3
				color = {0.0 0.0 0.0 1.0}
				alpha = 0.3
			}
			position = { 0 1 }
		}
	}
}

template cabinet_entry_actions {
	action_tooltip = {
		click_type = left
		click_mode = single

		# visible = "[Not(Cabinet.IsActive)]"
		title = "CABINET_ACTION_SIDEMENU"
		on_action = "[CabinetItem.SelectCabinetAction]"
	}

	action_tooltip = {
		click_type = right
		click_mode = single
		# visible = "[Cabinet.IsActive]"
		title = "CABINET_ACTION_SIDEMENU_RMB"
		on_action = "[CabinetItem.ChangeCabinetActionTarget]"
		visible = "[CabinetItem.IsChangeCabinetActionTargetVisible]"
	}

	tooltipwidget = {
		BasicFunctionalTooltip = {}
	}
}

## EMPTY / GENERIC CABINET ENTRY
#########################################
OutlinerEntryBase = {
	name = "cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Not(Cabinet.IsActive)]"
				using = outliner_entry_margin
				spacing = 5

				portrait_standard_head_button = {
					datacontext = "[Cabinet.GetCharacter]"
					size = { 28 28 }
			
					action_tooltip = {
						click_type = left
						click_mode = single
			
						title = "SELECT_CABINET_CHARACTER"
						cost = "[Cabinet.GetPriceForAssigningCabinetMemberToSlot]"
						enabled = "[Cabinet.ArePossibleCabinetCharactersAvailable]"
						description = "[Cabinet.GetDescriptionForReplacingCabinetMemberToSlot]"
						on_action_with_params = "[Cabinet.AssigningCabinetMemberToSlot]"
					}
			
					blockoverride "character_tooltip" { 
						tooltipwidget = {
							BasicFunctionalTooltip = {}
						}
					}
					blockoverride "character_contextmenu" {}
					blockoverride "button_setup" {
					}
					blockoverride "rightclick" {}
					# blockoverride "hover" {}
				}

				OutlinerTextBase = {
					align = left
					using = layoutpolicy_expanding
					autoresize = no
					text = "EMPTY_CABINET_SLOT"
					default_format = "#S"
				}
			}

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
				
				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						visible = "[Not(StringIsEmpty(Cabinet.GetEffectiveSkillOnlyEffect))]"
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
					OutlinerTextBase = {
						visible = "[StringIsEmpty(Cabinet.GetEffectiveSkillOnlyEffect)]"
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress]"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
	}

	blockoverride "icon_content" { using = cabinet_entry_icon_empty }
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## Rebel Crackdown
#########################################
OutlinerEntryBase = {
	name = "rebel_crackdown_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/rebels/fist.dds" }
		blockoverride "cabinet_entry_icon_piechart"{
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Multiply_float(FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sRebel('target').GetProgress), '(float)100.0'))]"
					color = { 0.01 0.6 0.9 1 } 
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Subtract_float('(float)100.0', Multiply_float(FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sRebel('target').GetProgress), '(float)100.0')))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" {
		using = color_government_texture
	}
}

## DEVELOP PROVINCE
#########################################
OutlinerEntryBase = {
	name = "develop_province_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/develop_province.dds"  }
		blockoverride "cabinet_entry_icon_piechart"{
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('target').GetAverageDevelopment)]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('target').GetAverageDevelopment))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" {
		using = color_government_texture
	}
}

## ENCOURAGE MIGRATION
#########################################
OutlinerEntryBase = {
	name = "encourage_migration_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/encourage_migration.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" {
		using = color_government_texture
	}
}

## FORM NEW CULTURE
#########################################
OutlinerEntryBase = {
	name = "form_new_culture_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	size = {44 30}
		# 	text = "[Cabinet.GetActionProgress]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/form_new_culture.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## MERGE CULTURE GROUP #-> david
#########################################
OutlinerEntryBase = {
	name = "merge_culture_group_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/merge_culture_group.dds" }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## INCREASE CONTROL PROVINCE
#########################################
OutlinerEntryBase = {
	name = "increase_control_province_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/increase_control.dds"  }
		blockoverride "cabinet_entry_icon_piechart"{
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('selected_province').GetAverageControl)]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('selected_province').GetAverageControl))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## INCREASE CONTROL AREA
#########################################
OutlinerEntryBase = {
	name = "increase_control_area_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/increase_control.dds"  }
		blockoverride "cabinet_entry_icon_piechart"{
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sArea('selected_area').GetAverageControlFor(GetPlayer.Self))]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sArea('selected_area').GetAverageControlFor(GetPlayer.Self)))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## REDUCE INFLATION
#########################################

OutlinerEntryBase = {
	name = "reduce_inflation_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = " [Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	text = "[Cabinet.GetEffectiveSkillOnlyEffect]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/reduce_inflation.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## ALLEVIATE CONCERNS
#########################################

OutlinerEntryBase = {
	name = "alleviate_concerns_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						default_format = "#color_red;bold"
						text = "[Cabinet.GetActionProgress]"
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	default_format = "#color_red;bold"
		# 	text = "[Cabinet.GetActionProgress]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/alleviate_concerns.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## CHANGE SOCIETAL VALUES
#########################################

OutlinerEntryBase = {
	name = "change_societal_values_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_title_text" {
					OutlinerTextBase = {
						align = left
						autoresize = no
						using = layoutpolicy_expanding
						datacontext = "[Cabinet.GetSocietalValue]"
						text = "change_societal_values_action_title"
						default_format = "#yellow_titles"
					}
				}

				blockoverride "cabinet_entry_progress_text" {
					widget = {
						visible = "[Cabinet.HasReachedMaxSocietalValue]"
						size = {15 15}

						using = bg_circle_piechart
						icon = {
							using = tooltip_title_icon_size
							using = warning_icon_texture
							size = {15 15}
						}
						tooltipwidget = { 
							SimpleContextualTooltipType = {
								blockoverride "title_text" {
									text = "MAX_TOWARDS_DUE_TO_INERTIA_TITLE"
								}
								blockoverride "concept_link" {
									raw_text = "[societal_value|e]"
								}							
								blockoverride "title_icon" {
									widget = {
										using = tooltip_title_icon_size
										using = bg_circle_piechart
										icon = {
											using = tooltip_title_icon_size
											using = warning_icon_texture
										}
									}
								}
								
								lowpriotextcontext = "MAX_TOWARDS_DUE_TO_INERTIA_TOOLTIP"
							}							
						}
					}
					OutlinerTextBase = {
						autoresize = yes
						datacontext = "[Cabinet.GetSocietalValue]"
						raw_text = "[Cabinet.GetSocietalValueTotal|+=2] ([OutlinerCabinetEntry.GetSocietalValueMonthlyProgress|G+=2])"
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	raw_text = "[OutlinerCabinetEntry.GetSocietalValueMonthlyProgress|G+=2] ([Cabinet.GetSocietalValueTotal|+=0])"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "[Cabinet.GetSocietalValue.GetRightIcon]"  }

		blockoverride "cabinet_entry_icon_piechart"{
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Cabinet.GetSocietalValueCurrentNumber]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Cabinet.GetSocietalValueCurrentNumber)]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## EXPEL PEOPLE
#########################################

OutlinerEntryBase = {
	name = "expel_people_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/expel_people.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## COUNTER ESPIONAGE ACTION
#########################################

OutlinerEntryBase = {
	name = "counter_espionage_action_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						text = "[Cabinet.GetActionProgressWordier]"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress

		# blockoverride "cabinet_entry_small_text" {
		# 	text = "[Cabinet.GetActionProgressWordier]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/counter_espionage_action.dds" }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## DIPLOMATIC ENDEAVORS
#########################################

OutlinerEntryBase = {
	name = "diplomatic_endeavors_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/cabinet_actions/diplomatic_endeavors.dds" }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## PROMOTE CULTURE
#########################################

OutlinerEntryBase = {
	name = "promote_culture_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/promote_culture.dds"  }

		blockoverride "cabinet_entry_icon_piechart"{
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Multiply_float(FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('target_1').GetCulturePercentage(OutlinerCabinetEntry.GetActionProgressScope.sCulture('target'))), '(float)100.0')]"
					color = { 0.01 0.6 0.9 1 } 
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', 
					Multiply_float(FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('target_1').GetCulturePercentage(OutlinerCabinetEntry.GetActionProgressScope.sCulture('target'))), '(float)100.0'))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## RECOVERY EFFORT
#########################################

OutlinerEntryBase = {
	name = "recovery_effort_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/recovery_effort.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## INTEGRATE PROVINCE
#########################################

OutlinerEntryBase = {
	name = "integrate_province_cabinet_entry"
	tooltipmeta = {
		texture = "[GetCabinetActionIcon(Cabinet.GetAction)]"
	}
	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/integrate_province.dds"  }

		blockoverride "cabinet_entry_icon_piechart"{
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(Cabinet.GetActionNumProgress)]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(Cabinet.GetActionNumProgress))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCabinetActionTarget(Cabinet.Self)]"

		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## PACIFY POPULATION
#########################################

OutlinerEntryBase = {
	name = "pacify_population_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/pacify_population.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## PROMOTE RELIGION
#########################################

OutlinerEntryBase = {
	name = "promote_religion_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/promote_religion.dds"  }

		blockoverride "cabinet_entry_icon_piechart"{
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Multiply_float(FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('target_province').GetReligionPercentage(OutlinerCabinetEntry.GetActionProgressScope.sReligion('target_religion'))), '(float)100.0')]"
					color = { 0.01 0.6 0.9 1 } 
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', 
					Multiply_float(FixedPointToFloat(OutlinerCabinetEntry.GetActionProgressScope.sProvince('target_province').GetReligionPercentage(OutlinerCabinetEntry.GetActionProgressScope.sReligion('target_religion'))), '(float)100.0'))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}

	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## STABILIZE COUNTRY
#########################################

OutlinerEntryBase = {
	name = "stabilize_country_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
				
				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	text = "[Cabinet.GetEffectiveSkillOnlyEffect]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/stabilize_country.dds"   }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## STRENGTHEN GOVERNMENT
#########################################

OutlinerEntryBase = {
	name = "strengthen_government_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	text = "[Cabinet.GetEffectiveSkillOnlyEffect]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/strengthen_government.dds"   }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## INTEGRATE AREA
#########################################

OutlinerEntryBase = {
	name = "integrate_area_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress]"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/integrate_area.dds"   }

		blockoverride "cabinet_entry_icon_piechart"{
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(Cabinet.GetActionNumProgress)]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(Cabinet.GetActionNumProgress))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCabinetActionTarget(Cabinet.Self)]"
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## ASSIMILATE AREA
#########################################

OutlinerEntryBase = {
	name = "assimilate_area_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/allow_cabinet_assimilate_area.dds"   }

		blockoverride "cabinet_entry_icon_piechart"{
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(Cabinet.GetActionNumProgress)]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(Cabinet.GetActionNumProgress))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
		}
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## REDUCE WAR EXHAUSTION
#########################################

OutlinerEntryBase = {
	name = "reduce_war_exhaustion_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	text = "[Cabinet.GetEffectiveSkillOnlyEffect]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/reduce_war_exhaustion.dds"   }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## PROMOTE INSTITUTIONS
#########################################

OutlinerEntryBase = {
	name = "study_institutions_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	text = "[Cabinet.GetEffectiveSkillOnlyEffect]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/study_institutions.dds"  }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## ENCOURAGE URBANIZATION
#########################################

OutlinerEntryBase = {
	name = "pop_promote_action_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						raw_text = "[Cabinet.GetActionProgress] ([Cabinet.GetEffectiveSkillOnlyEffect])"
						maximumsize = { 80 -1 }
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		using = cabinet_entry_small_action_progress
		# blockoverride "cabinet_entry_small_text" {
		# 	text = "[Cabinet.GetEffectiveSkillOnlyEffect]"
		# }
	}

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/modifier_types/pop_promote_action.dds"   }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }

	blockoverride "cabinet_entry_icon_piechart"{
		piechart = {
			parentanchor = center
			size = { 90% 90% }
			using = piechart_angles

			pieslice_no_highlight = {
				texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
				value = "[FixedPointToFloat(Cabinet.GetActionNumProgress)]"
				color = { 0.01 0.6 0.9 1 }
				alwaystransparent = yes
			}

			pieslice_no_highlight = {
				texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
				value = "[Subtract_float('(float)100.0', FixedPointToFloat(Cabinet.GetActionNumProgress))]"
				color = { 0.0 0.1 0.1 1 }
				alwaystransparent = yes
			}
		}
	}
}

## BOOST COLONIAL CHARTER #-> progress
#########################################

OutlinerEntryBase = {
	name = "send_people_to_colonial_charter_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress

				blockoverride "cabinet_entry_progress_text" {
					OutlinerTextBase = {
						autoresize = yes
						text = "[Cabinet.GetActionProgress]"
					}
				}
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/flat_icons/geopolitics/send_people_to_the_colonies.dds"   }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}

## SEND PEOPLE TO THE COLONIES #->
#########################################

OutlinerEntryBase = {
	name = "send_people_to_the_colonies_cabinet_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Cabinet.IsActive]"
				datacontext = "[Cabinet.GetCharacter]"
				using = outliner_entry_margin
				spacing = 5

				using = cabinet_entry_action_progress
			}
		}
	}

	blockoverride "expanded_small_content" { using = cabinet_entry_small_action_progress }

	blockoverride "icon_content" {
		using = cabinet_entry_icon

		blockoverride "cabinet_entry_icon_texture"{ texture = "gfx/interface/icons/flat_icons/geopolitics/send_people_to_the_colonies.dds"   }
	}
	blockoverride "button_setup" {
		using = cabinet_entry_actions
		tooltipwidget = {
			using = action_progress_tooltip
		}
	}
	blockoverride "category_color" { using = cabinet_entry_color }
}


# Available contexts
# "Outliner"
OutlinerEntryBase = {
	name = "market_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				icon = {
					size = { 18 18 }
					texture = "[GetConceptTexture('market')]"
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					text = "[Market.GetShortNameWithNoTooltip]"
					default_format = "#L"
				}
				widget = {
					size = { 100 15 }
					hbox = {
						datacontext = "[GetMarketCountryNeeds(Player.Self, Market.Self)]"
						expand = {}
						spacing = 10
						# icon = {
						# 	visible = "[GreaterThan_CFixedPoint(Market.GetMerchantAvailableCapacity(Player.Self),'(CFixedPoint)1.00')]"
						# 	size = {15 15}
						# 	texture = "gfx/interface/icons/flat_icons/trade_capacity.dds"
		
						# 	glow = {
						# 		name = "drop_shadow"
						# 		glow_radius = 3
						# 		color = {0.0 0.0 0.0 1.0}
						# 		alpha = 0.5
						# 	}
		
						# 	using = bg_banner_button_vertical
		
						# 	blockoverride "banner_button_color" {
						# 		modify_texture = {
						# 			using = color_yellow_texture
						# 			alpha = 0.6
						# 		}
						# 	}
						# 	datacontext = "[Player]"
						# 	tooltipwidget = {
						# 		using = merchant_capacity_tooltip
						# 	}
						# }

						icon = {
							size = {15 15}
							texture = "gfx/interface/icons/flat_icons/parliament_needs.dds"
							visible = "[Not(And(Not(MarketCountryNeeds.HasBuildingsMissingGoods), Not(MarketCountryNeeds.HasGovernmentMissingGoods)))]"

							using = bg_banner_button_vertical

							blockoverride "banner_button_color" {
								modify_texture = {
									visible = "[And(MarketCountryNeeds.HasBuildingsMissingGoods, Not(MarketCountryNeeds.HasGovernmentMissingGoods))]"
									using = color_yellow_texture
									alpha = 0.6
								}
								modify_texture = {
									visible = "[MarketCountryNeeds.HasGovernmentMissingGoods]"
									using = color_dark_red_texture
								}
							}
							tooltipwidget = {
								using = market_hub_gov_needs_tooltip
							}
						}

						icon = {
							visible = "[And(MarketCountryNeeds.HasPopsMissingGoods, MarketCountryNeeds.HasRebelPopsMissingGoods)]"
							shaderfile = "gfx/FX/pdxgui_default.shader"
							size = {15 15}
							texture = "gfx/interface/icons/alerts_icons/pops_wanting_stuff.dds"

							using = bg_banner_button_vertical

							blockoverride "banner_button_color" {
								modify_texture = {
									using = color_dark_red_texture
								}
							}

							tooltipwidget = {
								using = market_hub_pop_needs_tooltip
							}
						}

						icon = {
							visible = "[Or(Market.HasStarvingProvinces, Market.WillRunOutOfFoodStochpile)]"
							size = {15 15}
							texture = "gfx/interface/icons/location_icons/food.dds"

							using = bg_banner_button_vertical

							blockoverride "banner_button_color" {
								modify_texture = {
									visible = "[And(Not(Market.HasStarvingProvinces), Market.WillRunOutOfFoodStochpile)]"
									using = color_yellow_texture
									alpha = 0.6
								}
								modify_texture = {
									visible = "[Market.HasStarvingProvinces]"
									using = color_dark_red_texture
								}
							}

							tooltipwidget = {
								using = market_food_balance_tooltip
							}
						}
					}
				}

				widget = {
					layoutpolicy_vertical = expanding
					size = { 70 -1 }
					hbox = {
						expand = {}
						visible = "[GreaterThan_CFixedPoint(Market.GetTotalMerchantCapacity(Player.Self),'(CFixedPoint)0')]"
						datamodel = "[Market.GetMerchants]"
						item = {
							OutlinerTextBase = {
								visible = "[Merchant.GetCountry.IsPlayer]"
								autoresize = yes
								raw_text = "[Merchant.GetTotalTradeProfit|+=2]@gold!"
							}
						}
					}
				}

			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				align = left
				autoresize = no
				text = "[Market.GetShortNameWithNoTooltip]"
				default_format = "#L"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			filter_mouse = none
			country_flag_very_small = {
				filter_mouse = none
				alwaystransparent = yes
				parentanchor = center
				datacontext = "[Market.GetOwner]"
				blockoverride "show_as_button" { visible = no }
				blockoverride "show_as_icon" { visible = yes }
				blockoverride "tooltip" {}
				blockoverride "contextmenu" {}
				blockoverride "click" {}
				blockoverride "double_click" {}
			}
		}
	}

	blockoverride "button_setup" {
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "OPEN_MARKET"
			on_action = "[ShowMarket(Market.Self)]"
		}

		tooltipwidget = {
			using = Market_tooltip
		}
		action_tooltip = {
			click_type = right
			click_mode = single

			cursor = "market_menu"
			title = "CLICK_ACTION_MARKET_CONTEXT_MENU"
			on_action = "[PdxGuiWidget.ToggleContextMenu]"
		}

		contextmenu_widget = {
			MarketContextMenu = {}
		}

		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightMarket(Market.Self)]"
		ondoubleclick = "[PanToLocation(Market.GetCenterLocation)]"
	}

	blockoverride "category_color" {
		using = color_economy_texture
	}
}

template OnlyVisibleWhenOneInLocation {
	visible = "[LessThan_int32(Construction.CountAllInLocation, '(int32)2')]"
}

template OnlyVisibleWhenMultipleInLocation {
	visible = "[Not(LessThan_int32(Construction.CountAllInLocation, '(int32)2'))]"
}

# Available contexts
# "Construction"
# "Outliner"
OutlinerEntryBase = {
	name = "player_construction_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				name = "outliner_construction"
				using = outliner_entry_margin
				spacing = 5
				icon = {
					size = { 20 20 }
					texture = "[GetConstructionIcon(Construction.Self)]"
					texture_density = 2
				}
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					fontsize = 13
					using = OnlyVisibleWhenOneInLocation
					raw_text = "[Construction.GetNameWithNoTooltip]"
				}
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					fontsize = 13
					using = OnlyVisibleWhenMultipleInLocation
					raw_text = "[Construction.GetNameWithNoTooltip] #L (+[Subtract_int32(Construction.CountAllInLocation, '(int32)1')]) #!"
				}

				OutlinerTextBase = {
					visible = "[Not(Construction.IsStalled)]"
					autoresize = yes
					text = "CONSTRUCTION_DURATION_DAYS"
				}
				OutlinerTextBase = {
					visible = "[Construction.IsStalled]"
					autoresize = yes
					text = "CONSTRUCTION_INFO_STALLED"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				visible = "[Not(Construction.IsStalled)]"

				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					using = outliner_entry_margin
					using = OnlyVisibleWhenOneInLocation
					autoresize = no
					align = right
					text = "CONSTRUCTION_DURATION_DAYS"
				}
	
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					using = outliner_entry_margin
					using = OnlyVisibleWhenMultipleInLocation
					autoresize = no
					align = right
					text = "CONSTRUCTION_DURATION_DAYS_PLUS_QUEUE"
				}
			}

			OutlinerTextBase = {
				visible = "[Construction.IsStalled]"
				size = { 95% 100% }
				using = outliner_entry_margin
				autoresize = no
				text = "CONSTRUCTION_INFO_STALLED_SHORT"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				visible = "[Not(Construction.IsStalled)]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			piechart = {
				visible = "[Construction.IsStalled]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.5 0.5 0.5 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			icon = {
				parentanchor = center
				size = { 50% 50% }
				texture = "[GetConstructionIcon(Construction.Self)]"
				texture_density = 2
			}
		}
	}

	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Construction.GetLocation)]"

		tooltipwidget = {
			using = Construction_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_LOCATION"
			on_action = "[ShowLocation(Construction.GetLocation)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "CANCEL_CONSTRUCTION"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)no')]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			click_modifier = shift
			title = "CANCEL_CONSTRUCTION_FORCED"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)yes')]"
		}
	}

	blockoverride "category_color" {
		using = color_production_texture
	}
}

# Available contexts
# "Construction"
# "Outliner"
OutlinerEntryBase = {
	name = "estate_construction_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5
				icon = {
					size = { 20 20 }
					texture = "[GetEstateIcon(Construction.GetEstateType)]"
					texture_density = 2
				}

				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					using = OnlyVisibleWhenOneInLocation
					raw_text = "[Construction.GetNameWithNoTooltip]"
				}
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					using = OnlyVisibleWhenMultipleInLocation
					raw_text = "[Construction.GetNameWithNoTooltip] #L (+[Subtract_int32(Construction.CountAllInLocation, '(int32)1')]) #!"
				}

				OutlinerTextBase = {
					autoresize = yes
					text = "CONSTRUCTION_DURATION_DAYS"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				icon = {
					size = { 20 20 }
					texture = "[GetEstateIcon(Construction.GetEstateType)]"
					texture_density = 2
				}
				OutlinerTextBase = {
					minimumsize = { 20 10 }
					maximumsize = { 34 30 }
					autoresize = yes
					align = right
					text = "CONSTRUCTION_DURATION_DAYS"
				}
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				visible = "[Not(Construction.IsStalled)]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			piechart = {
				visible = "[Construction.IsStalled]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.5 0.5 0.5 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			icon = {
				parentanchor = center
				size = { 50% 50% }
				texture = "[GetConstructionIcon(Construction.Self)]"
				texture_density = 2
			}
		}
	}

	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Construction.GetLocation)]"

		tooltipwidget = {
			using = Construction_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_LOCATION"
			on_action = "[ShowLocation(Construction.GetLocation)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "CANCEL_CONSTRUCTION"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)no')]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			click_modifier = shift
			title = "CANCEL_CONSTRUCTION_FORCED"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)yes')]"
		}
	}

	blockoverride "category_color" {
		using = color_production_texture
	}
}

# Available contexts
# "Construction"
# "Outliner"
OutlinerEntryBase = {
	name = "army_construction_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				name = "outliner_construction"
				using = outliner_entry_margin
				spacing = 5
				icon = {
					size = { 20 20 }
					texture = "[GetConstructionIcon(Construction.Self)]"
					texture_density = 2
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					fontsize = 13
					using = OnlyVisibleWhenOneInLocation
					text = "[Construction.GetNameWithNoTooltip]"
				}
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					fontsize = 13
					using = OnlyVisibleWhenMultipleInLocation
					text = "CONSTRUCTION_DURATION_DAYS_PLUS_QUEUE"
				}

				OutlinerTextBase = {
					visible = "[Not(Construction.IsStalled)]"
					autoresize = yes
					text = "CONSTRUCTION_DURATION_DAYS"
				}
				OutlinerTextBase = {
					visible = "[Construction.IsStalled]"
					autoresize = yes
					text = "CONSTRUCTION_INFO_STALLED"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 95% 100% }
				using = outliner_entry_margin
				using = OnlyVisibleWhenOneInLocation
				autoresize = no
				align = right
				text = "CONSTRUCTION_DURATION_DAYS"
			}

			OutlinerTextBase = {
				size = { 95% 100% }
				using = outliner_entry_margin
				using = OnlyVisibleWhenMultipleInLocation
				autoresize = no
				align = right
				text = "CONSTRUCTION_DURATION_DAYS_PLUS_QUEUE"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				visible = "[Not(Construction.IsStalled)]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			piechart = {
				visible = "[Construction.IsStalled]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.5 0.5 0.5 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			icon = {
				parentanchor = center
				size = { 50% 50% }
				texture = "[GetConstructionIcon(Construction.Self)]"
				texture_density = 2
			}
		}
	}

	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Construction.GetLocation)]"

		datacontext = "[Construction]"
		tooltipwidget = {
			using = Construction_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_LOCATION"
			on_action = "[ShowLocation(Construction.GetLocation)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "CANCEL_CONSTRUCTION"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)no')]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			click_modifier = shift
			title = "CANCEL_CONSTRUCTION_FORCED"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)yes')]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

# Available contexts
# "Construction"
# "Outliner"
OutlinerEntryBase = {
	name = "navy_construction_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }
			
			hbox = {
				using = outliner_entry_margin
				spacing = 5
				icon = {
					size = { 20 20 }
					texture = "[GetConstructionIcon(Construction.Self)]"
					texture_density = 2
				}
				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					fontsize = 13
					using = OnlyVisibleWhenOneInLocation
					raw_text = "[Construction.GetNameWithNoTooltip]"
				}

				OutlinerTextBase = {
					layoutpolicy_horizontal = expanding
					autoresize = no
					align = left
					fontsize = 13
					using = OnlyVisibleWhenMultipleInLocation
					raw_text = "[Construction.GetNameWithNoTooltip] #L (+[Subtract_int32(Construction.CountAllInLocation, '(int32)1')]) #!"
				}

				OutlinerTextBase = {
					visible = "[Not(Construction.IsStalled)]"
					autoresize = yes
					text = "CONSTRUCTION_DURATION_DAYS"
				}
				
				OutlinerTextBase = {
					visible = "[Construction.IsStalled]"
					autoresize = yes
					text = "CONSTRUCTION_INFO_STALLED"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 95% 100% }
				using = outliner_entry_margin
				using = OnlyVisibleWhenOneInLocation
				autoresize = no
				align = right
				text = "CONSTRUCTION_DURATION_DAYS"
			}

			OutlinerTextBase = {
				size = { 95% 100% }
				using = outliner_entry_margin
				using = OnlyVisibleWhenMultipleInLocation
				autoresize = no
				align = right
				text = "CONSTRUCTION_DURATION_DAYS_PLUS_QUEUE"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				visible = "[Not(Construction.IsStalled)]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.01 0.6 0.9 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			piechart = {
				visible = "[Construction.IsStalled]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetProgress]"
					color = { 0.5 0.5 0.5 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Construction.GetInverseProgress]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}

			icon = {
				parentanchor = center
				size = { 50% 50% }
				texture = "[GetConstructionIcon(Construction.Self)]"
				texture_density = 2
			}
		}
	}

	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightLocation(Construction.GetLocation)]"

		tooltipwidget = {
			using = Construction_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_LOCATION"
			on_action = "[ShowLocation(Construction.GetLocation)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "CANCEL_CONSTRUCTION"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)no')]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			click_modifier = shift
			title = "CANCEL_CONSTRUCTION_FORCED"
			on_action = "[ShowConstructionCancellationDialog(Construction.Self, '(bool)yes')]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

# Available contexts
# "Rebel"
# "Outliner"
OutlinerEntryBase = {
	name = "rebel_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 5

				widget = {
					size = { 16 16 }
					using = bg_circle_piechart
					blockoverride "inside_color" {
						modify_texture = {
							using = color_red_texture
							blend_mode = multiply
						}
					}
		
					icon = {
						texture_density = 2
						size = { 20 20 }
						parentanchor = center
						texture = "[GetRebelsIcon(Rebel.Self)]"
	
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.5
						}
					}
				}

				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					text = "[Rebel.GetNameWithNoTooltip]"
					default_format = "#L"
				}

				OutlinerTextBase = {
					autoresize = yes
					raw_text = "[Rebel.GetProgress|-V%2] ([Rebel.GetLastMonthsProgress|-=%2])"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = right
				text = "[Rebel.GetProgress|-V%2] ([Rebel.GetLastMonthsProgress|-=%2])"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				ignore_layout = yes
				background = {
					texture = "gfx/interface/buttons/checkbox_bg_round.dds"
					texture_density = 2
					using = button_outliner_effect
				}

				widget = {
					size = {100% 100%}
					ignore_layout = yes
					alwaystransparent = yes
					using = circular_wood_frame
				}
			}
			piechart = {
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(Rebel.GetProgress)]"
					color = { 0.9 0.02 0.01 1 }
					alwaystransparent = yes
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(Rebel.GetProgress))]"
					color = { 0.0 0.1 0.1 1 }
					alwaystransparent = yes
				}
			}
			widget = {
				parentanchor = center
				size = { 16 16 }
				using = bg_circle_piechart
				blockoverride "inside_color" {
					modify_texture = {
						using = color_red_texture
						blend_mode = multiply
					}
				}
	
				icon = {
					texture_density = 2
					size = { 17 17 }
					parentanchor = center
					texture = "[GetRebelsIcon(Rebel.Self)]"

					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.5
					}
				}
			}
		}
	}

	blockoverride "button_setup" {
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightRebel(Rebel.Self)]"
		tooltipwidget = {
			using = Rebel_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "OUTLINER_ITEM_SOCIETY_REBELS_TOOLTIP"
			on_action = "[ShowRebel(Rebel.Self)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "OUTLINER_ITEM_SOCIETY_REBELS_LIST_TOOLTIP"
			on_action = "[OpenLateralViewWithParams('country_people', 'subtab = rebels')]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

## DIPLOMACY ENTRIES
# Available contexts
# "Country"
# "OutlinerDiplomacyEntry"
# "Outliner"
###############################################################################

template "diplomacy_expanded_big_content"
{
	OutlinerButtonBase = {
		size = { 95% 100% }

		hbox = {
			using = outliner_entry_margin
			spacing = 5
			country_flag_very_small = {
				datacontext = "[OutlinerDiplomacyEntry.GetTargetCountry]"
			}
			OutlinerTextBase = {
				using = layoutpolicy_expanding
				fontsize = 13
				align = left
				autoresize = no
				text = "[OutlinerDiplomacyEntry.GetText]"
			}

			OutlinerTextBase = {
				align = right
				text = "[OutlinerDiplomacyEntry.GetStatus]"
			}
		}
	}
}

template "diplomacy_expanded_small_content"
{
	OutlinerButtonBase = {
		size = { 95% 100% }

		hbox = {
			using = outliner_entry_margin

			country_flag_very_small = {
				datacontext = "[OutlinerDiplomacyEntry.GetTargetCountry]"
			}
			expand = {}

			OutlinerTextBase = {
				visible = "[And(Not(StringIsEmpty( OutlinerDiplomacyEntry.GetStatus)), EqualTo_CFixedPoint(OutlinerDiplomacyEntry.GetModifier, '(CFixedPoint)0'))]"
				using = layoutpolicy_expanding
				autoresize = no
				align = right
				text = "[OutlinerDiplomacyEntry.GetStatus]"
			}

			OutlinerTextBase = {
				visible = "[Not(EqualTo_CFixedPoint(OutlinerDiplomacyEntry.GetModifier, '(CFixedPoint)0'))]"
				minimumsize = { 35 10 }
				maximumsize = { 35 30 }

				autoresize = yes
				align = right
				block "diplomacy_small_modifier_text" {
					text = "[OutlinerDiplomacyEntry.GetModifier|+=1]"
				}
			}
		}
	}
}

template "diplomacy_icon_content"
{
	OutlinerIconBg = {
		piechart = {
			visible = "[GreaterThan_CFixedPoint(OutlinerDiplomacyEntry.GetTotalNumber, '(CFixedPoint)0')]"
			parentanchor = center
			size = { 80% 80% }
			using = piechart_angles

			pieslice_no_highlight = {
				texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
				value = "[FixedPointToFloat(OutlinerDiplomacyEntry.GetTotalNumber)]"
				color = { 0.3 0.8 0.3 1 }
				alwaystransparent = yes
			}

			pieslice_no_highlight = {
				texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
				value = "[Subtract_float('(float)100.0', FixedPointToFloat(OutlinerDiplomacyEntry.GetTotalNumber))]"
				color = { 0.0 0.1 0.1 1 }
				alwaystransparent = yes
			}
		}
		icon = {
			size = { 60% 60% }
			parentanchor = center
			texture = "[OutlinerDiplomacyEntry.GetIcon]"
		}
	}
}

## GENERIC DIPLOMACY ENTRY
#########################################
OutlinerEntryBase = {
	name = "diplomatic_entry"

	blockoverride "expanded_big_content" {
		using = diplomacy_expanded_big_content
	}

	blockoverride "expanded_small_content" {
		using = diplomacy_expanded_small_content
	}

	blockoverride "icon_content" {
		using = diplomacy_icon_content
	}

	blockoverride "button_setup" {
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "TAB_TOOLTIP_DIPLOMACY_LEFT_CLICK"
			on_action = "[OutlinerDiplomacyEntry.OnClick]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

## IMPROVING OPINION
#########################################

OutlinerEntryBase = {
	name = "improve_opinion_diplomatic_entry"

	blockoverride "expanded_big_content" {
		using = diplomacy_expanded_big_content
	}

	blockoverride "expanded_small_content" {
		using = diplomacy_expanded_small_content
	}

	blockoverride "icon_content" {
		using = diplomacy_icon_content
	}

	blockoverride "button_setup" {
		datacontext = "[OutlinerDiplomacyEntry.GetTemporaryRelationCountry]"
		datacontext = "[OngoingRelationCountry.GetCountry]"
		tooltipwidget = {
			using = improve_opinion_tooltip
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "TAB_TOOLTIP_DIPLOMACY_LEFT_CLICK"
			on_action = "[OutlinerDiplomacyEntry.OnClick]"
		}

		action_tooltip = {
			click_type = right
			click_mode = single
			enabled = "[OutlinerDiplomacyEntry.CanRightClick]"
			title = "CANCEL_IMPROVE_RELATIONTITLE"
			on_action = "[OutlinerDiplomacyEntry.OnRightClick]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

## SPY NETWORK
#########################################

OutlinerEntryBase = {
	name = "spy_network_diplomatic_entry"

	blockoverride "expanded_big_content" {
		using = diplomacy_expanded_big_content
	}

	blockoverride "expanded_small_content" {
		using = diplomacy_expanded_small_content
	}

	blockoverride "icon_content" {
		using = diplomacy_icon_content
	}

	blockoverride "button_setup" {
		datacontext = "[OutlinerDiplomacyEntry.GetTemporaryRelationCountry]"
		tooltipwidget = {
			datacontext = "[OngoingRelationCountry.GetCountry]"
			using = spy_network_tooltip
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "TAB_TOOLTIP_DIPLOMACY_LEFT_CLICK"
			on_action = "[OutlinerDiplomacyEntry.OnClick]"
		}

		action_tooltip = {
			click_type = right
			click_mode = single
			enabled = "[OutlinerDiplomacyEntry.CanRightClick]"
			title = "CANCEL_BUILD_SPYNETWORKTITLE"
			on_action = "[OutlinerDiplomacyEntry.OnRightClick]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

## CASUS BELLI CREATION
#########################################

OutlinerEntryBase = {
	name = "casus_belli_creation_diplomatic_entry"

	blockoverride "expanded_big_content" {
		using = diplomacy_expanded_big_content
	}

	blockoverride "expanded_small_content" {
		using = diplomacy_expanded_small_content
	}

	blockoverride "icon_content" {
		using = diplomacy_icon_content
	}

	blockoverride "button_setup" {
		datacontext = "[OutlinerDiplomacyEntry.GetTemporaryRelationCountry]"
		tooltipwidget = {
			using = casus_belli_tooltip
			blockoverride "casus_belli_tooltip_countrycontext" {
				datacontext = "[OngoingRelationCountry.GetCountry]"
			}
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "TAB_TOOLTIP_DIPLOMACY_LEFT_CLICK"
			on_action = "[OutlinerDiplomacyEntry.OnClick]"
		}

		action_tooltip = {
			click_type = right
			click_mode = single
			enabled = "[OutlinerDiplomacyEntry.CanRightClick]"
			title = "CANCEL_CREATE_CASUS_BELLITITLE"
			on_action = "[OutlinerDiplomacyEntry.OnRightClick]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

## CURRY FAVORS
#########################################

OutlinerEntryBase = {
	name = "curry_favors_diplomatic_entry"

	blockoverride "expanded_big_content" {
		using = diplomacy_expanded_big_content
	}

	blockoverride "expanded_small_content" {
		using = diplomacy_expanded_small_content
	}

	blockoverride "icon_content" {
		using = diplomacy_icon_content
	}

	blockoverride "button_setup" {
		datacontext = "[OutlinerDiplomacyEntry.GetTemporaryRelationCountry]"
		tooltipwidget = {
			datacontext = "[OngoingRelationCountry.GetCountry]"
			using = currying_favors_tooltip
		}

		action_tooltip = {
			click_type = left
			click_mode = single
			title = "TAB_TOOLTIP_DIPLOMACY_LEFT_CLICK"
			on_action = "[OutlinerDiplomacyEntry.OnClick]"
		}

		action_tooltip = {
			click_type = right
			click_mode = single
			enabled = "[OutlinerDiplomacyEntry.CanRightClick]"
			title = "CANCEL_CURRY_FAVORSTITLE"
			conditions = "[OutlinerDiplomacyEntry.CanRightClickConditions]"
			on_action = "[OutlinerDiplomacyEntry.OnRightClick]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

## ANNEXATION
#########################################

OutlinerEntryBase = {
	name = "annexation_diplomatic_entry"

	blockoverride "expanded_big_content" {
		using = diplomacy_expanded_big_content
	}

	blockoverride "expanded_small_content" {
		using = diplomacy_expanded_small_content
		blockoverride "diplomacy_small_modifier_text" {
			raw_text = "[OutlinerDiplomacyEntry.GetTotalNumber|1]%"
		}
	}

	blockoverride "icon_content" {
		datacontext = "[OutlinerDiplomacyEntry.GetTargetCountry]"
		OutlinerIconBg = {
			piechart = {
				visible = "[GreaterThan_CFixedPoint(OutlinerDiplomacyEntry.GetTotalNumber, '(CFixedPoint)0')]"
				parentanchor = center
				size = { 80% 80% }
				using = piechart_angles

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Country.GetDiplomacy.GetBeingAnnexedProgress]"
					color = { 0.01 0.6 0.9 1 }
					alpha = 1
				}

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', Country.GetDiplomacy.GetBeingAnnexedProgress)]"
					color = { 0.0 0.1 0.1 1 }
					alpha = 1
				}
			}
			icon = {
				size = { 70% 70% }
				parentanchor = center
				texture = "[OutlinerDiplomacyEntry.GetIcon]"
			}
		}
	}

	blockoverride "button_setup" {
		datacontext = "[OutlinerDiplomacyEntry.GetTargetCountry]"
		tooltipwidget = {
			using = Annexation_tooltip
		}
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "TAB_TOOLTIP_DIPLOMACY_LEFT_CLICK"
			on_action = "[OutlinerDiplomacyEntry.OnClick]"
		}

		action_tooltip = {
			click_type = right
			click_mode = single
			enabled = "[And(OutlinerDiplomacyEntry.CanRightClick, Player.GetDiplomacy.HasDiplomats)]"
			title = "ABORTANNEXTITLE"
			on_action = "[OutlinerDiplomacyEntry.OnRightClick]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

###############################################################################

# Available contexts
# "ColonialCharter"
# "Outliner"
OutlinerEntryBase = {
	name = "charter_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				
				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					raw_text = "@province! [ColonialCharter.GetProvinceDefinition.GetNameWithNoTooltip]" 
					default_format = "#yellow_titles"
				}

				hbox = {
					expand = {}
					spacing = 5
					OutlinerTextBase = {
						minimumsize = { 65 -1 }
						maximumsize = { 65 -1 }
						autoresize = yes
						raw_text = "[ColonialCharter.GetMonthlyMigration]@population!"
					}
					OutlinerTextBase = {
						minimumsize = { 65 -1 }
						maximumsize = { 65 -1 }
						autoresize = yes
						raw_text = "[ColonialCharter.GetProgress|2]%"
					}
				}
				
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = right
				raw_text = "[ColonialCharter.GetMonthlyMigration]@population!"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			piechart = {
				size = { 80% 80% }
				using = piechart_angles
				parentanchor = center
	
				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
					value = "[ColonialCharter.GetProgress]"
					color = { 1 1 1 1 }
				}
	
				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
					value = "[Subtract_float('(float)100.0', ColonialCharter.GetProgress)]"
					color = { 1 1 1 1 }
				}

				icon = {
					size = { 65% 65% }
					parentanchor = center
					texture = "gfx/interface/icons/flat_icons/geopolitics/available_colonies.dds"
				}
				using = bg_circle_piechart
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			using = colonial_charter_progress_tooltip
		}
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightProvinceDefinition(ColonialCharter.GetProvinceDefinition)]"
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_COLONY"
			on_action = "[ShowProvinceDefinition(ColonialCharter.GetProvinceDefinition)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "AUTOMATED_SYSTEM_COLONIES_CLICK"
			on_action = "[OpenLateralViewWithParams('expansion', 'low_tab = colonisation')]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

# Available contexts
# "Exploration"
# "Outliner"
OutlinerEntryBase = {
	name = "exploration_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				spacing = 4

				portrait_standard_head_button = {
					datacontext = "[Exploration.GetCharacter]"
					size = { 28 28 }

					action_tooltip = {
						click_type = left
						click_mode = single
						title = "change_explorer"
					}

					action_button = {
						parentanchor = center
						size = { 100% 90% }
						actor = "[Player]"
						enabled = yes
						parameter = {
							parameter_name = "target"
							parameter_value = "[Exploration.GetArea]"
						}
						left_action = { action_name = "change_explorer" }
						tooltip_enabled = no
					}

					blockoverride "character_tooltip" { 
						tooltipwidget = {
							BasicFunctionalTooltip = {}
						}
					}

					blockoverride "character_contextmenu" {}
					blockoverride "button_setup" {}
					blockoverride "rightclick" {}
				}

				icon = {		
					size = { 20 20 }
					visible = "[Exploration.GetArea.IsNaval]"					
					texture = "gfx/interface/icons/flat_icons/geopolitics/exploration_sea.dds"
				}

				icon = {
					size = { 20 20 }
					visible = "[Not(Exploration.GetArea.IsNaval)]"					
					texture = "gfx/interface/icons/flat_icons/geopolitics/exploration_land.dds"
				}
				
				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					raw_text = "[Exploration.GetArea.GetNameWithNoTooltip] ([Exploration.GetArea.GetRegion.GetNameWithNoTooltip])"
					default_format = "#L"
				}

				OutlinerTextBase = {
					layoutpolicy_vertical = expanding
					autoresize = yes
					text = "[Exploration.GetEstimatedTimeLeft]"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = right
				# text = "[Exploration.GetCurrentProgress|+=2]"
				text = "[Exploration.GetEstimatedTimeLeft]"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			piechart = {
				parentanchor = center
				size = { 80% 80% }

				using = piechart_angles
				using = bg_circle_piechart

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[FixedPointToFloat(Exploration.GetCurrentProgress)]"
					using = color_value_progress_blue
					alpha = 0.9
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float(FixedPointToFloat(Exploration.GetExplorationTime), FixedPointToFloat(Exploration.GetCurrentProgress))]"
					using = color_value_progress_gray
					alpha = 0.9
				}

				icon = {
					parentanchor = center
					size = { 76% 76% }
					visible = "[Exploration.GetArea.IsNaval]"
					texture = "gfx/interface/icons/flat_icons/geopolitics/exploration_sea.dds"

				}

				icon = {
					parentanchor = center
					size = { 75% 75% }
					visible = "[Not(Exploration.GetArea.IsNaval)]"
					texture = "gfx/interface/icons/flat_icons/geopolitics/exploration_land.dds"
				}
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			using = exploration_total_progress_tt
		}
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightArea(Exploration.GetArea)]"
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_AREA"
			on_action = "[PanToLocation(Exploration.GetArea.GetCapital)]"
			on_action = "[OpenLateralViewWithParams('expansion', 'low_tab = exploration')]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

# Available contexts
# "Privateer"
# "Outliner"
OutlinerEntryBase = {
	name = "privateer_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			hbox = {
				using = outliner_entry_margin
				OutlinerTextBase = {
					using = layoutpolicy_expanding
					autoresize = no
					align = left
					text = "[Privateer.GetArea.GetNameWithNoTooltip]"
				}

				OutlinerTextBase = {
					autoresize = yes
					raw_text = "[Privateer.GetPowerChange|+=%]"
				}
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = left
				raw_text = "[Privateer.GetPowerChange|+=%]"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {
			piechart = {
				using = bg_circle
				size = { 30 30 }
				minimumsize = { 30 30 }
				using = piechart_angles
				using = bg_circle_piechart

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
					value = "[FixedPointToFloat(Privateer.GetPower)]"
					color = { 1 1 1 1 }
				}

				pieslice_no_highlight = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
					value = "[Subtract_float('(float)1.0', FixedPointToFloat(Privateer.GetPower))]"
					color = { 1 1 1 1 }
				}

				icon = {
					size = { 20 20 }
					parentanchor = center
					texture = "gfx/interface/icons/flat_icons/geopolitics/privateer.dds"
					texture_density = 2
					alpha = 1
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}
			}
		}
	}

	blockoverride "button_setup" {
		tooltipwidget = {
			using = Privateer_tooltip
		}
		onmousehierarchyenter = "[PdxGuiWidget.SetHighlightArea(Privateer.GetArea)]"
		action_tooltip = {
			click_type = left
			click_mode = single
			title = "GO_TO_AREA"
			on_action = "[PanToLocation(Privateer.GetArea.GetCapital)]"
		}
		action_tooltip = {
			click_type = right
			click_mode = single
			title = "OUTLINER_ITEM_GEOPOLITICS_PRIVATEERS_TOOLTIP"
			on_action = "[OpenLateralViewWithParams('maritime', 'low_tab = privateers')]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

# THIS ENTRY IS A TEMPLATE
###########################################################

OutlinerEntryBase = {
	name = "empty_entry"

	blockoverride "expanded_big_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = right
				raw_text = "-"
			}
		}
	}

	blockoverride "expanded_small_content" {
		OutlinerButtonBase = {
			size = { 95% 100% }

			OutlinerTextBase = {
				size = { 100% 100% }
				using = outliner_entry_margin
				autoresize = no
				align = right
				raw_text = "-"
			}
		}
	}

	blockoverride "icon_content" {
		OutlinerIconBg = {}
	}

	blockoverride "button_setup" { tooltip_enabled = no }

	blockoverride "category_color" {
		using = color_government_texture
	}
}

# CATEGORY ENTRY
###########################################################

# Available contexts
# "OutlinerCategoryEntry"
# "Outliner"

# CATEGORY TEMPLATES
###########################################################

template category_big_template {
	OutlinerCategoryButtonBase = {
		size = { 100% 100% }

		icon = {
			size = {100% 100%}
			ignore_layout = yes
			alwaystransparent = yes
			texture = "gfx/interface/buttons/outliner/outliner_goldframe.dds"
			texture_density = 2
			spriteType = corneredstretched
			spriteborder = { 30 0 }
		}

		hbox = {
			using = outliner_entry_margin
			margin_right = 0
			margin_left = 15
			spacing = 5

			block "pin_object" {
				widget = {
					size = { 18 18 }
					visible = "[Outliner.IsSettingsShowing]"
					button_pin = {

						size = { 100% 100% }

						onclick = "[OutlinerCategoryEntry.TogglePin]"
						checked = "[OutlinerCategoryEntry.IsPinned]"
						tooltipwidget = {
							LeftClickButtonTooltip = {
								# block "entry_count" {
									text = "[SelectLocalization(OutlinerCategoryEntry.IsPinned, 'UNPIN_CATEGORY', 'PIN_CATEGORY')]"
								# }
							}
						}
					}
				}
			}

			icon = {
				size = { 20 20 }
				block "category_icon_texture" { visible = no }
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.3
				}
			}

			OutlinerTextBase = {
				using = layoutpolicy_expanding
				autoresize = no
				fontsize = 13
				align = left
				block "category_name" {
					text = "[OutlinerCategoryEntry.GetName|T]"
				}
			}
			
			block "category_big_extra_content" {}

			hbox = {
				layoutpolicy_vertical = expanding
				spacing = -5
				righttoleft = yes

				widget = {
					size = {30 -1}
					layoutpolicy_vertical = expanding
					background = {
						texture = "gfx/interface/component_tiles/balance_card_bg.dds"
						texture_density = 2
						using = button_outliner_effect
					}
					widget = {
						size = {100% 100%}
						ignore_layout = yes
						alwaystransparent = yes
						using = bg_cabinet_card_frame
					}

					OutlinerTextBase = {
						parentanchor = center
						size = {100% 100%}
						autoresize = yes
						block "outliner_category_count" {
							text = "[OutlinerCategoryEntry.GetEntryCount]"
						}
						default_format = "#T"
					}
				}

				widget = {
					size = { 23 23 }
					background = {
						texture = "gfx/interface/buttons/checkbox_bg_round.dds"
						texture_density = 2
						using = button_outliner_effect
					}

					icon = {
						parentanchor = center
						block "category_is_closed_visible" {
							visible = "[OutlinerCategoryEntry.IsClosed]"
						}
						size = { 16 16 }
						texture = "gfx/interface/buttons/flats/button_simple_right.dds"
						using = color_gold
						modify_texture = {
							using = overlay_window_texture
							blend_mode = overlay
							alpha = 1
						}

						glow = {
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					icon = {
						parentanchor = center
						block "category_is_opened_visible" {
							visible = "[OutlinerCategoryEntry.IsOpened]"
						}
						size = { 16 16 }
						position = { 0 2 }
						texture = "gfx/interface/buttons/flats/button_simple_down.dds"
						using = color_gold
						modify_texture = {
							using = overlay_window_texture
							blend_mode = overlay
							alpha = 1
						}

						glow = {
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}
					widget = {
						size = {100% 100%}
						ignore_layout = yes
						alwaystransparent = yes
						using = circular_wood_frame
					}
				}
			}
		}
	}
}

template category_small_template {
	OutlinerCategoryButtonBase = {
		size = { 100% 100% }
		icon = {
			size = { 100% 100% }
			ignore_layout = yes
			alwaystransparent = yes
			texture = "gfx/interface/buttons/outliner/outliner_goldframe.dds"
			texture_density = 2
			spriteType = corneredstretched
			spriteborder = { 30 0 }
		}

		hbox = {
			spacing = 5
			margin_left = 15

			block "pin_object" {
				widget = {
					size = { 18 18 }
					visible = "[Outliner.IsSettingsShowing]"
					button_pin = {
						size = { 100% 100% }

						onclick = "[OutlinerCategoryEntry.TogglePin]"
						checked = "[OutlinerCategoryEntry.IsPinned]"
						tooltipwidget = {
							LeftClickButtonTooltip = {
								blockoverride "onclick_text" {
									text = "[SelectLocalization(OutlinerCategoryEntry.IsPinned, 'UNPIN_CATEGORY', 'PIN_CATEGORY')]"
								}
							}
						}
					}
				}
			}

			icon = {
				size = { 20 20 }
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.3
				}
				block "small_category_icon_texture" { visible = no }
			}

			block "category_small_extra_content" { expand = {} }
			
			hbox = {
				layoutpolicy_vertical = expanding
				spacing = -5
				righttoleft = yes
				widget = {
					size = {30 -1}
					layoutpolicy_vertical = expanding
					background = {
						texture = "gfx/interface/component_tiles/balance_card_bg.dds"
						texture_density = 2
						using = button_outliner_effect
					}
					widget = {
						size = {100% 100%}
						ignore_layout = yes
						alwaystransparent = yes
						using = bg_cabinet_card_frame
					}

					OutlinerTextBase = {
						parentanchor = center
						size = {100% 100%}
						autoresize = yes
						block "outliner_category_count" { text = "[OutlinerCategoryEntry.GetEntryCount|T]"}
					}
				}
				widget = {
					size = { 23 23 }
					background = {
						texture = "gfx/interface/buttons/checkbox_bg_round.dds"
						texture_density = 2
						using = button_outliner_effect
					}
					icon = {
						parentanchor = center
						block "category_is_closed_visible" { visible = "[OutlinerCategoryEntry.IsClosed]" }

						size = { 16 16 }
						texture = "gfx/interface/buttons/flats/button_simple_right.dds"
						using = color_gold
						modify_texture = {
							using = overlay_window_texture
							blend_mode = overlay
							alpha = 1
						}

						glow = {
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					icon = {
						parentanchor = center
						block "category_is_opened_visible" { visible = "[OutlinerCategoryEntry.IsOpened]" }
						size = { 16 16 }
						position = { 0 2 }
						texture = "gfx/interface/buttons/flats/button_simple_down.dds"
						using = color_gold
						modify_texture = {
							using = overlay_window_texture
							blend_mode = overlay
							alpha = 1
						}

						glow = {
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}
					widget = {
						size = {100% 100%}
						ignore_layout = yes
						alwaystransparent = yes
						using = circular_wood_frame
					}
				}
			}
		}
	}
}

# notclickable icon
template category_icon_template {
	visible = "[Not(Or3(Outliner.IsSettingsShowing, Outliner.IsMouseOver, And(Outliner.IsPinned, Not(Outliner.IsAnyOccludingPanelOpened))))]"

	widget = {
		size = { 100% 100% }
		background = {
			texture = "gfx/interface/component_tiles/balance_card_bg.dds"
			texture_density = 2
			using = button_outliner_effect
		}
		widget = {
			size = {100% 100%}
			ignore_layout = yes
			alwaystransparent = yes
			using = bg_cabinet_card_frame
		}
		OutlinerTextBase = {
			size = { 100% 100% }
			autoresize = no
			align = center
			block "outliner_category_count" { text = "[OutlinerCategoryEntry.GetEntryCount]" }
		}
	}
}

# ENTRIES
###########################################################

OutlinerEntryBase = {
	name = "category_entry"

	blockoverride "expanded_big_content"  { using = category_big_template }
	blockoverride "expanded_small_content" { using = category_small_template }
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_light_paper_texture
	}
}

OutlinerEntryBase = {
	name = "player_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/outliner/human_player.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/outliner/human_player.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }
	blockoverride "pin_object" { expand = {} }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_government_texture
	}
}

OutlinerEntryBase = {
	name = "siege_category_entry"

	blockoverride "expanded_big_content"  { using = category_big_template }
	blockoverride "expanded_small_content" { using = category_small_template }
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

OutlinerEntryBase = {
	name = "unit_army_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('army')]"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('army')]"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

OutlinerEntryBase = {
	name = "unit_navy_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/declare_war/navy.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/declare_war/navy.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

OutlinerEntryBase = {
	name = "government_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/alerts_icons/government.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/alerts_icons/government.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_government_texture
	}
}


OutlinerEntryBase = {
	name = "market_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/map_modes/market.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/map_modes/market.dds"
		}
	 }
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_economy_texture
	}
}

OutlinerEntryBase = {
	name = "player_construction_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('building')]"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('building')]"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_production_texture
	}
}

OutlinerEntryBase = {
	name = "estate_construction_category_entry"

	blockoverride "expanded_big_content"  { 
		using = category_big_template 
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('estate')]"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('estate')]"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_production_texture
	}
}

OutlinerEntryBase = {
	name = "army_construction_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/alerts_icons/alert_low_army_maintenance.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/alerts_icons/alert_low_army_maintenance.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

OutlinerEntryBase = {
	name = "navy_construction_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/alerts_icons/alert_low_navy_maintenance.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/alerts_icons/alert_low_navy_maintenance.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

OutlinerEntryBase = {
	name = "rebel_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('rebels')]"
		}
	}
	blockoverride "expanded_small_content" {
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('rebels')]"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_military_texture
	}
}

OutlinerEntryBase = {
	name = "diplomacy_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/map_modes/diplomacy.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/map_modes/diplomacy.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_diplomacy_texture
	}
}

OutlinerEntryBase = {
	name = "charter_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/geopolitics/available_colonies.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/geopolitics/available_colonies.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

OutlinerEntryBase = {
	name = "exploration_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "[GetConceptTexture('exploration')]"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "[GetConceptTexture('exploration')]"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}

OutlinerEntryBase = {
	name = "privateer_category_entry"

	blockoverride "expanded_big_content"  {
		using = category_big_template
		blockoverride "category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/geopolitics/privateer.dds"
		}
	}
	blockoverride "expanded_small_content" { 
		using = category_small_template 
		blockoverride "small_category_icon_texture" {
			texture = "gfx/interface/icons/flat_icons/geopolitics/privateer.dds"
		}
	}
	blockoverride "icon_content" { using = category_icon_template }

	blockoverride "button_setup" {
		tooltipwidget = { BasicFunctionalTooltip = {} }
		action_tooltip = {
			title = "[SelectLocalization(OutlinerCategoryEntry.IsOpened, 'CLOSE_CATEGORY', 'EXPAND_CATEGORY')]"
			on_action = "[OutlinerCategoryEntry.Toggle]"
		}
	}

	blockoverride "category_color" {
		using = color_geopolitics_texture
	}
}
