###########################################################################
###########################################################################
# TYPES AND TEMPLATES
###########################################################################

@alert_wide = 45
@tooltip_title_wide = 420
@tooltip_title_high = 20
@tooltip_inner_margin = 10
@tooltip_inner_wide =  @[tooltip_title_wide - tooltip_inner_margin * 2]

template green_diplo_icon {
	textcontext = "ALERT_PRIORITY_GREEN"
	texture = "gfx/interface/alerts/dip_green.dds"
	spriteType = Corneredstretched
	spriteborder_top = 55
	spriteborder_bottom = 16
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" { 
		on_start = "[PlayAudioEffect('UI_alert_appear_green_diplo')]"
	}
}

# template yellow_diplo_icon {
# 	textcontext = "ALERT_PRIORITY_YELLOW"
# 	texture = "gfx/interface/alerts/dip_yellow.dds"
# 	spriteType = Corneredstretched
# 	spriteborder_top = 55
# 	spriteborder_bottom = 16
# 	texture_density = 4
# 	using = snd_UI_hover_alert
# 	blockoverride "alert_appear_default_soundeffect" { 
# 		on_start = "[PlayAudioEffect('UI_alert_appear_yellow_diplo')]"
# 	}
# }

# template red_diplo_icon {
# 	textcontext = "ALERT_PRIORITY_RED"
# 	texture = "gfx/interface/alerts/dip_red.dds"
# 	spriteType = Corneredstretched
# 	spriteborder_top = 55
# 	spriteborder_bottom = 16
# 	texture_density = 4
# 	using = snd_UI_hover_alert
# 	blockoverride "alert_appear_default_soundeffect" { 
# 		on_start = "[PlayAudioEffect('UI_alert_appear_red_diplo')]"
# 	}
# }

template blue_alert {
	textcontext = "ALERT_PRIORITY_BLUE"
	texture = "gfx/interface/alerts/alert_blue.dds"
	spriteType = Corneredstretched
	spriteborder_top = 60
	spriteborder_bottom = 13
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" { 
		on_start = "[PlayAudioEffect('UI_alert_appear_blue')]"
	}
}

template red_alert {
	textcontext = "ALERT_PRIORITY_RED"
	texture = "gfx/interface/alerts/alert_red.dds"
	spriteType = Corneredstretched
	spriteborder_top = 47
	spriteborder_bottom = 25
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" {
		on_start = "[PlayAudioEffect('UI_alert_appear_red')]"
	}
}

template red_war_alert {
	textcontext = "ALERT_PRIORITY_WAR"
	texture = "gfx/interface/alerts/alert_red.dds"
	spriteType = Corneredstretched
	spriteborder_top = 47
	spriteborder_bottom = 25
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" {
		on_start = "[PlayAudioEffect('UI_alert_appear_red')]"
	}
}

template black_alert {
	textcontext = "ALERT_PRIORITY_SITUATIONS"
	texture = "gfx/interface/alerts/alert_black.dds"
	spriteType = Corneredstretched
	spriteborder_top = 55
	spriteborder_bottom = 21
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" {
		on_start = "[PlayAudioEffect('UI_alert_appear_black')]"
	}
}

template yellow_alert {
	textcontext = "ALERT_PRIORITY_YELLOW"
	texture = "gfx/interface/alerts/alert_yellow.dds"
	spriteType = Corneredstretched
	spriteborder_top = 50
	spriteborder_bottom = 24
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" { 
		on_start = "[PlayAudioEffect('UI_alert_appear_yellow')]"
	}
}

# template personalized_colour_alert {
# 	textcontext = "ALERT_PRIORITY_PERSONALIZED"
# 	block "personalized_colour_alert_texture" { texture = "gfx/interface/alerts/alert_yellow.dds" }
# 	spriteType = Corneredstretched
# 	spriteborder_top = 50
# 	spriteborder_bottom = 24
# 	texture_density = 4
# 	using = snd_UI_hover_alert
# 	blockoverride "alert_appear_default_soundeffect" { 
# 		on_start = "[PlayAudioEffect('UI_alert_appear_yellow')]"
# 	}
# }

template green_alert {
	textcontext = "ALERT_PRIORITY_GREEN"
	texture = "gfx/interface/alerts/alert_green.dds"
	spriteType = Corneredstretched
	spriteborder_top = 50
	spriteborder_bottom = 21
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" { 
		on_start = "[PlayAudioEffect('UI_alert_appear_green')]"
	}
}

template purple_alert {
	textcontext = "ALERT_PRIORITY_SITUATIONS"
	texture = "gfx/interface/alerts/alert_purple.dds"
	spriteType = Corneredstretched
	spriteborder_top = 55
	spriteborder_bottom = 21
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" { 
		on_start = "[PlayAudioEffect('UI_alert_appear_purple')]"
	}
}

template orange_alert {
	textcontext = "ALERT_PRIORITY_ORANGE"
	texture = "gfx/interface/alerts/alert_orange.dds"
	spriteType = Corneredstretched
	spriteborder_top = 55
	spriteborder_bottom = 18
	texture_density = 4
	using = snd_UI_hover_alert
	blockoverride "alert_appear_default_soundeffect" { 
		on_start = "[PlayAudioEffect('UI_alert_appear_orange')]"
	}
}

template alert_banner_anim {
	state = {
		name = alert_drop
		position_y = -80
		next = alert_drop_1
		on_start = "[PdxGuiWidget.SetAlertSmoothPositioning('(bool)no')]"
	}
	state = {
		name = alert_drop_1
		duration = 0.4
		position_y = 0
		bezier = { 1.0 0.0 1.0 0.0 }
		using = snd_UI_alert_appear_default
		next = alert_drop_2
	}
	state = {
		name = alert_drop_2
		duration = 0.2
		position_y = -25
		bezier = { 0.0 0.7 0.3 1.0 }
		next = alert_drop_3
	}
	state = {
		name = alert_drop_3
		duration = 0.2
		bezier = { 0.8 0.0 1.0 0.2 }
		position_y = 0
		next = alert_drop_4
	}
	state = {
		name = alert_drop_4
		position_y = 0
	}
}

template alert_banner_setup {
	tooltipmeta = {
		block "icon_texture" {}
	}

	vbox = {
		set_parent_size_to_minimum = yes
		
		widget = {
			size = { @alert_wide 70 }
			vbox = {
				spacing = 5
				block "alert_more_icons_before" {}

				icon = {
					size = { 30 30 }
					block "alert_banner_texture" { texture = "[PdxGuiWidget.GetTooltipMetaTexture]" }
					alwaystransparent = yes
					texture_density = 2
					alpha = 1
		
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}

					block "icon_setup" {}
				}
		
				block "alert_more_icons_after" {}
			}
		}

		block "alert_is_new_padding" {
			widget = {
				layoutpolicy_horizontal = expanding
				block "alert_is_new_padding_visible" {
					visible = "[AlertItem.IsNew]"
				}
				
				size = { -1 8 }
				
				state = {
					name = _show
					duration = 0.2
					bezier = { 0.0 1.0 0.0 1.0 }
					size = { -1 8 }
				}

				state = {
					name = _hide
					duration = 0.2
					bezier = { 0.0 1.0 0.0 1.0 }
					size = { -1 5 }
				}
			}
		}
	}
}

template progress_banner_setup {
	tooltipmeta = {
		block "icon_texture" {}
	}

	vbox = {
		set_parent_size_to_minimum = yes
		
		widget = {
			size = { @alert_wide 75 }
			vbox = {
				spacing = 5
				block "alert_more_icons_before" {}

				widget = {
					size = { 35 35 }
					using = marker_bg_circle

					piechart = {
						parentanchor = center
						size = { 90% 90% }
						using = piechart_angles

						pieslice = {
							texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
							block "pieslice_progress_setup" {}
							color = { 0.01 0.6 0.9 1 }
							alwaystransparent = yes
						}

						pieslice = {
							texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
							block "pieslice_background_setup" {}
							color = { 0.0 0.1 0.0 1 }
							alwaystransparent = yes
						}
					}

					icon = {
						size = { 75% 75% }
						texture = "[PdxGuiWidget.GetTooltipMetaTexture]"
						parentanchor = center
						allow_outside = yes
						alwaystransparent = yes
						texture_density = 2
						alpha = 1

						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.5
						}

						block "icon_setup" {}
					}
				}

				block "alert_more_icons_after" {}
			}
		}

		block "alert_is_new_padding" {
			widget = {
				layoutpolicy_horizontal = expanding

				block "alert_is_new_visible" {
					# override in alert itself
					visible = no
				}
				size = { -1 8 }
				
				state = {
					name = _show
					duration = 0.2
					bezier = { 0.0 1.0 0.0 1.0 }
					size = { -1 8 }
				}

				state = {
					name = _hide
					duration = 0.2
					bezier = { 0.0 1.0 0.0 1.0 }
					size = { -1 5 }
				}
			}
		}
	}
}

template alert_tooltip {
	tooltipwidget = {
		SimpleContextualTooltipType = {
			lowpriotextcontext = "[AlertItem.GetTooltip]"

			# blockoverride "tooltip_extra_content" {
			# 	TooltipTutorialTextBlock = {
			# 		visible = "[AlertItem.ShowHint]"
			# 		blockoverride "block_title" {}
			# 		# blockoverride "block_title_text" {
			# 		# 	text = "[AlertItem.GetHintTitle]"
			# 		# }

			# 		blockoverride "text" {
			# 			text = "[AlertItem.GetHintText]"
			# 		}
			# 	}
			# }
		}
	}
}

template alert_list_tooltip {
	tooltipwidget = {
		SimpleContextualStringPairTooltipType = {
			lowpriotextcontext = "[AlertItem.GetTooltip]"

			# blockoverride "tooltip_extra_content" {
			# 	ToolTipHintBox = {
			# 		visible = "[AlertItem.ShowHint]"
			# 		blockoverride "hint_title" {
			# 			text = "[AlertItem.GetHintTitle]"
			# 		}

			# 		blockoverride "hint_text" {
			# 			text = "[AlertItem.GetHintText]"
			# 		}
			# 	}
			# }
		}
	}
}

template alert_list_tooltip_with_hint_content {
	SimpleContextualStringPairTooltipType = {
		lowpriotextcontext = "[AlertItem.GetTooltip]"

		# blockoverride "tooltip_extra_content" {
		# 	ToolTipHintBox = {
		# 		visible = "[AlertItem.ShowHint]"
		# 		blockoverride "hint_title" {
		# 			text = "[AlertItem.GetHintTitle]"
		# 		}

		# 		blockoverride "hint_text" {
		# 			text = "[AlertItem.GetHintText]"
		# 		}
		# 	}
		# }

		blockoverride "shift_left_extra" {
			replacement_shift_item = {}
		}
	}
}

types AlertManager {
	
	type replacement_shift_item = container {
		# text_single = {
		# 	block "contextual_hint_text" { visible = no }
		# 	minimumsize = { -1 26 }
		# 	using = Font_Size_Very_Small
		# 	default_format = "#Color_Yellow"
		# 	parentanchor = vcenter
		# 	margin_right = 3
		# 	margin_left = 2
		# }

		text_single = {
			# block "hint_text_indicator" { 
				text = "OPEN_HINT_TEXT"
			# }
			using = Font_Size_Very_Small
			minimumsize = { -1 26 }
			default_format = "#Color_Yellow"
			parentanchor = vcenter
			margin_right = 3
			margin_left = 2
		}
	}

	type alert_banner = button {
		ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"

		using = alert_banner_setup
		using = alert_banner_anim

		onmousehierarchyenter = "[AlertItem.SetAsOld]"

		block "action_tooltip_left" {
			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
			}
		}

		#block "action_tooltip_right" {
			action_tooltip = {
				click_type = right
				title = "ALERT_CTA_RIGHT_CLICK"
				clicksound = "UI_alert_discard"
				on_action = "[AlertItem.Hide]"
			}
		#}

		using = alert_tooltip
		using = snd_UI_alert_hide

		modify_texture = {
			visible = "[AlertItem.IsNew]"
			alpha = "[GetHighlightAnim('4.0, 0.1, 0.25')]"
		}
	}

	type situation_banner = button {
		ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"

		size = { @alert_wide 90 }
		using = alert_banner_anim
		using = snd_UI_alert_openAndCycle
		using = snd_UI_alert_hide
		using = snd_UI_alert_situation
		
		tooltipmeta = {
			block "icon_texture" {}
		}

		block "icon_texture_obj" {
			icon = {
				parentanchor = center
				size = { 35 35 }
				block "icon_texture" {}

				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.2
				}
			}
		}
	}

	# type simple_banner = button {
	# 	using = alert_banner_setup
	# }

	###########################################################################
	# ALERT MANAGER
	###########################################################################

	type alert_manager = alerts_layout {
		name = "alert_manager"
		visible = "[Not(IsLobbyOpen)]"
		ignoreinvisible = yes
		allow_outside = yes
		spacing = -2
		scissor = yes
		distance = 10
		speed = 150

		righttoleft = no #left side
		bottomtotop = no #right side

		datacontext = "[InGameTopbar.AccessAlertManager]"

		###########################################################################
		# RED ALERTS
		###########################################################################

		###########################
		# Member Leaving Union
		###########################

		alert_banner = {
			name = "member_leaving_union"

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/international_organizations/union.dds"
						}
					}
				
					blockoverride "title_text" {
						text = "ALERT_HAS_MEMBER_LEAVING_UNION_TITLE"
					}
					blockoverride "tooltip_content" {
						TooltipBlockList = {
							textcontext = "[AlertItem.GetTooltip]"
						}
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_HAS_MEMBER_LEAVING_UNION_TEXT"
							}
						}
					}
				}
			}

			action_tooltip = {
				click_type = left
				title = "ALERT_HAS_MEMBER_LEAVING_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenInternationalOrganizationView(AlertMemberLeavingUnion.GetUnion)]"
			}

			using = red_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/international_organizations/union.dds"
			}
		}

		###########################
		# Disease affecting your country
		###########################

		alert_banner = {
			name = "has_disease"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('diseases')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('geography_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = red_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/disease_outbreak.dds"
			}
		}

		###########################
		# Constructions missing input
		###########################

		alert_banner = {
			name = "has_constructions_missing_input"

			using = red_alert

			tooltipwidget = { 
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_CONSTRUCTIONS_MISSING_INPUT"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/alerts_icons/constructions_missing_input.dds"
						
						}
					}
					blockoverride "concept_link" {
						text = "[constructions|E]"
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_CONSTRUCTIONS_MISSING_INPUT_TEXT"
							}
			
							blockoverride "textblock_background_tint"  {
								modify_texture = {
									using = color_red_texture
								}
							}
						}

						vbox = { #1 Market
							layoutpolicy_horizontal = expanding
							datacontext = "[GetCountryNeeds(Player.Self)]"
							datamodel = "[CountryNeeds.GetMarketNeeds]"
							visible = "[EqualTo_int32(CountryNeeds.GetMarketGovernmentMissingGoodsCount, '(int32)1' )]" 
							spacing = 12
							
							item = {
								TooltipStringPairList = {
									blockoverride "block_title" {
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]:"
									}
									visible = "[MarketCountryNeeds.HasGovernmentMissingGoods]"
									textcontext = "[MarketCountryNeeds.GetGovernmentMissingGoodsInfo]"
								}
							}
						}
			
						vbox = { #-5 Markets
							layoutpolicy_horizontal = expanding
							datacontext = "[GetCountryNeeds(Player.Self)]"
							datamodel = "[CountryNeeds.GetMarketNeeds]"
							visible = "[And(LessThanOrEqualTo_int32(CountryNeeds.GetMarketGovernmentMissingGoodsCount, '(int32)4' ), GreaterThan_int32(CountryNeeds.GetMarketGovernmentMissingGoodsCount, '(int32)1' ))]" 
							spacing = 12
							
							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 120 } }
									blockoverride "block_title" {
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]:"
									}
									visible = "[MarketCountryNeeds.HasGovernmentMissingGoods]"
									textcontext = "[MarketCountryNeeds.GetGovernmentMissingGoodsInfo]"
								}
							}
						}

						TooltipListBase = { #+6 Markets
						datacontext = "[GetCountryNeeds(Player.Self)]"
						visible = "[GreaterThan_int32(CountryNeeds.GetMarketGovernmentMissingGoodsCount, '(int32)4' )]" 
						
							TooltipListColumnContent = {
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_text" { 
										text = "[market|e]" 
									}
									blockoverride "column_title_right" { 
										expand = {} 
									}
					
									blockoverride "field_left" {
										visible = "[MarketCountryNeeds.HasGovernmentMissingGoods]"
									}
					
									blockoverride "field_text" {
										default_format = "#subtle_name"
										align = left|nobaseline
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]"
									}
					
									blockoverride "field_right" { expand = {} }
								}
					
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_left" { 
										expand = {}
									}
									blockoverride "column_title_text" { 
										text = "[goods_demands|e]" 
										default_format = "#explanation_link"

									}
					
									blockoverride "field_text" { visible = no }
									blockoverride "field_right" {
										spacing = 7
										expand = {} 
										visible = "[MarketCountryNeeds.HasGovernmentMissingGoods]"
										datacontext = "[GetMarketCountryNeeds(Player.Self, Market.Self)]"
										datacontext = "[MarketCountryNeeds.GetMarket]"
										tooltipwidget = { using = market_hub_gov_needs_tooltip }

										text_single = {
											visible = "[MarketCountryNeeds.HasGovernmentMissingGoods]"
											text = "[MarketCountryNeeds.GetGovernmentMissingGoodsAmount]"
										}

										icon = {
											shaderfile = "gfx/FX/pdxgui_default.shader"
											size = {15 15}
											texture = "gfx/interface/icons/alerts_icons/constructions_missing_input.dds"
			
											using = bg_banner_button_vertical
			
											blockoverride "banner_button_extra" {}
											
											blockoverride "banner_button_color" {
												modify_texture = {
													using = color_red_texture
													alpha = 0.6
												}
											}
										}
									}
								}

								blockoverride "column_datamodel"  {  
									datacontext = "[GetCountryNeeds(Player.Self)]"
									datamodel = "[CountryNeeds.GetMarketNeeds]"
								}
							}
						}
					}
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_constructions_missing_input')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_MARKETS_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertConstructionMissingInput.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertPopNeeds.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_constructions_missing_input')]"
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/constructions_missing_input.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('production_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Starving provinces
		###########################

		alert_banner = {
			name = "has_starving_provinces"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertStarvingProvinces.Next]"
			}

			using = red_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/starving_provinces.dds"
			}
		}

		###########################################################################
		# ORANGE ALERTS
		###########################################################################

		###########################
		# Bad shit is happening to me waa waa waa
		###########################

		alert_banner = {
			name = "dangerous_relation"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = cabinet')]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/military.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('diplomacy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Intervene in Rival War
		###########################

		alert_banner = {
			name = "can_intervene_in_rival_war"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenDiploAction('intervene_in_war')]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/military.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('diplomacy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Angry with no Parliament
		###########################

		alert_banner = {
			name = "estate_unhappy_with_lack_of_parliament"

			datacontext = "[GetGenericAction('call_parliament')]"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[PerformGenericAction(GenericAction.Self)]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/estate_unhappy_with_lack_of_parliament.dds"
			}
		}

		############################
		# Call For Peace
		############################

		alert_banner = {
			name = "has_call_for_peace"
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_call_for_peace')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_call_for_peace')]"
							}
						}
					}
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}
			
			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_call_for_peace.dds"
			}
		}

		###################################
		# Can be target of international organization
		####################################

		alert_banner = {
			name = "can_potentially_be_target_of_io"
			using = orange_alert

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				conditions = "[MakeItFailIfLoc(Not(AlertCanBeTargetOfIO.HasNext), 'CANNOT_ALERT_CTA_CYCLE_LEFT_CLICK')]"
				enabled = "[AlertCanBeTargetOfIO.HasNext]"
				on_action = "[AlertCanBeTargetOfIO.Next]"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					ontextcontextchanged = "[SetTitleDescTooltipFromTextContext(PdxGuiWidget.AccessSelf)]"

					blockoverride "title_text" {
						text = "[TitleDescTooltip.GetTitle]"
					}

					blockoverride "title_button" {
						mapmode_tooltip_button = {
							datacontext = "[GetMapMode('antagonism')]"
						}
					}

					blockoverride "tooltip_content" {
						block "tooltip_content" {
							TooltipRequirementsList = {
								visible = "[AlertCanBeTargetOfIO.ShouldShowRequirements]"
								textcontext = "[TitleDescTooltip.GetDesc]"

								blockoverride "set_textcontext" {
									ontextcontextchanged = "[SetRequirementsListFromTextContextWithTitle(PdxGuiWidget.AccessSelf)]"
								}
							}

							TooltipListBase = { ### Disloyal Countries List
								visible = "[AlertCanBeTargetOfIO.IsACoalitionAlert]"
								blockoverride "block_title" {
									text = "LIST_OF_POTENTIAL_COALITION_COUNTRIES_TT"
								}
								widget = {
									size = { 690 30 }
									hbox = {
										background = {
											using = tile_background_squared_texture
											frame_grid = { 1 2 }
											spriteborder_bottom = 0
											alpha = 0.4
											modify_texture = {
												using = color_turquoise_texture
											}
										}
										layoutpolicy_horizontal = expanding
										hbox = {
											#spacing = 3
											text_single = {
												minimumsize = { 150 20 }
												align = left|nobaseline
												using = Font_Size_Small
												text = "[country|e]"
											}
										}
										hbox = {
											#spacing = 3
											text_single = {
												minimumsize = { 90 20 }
												align = left|nobaseline
												using = Font_Size_Small
												text = "[antagonism|e]"
											}
										}
										hbox = {
											#spacing = 3
											text_single = {
												minimumsize = { 50 20 }
												align = left|nobaseline
												using = Font_Size_Small
												text = "ARMY_SIZE_WITH_CONCEPT"
											}
										}
										hbox = {
											#spacing = 3
											text_single = {
												maximumsize = { 60 20 }
												align = left|nobaseline
												using = Font_Size_Small
												text = "NAVY_SIZE_WITH_CONCEPT"
											}
										}
										hbox = {
											#spacing = 3
											text_single = {
												maximumsize = { 110 20 }
												align = left|nobaseline
												using = Font_Size_Small
												text = "[great_power_rank|e]"
											}
										}
										hbox = {
											#spacing = 3
											text_single = {
												maximumsize = { 60 20 }
												align = left|nobaseline
												using = Font_Size_Small
												text = "STATUS_ANTAGONISM_ALERT_TT"
											}
										}
									}
								}
								margin = { 0 5 }
								TooltipListScrollArea = {
									blockoverride "block_scrollarea" {
										maximumsize = { -1 665 }
									}
									blockoverride "scrollarea_content" {
										fixedgridbox = {
											addcolumn = 690
											addrow = 30
											setitemsizefromcell = yes
						
											datamodel = "[AlertCanBeTargetOfIO.GetAntagonismCountries]"
											item = {
												widget = {
													background = {
														visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
														using = tooltip_table_field_texture
													}
				
													hbox = {
														using = layoutpolicy_expanding
														margin = { 10 0 }
														spacing = 1

														#COUNTRY
														widget = {
															layoutpolicy_vertical = expanding
															size = { 170 -1 }
															hbox = {
																spacing = 2
																country_flag_small = {}

																text_single = {
																	using = layoutpolicy_expanding
																	autoresize = no
																	default_format = "#subtle_name"
																	align = left|nobaseline
																	text = "[Country.GetName]"
																}
															}
														}

														#ANTAGONISM
														widget = {
															layoutpolicy_vertical = expanding
															size = { 100 -1 }
															tagtooltip_enabled = yes
															tooltip = "[antagonism|e]"
															hbox = {
																spacing = 2
																icon = { 
																	size = { 30 30 }
																	texture = "[GetConceptTexture('antagonism')]"
																}

																text_single = {
																	using = layoutpolicy_expanding
																	autoresize = no
																	default_format = "#subtle_name"
																	align = left|nobaseline
																	text = "[Country.GetDiplomacy.GetAntagonismTowards(GetPlayer)|2-=]"
																}
															}
														}
				
														#ARMY SIZE
														widget = {
															layoutpolicy_vertical = expanding
															size = { 120 -1 }
															tagtooltip_enabled = yes
															tooltip = "[army|e]"
															hbox = {
																spacing = 2
																icon = { 
																	size = { 30 30 }
																	texture = "[GetConceptTexture('army')]"
																}

																text_single = {
																	using = layoutpolicy_expanding
																	autoresize = no
																	default_format = "#subtle_name"
																	align = left|nobaseline
																	text = "[Multiply_CFixedPoint(Country.GetMilitaryStrength, '(CFixedPoint)1000')|0V]"
																}
															}
														}
														
														#NAVY SIZE
														widget = {
															layoutpolicy_vertical = expanding
															size = { 100 -1 }
															tagtooltip_enabled = yes
															tooltip = "[navy|e]"
															hbox = {
																spacing = 2
																icon = { 
																	size = { 30 30 }
																	texture = "[GetConceptTexture('navy')]"
																}

																text_single = {
																	using = layoutpolicy_expanding
																	autoresize = no
																	default_format = "#subtle_name"
																	align = left|nobaseline
																	text = "[Country.GetNavyStrength|0V]"
																}
															}
														}

														#GREAT POWER RANK
														widget = {
															layoutpolicy_vertical = expanding
															size = { 70 -1 }
															tagtooltip_enabled = yes
															tooltip = "[great_power_rank|e]"
															hbox = {
																spacing = 2
																icon = { 
																	size = { 30 30 }
																	texture = "[GetConceptTexture('great_power_rank')]"
																}

																text_single = {
																	using = layoutpolicy_expanding
																	autoresize = no
																	default_format = "#subtle_name"
																	align = left|nobaseline
																	text = "[Country.GetGreatPowerRank]"
																}
															}
														}

														#STATUS
														widget = {
															layoutpolicy_vertical = expanding
															size = { 60 -1 }
															hbox = {
																spacing = 2
																piechart = {
																	size = { 25 25 }
																	visible = "[Country.GetDiplomacy.GetRelation(GetPlayer.Self).HasTruce]"
												
																	using = bg_circle_piechart
																	using = piechart_angles
												
																	pieslice = {
																		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
																		value = "[Country.GetDiplomacy.GetRelation(GetPlayer.Self).GetTruceProgress]"
																		color = { 0.01 0.6 0.9 1 }
																	}
												
																	pieslice = {
																		texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
																		value = "[Subtract_float('(float)100.0', Country.GetDiplomacy.GetRelation(GetPlayer.Self).GetTruceProgress)]"
																		color = { 1 1 1 0 }
																	}
												
																	icon = {
																		texture = "gfx/interface/icons/diplomatic_status/truce.dds"
																		size = { 85% 85% }
																		parentanchor = center
																	}
												
																	tooltipwidget = {
																		ContextualTooltipType = {
																			blockoverride "title_icon" {
																				icon = {
																					size = { 50 50 }
																					texture = "gfx/interface/icons/diplomatic_status/truce.dds"
																				}
																			}
																		
																			blockoverride "title_text" {
																				datacontext = "[Country]"
																				text = "TRUCE_WITH_COUNTRY_TITLE"
																			}
																								
																			blockoverride "concept_link" {
																				text = [truce|E]
																			}
													
																			blockoverride "tooltip_content" {
																				TooltipTextBlock = {
																					blockoverride "text" {
																						text = "TRUCE_WITH_COUNTRY_UNTIL"
																					}
																				}
																			}
																		}
																	}
																}
																icon = {
																	datacontext = "[Country]"
																	texture = "gfx/interface/icons/international_organizations/coalition.dds"
																	visible = "[Country.GetDiplomacy.HasCoalitionAgainst(Player.Self)]"
																	size = { 25 25 }
																	tooltipwidget = {
																		ContextualTooltipType = {
																			blockoverride "title_icon" {
																				icon = {
																					size = { 50 50 }
																					texture = "gfx/interface/icons/international_organizations/coalition.dds"
																				}
																			}
																		
																			blockoverride "title_text" {
																				datacontext = "[Country]"
																				text = "COALITION_AGAINST_US_TITLE"
																			}
																								
																			blockoverride "concept_link" {
																				text = [coalition|E]
																			}
										
																			blockoverride "tooltip_content" {
																				TooltipTextBlock = {
																					blockoverride "text" {
																						text = "COALITION_AGAINST_US_DESC"
																					}
																				}
																			}
																		}
																	}
																}
																icon = {
																	datacontext = "[Country]"
																	texture = "gfx/interface/icons/diplomatic_status/war.dds"
																	visible = "[Country.GetDiplomacy.GetRelation(GetPlayer.Self).HasWar]"
																	size = { 25 25 }
																	tooltipwidget = {
																		ContextualTooltipType = {
																			blockoverride "title_icon" {
																				icon = {
																					size = { 50 50 }
																					texture = "gfx/interface/icons/diplomatic_status/war.dds"
																				}
																			}
																		
																			blockoverride "title_text" {
																				datacontext = "[Country]"
																				text = "WAR_WITH_COUNTRY_TITLE"
																			}
																								
																			blockoverride "concept_link" {
																				text = [war|E]
																			}
										
																			blockoverride "tooltip_content" {
																				TooltipTextBlock = {
																					blockoverride "text" {
																						text = "WAR_WITH_COUNTRY_DESC"
																					}
																				}
																			}
																		}
																	}
																}
																icon = {
																	texture = "gfx/interface/icons/diplomatic_status/opinion_improvement_active.dds"
																	visible = "[GreaterThan_CFixedPoint(Country.GetDiplomacy.GetOpinionOf(GetPlayer), '(CFixedPoint)0')]"
																	size = { 25 25 }
																	tooltipwidget = {
																		ContextualTooltipType = {
																			blockoverride "title_icon" {
																				icon = {
																					size = { 50 50 }
																					texture = "gfx/interface/icons/diplomatic_status/opinion_improvement_active.dds"
																				}
																			}
																		
																			blockoverride "title_text" {
																				datacontext = "[Country]"
																				text = "POSITIVE_OPINION_WITH_TITLE"
																			}
																								
																			blockoverride "concept_link" {
																				text = [opinion|E]
																			}
										
																			blockoverride "tooltip_content" {
																				TooltipTextBlock = {
																					blockoverride "text" {
																						text = "POSITIVE_OPINION_WITH_DESC"
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "[AlertCanBeTargetOfIO.GetIcon]"
			}
		}

		############################
		# Peace may enforced on us in a war.
		############################

		alert_banner = {
			name = "has_negative_enforced_war_goal"

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_they_can_enforce_peace.dds"
			}
		}

		############################
		# White Peace may enforced on us in a war.
		############################

		alert_banner = {
			name = "has_negative_white_peace"

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_they_can_white_peace.dds"
			}
		}

		###########################
		# IO Breaking
		###########################

		alert_banner = {
			name = "has_io_breaking"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertIOBreaking.Next]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_breaking_alliance.dds"
			}
		}

		###########################
		# Above Diplomatic Relations Limit
		###########################

		alert_banner = {
			name = "has_over_diplomacy_limit"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('diplomacy')]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('diplomacy')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_over_diplo_capacity')]"
			}
			
			onmousehierarchyenter = "[SetHighlightedTab('diplomacy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = orange_alert
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_over_diplo_capacity')]"
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/above_diplomatic_relations_limit.dds"
			}
		}

		###########################
		# Clan Can Settle
		###########################

		alert_banner = {
			name = "clan_can_become_landed"

			action_tooltip = {
				click_type = left
				title = "ALERT_CLAN_CAN_SETTLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertClanCanBecomeLanded.Next]"
			}

			using = alert_list_tooltip
			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/international_organizations/japanese_shogunate.dds"
			}
		}

		###########################
		# red (Imminent) Revolt Tick
		###########################

		alert_banner = {
			name = "has_imminent_revolt"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('country_people', 'subtab = rebels')]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('country_people', 'subtab = rebels')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_rebels_growing')]"
			}
			
			tooltipwidget = {
				SimpleContextualStringPairTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_rebels_growing')]"
							}
						}
					}
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}
			
			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = orange_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/imminent_revolt.dds"
			}
		}

		###########################
		# Deficit
		###########################

		alert_banner = {
			name = "has_dangerous_deficit"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('economy')]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('economy')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_in_deficit')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_in_deficit')]"
							}
						}
					}
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_deficit.dds"
			}
		}

		###########################
		# Low Army Maintenance
		###########################

		alert_banner = {
			name = "has_low_army_maintenance"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.ShowEconomyWindow]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/flat_icons/balance/cost_of_army.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Low Navy Maintenance
		###########################

		alert_banner = {
			name = "has_low_navy_maintenance"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.ShowEconomyWindow]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/flat_icons/balance/cost_of_navy.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# High Warexhaustion
		###########################

		alert_banner = {
			name = "has_high_war_exhaustion"

			using = orange_alert
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_war_exhaustion')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_war_exhaustion')]"
							}
						}
					}
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}
			
			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/war_exhaustion.dds"
			}
		}

		###########################
		# Has Doom
		###########################

		alert_banner = {
			name = "has_doom"

			using = yellow_alert

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('country_religion', 'subtab = doctrine')]"
			}

			blockoverride "icon_setup" {
				visible = no
			}

			blockoverride "alert_more_icons_before" {
				piechart = {
					visible = "[Player.GetReligion.HasDoom]"
					size = { 30 30 }
					alwaystransparent = yes

					using = piechart_angles

					icon = {
						texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						size = { 100% 100% }
						parentanchor = center
						color = { 0 0 0 1 }
					}

					pieslice = {
						alwaystransparent = yes
						texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						value = "[Player.GetFixedPointCurrencyValue('doom')]"
						using = color_value_progress_blue
					}

					pieslice = {
						alwaystransparent = yes
						texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						value = "[Subtract_float('(float)100.0', FixedPointToFloat(Player.GetFixedPointCurrencyValue('doom')))]"
						using = color_value_progress_gray
					}

					icon = {
						size = { 60% 60% }
						parentanchor = center
						texture = "gfx/interface/icons/alerts_icons/alert_doom.dds"
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# High Doom
		###########################

		alert_banner = {
			name = "has_high_doom"

			using = orange_alert

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('country_religion', 'subtab = doctrine')]"
			}

			blockoverride "icon_setup" {
				visible = no
			}

			blockoverride "alert_more_icons_before" {
				piechart = {
					visible = "[Player.GetReligion.HasDoom]"
					size = { 30 30 }
					alwaystransparent = yes

					using = piechart_angles

					icon = {
						texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						size = { 100% 100% }
						parentanchor = center
						color = { 0 0 0 1 }
					}

					pieslice = {
						alwaystransparent = yes
						texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						value = "[Player.GetFixedPointCurrencyValue('doom')]"
						using = color_value_progress_blue
					}

					pieslice = {
						alwaystransparent = yes
						texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
						value = "[Subtract_float('(float)100.0', FixedPointToFloat(Player.GetFixedPointCurrencyValue('doom')))]"
						using = color_value_progress_gray
					}

					icon = {
						size = { 60% 60% }
						parentanchor = center
						texture = "gfx/interface/icons/alerts_icons/alert_doom.dds"
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Army with really low food
		###########################

		alert_banner = {
			name = "has_army_with_very_low_food"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertArmyWithVeryLowFood.Next]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/very_low_food_army.dds"
			}
		}

		###########################
		# Rebellious Estates
		###########################

		alert_banner = {
			name = "has_rebellious_estates"
			
			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = estates')]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = estates')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unhappy_estates')]"
			}
			
			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
			
			using = orange_alert
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unhappy_estates')]"
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_rebel_estates_tt.dds"
			}
		}

		###########################
		# High Inflation
		###########################

		alert_banner = {
			name = "has_high_inflation"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('economy')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('economy')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_inflation')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_inflation')]"
							}
						}
					}
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_high_inflation_rising.dds"
			}
		}

		###################################
		# Maxed out stored research progress
		###################################

		alert_banner = {
			name = "has_maxed_out_stored_research_progress"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('advances', 'subtab = research')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('advances', 'subtab = research')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_can_do_more_research')]"
			}

			tooltipwidget = {
				SimpleContextualTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_can_do_more_research')]"
							}
						}
					}
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('advances_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_maxed_out_stored_research_progress.dds"
			}
		}

		###################################
		# Has subjects with loyalty 0
		###################################

		alert_banner = {
			name = "has_rebellious_subjects"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowManageSubjects]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowManageSubjects]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_disloyal_subjects')]"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "STATIC_MODIFIER_NAME_rebellious_subjects_modifier"
					}

					blockoverride "tooltip_content" {
						block "tooltip_content" {
							TooltipListBase = { ### Disloyal Countries List
								blockoverride "block_title" {
									text = "ALERT_HAS_REBELLIOUS_SUBJECTS"
								}
								
								TooltipListScrollArea = {
									blockoverride "block_scrollarea" {
										maximumsize = { -1 400 }
									}
									blockoverride "scrollarea_content" {
										fixedgridbox = {
											addcolumn = 420
											addrow = 30
											setitemsizefromcell = yes
						
											datamodel = "[AlertHasRebelliousSubjects.GetEntries]"
											item = {
												widget = {
													background = {
														visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
														using = tooltip_table_field_texture
													}
				
													hbox = {
														using = layoutpolicy_expanding
														margin = { 10 0 }
														spacing = 10
				
														country_flag_small = {}
				
														text_single = {
															align = nobaseline
															text = "[Country.GetLongName]"
														}
														expand = {}
				
														text_single = {
															text = "[Country.GetDiplomacy.GetSubjectLoyalty|R2%/]"
															tooltipwidget = {
																using = SubjectTypeDetail_tooltip
															}
														}
														
														icon = {
															size = { 24 24 }
															texture = "[GetSubjectTypeIcon(Country.GetDiplomacy.GetSubjectType)]"
															alpha = 0.8							
															glow = {
																name = "drop_shadow"
																glow_radius = 3
																color = {0.0 0.0 0.0 1.0}
																alpha = 0.3
															}
															tooltipwidget = {
																using = SubjectTypeDetail_tooltip
															}
														}						
													}
												}
											}
										}
									}
								}
							}
						}
					}

					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_disloyal_subjects')]"
							}
						}
					}
				}

				blockoverride "shift_left_extra" {
					replacement_shift_item = {}
				}
			}
			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/has_rebellious_subjects.dds"
			}
		}

		###################################
		# Has raised army levies in peace
		###################################

		alert_banner = {
			name = "has_raised_army_levies_in_peace"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasRaisedArmyLeviesInPeace.Next]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/has_raised_levies_in_peace.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('military_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Has raised navy levies in peace
		###################################

		alert_banner = {
			name = "has_raised_navy_levies_in_peace"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasRaisedNavyLeviesInPeace.Next]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/has_raised_levies_in_peace.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('military_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Government reform about to expire
		###################################

		alert_banner = {
			name = "lack_societal_value_requirements_for_government_reform"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = estates')]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/flat_icons/reforms.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Ships are not repairing at all
		###################################

		alert_banner = {
			name = "has_not_enough_goods_for_any_ship_repairs"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_MARKETS_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasNotEnoughGoodsForAnyShipRepairs.Next]"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_HAS_NOT_ENOUGH_GOODS_FOR_ANY_SHIP_REPAIRS"
					}
					blockoverride "concept_link" {
						text = "[ships|e]"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/unit_actions/repair_ship.dds"
						}
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_HAS_NOT_ENOUGH_GOODS_FOR_ANY_SHIP_REPAIRS_TEXT"
							}

							blockoverride "textblock_background_tint"  {
								modify_texture = {
									using = color_red_texture
								}
							}
						}
						vbox = { # One Market
							layoutpolicy_horizontal = expanding
							datamodel = "[AlertHasNotEnoughGoodsForAnyShipRepairs.GetLackingGoodsForRepairs]"
							visible = "[EqualTo_int32(GetDataModelSize(AlertHasNotEnoughGoodsForAnyShipRepairs.GetLackingGoodsForRepairs), '(int32)1')]" 
							spacing = 12

							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 360 } }
									blockoverride "block_title" {
										raw_text = "@market! [LackingGoodsForRepairEntry.GetMarket.GetName]:"
									}
									textcontext = "[LackingGoodsForRepairEntry.GetLackingGoodsForRepairInfo]"
								}
							}
						}

						vbox = { # Two to Three Markets
							layoutpolicy_horizontal = expanding
							datamodel = "[AlertHasNotEnoughGoodsForAnyShipRepairs.GetLackingGoodsForRepairs]"
							visible = "[And(LessThanOrEqualTo_int32(GetDataModelSize(AlertHasNotEnoughGoodsForAnyShipRepairs.GetLackingGoodsForRepairs), '(int32)3' ), GreaterThan_int32(GetDataModelSize(AlertHasNotEnoughGoodsForAnyShipRepairs.GetLackingGoodsForRepairs), '(int32)1'))]" 
							spacing = 12
							
							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 120 } }
									blockoverride "block_title" {
										raw_text = "@market! [LackingGoodsForRepairEntry.GetMarket.GetName]:"
									}
									textcontext = "[LackingGoodsForRepairEntry.GetLackingGoodsForRepairInfo]"
								}
							}
						}

						TooltipListBase = { # More than Three Markets
							visible = "[GreaterThan_int32(GetDataModelSize(AlertHasNotEnoughGoodsForAnyShipRepairs.GetLackingGoodsForRepairs), '(int32)3' )]" 
							
							TooltipListColumnContent = {
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_text" { 
										text = "[market|e]" 
									}
									blockoverride "column_title_right" { 
										expand = {} 
									}

									blockoverride "field_text" {
										default_format = "#subtle_name"
										align = left|nobaseline
										raw_text = "@market! [LackingGoodsForRepairEntry.GetMarket.GetName]"
									}
					
									blockoverride "field_right" { expand = {} }
								}
					
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_left" { 
										expand = {}
									}
									blockoverride "column_title_text" { 
										text = "[goods|e]" 
									}
					
									blockoverride "field_text" { visible = no }
									blockoverride "field_right" {
										spacing = 7
										expand = {} 
										tooltipwidget = { using = market_hub_lacking_good_for_repairs_tooltip }

										text_single = {
											text = "[LackingGoodsForRepairEntry.GetLackingGoodsForRepairAmount]"
										}

										icon = {
											shaderfile = "gfx/FX/pdxgui_default.shader"
											size = {15 15}
											texture = "gfx/interface/icons/unit_actions/repair_ship.dds"
			
											using = bg_banner_button_vertical
			
											blockoverride "banner_button_extra" {
												visible = yes
											}
										}
									}
								}

								blockoverride "column_datamodel"  {  
									datamodel = "[AlertHasNotEnoughGoodsForAnyShipRepairs.GetLackingGoodsForRepairs]"
								}
							}
						}
					}
				}
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/unit_actions/repair_ship.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Over fort limit
		###################################

		alert_banner = {
			name = "is_over_fort_limit"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithFilter('production', 'defense_category')]"
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "[GetConceptTexture('fort_limit')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('production_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# WEATHER SYSTEM
		###########################

		alert_banner = {
			name = "has_weather_system" # Could be bad, as in Sweden, or in a fantasy mod, possibly even good?

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasWeatherSystem.Next]"
			}

			using = orange_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/weather_system.dds"
			}
		}

		###########################
		# Can Lose Senior Partner Status
		###########################

		alert_banner = {
			name = "has_less_power_in_union"

			action_tooltip = {
				click_type = left
				title = "ALERT_HAS_LESS_POWER_IN_UNION_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenInternationalOrganizationView(AlertHasLessPowerInUnion.GetUnion)]"
			}

			using = orange_alert
			using = alert_list_tooltip

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_HAS_LESS_POWER_IN_UNION"
					}
					blockoverride "concept_link" {
						text = "[union|E]"
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_HAS_LESS_POWER_IN_UNION_TEXT"
							}
						}

						TooltipListBase = {
							TooltipListColumnContent = {
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_text" { 
										text = "[member|e]" 
									}
									blockoverride "column_title_right" { 
										expand = {} 
									}
					
									blockoverride "field_left" {}
					
									blockoverride "field_text" {
										default_format = "#subtle_name"
										align = left|nobaseline
										raw_text = "[Country.GetNameWithFlag]"
									}
					
									blockoverride "field_right" { expand = {} }
								}
					
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_left" { 
										expand = {}
									}

									blockoverride "column_title_text" { 
										text = "[great_power_rank|e]" 
										default_format = "#explanation_link"
									}

									blockoverride "field_text" {
										visible = no
									}

									blockoverride "field_right" {
										expand = {} 

										text_single = {
											visible = "[Country.IsGreatPower]"
											text = "[Country.GetGreatPowerRank]"

											tooltipwidget = {
												using = great_power_info_tooltip
											}
										}

										text_single = {
											visible = "[Not(Country.IsGreatPower)]"
											text = "[Country.GetGreatPowerRank]"

											tooltipwidget = {
												using = non_great_power_info_tooltip
											}
										}
									}
								}

								blockoverride "column_datamodel"  {  
									datamodel = "[AlertHasLessPowerInUnion.GetThreateningCountries]"
								}
							}
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "[GetSpecialStatusIconFromKey('senior_partner')]"
			}
		}

		###########################################################################
		# YELLOW ALERTS
		###########################################################################

		############################
		# Our Truce will expire soon
		############################

		alert_banner = {
			name = "truce_ending"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('diplomacy', 'tabcontent = relations')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('diplomacy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/truce_ending.dds"
			}
		}

		###################################
		# Nearly maxed out stored research progress
		###################################

		alert_banner = {
			name = "has_nearly_maxed_out_stored_research_progress"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('advances', 'subtab = research')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('advances_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('advances', 'subtab = research')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_can_do_more_research')]"
			}

			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_can_do_more_research')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/nearly_maxed_out_stored_research_progress.dds"
			}
		}

		###########################
		# Army with low food
		###########################

		alert_banner = {
			name = "has_army_with_low_food"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertArmyWithLowFood.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/very_low_food_army.dds"
			}
		}

		###########################
		# Unused cb
		###########################

		alert_banner = {
			name = "has_casus_belli"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertUnusedCB.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertUnusedCB.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_casus_belli')]"
			}

			tooltipwidget = {
				SimpleContextualRowTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_casus_belli')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/unused_cb.dds"
			}
		}

		###########################
		# Unhappy Estates
		###########################

		alert_banner = {
			name = "has_unhappy_estates"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = estates')]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = estates')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unhappy_estates')]"
			}
			
			tooltipwidget = {
				SimpleContextualStringPairTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unhappy_estates')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/unhappy_estates.dds"
			}
		}

		###########################
		# Pirates/privateers in maritime
		###########################

		alert_banner = {
			name = "has_pirates_in_maritime_areas"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('maritime')]"
			}
			onmousehierarchyenter = "[SetHighlightedTab('geography_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/pirates.dds"
			}
		}

		###########################
		# Inflation
		###########################

		alert_banner = {
			name = "has_inflation"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('economy')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('economy')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_inflation')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_inflation')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_high_inflation_rising.dds"
			}
		}

		###########################
		# Inefficient minting
		###########################

		alert_banner = {
			name = "has_inefficient_minting"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('economy')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/inefficient_minting.dds"
			}
		}

		###########################
		# Negative Trade
		###########################

		alert_banner = {
			name = "has_unprofitable_trade"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertUnprofitableTrade.Next]"
			}

			using = yellow_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/negative_trade.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# No More Goods Trade
		###########################

		alert_banner = {
			name = "has_no_supplies_trade"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasNoSuppliesTrade.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/no_more_goods_trade.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Lacking Rivals
		####################################

		alert_banner = {
			name = "lacks_of_rivals"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowSelectRivals]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowSelectRivals]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lacks_of_rivals')]"
			}

			using = green_alert
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lacks_of_rivals')]"
						}
					}
				}
			}		
			
			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/lacking_rivals.dds"
			}
		}

		###################################
		# Mercenary Contract Expiring
		####################################

		alert_banner = {
			name = "has_expiring_contracts"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('army_builder', 'subtab = hiring | unit_type = army')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('military_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/mercenary_contract_expiring.dds"
			}
		}

		###################################
		# Can join an international organization targetting X
		####################################

		alert_banner = {
			name = "can_join_targetted_io"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenInternationalOrganizationView(AlertCanJoinTargettedIO.GetTargettedIO)]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/can_join_an_international_organization_targetting_x.dds"
			}
		}

		###################################
		# Parliament in session
		####################################

		situation_banner = {
			name = "PARLIAMENT_IN_SESSION"

			tooltipmeta = {
				texture = "[GetConceptTexture('parliament')]"
			}

			using = alert_tooltip

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = parliament')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = purple_alert

			blockoverride "icon_texture_obj" {
				vbox = {
					margin_top = 13
					margin_bottom = 22

					piechart = {
						alwaystransparent = yes
						size = { 33 33 }
						using = piechart_angles

						background = {
							texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
							texture_density = 2
							alpha = 0.5
							modify_texture = {
								using = color_dark_brown_texture
								blend_mode = multiply
							}
						}
						
						icon = {
							texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
							size = { 100% 100% }
							parentanchor = center
							color = { 0.45 0.59  0.67 1 }
							alpha = 0.3
						}

						pieslice_no_highlight = {
							alwaystransparent = yes
							texture = "gfx/interface/pie_charts/pie_chart_blue_progress.dds"
							value = "[ParliamentInSession.GetParliament.GetParliamentDurationProgress]"
							color = { 1 1 1 1 }
						}

						pieslice_no_highlight = {
							alwaystransparent = yes
							texture = "gfx/interface/pie_charts/pie_chart_blue_progress.dds"
							value = "[Subtract_float('(float)1.0', FixedPointToFloat(ParliamentInSession.GetParliament.GetParliamentDurationProgress))]"
							color = { 1 1 1 0 }
						}

						icon = {
							texture = "gfx/interface/icons/flat_icons/parliament.dds"
							size = { 58% 58% }
							using = overlay_color_light_green
							parentanchor = center
							visible = "[ParliamentInSession.GetParliament.WillParliamentIssuePass]"
						}
						icon = {
							texture = "gfx/interface/icons/flat_icons/parliament.dds"
							size = { 58% 58% }
							using = overlay_color_red
							parentanchor = center
							visible = "[Not(ParliamentInSession.GetParliament.WillParliamentIssuePass)]"
						}
						using = bg_circle_piechart
					}

					expand = {}

					text_single = {
						autoresize = no
						size = { 35 15 }
						fontsize = 14
						align = center
						visible = "[ParliamentInSession.GetParliament.WillParliamentIssuePass]"

						text = "[ParliamentInSession.GetParliament.GetParliamentIssueSupport|0+%]"
					}

					text_single = {
						autoresize = no
						size = { 35 15 }
						fontsize = 14
						align = center
						visible = "[Not(ParliamentInSession.GetParliament.WillParliamentIssuePass)]"

						text = "[ParliamentInSession.GetParliament.GetParliamentIssueSupport|R0%]"
					}
				}
			}
		}

		###################################
		# Ruler Unmarried and no children
		####################################

		alert_banner = {
			name = "has_unmarried_adult_ruler"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.OpenMarriageFinder(AlertManager.GetRuler)]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.OpenMarriageFinder(AlertManager.GetRuler)]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_unmarried_adult_ruler')]"
			}

			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_unmarried_adult_ruler')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/ruler_unmarried_and_no_children.dds"
			}
		}

		###################################
		# Heir Unmarried and no children
		####################################

		alert_banner = {
			name = "has_unmarried_adult_heir"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.OpenMarriageFinder(AlertManager.GetHeir)]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/heir_unmarried_and_no_children.dds"
			}
		}

		###################################
		# Heir Underage
		####################################

		alert_banner = {
			name = "is_heir_underage"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.ShowHeir]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.ShowHeir]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_is_heir_underage')]"
			}

			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_is_heir_underage')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/heir_underage.dds"
			}
		}

		###################################
		# Heir Incompetent
		####################################

		alert_banner = {
			name = "is_heir_incompetent"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.ShowHeir]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/heir_incompetent.dds"
			}
		}

		###################################
		# Ruler Incompetent
		####################################

		alert_banner = {
			name = "is_ruler_incompetent"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.ShowRuler]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/ruler_incompetent.dds"
			}
		}

		###########################
		# Army without leader in war
		###########################

		alert_banner = {
			name = "has_army_without_leader_in_war"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertArmyWithoutLeaderInWar.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertArmyWithoutLeaderInWar.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_army_without_leader')]"
			}
			
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_army_without_leader')]"
						}
					}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/army_without_leader.dds"
			}
		}

		###########################
		# Relation about to be broken
		###########################

		alert_banner = {
			name = "relation_about_to_be_broken"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertRelationAboutToBeBroken.Next]"
			}
			
			using = alert_list_tooltip
			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/relation_about_to_be_broken.dds"
			}
		}

		###########################
		# Outside of naval range
		###########################

		alert_banner = {
			name = "has_navy_outside_range"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertOutsideOfNavalRange.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/outside_of_naval_range.dds"
			}
		}

		###########################
		# Unprofitable Buildings
		###########################

		alert_banner = {
			name = "has_unprofitable_buildings"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				
				on_action = "[ShowProductionViewWithFilter('building_only_not_profitable', '(bool)yes')]"
				on_action = "[RemoveUIFocusMarket]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowProductionViewWithFilter('building_only_not_profitable', '(bool)yes')]"
				on_action = "[RemoveUIFocusMarket]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unprofitable_buildings')]"
			}
			
			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unprofitable_buildings')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
					blockoverride "title_text" {
						text = "ALERT_UNPROFITABLE_BUILDINGS"
					}
					blockoverride "concept_link" {
						text = "[buildings|e]"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/alerts_icons/unprofitable_buildings.dds"
						}
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_UNPROFITABLE_BUILDINGS_TEXT"
							}
			
							blockoverride "textblock_background_tint"  {
								modify_texture = {
									using = color_yellow_texture
								}
							}
						}
						vbox = { # One Market
							layoutpolicy_horizontal = expanding
							datamodel = "[AlertHasUnprofitableBuildings.GetUnprofitableBuildings]"
							visible = "[EqualTo_int32(GetDataModelSize(AlertHasUnprofitableBuildings.GetUnprofitableBuildings), '(int32)1')]" 
							spacing = 12

							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 360 } }
									blockoverride "block_title" {
										raw_text = "@market! [UnprofitableBuildingsEntry.GetMarket.GetName]:"
									}
									textcontext = "[UnprofitableBuildingsEntry.GetUnprofitableBuildingsInfo]"
								}
							}
						}

						vbox = { # Two to Three Markets
							layoutpolicy_horizontal = expanding
							datamodel = "[AlertHasUnprofitableBuildings.GetUnprofitableBuildings]"
							visible = "[And(LessThanOrEqualTo_int32(GetDataModelSize(AlertHasUnprofitableBuildings.GetUnprofitableBuildings), '(int32)3' ), GreaterThan_int32(GetDataModelSize(AlertHasUnprofitableBuildings.GetUnprofitableBuildings), '(int32)1'))]" 
							spacing = 12
							
							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 120 } }
									blockoverride "block_title" {
										raw_text = "@market! [UnprofitableBuildingsEntry.GetMarket.GetName]:"
									}
									textcontext = "[UnprofitableBuildingsEntry.GetUnprofitableBuildingsInfo]"
								}
							}
						}

						TooltipListBase = { # More than Three Markets
							visible = "[GreaterThan_int32(GetDataModelSize(AlertHasUnprofitableBuildings.GetUnprofitableBuildings), '(int32)3' )]" 
							
							TooltipListColumnContent = {
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_text" { 
										text = "[market|e]" 
									}
									blockoverride "column_title_right" { 
										expand = {} 
									}

									blockoverride "field_text" {
										default_format = "#subtle_name"
										align = left|nobaseline
										raw_text = "@market! [UnprofitableBuildingsEntry.GetMarket.GetName]"
									}
					
									blockoverride "field_right" { expand = {} }
								}
					
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_left" { 
										expand = {}
									}
									blockoverride "column_title_text" { 
										text = "[buildings|e]" 
									}
					
									blockoverride "field_text" { visible = no }
									blockoverride "field_right" {
										spacing = 7
										expand = {} 
										tooltipwidget = { using = market_hub_unporfitable_buildings_tooltip }

										text_single = {
											text = "[UnprofitableBuildingsEntry.GetUnprofitableBuildingsAmount]"
										}

										icon = {
											shaderfile = "gfx/FX/pdxgui_default.shader"
											size = {15 15}
											texture = "gfx/interface/icons/alerts_icons/unprofitable_buildings.dds"
			
											using = bg_banner_button_vertical
			
											blockoverride "banner_button_extra" {
												visible = yes
											}
											
											blockoverride "banner_button_color" {
												modify_texture = {
													using = color_yellow_texture
													alpha = 0.6
												}
											}
										}
									}
								}

								blockoverride "column_datamodel"  {  
									datamodel = "[AlertHasUnprofitableBuildings.GetUnprofitableBuildings]"
								}
							}
						}
					}
				}
			}

			using = yellow_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/unprofitable_buildings.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('production_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Buildings missing input
		###########################

		alert_banner = {
			name = "has_buildings_missing_input"

			using = yellow_alert
			# using = alert_list_tooltip

			tooltipwidget = { 
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_BUILDINGS_MISSING_INPUT"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/alerts_icons/buildings_missing_input.dds"
						
						}
					}
					blockoverride "concept_link" {
						text = "[buildings|E]"
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_BUILDINGS_MISSING_INPUT_TEXT"
							}
			
							blockoverride "textblock_background_tint"  {
								modify_texture = {
									using = color_yellow_texture
								}
							}
						}

						vbox = { #1 Market
							layoutpolicy_horizontal = expanding
							datacontext = "[GetCountryNeeds(Player.Self)]"
							datamodel = "[CountryNeeds.GetMarketNeeds]"
							visible = "[EqualTo_int32(CountryNeeds.GetMarketBuildingsMissingGoodsCount, '(int32)1' )]" 
							spacing = 12
							
							item = {
								TooltipStringPairList = {
									blockoverride "block_title" {
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]:"
									}
									visible = "[MarketCountryNeeds.HasBuildingsMissingGoods]"
									textcontext = "[MarketCountryNeeds.GetBuildingsMissingGoodsInfo]"
								}
							}
						}
			
						vbox = { #2-3 Markets
							layoutpolicy_horizontal = expanding
							datacontext = "[GetCountryNeeds(Player.Self)]"
							datamodel = "[CountryNeeds.GetMarketNeeds]"
							visible = "[And(LessThanOrEqualTo_int32(CountryNeeds.GetMarketBuildingsMissingGoodsCount, '(int32)3' ), GreaterThan_int32(CountryNeeds.GetMarketBuildingsMissingGoodsCount, '(int32)1' ))]" 
							spacing = 12
							
							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 120 } }
									blockoverride "block_title" {
										text = "@market! [MarketCountryNeeds.GetMarket.GetName]:"
									}
									visible = "[MarketCountryNeeds.HasBuildingsMissingGoods]"
									textcontext = "[MarketCountryNeeds.GetBuildingsMissingGoodsInfo]"

								}
							}
						}

						TooltipListBase = { #+3 Markets
							datacontext = "[GetCountryNeeds(Player.Self)]"
							visible = "[GreaterThan_int32(CountryNeeds.GetMarketBuildingsMissingGoodsCount, '(int32)3' )]" 
							
							TooltipListColumnContent = {
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_text" { 
										text = "[market|e]" 
									}
									blockoverride "column_title_right" { 
										expand = {} 
									}
					
									blockoverride "field_left" {
										visible = "[MarketCountryNeeds.HasBuildingsMissingGoods]"
										# visible = "[GreaterThan_CFixedPoint(MarketCountryNeeds.GetMarket.GetCountryPopulation(Player.Self),'(CFixedPoint)0')]"
									}
					
									blockoverride "field_text" {
										default_format = "#subtle_name"
										align = left|nobaseline
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]"
									}
					
									blockoverride "field_right" { expand = {} }
								}
					
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_left" { 
										expand = {}
									}
									blockoverride "column_title_text" { 
										text = "[goods_demands|e]" 
										default_format = "#explanation_link"

									}
					
									blockoverride "field_text" { visible = no }
									blockoverride "field_right" {
										spacing = 7
										expand = {} 
										visible = "[MarketCountryNeeds.HasBuildingsMissingGoods]"
										datacontext = "[GetMarketCountryNeeds(Player.Self, Market.Self)]"
										datacontext = "[MarketCountryNeeds.GetMarket]"
										tooltipwidget = { using = market_hub_gov_needs_tooltip }

										text_single = {
											visible = "[MarketCountryNeeds.HasBuildingsMissingGoods]"
											text = "[MarketCountryNeeds.GetGovernmentMissingGoodsAmount]"
										}

										icon = {
											shaderfile = "gfx/FX/pdxgui_default.shader"
											size = {15 15}
											texture = "gfx/interface/icons/alerts_icons/buildings_missing_input.dds"
			
											using = bg_banner_button_vertical
			
											blockoverride "banner_button_extra" {}
											
											blockoverride "banner_button_color" {
												modify_texture = {
													using = color_yellow_texture
													alpha = 0.6
												}
											}
										}
									}
								}

								blockoverride "column_datamodel"  {  
									datacontext = "[GetCountryNeeds(Player.Self)]"
									datamodel = "[CountryNeeds.GetMarketNeeds]"
								}
							}
						}
					}
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_buildings_missing_input')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_MARKETS_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertBuildingsMissingInput.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowProductionViewWithFilter('building_only_not_profitable', '(bool)yes')]"
				on_action = "[AlertBuildingsMissingInput.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_buildings_missing_input')]"
			}
		
			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/buildings_missing_input.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('production_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Buildings missing employees
		###########################

		alert_banner = {
			name = "lack_pop_promotion_to_fill_buildings"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertLackPopPromotion.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertLackPopPromotion.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lack_pop_promotion_to_fill_buildings')]"
			}

			using = yellow_alert
			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_BUILDINGS_MISSING_EMPLOYEES_TT"
					}

					blockoverride "tooltip_content" {
						block "tooltip_content" {
							TooltipTextBlock = {
								blockoverride "text" {
									text = "ALERT_BUILDINGS_MISSING_EMPLOYEES"
								}
				
								# blockoverride "textblock_background_tint"  {
								# 	modify_texture = {
								# 		using = color_yellow_texture
								# 	}
								# }
							}
							TooltipListBase = {
								# blockoverride "block_title" {
								# 	text = "ALERT_BUILDINGS_MISSING_EMPLOYEES"
								# }

								TooltipListScrollArea = {
									blockoverride "block_scrollarea" {
										maximumsize = { -1 400 }
									}
									blockoverride "scrollarea_content" {
										fixedgridbox = {
											addcolumn = 420
											addrow = 30

											datamodel = "[AlertLackPopPromotion.GetBuildings]"
											item = {
												widget = {
													size = { 100% 30 }
													background = {
														visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
														using = tooltip_table_field_texture
													}

													hbox = {
														using = layoutpolicy_expanding
														margin = { 10 0 }
														spacing = 10

														text_single = {
															align = nobaseline
															text = "ALERT_BUILDINGS_MISSING_EMPLOYEES_BUILDING"
														}
														expand = {}

														text_single = {
															text = "[SelectLocalization(SBuildingWithMissingEmployees.HasMonthsNeeded, SBuildingWithMissingEmployees.GetMonths, 'ALERT_BUILDINGS_MISSING_EMPLOYEES_BUILDING_NONE')]"
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}

					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lack_pop_promotion_to_fill_buildings')]"
							}
						}
					}
				}

				blockoverride "shift_left_extra" {
					replacement_shift_item = {}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/lack_pop_promotion_to_fill_buildings.dds"
			}
		}

		###########################
		# RGOs missing employees
		###########################

		alert_banner = {
			name = "lack_pop_for_rgo"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertLackPopRGO.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertLackPopRGO.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lack_pop_promotion_to_fill_buildings')]"
			}

			using = yellow_alert
			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_RGO_MISSING_EMPLOYEES_TT"
					}

					blockoverride "tooltip_content" {
						block "tooltip_content" {
							TooltipTextBlock = {
								blockoverride "text" {
									text = "ALERT_RGO_MISSING_EMPLOYEES"
								}
				
								# blockoverride "textblock_background_tint"  {
								# 	modify_texture = {
								# 		using = color_yellow_texture
								# 	}
								# }
							}
							TooltipListBase = { ### Disloyal Countries List
								# blockoverride "block_title" {
								# 	text = "ALERT_RGO_MISSING_EMPLOYEES"
								# }
								
								TooltipListScrollArea = {
									blockoverride "block_scrollarea" {
										maximumsize = { -1 400 }
									}
									blockoverride "scrollarea_content" {
										fixedgridbox = {
											addcolumn = 420
											addrow = 30
						
											datamodel = "[AlertLackPopRGO.GetRGOs]"
											item = {
												widget = {
													size = { 100% 30 }
													background = {
														visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
														using = tooltip_table_field_texture
													}
				
													hbox = {
														using = layoutpolicy_expanding
														margin = { 10 0 }
														spacing = 10
				
														text_single = {
															align = nobaseline
															text = "ALERT_RGO_MISSING_EMPLOYEES_LOCATION"
														}
														expand = {}
				
														text_single = {
															text = "[SelectLocalization(SBuildingWithMissingEmployees.HasMonthsNeeded, SBuildingWithMissingEmployees.GetMonths, 'ALERT_BUILDINGS_MISSING_EMPLOYEES_BUILDING_NONE')]"
														}						
													}
												}
											}
										}
									}
								}
							}
						}
					}

					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lack_pop_promotion_to_fill_buildings')]"
							}
						}
					}
				}

				blockoverride "shift_left_extra" {
					replacement_shift_item = {}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/lack_pop_promotion_to_fill_rgo.dds"
			}
		}

		###########################
		# Risk Starving provinces
		###########################

		alert_banner = {
			name = "has_risk_starving_provinces"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertRiskStarvingProvinces.Next]"
			}

			using = orange_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/starving_provinces.dds"
			}
		}

		###########################
		# Unintegrated provinces
		###########################

		alert_banner = {
			name = "has_conquered_provinces"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = cabinet')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = cabinet')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_conquered_provinces')]"
			}
			
			using = orange_alert
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_conquered_provinces')]"
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/unintegrated_provinces.dds"
			}

			onmousehierarchyenter = "[AlertUnintegratedProvinces.EnableHighlight(PdxGuiWidget.AccessSelf)]"
			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Pops wanting stuff
		###########################

		alert_banner = {
			name = "has_pop_needs"

			using = yellow_alert

			tooltipwidget = { 
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_POPS_WITH_NEEDS"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/alerts_icons/pops_wanting_stuff.dds"
						
						}
					}
					blockoverride "concept_link" {
						text = "[pop_needs|E]"
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_POPS_WITH_NEEDS_TEXT"
							}
			
							# blockoverride "textblock_background_tint"  {
							# 	modify_texture = {
							# 		using = color_yellow_texture
							# 	}
							# }
						}

						vbox = { #1 Market
							layoutpolicy_horizontal = expanding
							datacontext = "[GetCountryNeeds(Player.Self)]"
							datamodel = "[CountryNeeds.GetMarketNeeds]"
							visible = "[EqualTo_int32(CountryNeeds.GetMarketPopsMissingGoodsCount, '(int32)1' )]" 
							spacing = 12
							
							item = {
								TooltipStringPairList = {
									blockoverride "block_title" {
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]:"
									}
									visible = "[MarketCountryNeeds.HasPopsMissingGoods]"
									textcontext = "[MarketCountryNeeds.GetPopsMissingGoodsInfo]"
								}
							}
						}
			
						vbox = { #-3 Markets
							layoutpolicy_horizontal = expanding
							datacontext = "[GetCountryNeeds(Player.Self)]"
							datamodel = "[CountryNeeds.GetMarketNeeds]"
							visible = "[And(LessThanOrEqualTo_int32(CountryNeeds.GetMarketPopsMissingGoodsCount, '(int32)3' ), GreaterThan_int32(CountryNeeds.GetMarketPopsMissingGoodsCount, '(int32)1' ))]" 
							spacing = 12
							
							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 120 } }
									blockoverride "block_title" {
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]:"
									}
									visible = "[MarketCountryNeeds.HasPopsMissingGoods]"
									textcontext = "[MarketCountryNeeds.GetPopsMissingGoodsInfo]"
								}
							}
						}

						TooltipListBase = { #+3 Markets
							datacontext = "[GetCountryNeeds(Player.Self)]"
							visible = "[GreaterThan_int32(CountryNeeds.GetMarketPopsMissingGoodsCount, '(int32)3' )]" 
							
							TooltipListColumnContent = {
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_text" { 
										text = "[market|e]" 
									}
									blockoverride "column_title_right" { 
										expand = {} 
									}
					
									blockoverride "field_left" {
										visible = "[GreaterThan_CFixedPoint(MarketCountryNeeds.GetMarket.GetCountryPopulation(Player.Self),'(CFixedPoint)0')]"
									}
					
									blockoverride "field_text" {
										default_format = "#subtle_name"
										align = left|nobaseline
										raw_text = "@market! [MarketCountryNeeds.GetMarket.GetName]"
									}
					
									blockoverride "field_right" { expand = {} }
								}
					
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_left" { 
										expand = {}
									}
									blockoverride "column_title_text" { 
										text = "[goods_demands|e]" 
										
									}
					
									blockoverride "field_text" { visible = no }
									blockoverride "field_right" {
										spacing = 7
										expand = {} 
										visible = "[GreaterThan_CFixedPoint(MarketCountryNeeds.GetMarket.GetCountryPopulation(Player.Self),'(CFixedPoint)0')]"
										datacontext = "[MarketCountryNeeds.GetMarket]"
										datacontext = "[GetMarketCountryNeeds(Player.Self, Market.Self)]"
										tooltipwidget = { using = market_hub_pop_needs_tooltip }

										text_single = {
											visible = "[GreaterThan_CFixedPoint(MarketCountryNeeds.GetMarket.GetCountryPopulation(Player.Self),'(CFixedPoint)0')]"
											text = "[MarketCountryNeeds.GetPopsMissingGoodsAmount]"
										}

										text_single = {
											visible = "[Not(GreaterThan_CFixedPoint(MarketCountryNeeds.GetMarket.GetCountryPopulation(Player.Self),'(CFixedPoint)0'))]"
											raw_text = "-"
										}

										icon = {
											shaderfile = "gfx/FX/pdxgui_default.shader"
											size = {15 15}
											texture = "gfx/interface/icons/alerts_icons/pops_wanting_stuff.dds"
			
											using = bg_banner_button_vertical
			
											blockoverride "banner_button_extra" {
												visible = "[Not(And(Not(MarketCountryNeeds.HasPopsMissingGoods), Not(MarketCountryNeeds.HasRebelPopsMissingGoods)))]"
											}
											
											blockoverride "banner_button_color" {
												modify_texture = {
													visible = "[And(MarketCountryNeeds.HasPopsMissingGoods, Not(MarketCountryNeeds.HasRebelPopsMissingGoods))]"
													using = color_yellow_texture
													alpha = 0.6
												}
												modify_texture = {
													visible = "[MarketCountryNeeds.HasRebelPopsMissingGoods]"
													using = color_dark_red_texture
												}
											}
										}
									}
								}

								blockoverride "column_datamodel"  {  
									datacontext = "[GetCountryNeeds(Player.Self)]"
									datamodel = "[CountryNeeds.GetMarketNeeds]"
								}
							}
						}
					}
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_pops_with_needs_yellow')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_MARKETS_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertPopNeeds.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertPopNeeds.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_pops_with_needs_yellow')]"
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/pops_wanting_stuff.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('production_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Blockaded Ports
		###########################

		alert_banner = {
			name = "has_blockaded_ports"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertBlockadedPorts.Next]"
			}

			using = yellow_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/blockaded_ports.dds"
			}
		}

		###########################
		# Exiled Units
		###########################

		alert_banner = {
			name = "has_exiled_units"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertExiledUnits.Next]"
			}

			using = yellow_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/exiled_units.dds"
			}
		}

		###########################
		# Armies on ice
		###########################

		alert_banner = {
			name = "has_armies_on_ice"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertArmiesOnIce.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/armies_on_ice.dds"
			}
		}

		###########################
		# Navies stuck in ice
		###########################

		alert_banner = {
			name = "has_navies_stuck_in_ice"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertNaviesStuckInIce.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/navies_on_ice.dds"
			}
		}

		###########################
		# Navies with attrition
		###########################

		alert_banner = {
			name = "has_navy_attrition"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertNavyAttrition.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/mapitems/attrition.dds"
			}
		}

		###########################
		# Active IO resolution
		###########################

		alert_banner = {
			name = "is_voter_in_active_resolution"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertActiveIOResolution.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/active_io_resolution.dds"
			}
		}

		###########################
		# (Eventual) Yellow Revolt Tick
		###########################

		alert_banner = {
			name = "has_possible_revolt"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('country_people', 'subtab = rebels')]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('country_people', 'subtab = rebels')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_rebels_growing')]"
			}
			
			tooltipwidget = {
				SimpleContextualStringPairTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_rebels_growing')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}
			
			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/yellow_revolt_tick.dds"
			}
		}

		###################################
		# Action lacks a cabinet member
		###################################

		alert_banner = {
			name = "lack_cabinet_for_cabinet_action"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = cabinet')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = cabinet')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lack_cabinet_for_cabinet_action')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_lack_cabinet_for_cabinet_action')]"
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/cabinet_lacks_member.dds"
			}
		}

		###################################
		# Has disloyal subjects
		###################################

		alert_banner = {
			name = "has_disloyal_subjects"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowManageSubjects]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowManageSubjects]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_disloyal_subjects')]"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "hint_has_disloyal_subjects"
					}

					blockoverride "tooltip_content" {
						block "tooltip_content" {
							TooltipListBase = { ### Disloyal Countries List
								blockoverride "block_title" {
									text = "ALERT_HAS_DISLOYAL_SUBJECTS"
								}
								
								TooltipListScrollArea = {
									blockoverride "block_scrollarea" {
										maximumsize = { -1 400 }
									}
									blockoverride "scrollarea_content" {
										fixedgridbox = {
											addcolumn = 420
											addrow = 30
											setitemsizefromcell = yes
						
											datamodel = "[AlertHasDisloyalSubjects.GetEntries]"
											item = {
												widget = {
													background = {
														visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
														using = tooltip_table_field_texture
													}
				
													hbox = {
														using = layoutpolicy_expanding
														margin = { 10 0 }
														spacing = 10
				
														country_flag_small = {}
				
														text_single = {
															align = nobaseline
															text = "[Country.GetLongName]"
														}
														expand = {}
				
														text_single = {
															text = "[Country.GetDiplomacy.GetSubjectLoyalty|R2%/]"
															tooltipwidget = {
																using = SubjectTypeDetail_tooltip
															}
														}
														
														icon = {
															size = { 24 24 }
															texture = "[GetSubjectTypeIcon(Country.GetDiplomacy.GetSubjectType)]"
															alpha = 0.8							
															glow = {
																name = "drop_shadow"
																glow_radius = 3
																color = {0.0 0.0 0.0 1.0}
																alpha = 0.3
															}
															tooltipwidget = {
																using = SubjectTypeDetail_tooltip
															}
														}						
													}
												}
											}
										}
									}
								}
							}
						}
					}

					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_disloyal_subjects')]"
							}
						}
					}
				}

				blockoverride "shift_left_extra" {
					replacement_shift_item = {}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/has_disloyal_subjects.dds"
			}
		}

		###########################
		# Above Accepted Culture Limit
		###########################

		alert_banner = {
			name = "has_over_accepted_culture_limit"
			
			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_culture')]"
			}
			
			action_tooltip = { #These don't like being in types or templates :(
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_culture')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_cultural_capacity')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_cultural_capacity')]"
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/has_over_accepted_culture_limit.dds"
			}
		}

		############################
		# Missing Explorer
		############################

		alert_banner = {
			name = "missing_explorer"

			action_tooltip = {
				click_type = left
				title = "ALERT_MISSING_EXPLORER_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('expansion', 'low_tab = exploration')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('geography_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/explorer_alert.dds"
			}
		}

		###########################
		# Low Food Stockpile
		###########################

		alert_banner = {
			name = "has_low_food_stockpile_market"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasLowFoodStockpileMarket.Next]"
			}
			
			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasLowFoodStockpileMarket.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_low_food_in_market')]"
			}
			
			using = orange_alert
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_low_food_in_market')]"
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/low_food_on_market.dds"
			}
		}

		###########################
		# Locations Depopulating
		###########################

		alert_banner = {
			name = "depopulating_locations"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertDepopulatingLocations.Next]"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_DEPOPULATING_LOCATIONS_TT"
					}

					blockoverride "tooltip_content" {
						block "tooltip_content" {
							TooltipListBase = { ### Disloyal Countries List
								blockoverride "block_title" {
									text = "ALERT_DEPOPULATING_LOCATIONS"
								}
								
								TooltipListScrollArea = {
									blockoverride "block_scrollarea" {
										maximumsize = { -1 400 }
									}
									blockoverride "scrollarea_content" {
										fixedgridbox = {
											addcolumn = 420
											addrow = 30
											setitemsizefromcell = yes
						
											datamodel = "[AlertDepopulatingLocations.GetLocations]"
											item = {
												widget = {
													background = {
														visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
														using = tooltip_table_field_texture
													}
				
													hbox = {
														using = layoutpolicy_expanding
														margin = { 10 0 }
														spacing = 10
				
														text_single = {
															align = nobaseline
															raw_text = "@location! [Location.GetName]:"
														}
														expand = {}
				
														text_single = {
															raw_text = "[Location.GetPopulationChangeLabel]@population!"
														}					
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}

			using = orange_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/location_depopulation.dds"
			}
		}

		###################################
		# We have Low Purity
		###################################

		alert_banner = {
			name = "has_low_purity"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/religious_doctrines/shinto/purity.dds"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_HAS_LOW_PURITY"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/religious_doctrines/shinto/purity.dds"
						}
					}
					blockoverride "tooltip_content" {
						TooltipScrolledStringPairList = {
							blockoverride "block_title" {
								text = "ALERT_HAS_LOW_PURITY_TEXT"
							}
							textcontext = "[Localize(GetAutoModifier('low_purity').GetDesc)][Localize('SCALING_WITH_OUR')][Localize('purity')]"
						}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Ships are slowly repairing
		###################################

		alert_banner = {
			name = "has_not_enough_goods_for_ship_repairs"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_MARKETS_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasNotEnoughGoodsForShipRepairs.Next]"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_HAS_NOT_ENOUGH_GOODS_FOR_SHIP_REPAIRS"
					}
					blockoverride "concept_link" {
						text = "[ships|e]"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/unit_actions/repair_ship.dds"
						}
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_HAS_NOT_ENOUGH_GOODS_FOR_SHIP_REPAIRS_TEXT"
							}

							blockoverride "textblock_background_tint"  {
								modify_texture = {
									using = color_yellow_texture
								}
							}
						}
						vbox = { # One Market
							layoutpolicy_horizontal = expanding
							datamodel = "[AlertHasNotEnoughGoodsForShipRepairs.GetLackingGoodsForRepairs]"
							visible = "[EqualTo_int32(GetDataModelSize(AlertHasNotEnoughGoodsForShipRepairs.GetLackingGoodsForRepairs), '(int32)1')]" 
							spacing = 12

							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 360 } }
									blockoverride "block_title" {
										raw_text = "@market! [LackingGoodsForRepairEntry.GetMarket.GetName]:"
									}
									textcontext = "[LackingGoodsForRepairEntry.GetLackingGoodsForRepairInfo]"
								}
							}
						}

						vbox = { # Two to Three Markets
							layoutpolicy_horizontal = expanding
							datamodel = "[AlertHasNotEnoughGoodsForShipRepairs.GetLackingGoodsForRepairs]"
							visible = "[And(LessThanOrEqualTo_int32(GetDataModelSize(AlertHasNotEnoughGoodsForShipRepairs.GetLackingGoodsForRepairs), '(int32)3' ), GreaterThan_int32(GetDataModelSize(AlertHasNotEnoughGoodsForShipRepairs.GetLackingGoodsForRepairs), '(int32)1'))]" 
							spacing = 12
							
							item = {
								TooltipScrolledStringPairList = {
									blockoverride "block_scrollarea" { maximumsize = { -1 120 } }
									blockoverride "block_title" {
										raw_text = "@market! [LackingGoodsForRepairEntry.GetMarket.GetName]:"
									}
									textcontext = "[LackingGoodsForRepairEntry.GetLackingGoodsForRepairInfo]"
								}
							}
						}

						TooltipListBase = { # More than Three Markets
							visible = "[GreaterThan_int32(GetDataModelSize(AlertHasNotEnoughGoodsForShipRepairs.GetLackingGoodsForRepairs), '(int32)3' )]" 
							
							TooltipListColumnContent = {
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_text" { 
										text = "[market|e]" 
									}
									blockoverride "column_title_right" { 
										expand = {} 
									}

									blockoverride "field_text" {
										default_format = "#subtle_name"
										align = left|nobaseline
										raw_text = "@market! [LackingGoodsForRepairEntry.GetMarket.GetName]"
									}
					
									blockoverride "field_right" { expand = {} }
								}
					
								TooltipTableColumn = {
									blockoverride "column_title" {}
									blockoverride "column_title_left" { 
										expand = {}
									}
									blockoverride "column_title_text" { 
										text = "[goods|e]" 
									}
					
									blockoverride "field_text" { visible = no }
									blockoverride "field_right" {
										spacing = 7
										expand = {} 
										tooltipwidget = { using = market_hub_lacking_good_for_repairs_tooltip }

										text_single = {
											text = "[LackingGoodsForRepairEntry.GetLackingGoodsForRepairAmount]"
										}

										icon = {
											shaderfile = "gfx/FX/pdxgui_default.shader"
											size = {15 15}
											texture = "gfx/interface/icons/unit_actions/repair_ship.dds"
			
											using = bg_banner_button_vertical
			
											blockoverride "banner_button_extra" {
												visible = yes
											}
										}
									}
								}

								blockoverride "column_datamodel"  {  
									datamodel = "[AlertHasNotEnoughGoodsForShipRepairs.GetLackingGoodsForRepairs]"
								}
							}
						}
					}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/unit_actions/repair_ship.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# At fort limit
		###################################

		alert_banner = {
			name = "is_at_fort_limit"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action =  "[AlertIsAtFortLimit.Next]"
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/location_icons/fort.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('production_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Devastated locations
		###################################

		alert_banner = {
			name = "has_devastated_locations"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LOCATIONS_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasDevastatedLocations.Next]"
			}

			using = yellow_alert
			using = alert_list_tooltip

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_HAS_DEVASTATED_LOCATIONS"
					}
					blockoverride "concept_link" {
						text = "[prosperity|E]"
					}
					blockoverride "tooltip_content" {
						TooltipListBase = {
							blockoverride "block_title" {
								text = "ALERT_HAS_DEVASTATED_LOCATIONS_TEXT"
							}
							TooltipListScrollArea = {
								blockoverride "block_scrollarea" {
									maximumsize = { -1 390 }
								}

								blockoverride "scrollarea_content" {
									TooltipListColumnContent = {
										set_parent_dimension_to_minimum = height
										layoutpolicy_horizontal = expanding

										TooltipTableColumn = {
											blockoverride "column_title" {}
											blockoverride "column_title_text" { 
												text = "[location|e]" 
											}
											blockoverride "column_title_right" { 
												expand = {} 
											}
							
											blockoverride "field_left" {}
							
											blockoverride "field_text" {
												default_format = "#subtle_name"
												align = left|nobaseline
												raw_text = "[Location.GetName]"
											}
							
											blockoverride "field_right" { expand = {} }
										}
							
										TooltipTableColumn = {
											blockoverride "column_title" {}
											blockoverride "column_title_left" { 
												expand = {}
											}

											blockoverride "column_title_text" { 
												text = "[prosperity|e]" 
												default_format = "#explanation_link"
											}

											blockoverride "field_text" {
												visible = no
											}

											blockoverride "field_right" {
												expand = {} 

												text_single = {
													text = "[Location.GetProsperity|+r%]"

													tooltipwidget = {
														using = location_prosperity_tooltip
													}
												}
											}
										}

										blockoverride "column_datamodel"  {  
											datamodel = "[AlertHasDevastatedLocations.GetDevastatedLocations]"
										}
									}
								}
							}
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/location_icons/prosperity_low.dds"
			}

			onmousehierarchyenter = "[AlertHasDevastatedLocations.EnableHighlight(PdxGuiWidget.AccessSelf)]"
		}

		###################################
		# We can add setup a law
		###################################

		alert_banner = {
			name = "has_possible_law"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertPossibleLaw.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertPossibleLaw.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_possible_law')]"
			}
			
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_possible_law')]"
						}
					}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/flat_icons/laws.dds"
			}
		}

		###########################################################################
		# GREEN ALERTS
		###########################################################################

		############################
		# We are annexing a subject but they are disloyal
		############################

		alert_banner = {
			name = "annexing_disloyal_subject"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowManageSubjects]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[ShowManageSubjects]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_disloyal_subjects')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_disloyal_subjects')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			using = yellow_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/alert_annexing_disloyal.dds"
			}
		}

		###########################
		# Parliament
		###########################

		alert_banner = {
			name = "can_player_call_parliament"	

			datacontext = "[GetGenericAction('call_parliament')]"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[PerformGenericAction(GenericAction.Self)]"
			}

			using = green_alert
			
			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/parlament.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Parliament not doing anything
		###########################

		alert_banner = {
			name = "no_parliament_debate"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = parliament')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/no_parliament_debate.dds"
			}
		}

		###########################
		# Available Trade
		###########################

		alert_banner = {
			name = "has_available_trade_capacity"
			using = green_alert

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_MARKETS_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertAvailableTradeCapacity.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertAvailableTradeCapacity.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unused_trade_capacity')]"
			}

			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_unused_trade_capacity')]"
						}
					}
				}
			}
			
			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/flat_icons/trade_capacity.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('economy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We can do more research
		###################################

		alert_banner = {
			name = "can_do_more_research"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('advances', 'subtab = research')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('advances', 'subtab = research')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_can_do_more_research')]"
			}

			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_can_do_more_research')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('advances_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/can_do_more_research.dds"
			}
		}

		###################################
		# We can embrace an institution
		###################################

		alert_banner = {
			name = "can_embrace_institutions"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('advances', 'subtab = ages')]"
			}

			using = green_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/can_embrace_institution.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('advances_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We can upgrade our country rank
		###################################

		alert_banner = {
			name = "has_possible_country_rank_upgrade"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'togglebutton = select_form_new_country')]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/upgrade_country_rank.dds"
			}
		}

		###################################
		# We can add another reform
		###################################

		alert_banner = {
			name = "has_possible_reform"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = estates')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = estates')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_possible_reform')]"
			}

			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_possible_reform')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/add_another_reform.dds"
			}
		}

		###################################
		# We can form a new country
		###################################

		alert_banner = {
			name = "has_possible_formable_country"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'togglebutton = select_form_new_country')]"
			}
			
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "field_format_right" { visible = no }
				blockoverride "field_text_content_left" { text = "[StringPair.GetRight][AddTextIf(StringIsEmpty(StringPair.GetRight), ' ')]" }
				blockoverride "field_left" {
					country_flag = {
						datacontext = "[GetFormableCountry(StringPair.GetLeft)]"
						size = { 36 24 }
						
						blockoverride "tooltip" {
							tooltip_enabled = yes
							tagtooltip_enabled = yes
							tooltip = "[FormableCountry.GetName]"
						}
						
						blockoverride "contextmenu" {
							contextmenu_enabled = no
						}
						
						blockoverride "flag" {
							datacontext = "[FormableCountry.GetOrCreateCoatOfArms(Player.Self)]"
							texture = "[CoatOfArmsWrapper.GetTexture('(int32)144','(int32)96')]"
							frame = "[CoatOfArmsWrapper.GetFrame('(int32)144','(int32)96')]"
							framesize = "[CoatOfArmsWrapper.GetFrameSizeOrFallback('(int32)144','(int32)96','(float)0.5')]"
							texture_density = 2
						}

						blockoverride "click" {}
						blockoverride "double_click" {}
						blockoverride "hover" {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = green_alert

			blockoverride "icon_setup" {}
			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/form_new_country.dds"
			}

			blockoverride "alert_more_icons_after" {
				expand = { }
			}
			blockoverride "alert_more_icons_before" {
				expand = { }
				country_flag = {
					size = { 36 24 }
					datacontext = "[AlertFormableCountry.GetFormableCountry]"
					blockoverride "tooltip" {
						tooltip_enabled = yes
						tagtooltip_enabled = yes
						tooltip = "[FormableCountry.GetName]"
					}
					
					blockoverride "contextmenu" {
						contextmenu_enabled = no
					}

					blockoverride "flag" {
						datacontext = "[GetFormableCountryCoatOfArms(FormableCountry.Self)]"
						texture = "[CoatOfArmsWrapper.GetTexture('(int32)144','(int32)96')]"
						frame = "[CoatOfArmsWrapper.GetFrame('(int32)144','(int32)96')]"
						framesize = "[CoatOfArmsWrapper.GetFrameSizeOrFallback('(int32)144','(int32)96','(float)0.5')]"
						texture_density = 2
					}

					blockoverride "click" {
						onclick = "[OpenLateralViewWithParams('government', 'togglebutton = select_form_new_country')]"
					}
					blockoverride "double_click" {}
					blockoverride "hover" {}
				}
			}
		}

		###################################
		# We can do a government action
		###################################

		alert_banner = {
			name = "has_possible_cabinet_action"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = cabinet')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('government', 'tabcontent = cabinet')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_possible_cabinet_action')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_possible_cabinet_action')]"
							}
						}
					}
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/do_goverment_action.dds"
			}
		}

		###################################
		# We are getting a wargoal accepted
		###################################

		alert_banner = {
			name = "has_positive_enforced_war_goal"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenEnforceWarGoal]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/wargoal_accepted.dds"
			}
		}

		####################################
		# We are being saved by White Peace
		####################################

		alert_banner = {
			name = "has_positive_white_peace"

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/saved_by_white_peace.dds"
			}
		}

		###################################
		# Has unraised levies in ongoing war
		###################################

		alert_banner = {
			name = "has_unraised_levies_in_war"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasUnraisedLeviesInWar.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasUnraisedLeviesInWar.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_unraised_levies_in_war')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "title_button" {
						hint_button = {
							action_tooltip = {
								title = "OPEN_HINT"
								on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_unraised_levies_in_war')]"
							}
						}
					}
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/has_unraised_levies_in_war.dds"
			}
		}

		###################################
		# We have max Diplomats available
		###################################

		alert_banner = {
			name = "has_max_diplomats_available"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('diplomacy_macrobuilder')]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/diplomacy.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('diplomacy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We have Religious Aspect available
		###################################

		alert_banner = {
			name = "has_religious_aspect_available"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/religious_aspects/religious_aspects.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We can spend Religious Influence
		###################################

		alert_banner = {
			name = "can_spend_religious_influence"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = green_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/religious_aspects/church_power.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We can use Religious Actions
		###################################

		alert_banner = {
			name = "can_use_religious_action"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = green_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "[GetReligionIcon(GetPlayer.GetReligion)]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We have Religious Focus to add to queue
		###################################

		alert_banner = {
			name = "has_religious_focus_available"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/religious_doctrines/religious_focuses.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"			
		}

		###################################
		# Unmarried Children
		###################################

		alert_banner = {
			name = "has_unmarried_children"

			action_tooltip = {
				click_type = left
				title = "ALERT_HAS_UNMARRIED_CHILDREN_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasUnmarriedChildren.Next]"
			}

			using = green_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/unmarried_children.dds"
			}
		}

		###################################
		# Can Request Aid
		###################################

		alert_banner = {
			name = "can_request_aid"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/religious_doctrines/religious_influence.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# Heir Can Have Better Education
		####################################

		alert_banner = {
			name = "heir_can_have_better_education"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertManager.ShowHeir]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/character_interactions/balanced_education.dds"
			}
		}

		###################################
		# We Can Join Sect
		###################################

		alert_banner = {
			name = "can_join_sect"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "[GetReligionIcon(GetPlayer.GetReligion)]"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We Can Activate Avatar
		###################################

		# [SD] Made redundant by can_use_religious_action
		# alert_banner = {
		# 	name = "can_activate_avatar"

		# 	action_tooltip = {
		# 		click_type = left
		# 		title = "ALERT_CTA_LEFT_CLICK"
		# 		using = snd_UI_alert_openAndCycle
		# 		on_action = "[OpenLateralView('country_religion')]"
		# 	}

		# 	using = green_alert

		# 	blockoverride "icon_texture" {
		# 		texture = "[GetReligionIcon(GetPlayer.GetReligion)]"
		# 	}

		# 	onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
		# 	onmousehierarchyleave = "[ResetHighlightedTab]"
		# }

		###################################
		# We Can Invite Religious Figure
		###################################

		alert_banner = {
			name = "can_invite_religious_figure"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralView('country_religion')]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/religious_schools/scholars_other_schools.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('society_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Children can have better education
		###########################

		alert_banner = {
			name = "has_uneducated_child"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertHasUneducatedChild.Next]"
			}

			using = green_alert

			tooltipwidget = { 
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_CHILD_UNEDUCATED"
					}
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "gfx/interface/icons/alerts_icons/has_uneducated_child.dds"
						
						}
					}
					blockoverride "concept_link" {
						text = "[child|E]"
					}
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "ALERT_CHILD_UNEDUCATED_TEXT"
							}
						}
						TooltipScrolledRowList = {
							blockoverride "block_title" {
								text = "ALERT_CHILD_UNEDUCATED_PLURAL"
								default_format = "#color_white"
							}
							blockoverride "rowlist_datamodel_is_empty" { visible = "[IsDataModelEmpty(AlertHasUneducatedChild.GetUneducatedChildren)]"}
							blockoverride "rowlist_datamodel_has_items" { visible = "[DataModelHasItems(AlertHasUneducatedChild.GetUneducatedChildren)]"}
							blockoverride "rowlist_datamodel" { 
								datamodel = "[AlertHasUneducatedChild.GetUneducatedChildren]" 
								ignoreinvisible = yes
							}
							blockoverride "visibility" {
								visible = "[And4(Character.GetEstateType.IsAlwaysLoyal, Not(Character.GetEducation.IsDefault), Not(Character.IsAdult), GreaterThanOrEqualTo_int32(Character.GetAgeInYears, GetDefine('NCharacter','EDUCATION_AGE')))]"
							}
							blockoverride "rowlist_content" {
								hbox = {
									using = layoutpolicy_expanding
									margin = { 10 10 }
									spacing = 0

									widget = {
										size = {50 65}
										character_frame_small = {
											blockoverride "portrait_datacontext" {
												datacontext = "[Character]"
											}
											parentanchor = hcenter|bottom
											blockoverride "character_frame_texture" {
												texture = "gfx/interface/component_decoration/character_frames/character_non_stretchable_frame_2.dds"
											}
										}
									}

									expand = {}

									text_multi = {
										autoresize = no
										multiline = yes
										size = { 300 60 }
										align = left|nobaseline
										text = "[Character.GetName], [Character.GetAge|Y]"
									}
								}
							}

							blockoverride "block_scrollarea" {
								maximumsize = { -1 210 }
							}

							blockoverride "row_size" {
								maximumsize = { -1 50 }
								minimumsize = { -1 50 }
							}
						}
					}
				}
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/has_uneducated_child.dds"
			}
		}

		###################################
		# We can ask for money
		###################################

		alert_banner = {
			name = "can_ask_for_money"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertCanAskForMoney.OnAction]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/diplomatic_actions/friendly_actions.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('diplomacy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###################################
		# We can ask subject to improve cultural view
		###################################

		alert_banner = {
			name = "can_improve_subject_cultural_view"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertCanImproveSubjectCulturalView.OnAction]"
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/diplomatic_actions/subject_actions.dds"
			}

			onmousehierarchyenter = "[SetHighlightedTab('diplomacy_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"
		}

		###########################
		# Army without leader
		###########################

		alert_banner = {
			name = "has_army_without_leader"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertArmyWithoutLeader.Next]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "ALERT_HINT"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertArmyWithoutLeader.Next]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_army_without_leader')]"
			}
			
			tooltipwidget = {
				using = alert_list_tooltip_with_hint_content
				blockoverride "title_button" {
					hint_button = {
						action_tooltip = {
							title = "OPEN_HINT"
							on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_has_army_without_leader')]"
						}
					}
				}
			}

			using = green_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/army_without_leader.dds"
			}
		}

		############################
		# New policies are available
		############################

		alert_banner = {
			name = "can_codify_new_policies"

			action_tooltip = {
				click_type = left
				title = "ALERT_CTA_CYCLE_POLICIES_LEFT_CLICK"
				using = snd_UI_alert_openAndCycle
				on_action = "[AlertCanCodifyNewPolicies.Next]"
			}
	
			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "title_text" {
						text = "ALERT_CAN_CODIFY_NEW_POLICIES"
					}
					blockoverride "concept_link" {
						text = "[policies|E]"
					}
					blockoverride "tooltip_content" {
						TooltipListBase = {
							blockoverride "block_title" {
								text = "ALERT_CAN_CODIFY_NEW_POLICIES_TEXT"
							}
							TooltipListScrollArea = {
								blockoverride "block_scrollarea" {
									maximumsize = { -1 390 }
								}

								blockoverride "scrollarea_content" {
									TooltipListColumnContent = {
										set_parent_dimension_to_minimum = height
										layoutpolicy_horizontal = expanding

										TooltipTableColumn = {
											blockoverride "column_title" {}
											blockoverride "column_title_text" { 
												text = "[law|e]" 
											}
											blockoverride "column_title_right" { 
												expand = {} 
											}
							
											blockoverride "field_left" {}
							
											blockoverride "field_text" {
												default_format = "#subtle_name"
												align = left|nobaseline
												raw_text = "[Policy.GetLaw.GetName]"
											}
							
											blockoverride "field_right" { expand = {} }
										}
							
										TooltipTableColumn = {
											blockoverride "column_title" {}
											blockoverride "column_title_left" { 
												expand = {}
											}

											blockoverride "column_title_text" { 
												text = "[policy|e]" 
												default_format = "#explanation_link"
											}

											blockoverride "field_text" {
												visible = no
											}

											blockoverride "field_right" {
												expand = {} 

												text_single = {
													text = "[Policy.GetName]"
												}
											}
										}

										blockoverride "column_datamodel"  {  
											datamodel = "[AlertCanCodifyNewPolicies.GetPolicies]"
										}
									}
								}
							}
						}
					}
				}
			}

			using = green_alert
			using = alert_list_tooltip

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/setup_a_law.dds"
			}
		}

		###########################################################################
		# BLUE ALERTS
		###########################################################################
		###########################
		# Welcome to Project Caesar
		###########################

		alert_banner = {
			name = "is_startup_help"

			action_tooltip = {
				click_type = left
				title = "OUTLINER_AGENDA_OPEN"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenGameView('agenda')]"
			}

			action_tooltip = {
				click_modifier = shift
				click_type = left
				title = "OPEN_HINTS"
				using = snd_UI_alert_openAndCycle
				on_action = "[OpenLateralViewWithParams('hints', '')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
					blockoverride "shift_left_extra" {
						replacement_shift_item = {}
					}
				}
			}

			using = blue_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/welcome_to_caesar.dds"
			}
		}

		###########################
		# Non-Expert Welcome
		###########################

		alert_banner = {
			name = "non_expert_welcome"
			datacontext = "[Player]"

			action_tooltip = {
				click_type = left
				title = "OPEN_HINTS"
				using = snd_UI_alert_openAndCycle
				visible = "[EqualTo_string(Country.GetTag, 'HUN')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_hungary')]"
			}

			action_tooltip = {
				click_type = left
				title = "OPEN_HINTS"
				using = snd_UI_alert_openAndCycle
				visible = "[EqualTo_string(Country.GetTag, 'HOL')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_holland')]"
			}

			action_tooltip = {
				click_type = left
				title = "OPEN_HINTS"
				using = snd_UI_alert_openAndCycle
				visible = "[EqualTo_string(Country.GetTag, 'NOR')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_norway')]"
			}

			action_tooltip = {
				click_type = left
				title = "OPEN_HINTS"
				using = snd_UI_alert_openAndCycle
				visible = "[EqualTo_string(Country.GetTag, 'NAP')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_naples')]"
			}

			action_tooltip = {
				click_type = left
				title = "OPEN_HINTS"
				using = snd_UI_alert_openAndCycle
				visible = "[EqualTo_string(Country.GetTag, 'CAS')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_castile')]"
			}

			action_tooltip = {
				click_type = left
				title = "OPEN_HINTS"
				using = snd_UI_alert_openAndCycle
				visible = "[EqualTo_string(Country.GetTag, 'TUR')]"
				on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_ottomans')]"
			}
			
			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[AlertItem.GetTooltip]"
				}
			}

			using = blue_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/welcome_to_caesar.dds"
			}

			blockoverride "alert_banner_texture" {
				size = { 1 1 }
				using = color_white_texture
			}

			blockoverride "icon_setup" {
				country_flag_small = {
					parentanchor = center
				}
			}
		}

		###########################
		# Start New Mission
		###########################

		alert_banner = {
			name = "start_new_mission"

			onmousehierarchyenter = "[SetHighlightedTab('government_group')]"
			onmousehierarchyleave = "[ResetHighlightedTab]"

			using = blue_alert

			action_tooltip = {
				click_type = left
				title = "TOPBAR_MISSION_OPEN"
				using = snd_UI_alert_openAndCycle
				enabled = "[IsMissionsEnabled]"
				on_action = "[OpenLateralView('missions')]"
			}

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/missions/_default.dds"
				title = "TOPBAR_MISSION_INFO_NONE_CURRENTLY"
				game_concept = "[mission|e]"
			}

			tooltipwidget = {
				ContextualTooltipType = {
					blockoverride "tooltip_content" {
						TooltipTextBlock = {
							blockoverride "text" {
								text = "game_concept_mission_desc"
							}
						}
					}
				}
			}
		}

		#################################
		#
		#################################
		alert_banner = {
			name = "has_not_any_control_groups"

			using = blue_alert

			blockoverride "icon_texture" {
				texture = "gfx/interface/icons/alerts_icons/control_groups.dds"
			}
			blockoverride "action_tooltip_left" { }
		}
	}
}

###########################################################################
# CALL ALLY ALERTS
###########################################################################

button = {
	name = "call_ally_alert"

	ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"

	using = alert_banner_anim
	using = green_diplo_icon

	rightclicksound = "UI_alert_discard"

	tooltipmeta = {
		texture = "gfx/interface/icons/alerts_icons/can_call_ally.dds"
	}

	tooltipwidget = {
		SimpleContextualTooltipType = {
			lowpriotextcontext = "[CallAllyAlert.GetTooltip]"
		}
	}
	using = snd_UI_alert_openAndCycle
	using = snd_UI_alert_hide

	datacontext = "[CallAllyAlert.GetUIAction]"
	using = button_action_provider

	vbox = {
		set_parent_size_to_minimum = yes
		
		widget = {
			size = { @alert_wide 75 }
			vbox = {
				spacing = 5
				expand = {}

				country_flag_small = {
					datacontext = "[CallAllyAlert.GetCountry]"
				}

				icon = {
					size = { 30 30 }
					texture = "gfx/interface/icons/alerts_icons/can_call_ally.dds"
					texture_density = 2
					alpha = 1
		
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.5
					}
				}

				expand = {}
			}
		}

		widget = {
			layoutpolicy_horizontal = expanding
			size = { -1 12 }	
		}
	}
}

###########################################################################
# DIPLO ALERTS
###########################################################################

button = {
	name = "diplo_alert"

	ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"

	using = alert_banner_anim
	using = green_diplo_icon
	using = snd_UI_alert_hide

	action_tooltip = {
		click_type = left
		title = "ALERT_CTA_LEFT_CLICK"
		using = snd_UI_alert_openAndCycle
		on_action = "[DiploAlert.OnClick]"
	}

	action_tooltip = {
		click_type = right
		title = "ALERT_CTA_RIGHT_CLICK"
		clicksound = "UI_alert_discard"
		on_action = "[DiploAlert.OnRightClick]"
	}

	vbox = {
		set_parent_size_to_minimum = yes
		
		widget = {
			size = { @alert_wide 75 }
			vbox = {
				spacing = 5
				expand = {}

				country_flag_small = {
					blockoverride "tooltip" {
						tooltip_enabled = no
					}
					datacontext = "[DiploAlert.GetCountry]"
				}

				icon = {
					size = { 30 30 }
					texture = "[DiploAlert.GetIconTexture]"
					texture_density = 2
					alpha = 1
		
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.5
					}
				}

				expand = {}
			}
		}

		widget = {
			layoutpolicy_horizontal = expanding
			size = { -1 12 }	
		}
	}

	tooltipwidget = {
		SimpleContextualTooltipType = {
			blockoverride "title_icon" {
				icon = {
					texture = "[DiploAlert.GetIconTexture]"
					using = tooltip_title_icon_size
				}
			}
			lowpriotextcontext = "[DiploAlert.GetTooltip]"
		}
	}
}

###########################################################################
# WAR
###########################################################################

situation_banner = {
	name = "war_alert"

	datacontext = "[WarsOverviewWar.GetWar]"
	tooltipwidget = { 
		blockoverride "shift_left_extra" {
			replacement_shift_item = {}
		}
		using = War_tooltip 
	}

	action_tooltip = {
		click_type = left
		click_mode = single
		title = "OPEN_WAR"
		on_action = "[WarsOverviewWar.OnClick]"
	}
	
	action_tooltip = {
		click_modifier = shift
		click_type = left
		title = "ALERT_HINT"
		using = snd_UI_alert_openAndCycle
		on_action = "[WarsOverviewWar.OnClick]"
		on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_war')]"
	}

	action_tooltip = {
		click_type = right
		click_mode = single
		title = "PEACETITLE"
		visible = "[Not(War.IsCivilWar)]"
		on_action = "[ShowWarPeaceOffer(War.Self)]"
	}

	using = red_war_alert
	mirror = horizontal

	blockoverride "icon_texture_obj" {
		vbox = {
			spacing = 3
			margin_bottom = 22
			expand = {}

			vbox = {
				spacing = 3
				country_flag_very_small = {
					datacontext = "[WarsOverviewWar.GetMainEnemy]"
					filter_mouse = none
					alwaystransparent = yes
					blockoverride "tooltip" {}
					blockoverride "contextmenu" {}
					blockoverride "click" {}
					blockoverride "double_click" {}
					blockoverride "show_as_button" { visible = no }
					blockoverride "show_as_icon" { visible = yes }
				}
	
				icon = {
					size = { 22 22 }
					texture = "gfx/interface/icons/map_modes/war.dds"
	
					glow = {
						name = "drop_shadow"
						glow_radius = 3
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.3
					}
				}
			}

			text_single = {
				autoresize = no
				size = { 35 15 }
				fontsize = 14
				align = center
				visible = "[Not(War.IsCivilWar)]"

				raw_text = "[War.GetWarScore|+=0%/]"
			}
		}
	}
}

###########################################################################
# SITUATION
###########################################################################

situation_banner = {
	name = "situation_alert"

	using = purple_alert
	mirror = horizontal

	datacontext = "[ActiveSituation.GetSituation]"
	tooltipwidget = { 
		using = Situation_tooltip
		blockoverride "shift_left_extra" {
			replacement_shift_item = { visible = "[Situation.HasHint]" }
		}
	}

	action_tooltip = {
		click_type = left
		click_mode = single
		title = "ALERT_CTA_LEFT_CLICK"
		on_action = "[ShowSituation(ActiveSituation.Self)]"
	}

	action_tooltip = {
		click_modifier = shift
		click_type = left
		title = "ALERT_HINT"
		using = snd_UI_alert_openAndCycle
		visible = "[Situation.HasHint]"
		on_action = "[ShowSituation(ActiveSituation.Self)]"
		on_action = "[OpenLateralViewWithParams('hints', LinkParam('selected_hint', Situation.GetHintTag))]"
	}

	blockoverride "icon_texture" {
		texture = "[ActiveSituation.GetIcon]"
	}
}

###########################################################################
# DISASTER
###########################################################################

situation_banner = {
	name = "disaster_alert"
	onclick = "[ShowDisaster(Disaster.Self)]"

	using = black_alert
	mirror = horizontal

	tooltipwidget = { 
		using = Disaster_tooltip
		blockoverride "shift_left_extra" {
			replacement_shift_item = { visible = "[Disaster.GetType.HasHint]" }
		}
	}

	action_tooltip = {
		title = "ALERT_CTA_LEFT_CLICK"
	}

	action_tooltip = {
		click_type = left
		click_mode = single
		title = "ALERT_CTA_LEFT_CLICK"
		on_action = "[ShowDisaster(Disaster.Self)]"
	}

	action_tooltip = {
		click_modifier = shift
		click_type = left
		title = "ALERT_HINT"
		using = snd_UI_alert_openAndCycle
		visible = "[Disaster.GetType.HasHint]"
		on_action = "[ShowDisaster(Disaster.Self)]"
		on_action = "[OpenLateralViewWithParams('hints', LinkParam('selected_hint', Disaster.GetType.GetHintTag))]"
	}

	blockoverride "icon_texture" {
		texture = "[Disaster.GetIcon]"
	}
}

###########################################################################
# POTENTIAL DISASTER
###########################################################################

situation_banner = {
	name = "potential_disaster_alert"
	
	# We don't wanna show the disaster panel anymore as it's confusing.
	#onclick = "[ShowDisaster(Disaster.Self)]"
	#action_tooltip = {
	#	title = "ALERT_CTA_LEFT_CLICK"
	#}

	using = orange_alert
	mirror = horizontal

	tooltipwidget = { using = Disaster_tooltip }

	blockoverride "icon_texture" {
		texture = "[Disaster.GetIcon]"
	}
}

###########################################################################
# MISSION
###########################################################################

button = {
	name = "mission_alert"
	ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"

	visible = "[Or(MissionAlert.IsInProgress, MissionAlert.IsMissionStartEnabled)]"
	using = alert_banner_setup
	using = alert_banner_anim
	using = blue_alert

	blockoverride "alert_is_new_padding" {}
	blockoverride "icon_texture" {
		texture = "[GetMissionTaskIcon(MissionAlert.GetTask)]"
	}

	blockoverride "icon_setup" {
		allow_outside = yes
		icon = {
			alwaystransparent = yes
			visible = "[Not(MissionAlert.IsInstant)]"
			parentanchor = center
			size = { 116% 116% }
			texture = "gfx/interface/buttons/checkbox_round.dds"
			frame_grid = { 2 1 }

			modify_texture = {
				using = color_new_gold_texture
			}
		}

		piechart = {
			alwaystransparent = yes
			parentanchor = center
			allow_outside = yes
			visible = "[Not(MissionAlert.IsInstant)]"
			size = { 100% 100% }

			using = piechart_angles

			pieslice = {
				alwaystransparent = yes
				texture = "gfx/interface/pie_charts/pie_chart_blue_progress.dds"
				value = "[MissionAlert.GetProgress]"
				color = { 1 1 1 1 }
			}

			pieslice = {
				alwaystransparent = yes
				texture = "gfx/interface/pie_charts/pie_chart_blue_progress.dds"
				value = "[Subtract_float('(float)1.0', MissionAlert.GetProgress)]"
				color = { 1 1 1 0 }
			}
		}

		modify_texture = {
			visible = "[Not(MissionAlert.IsInstant)]"
			texture = "gfx/interface/buttons/checkbox_bg_round.dds"
			blend_mode = alphamultiply
		}
	}

	action_tooltip = {
		click_type = left
		enabled = "[MissionAlert.IsMissionStartEnabled]"
		description = "[MissionAlert.GetMissionStartDescription]"
		title = "MISSION_TASK_START"
		using = snd_UI_alert_openAndCycle
		on_action = "[MissionAlert.OnMissionStartClick]"
	}

	action_tooltip = {
		click_type = right
		title = "TOPBAR_MISSION_OPEN"
		clicksound = "UI_alert_discard"
		on_action = "[OpenLateralView('mission_tasks')]"
	}

	tooltipwidget = { 
		ContextualTooltipType = {
			blockoverride "title_text" {
				text = "[MissionAlert.GetName]"
			}

			blockoverride "tooltip_content" {
				TooltipTextBlock = {
					blockoverride "text" {
						text = "[MissionAlert.GetMissionStartDescription]"
					}
				}

				TooltipFlavorTextBlock = {
					visible = "[Not(StringIsEmpty( MissionAlert.GetTask.GetDesc ))]"
					blockoverride "text" {
						text = "[MissionAlert.GetTask.GetDesc]"
					}
				}
			}
		}
	}
}

###########################################################################
# ANNEXATION
###########################################################################

button = {
	ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"
	
	name = "annexation_alert"

	using = orange_alert
	using = progress_banner_setup
	using = alert_banner_anim

	onmousehierarchyenter = "[AnnexationAlert.SetAsOld]"

	using = snd_UI_alert_openAndCycle
	using = snd_UI_alert_hide

	modify_texture = {
		visible = "[AnnexationAlert.IsNew]"
		alpha = "[GetHighlightAnim('4.0, 0.1, 0.25')]"
	}

	blockoverride "alert_is_new_padding" {}

	blockoverride "alert_is_new_visible" {
		visible = "[AnnexationAlert.IsNew]"
	}

	action_tooltip = {
		click_type = left
		title = "WARTITLE"
		using = snd_UI_alert_openAndCycle
		on_action = "[AnnexationAlert.DeclareWarOnOverlord]"
	}

	action_tooltip = {
		click_type = right
		title = "ALERT_CTA_RIGHT_CLICK"
		clicksound = "UI_alert_discard"
		on_action = "[AnnexationAlert.Hide]"
	}

	tooltipwidget = { 
		SimpleContextualTooltipType = {
			lowpriotextcontext = "[AnnexationAlert.GetTooltip]"
		}
	}

	blockoverride "icon_texture" {
		texture = "gfx/interface/icons/alerts_icons/alert_being_annexed.dds"
	}

	blockoverride "pieslice_progress_setup" {
		value = "[AnnexationAlert.GetProgress]"
	}

	blockoverride "pieslice_background_setup" {
		value = "[Subtract_float('(float)100.0', AnnexationAlert.GetProgress)]"
	}
}

button = {
	ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"
	
	name = "annexation_disloyal_alert"

	using = yellow_alert
	using = progress_banner_setup
	using = alert_banner_anim

	onrightclick = "[AnnexationAlert.Hide]"
	rightclicksound = "UI_alert_discard"
	onmousehierarchyenter = "[AnnexationAlert.SetAsOld]"

	using = snd_UI_alert_openAndCycle
	using = snd_UI_alert_hide

	modify_texture = {
		visible = "[AnnexationAlert.IsNew]"
		alpha = "[GetHighlightAnim('4.0, 0.1, 0.25')]"
	}

	blockoverride "alert_is_new_padding" {}

	blockoverride "alert_is_new_visible" {
		visible = "[AnnexationAlert.IsNew]"
	}

	action_tooltip = {
		click_type = left
		title = "WARTITLE"
		using = snd_UI_alert_openAndCycle
		on_action = "[AnnexationAlert.DeclareWarOnOverlord]"
	}

	action_tooltip = {
		click_type = right
		title = "ALERT_CTA_RIGHT_CLICK"
		clicksound = "UI_alert_discard"
		on_action = "[AnnexationAlert.Hide]"
	}

	tooltipwidget = { 
		SimpleContextualTooltipType = {
			lowpriotextcontext = "[AnnexationAlert.GetTooltip]"
		}
	}

	blockoverride "icon_texture" {
		texture = "gfx/interface/icons/alerts_icons/being_annexed_disloyal.dds"
	}

	blockoverride "pieslice_progress_setup" {
		value = "[AnnexationAlert.GetProgress]"
	}

	blockoverride "pieslice_background_setup" {
		value = "[Subtract_float('(float)100.0', AnnexationAlert.GetProgress)]"
	}
}

###########################################################################
# IO LAWS ALERT
###########################################################################

button = {
	visible = "[And(GreaterThan_CFixedPoint(GetPlayer.GetFixedPointCurrencyValue('prestige'), '(CFixedPoint)4.9'), 
	GreaterThan_CFixedPoint(GetPlayer.GetFixedPointCurrencyValue('legitimacy'), '(CFixedPoint)4.9'))]"
	name = "international_organization_law_alert"

	ontextcontextchanged = "[SetAlertPriorityFromTextContext(PdxGuiWidget.AccessSelf)]"

	using = alert_banner_setup
	using = alert_banner_anim
	using = yellow_alert

	onrightclick = "[InternationalOrganizationLawAlert.Hide]"
	rightclicksound = "UI_alert_discard"
	onmousehierarchyenter = "[InternationalOrganizationLawAlert.SetAsOld]"

	using = snd_UI_alert_openAndCycle
	using = snd_UI_alert_hide

	modify_texture = {
		visible = "[InternationalOrganizationLawAlert.IsNew]"
		alpha = "[GetHighlightAnim('4.0, 0.1, 0.25')]"
	}

	blockoverride "alert_is_new_padding_visible" {
		visible = "[InternationalOrganizationLawAlert.IsNew]"
	}

	blockoverride "alert_is_new_visible" {
		visible = "[InternationalOrganizationLawAlert.IsNew]"
	}

	action_tooltip = {
		title = "IO_GOTO_LAW"
		on_action = "[InternationalOrganizationLawAlert.GoToInternationalOrganizationLaws]"
	}

	action_tooltip = {
		click_type = right
		title = "ALERT_CTA_RIGHT_CLICK"
		on_action = "[InternationalOrganizationLawAlert.Hide]"
	}

	tooltipwidget = { 
		SimpleContextualTooltipType = {
			lowpriotextcontext = "[InternationalOrganizationLawAlert.GetTooltip]"
		}
	}

	blockoverride "icon_texture" {
		texture = "[InternationalOrganizationLawAlert.GetIconTexture]"
	}
}
