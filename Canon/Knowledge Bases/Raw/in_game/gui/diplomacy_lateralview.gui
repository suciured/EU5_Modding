template relation_list_tooltip {
	ContextualTooltipType = {
		blockoverride "title_icon" {
			icon = {
				using = tooltip_title_icon_size
				texture = "[RelationTypeItem.AccessIcon]"
			}	
		}
		
	
		blockoverride "title_text" {
			text = "SUBJECT_TYPE_TOOLTIP_TEXT_TITLE"
		}

		blockoverride "concept_link" {
			text = "[RelationTypeItem.GetName|e]"
			tooltipwidget = {
				SimpleContextualTooltipType = {
					lowpriotextcontext = "[RelationTypeItem.GetToolTip]"
					blockoverride "title_icon" {
						icon = {
							using = tooltip_title_icon_size
							texture = "[RelationTypeItem.AccessIcon]"
						}	
					}
				}
			}			
		}
		
		blockoverride "tooltip_content" {
			TooltipListBase = {					
				TooltipListScrollArea = {
					blockoverride "scrollarea_content" {
						fixedgridbox = {
							addcolumn = 420
							addrow = 30
							setitemsizefromcell = yes
		
							datamodel = "[RelationTypeItem.GetRelations]"
							item = {
								widget = {
									background = {
										visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
										using = tooltip_table_field_texture
									}

									hbox = {
										using = layoutpolicy_expanding
										margin = { 10 0 }
										spacing = 10

										country_flag_small = {
											datacontext = "[RelationDescItem.GetCountry]"
										}
										widget = {
											size = {20 20}
											visible = "[And(RelationDescItem.HasProgress, RelationTypeItem.IsRelationType('truce'))]"
											tooltipwidget = {
												ContextualTooltipType = {
													blockoverride "title_icon" {
														icon = {
															size = { 50 50 }
															texture = "gfx/interface/icons/diplomatic_status/truce.dds"
														}
													}
												
													blockoverride "title_text" {
														datacontext = "[RelationDescItem.GetCountry]"
														text = "TRUCE_WITH_COUNTRY_TITLE"
													}
																		
													blockoverride "concept_link" {
														text = [truce|E]
													}
													blockoverride "tooltip_content" {
														TooltipTextBlock = {
															blockoverride "text" {
																text = "[RelationDescItem.GetToolTip]"
															}
														}
													}
												}
											}
											
											piechart = {
												visible = "[RelationDescItem.HasProgress]"
												parentanchor = center

												size = { 90% 90% }

												using = piechart_angles

												icon = {
													texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
													size = { 97% 97% }
													parentanchor = center
													color = { 0.45 0.59  0.67 1 }
													alpha = 0.3
												}

												pieslice = {
													texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
													value = "[RelationDescItem.GetProgress]"
													color = { 0.01 0.6 0.9 1 }
												}

												pieslice = {
													texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
													value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
													color = { 1 1 1 0 }
												}
											}

											icon = {
												texture = "gfx/interface/icons/diplomatic_status/truce.dds"
												blockoverride "frame_color" {
													modify_texture = {
														using = color_new_gold_texture
														blend_mode = multiply
													}
													modify_texture = {
														using = color_gold_texture
														# blend_mode = multiply
														alpha = 0.5
													}
												}
												size = { 60% 60% }
												parentanchor = center
											}
											using = bg_circle_piechart
										}

										text_single = {
											align = nobaseline
											text = "[RelationDescItem.GetCountry.GetLongNameWithNoTooltip]"
											tooltipwidget = {												
												using = SubjectType2_Tooltip
											}
										}

										expand = {}

										text_single = {
											visible = "[And(RelationTypeItem.IsRelationType('vassalizing'), RelationDescItem.GetCountry.GetDiplomacy.IsDisloyalSubject)]"
											text = "[RelationDescItem.GetCountry.GetDiplomacy.GetSubjectLoyalty|R2%/]"							
											datacontext = "[RelationDescItem.GetCountry]"
											tooltipwidget = {
												using = SubjectLoyalty_tooltip
											}
										}
										text_single = {
											visible = "[And(RelationTypeItem.IsRelationType('vassalizing'), Not(RelationDescItem.GetCountry.GetDiplomacy.IsDisloyalSubject))]"
											text = "[RelationDescItem.GetCountry.GetDiplomacy.GetSubjectLoyalty|G2%/]"							
											datacontext = "[RelationDescItem.GetCountry]"
											tooltipwidget = {
												using = SubjectLoyalty_tooltip
											}
										}
										
										icon = {
											size = { 24 24 }
											visible = "[RelationTypeItem.IsRelationType('vassalizing')]"
											texture = "[GetSubjectTypeIcon(RelationDescItem.GetCountry.GetDiplomacy.GetSubjectType)]"
											alpha = 0.8							
											glow = {
												name = "drop_shadow"
												glow_radius = 3
												color = {0.0 0.0 0.0 1.0}
												alpha = 0.3
											}
											tooltipwidget = {
												ContextualTooltipType = {
													blockoverride "title_icon" {
														icon = {
															using = tooltip_title_icon_size
															texture = "[GetSubjectTypeIcon(RelationDescItem.GetCountry.GetDiplomacy.GetSubjectType)]"
														}
													}
												
													blockoverride "title_text" {
														datacontext = "[RelationDescItem.GetCountry]"
														text = "SUBJECT_OF_COUNTRY_TITLE"
													}
																		
													blockoverride "concept_link" {
														text = [subject|E]
													}
													blockoverride "tooltip_content" {
														TooltipTextBlock = {
															blockoverride "text" {
																text = "[RelationDescItem.GetToolTip]"
															}
														}
													}									
												}
											}							
										}						
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

template foreign_wars_list_tooltip {
	ContextualTooltipType = {
		blockoverride "title_icon" {
			icon = {
				using = tooltip_title_icon_size
				texture = "[GetConceptTexture('war')]"
			}	
		}
		
	
		blockoverride "title_text" {
			text = "WARS_FROM_COUNTRY_TITLE"
		}

		blockoverride "concept_link" {
			text = "[war|e]"		
		}
		
		blockoverride "tooltip_content" {
			TooltipListBase = {					
				TooltipListScrollArea = {
					blockoverride "scrollarea_content" {
						fixedgridbox = {
							addcolumn = 420
							addrow = 30
							setitemsizefromcell = yes
		
							datamodel = "[ForeignCountryView.GetWars]"
							item = {
								widget = {
									background = {
										visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInDataModel)]"
										using = tooltip_table_field_texture
									}
									datacontext = "[WarsOverviewWar.GetWar]"
									tooltipwidget = { using = War_tooltip }

									hbox = {
										using = layoutpolicy_expanding
										margin = { 10 0 }
										spacing = 10

										piechart = {
											size = { 27 27 }
											using = piechart_angles

											pieslice_no_highlight = {
												texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
												value = "[Add_float('(float)100.0', FixedPointToFloat(WarsOverviewWar.GetWarScore))]"
												color = { 1 1 1 1 }
												alwaystransparent = yes
											}

											pieslice_no_highlight = {
												texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
												value = "[Subtract_float('(float)200.0', Add_float('(float)100.0', FixedPointToFloat(WarsOverviewWar.GetWarScore)))]"
												color = { 1 1 1 1 }
												alwaystransparent = yes
											}

											widget = {
												size = {26 18}
												parentanchor = center
												country_flag_very_small = {
													size = {100% 100%}
													parentanchor = center
													datacontext = "[WarsOverviewWar.GetMainEnemy]"
													blockoverride "click" {
														onclick = "[WarsOverviewWar.OnClick]"
													}
													tooltip_enabled = no
													contextmenu_enabled = no
												}
											}

											using = bg_circle_piechart
										}

										text_single = {
											align = nobaseline
											text = "[WarsOverviewWar.GetWar.GetNameWithNoTooltip]"
										}
										expand = {}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

template diplomacy_main_tabs {
	button_main_tab_alt = {
		widget = {
			visible = "[Not(IsLateralViewOpened('diplomacy'))]"
			size = { 100% 100% }
			name = "tab_relations"
		}
		layoutpolicy_horizontal = expanding
		tooltipwidget = {
			using = TabRelationsTooltip
		}

		down = "[IsLateralViewOpened('diplomacy')]"
		datacontext = "[GetAutomatedSystemItem('diplomacy')]"
		using = automated_tab

		blockoverride "on_action_left" { on_action = "[OpenLateralView('diplomacy')]" }
		blockoverride "text" { text = "DIPLOMACY_RELATIONS_TAB" }
	}

	button_main_tab_alt = {
		widget = {
			visible = "[Not(IsLateralViewOpened('diplomacy_macrobuilder'))]"
			size = { 100% 100% }
			name = "tab_actions"
		}
		layoutpolicy_horizontal = expanding
		blockoverride "tab_text"{
			text = "DIPLOMACY_ACTIONS_TAB"
		}
		tooltipwidget = {
			using = TabDiplomaticActionsTooltip
		}
		onclick = "[OpenLateralView('diplomacy_macrobuilder')]"
		down = "[IsLateralViewOpened('diplomacy_macrobuilder')]"
	}
}

template hegemons_card {
	widget = {
		visible = "[Not(IsFutureAgeFromName('age_3_discovery'))]"
		size = { 135 100 }
		allow_outside = yes

		# flag and shit
		widget = {
			parentanchor = center
			size = { 130 90 }

			datacontext = "[ActiveHegemonItem.GetHegemon]"
			
			tooltipwidget = {
				using = active_hegemon_tooltip
				
			}

			using = bg_paper_card
			blockoverride "card_shadow_margin" {
				margin = {-7 -7}
			}
			blockoverride "card_margin" {
				margin = {-7 -7}
			}

			country_flag_big = {
				parentanchor = center
				size = { 100% 100% }

				datacontext = "[ActiveHegemonItem.GetHegemon.GetCurrent]"
				visible = "[ActiveHegemonItem.GetHegemon.IsActive]"
			}

			widget = {
				size = { 100% 100% }
				alwaystransparent = yes
				background = {
					texture = "gfx/interface/component_decoration/flag_frames/frame_2.dds"
					
					texture_density = 2
				}
			}

			widget = {
				size = {38 38}
				parentanchor = hcenter|top
				position = {0 -7}
				
				blockoverride "header_color" {}

				icon = {
					parentanchor = center
					size = {100% 100%}
					# block "icon_texture_hegemony" {
						texture = "[GetHegemonyBorder(ActiveHegemonItem.GetHegemon.GetHegemony)]"
					# }
				
					texture_density = 2
					
					glow = {
						name = "drop_shadow"
						glow_radius = 4
						color = {0.0 0.0 0.0 1.0}
						alpha = 0.6
					}
				}	
			}
		}
	}
}

template organization_entry_button {
	using = bg_card_header_01
	
}

template organization_entry {
	using = bg_paper_card

	hbox = {
		using = layoutpolicy_expanding
		hbox = {
			using = layoutpolicy_expanding
			spacing = 5
			background = {
				visible = "[OrgItem.GetOrg.IsCountryMember(Player.Self)]"
				texture = "gfx/interface/component_overlay/card_title_glow.dds"
				texture_density = 2
				blend_mode = overlay
				alpha = 0.1

				glow = {
					glow_radius = 5
					color = { 1.0 0.85 0.55 1.0 }
					alpha = 0.2
				}
			}
			vbox = {
				using = layoutpolicy_expanding
				widget = {
					layoutpolicy_horizontal = expanding
					size = {-1 35}

					card_header_button_01 = {
						size = {100% 100%}
						blockoverride "header_pattern_texture_density" {texture_density = 1.75}
						blockoverride "bg_card_header_01_bg" {
							background = {
								using = bg_card_header_01_default
								alpha = 0.5
							}
						}
						blockoverride "header_color" {
							using = color_diplomacy_texture
						}

						action_tooltip = {
							click_type = left
							click_mode = single
							title = "ORGANIZATIONS_LEFT_CLICK"
							on_action = "[OpenInternationalOrganizationView(OrgItem.GetOrg.Self)]"
						}

						ondoubleclick = "[PanToCountry(Country.Self)]"
						onmousehierarchyenter = "[PdxGuiWidget.SetHighlightInternationalOrganization( OrgItem.GetOrg.Self) ]"

						datacontext = "[OrgItem.GetOrg]"
						tooltipwidget = {
							using = InternationalOrganization_tooltip				
						}

						datacontext = "[OrgItem.GetOrg.GetLeaderCountry]"
						using = organization_entry_button

						hbox = {
							margin = {10 0}
							spacing = 5
							margin_left = 60

							widget = {
								size = {45 45}
								ignore_layout = yes

								widget = {
									size = {40 40}
									position = {-1 -3}
									using = bg_paper_card
									using = organization_entry_button
									using = bg_cabinet_card_frame

									blockoverride "cabinet_card_frame_color" {
										modify_texture = {
											using = color_new_gold_texture
											blend_mode = multiply
										}
										modify_texture = {
											using = color_new_gold_texture
											blend_mode = add
											alpha = 0.5
										}
										modify_texture = {
											using = overlay_stone_texture
											blend_mode = overlay
										}
									}
									icon = {
										parentanchor = center
										size = {70% 70%}
										texture = "[OrgItem.GetOrg.GetIcon]"
										texture_density = 2
										glow = {
											name = "drop_shadow"
											glow_radius = 3
											color = {0.0 0.0 0.0 1.0}
											alpha = 0.3
										}
									}
								}
							}

							button_pin = {
								size = { 23 23 }
								visible = "[IsPlayerValid]"
								datacontext = "[OrgItem.GetOrg]"
								onclick = "[ToggleIOFav(InternationalOrganization.Self)]"
								checked = "[IsIOFaved(InternationalOrganization.Self)]"
								tooltipwidget = { 
									LeftClickButtonTooltip = {
										blockoverride "onclick_text" { 
											text = "[SelectLocalization(IsIOFaved(InternationalOrganization.Self), 'UNPIN_OUTLINER', 'PIN_OUTLINER')]"
										}
									}
								}
							}
							
							text_single = {
								using = layoutpolicy_expanding
								autoresize = no
								using = Font_Type_Headers
								text = "[OrgItem.GetName]"
								default_format = "#yellow_titles"
								align = left|nobaseline
	
								sort_by_left_fade_highlight = {
									position = { 10 0 }
									name = "name"
								}
							}

							expand = {}

							hbox = {
								spacing = 2

								text_single = {
									align = right
									size = {90 30}
									autoresize = no
									text = "[OrgItem.GetMembersText]"
		
									sort_by_right_fade_highlight = {
										position = { -55 0 }
										size = { 300% 100% }
										name = "members"
									}
								}
		
								widget = {
									size = { 27 22 }
									icon = {
										size = { 20 20 }
										parentanchor = center
										texture = "gfx/interface/icons/international_organizations/special_statuses/members.dds"
										texture_density = 2
										alpha = 1
										glow = {
											name = "drop_shadow"
											glow_radius = 3
											color = {0.0 0.0 0.0 1.0}
											alpha = 0.3
										}
									}
		
									tagtooltip_enabled = yes
									tooltip = "[member|e]"
								}
							}
						}
					}
				}

				widget = {
					layoutpolicy_horizontal = expanding
					size = { -1 35 }
					using = layoutpolicy_expanding
					overlappingitembox = {
						size = { 460 100% }
						margin_left = 33
						margin_top = 7
						parentanchor = left|vcenter
						datamodel = "[DataModelFirst(OrgItem.GetMembers, OrgItem.GetOrgUILimit)]"

						item = {
							country_flag_small = {}
						}
					}

					extra_list = {
						parentanchor = right|vcenter
						position = { -5 0 }
						visible = "[GreaterThan_int32(GetDataModelSize(OrgItem.GetMembers), OrgItem.GetOrgUILimit)]"
						blockoverride "extra_list_text_content" {
							raw_text = "+[OrgItem.GetOverflowCountriesForUI]"
						}
						
						tooltip_enabled = "[DataModelHasItems(OrgItem.GetMembers)]"
						tooltipwidget = {
							SimpleContextualRowTooltipType = {
								blockoverride "title_icon" {
									icon = {
										using = tooltip_title_icon_size
										texture = "[OrgItem.GetOrg.GetIcon]"
									}
								}
								blockoverride "title_text" {
									text = "[OrgItem.GetName]"
								}
								blockoverride "concept_link" {
									text = "[countries|e]"
								}
								blockoverride "tooltip_content" {
									TooltipListOfCountries = {
										blockoverride "datamodel" { datamodel = "[OrgItem.GetMembers]" }
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

lateralview = {
	name = "diplomacy_lateralview"
	widgetid = "diplomacy_lateralview"

	blockoverride "panel_header" {
		window_header_alt = {
			blockoverride "header_text" {
				text = "DIPLOMACY_TAB"
			}
			blockoverride "window_header_alt_color_texture"{
				using = color_diplomacy_texture
			}
		}
	}

	blockoverride "panel_content" {
		header_main_tabs = { #TABS
			blockoverride "content" {
				using = diplomacy_main_tabs
			}
		}

		vbox = {
			using = layoutpolicy_expanding
			using = bg_main_inner_alt 
			using = window_main_tabs_margin_alt

			AutomatedSection = {
				datacontext = "[GetAutomatedSystemItem('diplomacy')]"
				
				blockoverride "glow_anim_automation_visible" {
					visible = "[AutomatedSystemsItem.IsEnabled]"
				}
			}
			widget = { ### Supply Limit and Warscore
				layoutpolicy_horizontal = expanding
				size = { -1 45 }
				hbox = {
					spacing = 3
					subheader_unified_icon = {
						datacontext = "[Player]"
						tooltipwidget = {
							using = DiplomaticCapacity_tooltip
						}
						blockoverride "subheader_unified_icon_texture" {
							texture = "[GetConceptTexture('diplomatic_capacity')]"

							glow = {
								name = "drop_shadow"
								glow_radius = 3
								color = {0.0 0.0 0.0 1.0}
								alpha = 0.5
							}
						}
						blockoverride "subheader_unified_text_maxsize" { maximumsize = { 130 20 } }
						blockoverride "subheader_unified_top_text" {
							text = "game_concept_diplomatic_capacity"
							default_format = "#explanation_link"
							align = nobaseline
						}
						blockoverride "unified_icon_bottom_content"{
							spacing = 7
							text_single = {
								minimumsize = { -1 20 }
								maximumsize = { 150 20 }
								fontsize = 13
								autoresize = yes
								raw_text = "[DiplomacyLateralView.GetPlayer.GetDiplomacy.GetUsedDiplomaticCapacity|2] / [DiplomacyLateralView.GetPlayer.GetDiplomacy.GetMaxCapacity|2]"
								align = nobaseline	
							}
						}
					}
					
					expand = {}

					subheader_unified_icon = {
						blockoverride "mirror_layout" { righttoleft = yes }
						datacontext = "[Player]"
						tooltipwidget = {
							using = diplomatic_reputation_tooltip
						}
						blockoverride "subheader_unified_icon_texture" {
							texture = "gfx/interface/icons/flat_icons/diplomatic_reputation.dds"
							glow = {
								name = "drop_shadow"
								glow_radius = 3
								color = {0.0 0.0 0.0 1.0}
								alpha = 0.5
							}
						}
						blockoverride "subheader_unified_text_maxsize" { maximumsize = { 130 20 } }
						blockoverride "subheader_unified_top_text" {
							text = "game_concept_diplomatic_reputation"
							default_format = "#explanation_link"
							align = right|nobaseline
						}
						blockoverride "subheader_unified_bottom_text" {
							text = "[DiplomacyLateralView.GetPlayer.GetModifierValueNoFormat('diplomatic_reputation')]"
							align = right|nobaseline		
						}
					}
				}	
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding

				maximumsize = { -1 220 }

				using = bg_age_event_frame

				### HEGEMONS
				widget = {
					layoutpolicy_horizontal = expanding
					size = { -1 220 }

					hbox = {
						ecs_scene_viewer_widget =  {
							layoutpolicy_horizontal = expanding
							layoutpolicy_vertical = expanding
							name = "balance_overview_scene"
							scene = "[DiplomacyLateralView.GenerateSceneDesc]"
							alpha = 0.5
			
							icon = {
								size = { 100% 100% }
								using = color_black_texture
								alpha = 0.8
			
								modify_texture = {
									using = bg_fade_vertical_up_mask_texture
									blend_mode = alphamultiply
								}
							}
						}
					}

					country_rank_banner = {
						datacontext = "[Player]"
						parentanchor = top|hcenter
						blockoverride "country_rank_banner_size" {
							size = {34 42}
						}
					}

					vbox = {
						spacing = 10
						hbox = {
							spacing = 25
							datamodel = "[DataModelFirst(DiplomacyLateralView.GetActiveHegemons, '(int32)2')]"
							item = {
								using = hegemons_card
							}
						}

						hbox = {
							spacing = 10
							datamodel = "[DataModelLast(DiplomacyLateralView.GetActiveHegemons, '(int32)3')]"
							item = {
								using = hegemons_card
							}
						}
					}
				}

				### HEADER INFO
				# hbox = {
				# 	maximumsize = { -1 210 }
				# 	using = layoutpolicy_expanding

					
				# 	vbox = {
				# 		maximumsize = { -1 210 }
				# 		using = layoutpolicy_expanding

				# 		margin = {1 1}
						

				# 		ACTIONS
				# 		clickable_header_card = {

				# 			blockoverride "card_bg" {
				# 			}
									
				# 			blockoverride "clickable_header_card_size"{
				# 				size = { -1 160 }
				# 			}
							
				# 			blockoverride "header_color" {
				# 				texture = "gfx/interface/colors/purple_02.dds"
				# 			}
				# 			blockoverride "header_pattern" {
				# 				texture = "gfx/interface/cards/headers/header_pattern_07.dds"
				# 				alpha = 0.7
				# 			}

				# 			blockoverride "header_button" {
				# 				card_header_button_08 = {
				# 					size = { 100% 100% }
				# 					block "header_content" {}
				# 				}
				# 			}

				# 			blockoverride "header_content" {

				# 				background = {
				# 					texture = "gfx/interface/colors/purple_02.dds"
				# 					margin = {0 0}
				# 					alpha = 0.7

				# 					modify_texture = {
				# 						texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
				# 						blend_mode = alphamultiply
				# 					}

				# 				}
								
				# 				tooltipwidget = {
				# 					LeftClickButtonTooltip = {
				# 						blockoverride "onclick_text" { 
				# 							text = "SELECT_ACTIONS"
				# 						}
				# 					}
				# 				}
				# 				onclick = "[OpenLateralView('diplomacy_macrobuilder')]"

				# 				hbox = {
				# 					ignoreinvisible = yes

				# 					widget = {
				# 						layoutpolicy_horizontal = expanding
				# 						size = { -1 35 }

				# 						icon = {
				# 							parentanchor = left|vcenter
				# 							position = {5 0}
				# 							size = { 30 30 }
				# 							alwaystransparent = no
				# 							onmousehierarchyenter = "[PdxGuiWidget.PushMapModeOverride('diplomacy')]"
											
				# 							datacontext = "[Player]"
				# 							tooltipwidget = {
				# 								using = diplomatic_range_tooltip
				# 							}
					
				# 							texture = "gfx/interface/icons/flat_icons/diplomatic_range.dds"
				# 							glow = {
				# 								name = "drop_shadow"
				# 								glow_radius = 3
				# 								color = {0.0 0.0 0.0 1.0}
				# 								alpha = 0.5
				# 							}
				# 						}

				# 						text_single = {
				# 							maximumsize = {400 35}
				# 							parentanchor = center
				# 							align = nobaseline
				# 							text = "SELECT_ACTIONS"
				# 							default_format = "#yellow_titles"
				# 						}
				# 					}
				# 				}
				# 			}

				# 			blockoverride "bottom_content"
				# 			{
				# 				vbox = {
				# 					margin_left = 12
									

				# 					scrollarea = {
				# 						layoutpolicy_horizontal = expanding
				# 						maximumsize = { -1 130 }
										
				# 						scrollbarpolicy_horizontal = always_off
				# 						autoresizescrollarea = yes

				# 						scrollbar_vertical = {
				# 							using = Scrollbar_Vertical
				# 						}

				# 						scrollwidget = {
										
											
				# 							fixedgridbox = {
				# 								flipdirection = yes
				# 								datamodel_wrap = 8
				# 								addrow = 56
				# 								addcolumn = 56

				# 								datamodel = "[DiplomacyLateralView.GetQuickDiplomaticActions]"
				# 								item = {
				# 									widget = {
				# 										size = { 55 55 }
				# 										vbox = {
				# 											layoutpolicy_horizontal = expanding

				# 											button = {
				# 												size = { 45 50 }
				# 												enabled = "[DiplomaticActionItem.IsEnabled]"
				# 												action_tooltip = {
				# 													click_type = left
				# 													click_mode = single
				# 													title = "DIPLOMACY_MACROBUILDER_LATERAL_VIEW_SELECT_COUNTRY"
				# 													on_action = "[DiplomaticActionItem.OnClick]"
				# 													enabled = "[DiplomaticActionItem.IsEnabled]"
				# 												}
				# 												tooltipwidget = {
				# 													using = diplomatic_action_tooltip
				# 												}

				# 												navigational_2row_button_alt = {
				# 													parentanchor = center
				# 													size = { 45 45 }
				# 													using = bg_circle_alt_purple_02
				# 													enabled = "[DiplomaticActionItem.IsEnabled]"
				# 													blockoverride "navigational_bg" {
				# 														background = {
				# 															texture = "gfx/interface/component_tiles/square_tile.dds"
				# 															texture_density = 2
				# 															margin = {1 1}
				# 															modify_texture = {
				# 																using = color_dark_blue_texture
				# 																blend_mode = multiply
				# 															}
				# 														}
				# 													}
				# 													blockoverride "icon_texture" {
				# 														texture = "[DiplomaticActionItem.GetTexture]"
				# 														size = {55% 55%}

				# 														using = icon_gold_texture_alt
	
				# 														glow = {
				# 															name = "drop_shadow"
				# 															glow_radius = 3
				# 															color = {0.0 0.0 0.0 1.0}
				# 															alpha = 0.3
				# 														}
				# 													}

				# 													blockoverride "navigational_button_text" {
				# 														text = "[DiplomaticActionItem.GetTotalMacrobuilderActions]"
				# 														tooltipwidget = {
				# 															SimpleContextualTooltipType = {
				# 																textcontext = "DIPLOMACY_COUNTRIES_ENABLED_WILL_ACCEPT"
				# 															}
				# 														}																		
				# 														fontsize = 12
				# 													}

				# 													action_tooltip = {
				# 														click_type = left
				# 														click_mode = single
				# 														title = "DIPLOMACY_MACROBUILDER_LATERAL_VIEW_SELECT_COUNTRY"
				# 														on_action = "[DiplomaticActionItem.OnClick]"
				# 														enabled = "[DiplomaticActionItem.IsEnabled]"
				# 													}
																	
				# 													tooltipwidget = {
				# 														using = diplomatic_action_tooltip
				# 													}
				# 												}
				# 											}
				# 										}
				# 									}
				# 								}
				# 							}
				# 						}
				# 					}
									
				# 				}
				# 			}
				# 		}

				# 		expand = {}

				# # 	TRUCES
				# 		hbox = {
				# 			layoutpolicy_horizontal = expanding
				# 			datamodel = "[DiplomacyLateralView.GetDiplomaticRelations]"
				# 			item = {
				# 				hbox = {
				# 					layoutpolicy_horizontal = expanding
				# 					visible = "[RelationTypeItem.IsRelationType('truce')]"
				# 					spacing = 10
				# 					margin = { 10 7 }

				# 					tagtooltip_enabled = yes
				# 					tooltip = "[truce|e]"

				# 					using = bg_paper_card
				# 					using = wood_frame_thin
				# 					blockoverride "card_margin" { alpha = 0.4}
				# 					using = bg_cabinet_card_frame

				# 					icon = {
				# 						size = { 26 26 }
				# 						texture_density = 2
				# 						texture = "gfx/interface/icons/diplomatic_status/truce.dds"
				# 						using = overlay_color_light_blue
				# 						glow = {
				# 							name = "drop_shadow"
				# 							glow_radius = 3
				# 							color = {0.0 0.0 0.0 1.0}
				# 							alpha = 0.3
				# 						}
				# 					}

				# 					expand = {
				# 						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)7')]"
				# 					}

				# 					hbox = {
				# 						layoutpolicy_vertical = expanding
				# 						spacing = 8
				# 						datamodel = "[DataModelFirst(RelationTypeItem.GetRelations,'(int32)7')]"
				# 						item = {
				# 							widget = {
				# 								size = {26 26}
												
				# 								piechart = {
				# 									visible = "[RelationDescItem.HasProgress]"
				# 									parentanchor = center
				
				# 									size = { 100% 100% }
				
				# 									using = piechart_angles

				# 									icon = {
				# 										texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
				# 										size = { 97% 97% }
				# 										parentanchor = center
				# 										color = { 0.45 0.59  0.67 1 }
				# 										alpha = 0.3
				# 									}

				# 									pieslice = {
				# 										texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
				# 										value = "[RelationDescItem.GetProgress]"
				# 										color = { 0.01 0.6 0.9 1 }
				# 									}
				
				# 									pieslice = {
				# 										texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
				# 										value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
				# 										color = { 1 1 1 0 }
				# 									}
				# 									using = bg_circle_piechart
				# 								}

				# 								country_flag_mini = {
				# 									parentanchor = center
				# 									visible = "[RelationDescItem.GetCountry.IsValid]"
				# 									datacontext = "[RelationDescItem.GetCountry]"
				# 									datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
				# 									using = button_action_provider_base
				# 								}
				# 							}
				# 						}
				# 					}
				
				# 					expand = {}
				
				# 					text_single = {
				# 						using = Font_Type_Headers
				# 						raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)7')]"
				# 						align = nobaseline
				# 						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)7')]"
				# 						tooltipwidget = {
				# 							using = relation_list_tooltip
				# 						}
				# 					}
				# 				}
				# 			}
				# 		}
				# 	}

				# 	AutomatedSection = {
				# 		datacontext = "[GetAutomatedSystemItem('diplomacy')]"
						
				# 		blockoverride "glow_anim_automation_visible" {
				# 			visible = "[AutomatedSystemsItem.IsEnabled]"
				# 		}
				# 	}
				# }
			}

			### RELATIONS CONTENT
			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding

				expand = {}

				### INNER MID TABS FOR RELATIONS
				header_secondary_tabs = {
					blockoverride "content" {
						### Current Relations
						button_secondary_tab_alt = {
							widget = {
								visible = "[Not(DiplomacyLateralView.Vars.NotExistOrHasValue( 'relations_tab', 'current_relations' ))]"
								size = { 100% 100% }
								name = "current_relations_tab"
							}
							using = layoutpolicy_expanding
							blockoverride "tab_text"{
								text = "DIPLOMACY_CURRENT_RELATIONS_TAB"
							}
							tooltipwidget = {
								using = SubTabCurrentRelationsTooltip
							}
							onclick = "[DiplomacyLateralView.Vars.Set( 'relations_tab', 'current_relations' )]"
							down = "[DiplomacyLateralView.Vars.NotExistOrHasValue( 'relations_tab', 'current_relations' )]"
						}

						### Known Countries
						button_secondary_tab_alt = {
							widget = {
								visible = "[Not(DiplomacyLateralView.Vars.HasValue( 'relations_tab', 'known_countries' ))]"
								size = { 100% 100% }
								name = "known_countries_subtab"
							}
							using = layoutpolicy_expanding
							blockoverride "tab_text"{
								text = "DIPLOMACY_KNOWN_COUNTRIES_TAB"
							}
							tooltipwidget = {
								using = SubTabKnownCountriesTooltip
							}
							onclick = "[DiplomacyLateralView.Vars.Set( 'relations_tab', 'known_countries' )]"
							down = "[DiplomacyLateralView.Vars.HasValue( 'relations_tab', 'known_countries' )]"
						}

						button_secondary_tab_alt = {
						widget = {
								visible = "[Not(DiplomacyLateralView.Vars.HasValue( 'relations_tab', 'known_organizations' ))]"
								size = { 100% 100% }
								name = "known_organizations_subtab"
							}
							using = layoutpolicy_expanding
							blockoverride "tab_text"{
								text = "ORGANIZATIONS_KNOWN_TAB"
							}
							tooltipwidget = {
								using = SubTabKnownOrganizationsTooltip
							}
							onclick = "[DiplomacyLateralView.Vars.Set( 'relations_tab', 'known_organizations' )]"
							down = "[DiplomacyLateralView.Vars.HasValue( 'relations_tab', 'known_organizations' )]"
						}
					}
				}

				vbox = {
					using = layoutpolicy_expanding
					using = bg_secondary_inner_alt
					using = bg_secondary_inner_image_alt
					blockoverride "image" {
						texture = "gfx/interface/illustrations/bg/bg_diplomacy.dds"
					}

					### CURRENT RELATIONS CONTENT
					vbox = {
						name = "current_relations_list"
						widgetid = "current_relations_subtab"
						visible = "[DiplomacyLateralView.Vars.NotExistOrHasValue( 'relations_tab', 'current_relations' )]"
						using = layoutpolicy_expanding

						widget = {
							layoutpolicy_horizontal = expanding
							size = {-1 45}

							hbox = {
								margin = { 10 10 }
								margin_top = 8

								header_button_left = {
									enabled = "[GreaterThan_int32(Player.GetDiplomacy.GetNumberOfSubjectsOrBelow, '(int32)0')]"
									title = "MANAGE_SUBJECTS_HEADER"
									
									tooltipwidget = {
										BasicFunctionalTooltip = {}
									}
									action_tooltip = {
										enabled = "[GreaterThan_int32(Player.GetDiplomacy.GetNumberOfSubjectsOrBelow, '(int32)0')]"
										click_type = left
										title = "SUBJECTS_TOOLTIP_BUTTON_TT"
										conditions = "[MakeItFailIfLoc(Not(GreaterThan_int32(Player.GetDiplomacy.GetNumberOfSubjectsOrBelow, '(int32)0')), 'SUBJECTS_TOOLTIP_BUTTON_NO_TT')]"
										using = snd_UI_alert_openAndCycle
										on_action = "[ShowManageSubjects]"
									}
					
									blockoverride "icon_overlay" {
										texture = "gfx/interface/icons/diplomatic_status/vassalized.dds"
											
										size = { 28 28 }
										texture_density = 2
									}
					
									blockoverride "adjust_to_content" {
										minimumsize = { 150 40 }
										set_parent_size_to_minimum = yes
									}
					
									blockoverride "text_top" {
										maximumsize = { 180 -1 }
										text = "MANAGE_SUBJECTS_HEADER"
									}
									blockoverride "text_bottom" {
										margin_right = 100
										maximumsize = { 180 -1 }
										text = "[GetDataModelSize(Player.GetDiplomacy.GetSubjects)]"
									}
								}

								expand = {}

								header_button_right = {
									enabled = "[GreaterThan_int32(Player.GetPossibleTotalSubjectsAmount, '(int32)0')]"
									title = "CREATE_SUBJECTS_HEADER"
									
									tooltipwidget = {
										BasicFunctionalTooltip = {}
									}
									action_tooltip = {
										enabled = "[GreaterThan_int32(Player.GetPossibleTotalSubjectsAmount, '(int32)0')]"
										click_type = left
										title = "CREATE_SUBJECTS_HEADER"
										conditions = "[MakeItFailIfLoc(Not(GreaterThan_int32(Player.GetPossibleTotalSubjectsAmount, '(int32)0')), 'CREATE_SUBJECTS_HEADER_NO_TT')]"
										using = snd_UI_alert_openAndCycle
										on_action ="[OpenLateralView('create_subjects')]"
									}
					
									blockoverride "icon_overlay" {
										texture = "gfx/interface/icons/diplomatic_status/vassalized.dds"
											
										size = { 28 28 }
										texture_density = 2
									}
					
									blockoverride "adjust_to_content" {
										minimumsize = { 150 40 }
										set_parent_size_to_minimum = yes
									}
					
									blockoverride "text_top" {
										maximumsize = { 180 -1 }
										text = "CREATE_SUBJECTS_HEADER"
									}
									blockoverride "text_bottom" {
										margin_left = 100
										maximumsize = { 180 -1 }
										text = "[Player.GetPossibleTotalSubjectsAmount]"
									}
								}
							}
						}

						widget = {
							using = layoutpolicy_expanding
							widgetid = "current_relations_content"
							
							vbox = {
								margin_top = 10
								filtered_sorted_list = {
									datacontext = "[DiplomacyLateralView.GetDiplomaticRelationsSortSearch]"

									blockoverride "scroll_list_is_empty" {
										visible = "[IsDataModelEmpty(DiplomacyLateralView.GetDiplomaticRelations)]"
									}

									blockoverride "scroll_list_is_empty_text" {
										text = "DIPLOMACY_LIST_EMPTY"
									}

									blockoverride "scroll_list_layout" {
										vbox = {
											layoutpolicy_horizontal = expanding
											spacing = 10
											margin = { 8 8 }
											# RELATIONS
											vbox = {
												layoutpolicy_horizontal = expanding
												# ONGOING DIPLOMACY
												vbox = {
													layoutpolicy_horizontal = expanding
													margin_bottom = 10
													visible = "[DiplomacyLateralView.HasOngoingRelations]"

													ongoing_diplomatic_actions_card = {
														blockoverride "ongoing_diplomatic_actions_card_visibility"{
															visible = "[DiplomacyLateralView.HasOngoingRelations]"
														}
														blockoverride "ongoing_diplomatic_actions_card_empty" {
															visible = no
														}
														blockoverride "ongoing_diplomatic_actions_card_datamodel" {
															datamodel = "[DiplomacyLateralView.GetOngoingRelationCountries]"
														}
													}
												}

												# ORGS
												vbox = {
													margin_bottom = 10
													layoutpolicy_horizontal = expanding
													visible = "[Not(IsDataModelEmpty(Player.GetDiplomacy.GetInternationalOrganizations))]"
													membership_ios_item = {}
												}

												vbox = {
													layoutpolicy_horizontal = expanding
													spacing = 10
													datamodel = "[DiplomacyLateralView.GetDiplomaticRelations]"
													item = {
														vbox = {
															layoutpolicy_horizontal = expanding
															datacontext = "[GetPlayer]"
															relation_type_item_subject = {
																visible = "[RelationTypeItem.IsRelationType('vassalizing')]"
															}
															relation_type_item_war = {
																visible = "[Or(RelationTypeItem.IsRelationType('war'), RelationTypeItem.IsRelationType('civil_war'))]"
															}
															relation_type_item_casus_belli = {
																visible = "[RelationTypeItem.IsRelationType('casus_belli')]"
															}
															relation_type_item_casus_belli_target = {
																visible = "[RelationTypeItem.IsRelationType('casus_belli_target')]"
															}
															relation_type_item_truce_or_annul_treaties = {
																visible = "[Or(RelationTypeItem.IsRelationType('truce'), RelationTypeItem.IsRelationType('annul_treaties'))]"
															}
															relation_type_item_annexation = {
																visible = "[RelationTypeItem.IsRelationType('annex')]"
															}
															relation_type_item_annexation_target = {
																visible = "[RelationTypeItem.IsRelationType('annex_target')]"
															}
															relation_type_item = {
																visible = "[Not( Or( 
																Or5( RelationTypeItem.IsRelationType('annex_target'), RelationTypeItem.IsRelationType('annex'),
																RelationTypeItem.IsRelationType('war'), RelationTypeItem.IsRelationType('civil_war'), RelationTypeItem.IsRelationType('vassalizing')),
																Or4( RelationTypeItem.IsRelationType('truce'),
																RelationTypeItem.IsRelationType('casus_belli'), RelationTypeItem.IsRelationType('casus_belli_target'),
																RelationTypeItem.IsRelationType('annul_treaties'))
																))]"
															}
														}
													}
												}
											}
											expand = {}
										}
									}
								}
							}
						}
					}					
					### KNOWN COUNTRIES & GREAT POWERS CONTENT
					vbox = {
						using = layoutpolicy_expanding
						widgetid = "known_countries_subtab"
						visible = "[DiplomacyLateralView.Vars.HasValue( 'relations_tab', 'known_countries' )]"
						widget = {
							layoutpolicy_horizontal = expanding
							size = { -1 45 }
							hbox = {
								subheader_unified_icon = {
									datacontext = "[Player]"
									tooltipwidget = {
										using = power_projection_tooltip
									}
									blockoverride "subheader_unified_icon_texture" {
										texture = "gfx/interface/icons/flat_icons/power_projection.dds"
										
									}
									blockoverride "subheader_unified_top_text" {
										text = "game_concept_power_projection"
										align = nobaseline
									}
									blockoverride "subheader_unified_bottom_text" {
										text = "[Country.GetPowerProjection|1]"
										align = nobaseline
									}
								}
					
								expand = {}
								
								subheader_unified_icon = {
									blockoverride "mirror_layout" { righttoleft = yes }
									datacontext = "[Player]"
									tooltipwidget = {
										using = diplomatic_range_tooltip
									}
									blockoverride "subheader_unified_icon_texture" {
										texture = "[GetConceptTexture('diplomatic_range')]"
									}
									blockoverride "subheader_unified_top_text" {
										text = "game_concept_diplomatic_range"
										align = right|nobaseline
									}
									blockoverride "subheader_unified_bottom_text" {
										text = "[DiplomacyLateralView.GetDiplomaticRange]"
										align = right|nobaseline				
									}
								}
							}
						}
					
						### KNOWN COUNTRIES CONTENT
						vbox = {
							using = layoutpolicy_expanding

							filtered_sorted_list = {
								datacontext = "[DiplomacyLateralView.GetCountriesSortSearch]"

								blockoverride "sort_buttons_filtered_list" {
									sort_by_key_button = {
										name = "name"
										using = layoutpolicy_expanding
									}

									sort_by_key_button = {
										name = "rank"
										using = layoutpolicy_expanding
										blockoverride "sort_by_key_button_texture" {
											texture = "gfx/interface/icons/sort/gp.dds"
										}
									}

									sort_by_key_button = {
										name = "opinion"
										layoutpolicy_vertical = expanding
										size = { 89 -1 }
									}

									sort_by_key_button = {
										name = "trust"
										layoutpolicy_vertical = expanding
										size = { 89 -1 }
									}

									sort_by_key_button = {
										name = "favors"
										layoutpolicy_vertical = expanding
										size = { 89 -1 }
									}

									sort_by_key_button = {
										name = "spy_network"
										layoutpolicy_vertical = expanding
										size = { 89 -1 }
									}

									sort_by_key_padding = {
										layoutpolicy_vertical = expanding
										size = { 100 -1 }
									}
								}

								blockoverride "scroll_list_layout" {
									fixedgridbox = {
										addcolumn = 100%
										addrow = 70
										maxhorizontalslots = 1

										datamodel = "[DiplomacyLateralView.GetCountries]"
										item = {
											widget = {
												size = {100% 65}
												# COUNTRY CARD
												hbox = {
													using = bg_market_card
													using = bg_cabinet_card_frame
													
													datacontext = "[CountryDiplomaticItem.GetCountry]"
							
													country_card = {
														blockoverride "great_power_sort_highlight" {
															sort_by_small_highlight = {
																name = "rank"
															}
														}

														blockoverride "name_sort_highlight" {
															sort_by_left_fade_highlight = {
																ignore_layout = yes
																name = "name"
															}
														}

														blockoverride "opinion_sort_highlight" {
															sort_by_small_highlight = {
																ignore_layout = yes
																name = "opinion"
															}
														}

														blockoverride "trust_sort_highlight" {
															sort_by_small_highlight = {
																ignore_layout = yes
																name = "trust"
															}
														}

														blockoverride "favors_sort_highlight" {
															sort_by_small_highlight = {
																ignore_layout = yes
																name = "favors"
															}
														}

														blockoverride "spy_network_sort_highlight" {
															sort_by_small_highlight = {
																ignore_layout = yes
																name = "spy_network"
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}

					### KNOWN ORGANIZATIONS CONTENT
					vbox = {
						widgetid = "known_orgaizations_subtab"
						using = layoutpolicy_expanding
						visible = "[DiplomacyLateralView.Vars.HasValue( 'relations_tab', 'known_organizations' )]"

						vbox = {
							layoutpolicy_horizontal = expanding
							margin = { 8 8 }
							membership_ios_item = {}
						}
						
						filtered_sorted_list = {
							datacontext = "[DiplomacyLateralView.GetOrgsSortSearch]"

							blockoverride "scroll_list_is_empty" {
								visible = "[IsDataModelEmpty(DiplomacyLateralView.GetOrgsItems)]"
							}

							blockoverride "scroll_list_content" {
								addcolumn = 100%
								addrow = 80
								datamodel = "[DiplomacyLateralView.GetOrgsItems]"

								item = {
									widget = {
										size = { 100% 85 }
										
										widget = {
											parentanchor = center
											size = { 98% 70 }
											using = organization_entry
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

template relation_type_item_action {
	tooltipwidget = {
		BasicFunctionalTooltip = {}
	}

	action_tooltip = {
		click_type = left
		click_mode = single
		title = "[RelationTypeItem.OnClickTitle]"
		visible = "[RelationTypeItem.OnClickVisible]"
		enabled = "[RelationTypeItem.OnClickEnabled]"
		description = "[RelationTypeItem.OnClickTooltip]"
		on_action = "[RelationTypeItem.OnClick]"
	}

	action_tooltip = {
		click_type = left
		click_mode = confirm
		title = "[RelationTypeItem.OnClickAndConfirmTitle]"
		visible = "[RelationTypeItem.OnClickAndConfirmVisible]"
		enabled = "[RelationTypeItem.OnClickAndConfirmEnabled]"
		description = "[RelationTypeItem.OnClickAndConfirmTooltip]"
		on_action = "[RelationTypeItem.OnClickAndConfirm]"
	}

	action_tooltip = {
		click_type = right
		click_mode = single
		title = "[RelationTypeItem.OnClickRemoveTitle]"
		visible = "[RelationTypeItem.OnClickRemoveVisible]"
		enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
		description = "[RelationTypeItem.OnClickRemoveTooltip]"
		on_action = "[RelationTypeItem.OnClickRemove]"
	}
}

types diplomacy_cards {
	type ongoing_relation_item = hbox {
		spacing = 3
		margin = {5 0}

		background = {
			texture = "gfx/interface/component_tiles/square_tile.dds"
			texture_density = 2
			alpha = 0.5
			modify_texture = {
				using = color_dark_blue_texture
				blend_mode = normal
			}
			modify_texture = {
				using = overlay_cloth_texture
				blend_mode = overlay
				alpha = 0.2
			}
		}

		text_single = {
			text = "[OngoingRelationCountryList.GetCountryCount]"
		}

		icon = {
			texture = "[OngoingRelationCountryList.GetTexture]"
			size = { 30 30 }
		}

		tooltipwidget = {
			ContextualTooltipType = {
				blockoverride "title_icon_texture" {
					texture = "[OngoingRelationCountryList.GetTexture]"
				}
			
				blockoverride "title_text" {
					text = "[OngoingRelationCountryList.GetDiplomaticStatusName]"
				}
		
				blockoverride "concept_link" {
					text = "[OngoingRelationCountryList.GetConcept]"
				}
				
				blockoverride "tooltip_content" {						
					TooltipScrolledRowList = {
						blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
						blockoverride "block_title" { visible = no }
						blockoverride "rowlist_datamodel_is_empty" { visible = no }
						blockoverride "rowlist_datamodel_has_items" { visible = "[GreaterThan_int32(OngoingRelationCountryList.GetCountryCount, '(int32)0')]"}
						blockoverride "rowlist_datamodel" { datamodel = "[OngoingRelationCountryList.GetCountries]" }
						blockoverride "empty_list_text" { text = "" }
						blockoverride "rowlist_content" {
							ongoing_relation_for_country = {
							}
						}
		
						blockoverride "block_scrollarea" {
							maximumsize = { -1 210 }
						}
		
						blockoverride "row_size" {
							maximumsize = { -1 40 }
							minimumsize = { -1 40 }
						}
					}
				}
			}
		}
	}

	type ongoing_relation_for_country = hbox {
		using = layoutpolicy_expanding
		margin = { 10 0 }
		spacing = 5

		tooltipwidget = {
			using = ongoing_relation_tooltip
		}

		country_flag_small_plus = {}

		text_single = {
			text = "[Country.GetName]"
		}

		expand = {}

		text_single = {
			text = "[OngoingRelationCountryList.GetProgressForCountry(Country.Self)|2]"
		}

		widget = {
			size = {30 30}

			piechart = {
				size = { 30 30 }
				using = piechart_angles

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
					value = "[OngoingRelationCountryList.GetProgressForCountry(Country.Self)]"
					color = { 1 1 1 1 }
				}

				pieslice = {
					texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
					value = "[Subtract_float('(float)100.0', OngoingRelationCountryList.GetProgressForCountry(Country.Self))]"
					color = { 1 1 1 0 }
				}

				icon = {
					texture = "[OngoingRelationCountryList.GetTexture]"
					size = { 70% 70% }
					# using = overlay_color_light_blue
					parentanchor = center
				}
			}
		}
		#action lock/unlock button
		button_regular = {
			size = {31 31}
			icon = {
				parentanchor = center
				size = { 88% 88% }
				visible = "[Not(OngoingRelationCountryList.IsLockedForCountry(Country.Self))]"

				texture = "gfx/interface/icons/map_subdivisons/unlocked.dds"
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.6
				}
			}
			icon = {
				parentanchor = center
				size = { 88% 88% }
				visible = "[OngoingRelationCountryList.IsLockedForCountry(Country.Self)]"

				texture = "gfx/interface/icons/map_subdivisons/locked.dds"
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.6
				}
			}
			tooltipwidget = {
				BasicFunctionalTooltip = {
				}
			}
			action_tooltip = {
				click_type = left
				title = "LOCK_ONGOING_RELATION"
				visible = "[Not(OngoingRelationCountryList.IsLockedForCountry(Country.Self))]"
				on_action = "[OngoingRelationCountryList.ToggleLockedStatusForCountry(Country.Self)]"
				description = "LOCK_ONGOING_RELATION_DESC"
			}
			action_tooltip = {
				click_type = left
				title = "UNLOCK_ONGOING_RELATION"
				visible = "[OngoingRelationCountryList.IsLockedForCountry(Country.Self)]"
				on_action = "[OngoingRelationCountryList.ToggleLockedStatusForCountry(Country.Self)]"
				description = "UNLOCK_ONGOING_RELATION_DESC"
			}
		}
	}

	type relation_type_item = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 45 }
		}
		layoutpolicy_horizontal = expanding

		using = bg_cabinet_card_frame

		blockoverride "bg_card_header_01_bg" {
			background = {
				texture = "gfx/interface/component_tiles/square_tile.dds"
				texture_density = 2
				spriteType = corneredtiled
				spriteborder = { 10 10 }

				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_DEFAULT')]"
					using = color_purple_texture
					blend_mode = multiply
					# alpha = 0.7
				}

				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_FRIENDLY_ACTIONS')]"
					color = { 0.3 0.8 0.3 1 }
					blend_mode = multiply
					# alpha = 0.7
				}
	
				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_HOSTILE_ACTIONS')]"
					color = { 0.8 0.3 0.3 1 }
					blend_mode = multiply
					# alpha = 0.7
				}
	
				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_COVERT_ACTIONS')]"
					color = { 0.5 0 0.5 1}
					blend_mode = multiply
					# alpha = 0.7
				}
	
				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_ECONOMY_ACTIONS')]"
					color = { 0.9 0.7 0.0 1 }
					blend_mode = multiply
					# alpha = 0.7
				}
	
				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_ACCESS_ACTIONS')]"
					color = { 0.01 0.6 0.9 1 }
					blend_mode = multiply
					# alpha = 0.7
				}
	
				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_PAPAL_ACTIONS')]"
					color = { 1 1 1 1 }
					blend_mode = multiply
					# alpha = 0.4
				}
	
				modify_texture = {
					visible = "[EqualTo_string(RelationTypeItem.GetCategoryKey, 'CATEGORY_SUBJECT_ACTIONS')]"
					color = { 0 0.7 0.6 1 }
					blend_mode = multiply
					# alpha = 0.7
				}

				modify_texture = {
					texture = "gfx/interface/cards/headers/header_pattern_07.dds"
					alpha = 0.7
					texture_density = 2
					spriteType = corneredtiled
					blend_mode = overlay
				}
			}

			background = {
				using = color_black_texture
				alpha = 0.6

				# modify_texture = {
				# 	#using = bg_fade_vertical_up_mask_texture
				# 	texture = "gfx/interface/component_masks/mask_square_gradient.dds"
				# 	blend_mode = alphamultiply
				# 	alpha = 0.3
				# }
			}
		}

		blockoverride "header_content" {

			card_header_button_08 = {
				visible = "[RelationTypeItem.HasUIAction]"
				allow_outside = yes
				size = { 100% 103% }

				using = relation_type_item_action

				tooltipwidget = {
					SimpleContextualTooltipType = {
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"
								glow = {
									name = "drop_shadow"
									glow_radius = 3
									color = {0.0 0.0 0.0 1.0}
									alpha = 0.3
								}
							}
						}	
					}
				}

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					expand = {}
				}
			}

			widget = {
				size = { 100% 100% }
				visible = "[Not(RelationTypeItem.HasUIAction)]"	

				tooltipwidget = {
					SimpleContextualTooltipType = {
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"
							}
						}	
					}
				}

				hbox = {
					expand = {}

					icon = {
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}
					expand = {}
				}

				# HEADER
				hbox = {
					spacing = 8
					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/minus_button.dds"
						tooltip = "[RelationTypeItem.OnClickRemoveTooltip]"
						onclick = "[RelationTypeItem.OnClickRemove]"
						enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
						visible = "[RelationTypeItem.OnClickRemoveVisible]"
					}

					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/plus_button.dds"
						tooltip = "[RelationTypeItem.OnClickTooltip]"
						onclick = "[RelationTypeItem.OnClick]"
						enabled = "[RelationTypeItem.OnClickEnabled]"
						visible = "[RelationTypeItem.OnClickVisible]"
					}
				}
			}
		}

		# RIGHT
		blockoverride "bottom_content" {
			hbox = {

				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}
				
				margin = { 10 0 }
				hbox = {
					using = layoutpolicy_expanding
					text_single = {
						visible = "[RelationTypeItem.ShowExtraInfo]"
						layoutpolicy_horizontal = expanding
						size = { -1 25 }
						autoresize = no
						align = nobaseline
						text = "[RelationTypeItem.GetExtraInfo]"
					}

					hbox = {
						spacing = 4
						block "small_relations_datamodel" {
							datamodel = "[DataModelFirst(RelationTypeItem.GetRelations, '(int32)11')]"
						}
						item = {
							container = {
								datacontext = "[RelationDescItem]"

								tooltipwidget = {
									SimpleContextualTooltipType = {
										blockoverride "title_icon" {
											icon = {
												using = tooltip_title_icon_size
												texture = "[RelationTypeItem.AccessIcon]"
											}
										}
				
										blockoverride "title_text" {
											text = "[RelationTypeItem.GetName]"
										}
										
										lowpriotextcontext = "[RelationDescItem.GetToolTip]"
				
									}
								}
								visible = "[RelationDescItem.GetCountry.IsValid]"
								ignoreinvisible = yes

								country_flag_small = {
									visible = "[Not(RelationDescItem.HasProgress)]"
									parentanchor = center
									datacontext = "[RelationDescItem.GetCountry]"

									# blockoverride "relation_type_item_country_actions"{
									# 	blockoverride "click" {
									# 		datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
									# 		using = button_action_provider
									# 	}

									# 	blockoverride "rightclick" {}
									# }

									blockoverride "hover" {
										onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(RelationDescItem.GetCountry.Self)]"
									}
								}

								widget = {
									size = {30 30}
									visible = "[RelationDescItem.HasProgress]"
									
									piechart = {
										visible = "[RelationDescItem.HasProgress]"
										parentanchor = center

										size = { 100% 100% }

										using = piechart_angles

										icon = {
											texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
											size = { 97% 97% }
											parentanchor = center
											color = { 0.45 0.59  0.67 1 }
											alpha = 0.3
										}

										pieslice = {
											texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
											value = "[RelationDescItem.GetProgress]"
											color = { 0.01 0.6 0.9 1 }
										}

										pieslice = {
											texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
											value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
											color = { 1 1 1 0 }
										}
									}

									country_flag_mini = {
										parentanchor = center
										visible = "[RelationDescItem.GetCountry.IsValid]"
										datacontext = "[RelationDescItem.GetCountry]"
										datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
										blockoverride "click" {
											using = button_action_provider_base
										}
										blockoverride "rightclick" {}
									}
									using = bg_circle_piechart
								}
							}
						}
					}

					expand = {}
				}

				extra_list = {
					blockoverride "extra_list_size" {size = { 35 28} }
					block "extra_small_relations_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)11')]"
					}
										
					blockoverride "extra_list_text_content" {
						block "extra_small_relations_text" {
							raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)11')]"
						}
					}
					
					tooltipwidget = {
						using = relation_list_tooltip
					}
				}
			}	
		}
	}

	type relation_type_item_war = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 80 }
		}

		using = bg_cabinet_card_frame
		
		visible = "[Not(IsDataModelEmpty(DiplomacyLateralView.GetWars))]"
		layoutpolicy_horizontal = expanding
		
		blockoverride "header_color" {
			texture = "gfx/interface/colors/mid_red.dds"
		}
		blockoverride "header_pattern" {
			texture = "gfx/interface/cards/headers/header_pattern_07.dds"
			alpha = 0.7
		}

		blockoverride "header_content" {
			card_header_button_02 = {
				allow_outside = yes
				layoutpolicy_horizontal = expanding
				size = { 100% 100% }
				visible = "[RelationTypeItem.HasUIAction]"

				using = relation_type_item_action

				hbox = {

					expand = {}

					icon = {
						size = { 22 22 }
						texture = "gfx/interface/icons/diplomatic_status/war.dds"
						
					}
					expand = {}
				}
			}
		}
		
		blockoverride "bottom_content" {								
			hbox = {
				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 3
					margin = { 10 0 }

					block "wars_datamodel" {
						datamodel = "[DataModelFirst(DiplomacyLateralView.GetWars, GetRelationsUILimit)]"
					}
					item = {

						widget = {
							size = {40 65}

							using = bg_square_tile
							blockoverride "container_color" {
								modify_texture = {
									using = color_bg_blue_texture
									blend_mode = multiply
								}
							}

							header_button_left = {
								size = { 40 65 }
								blockoverride "header_button_frame_inner" {visible = no}
								blockoverride "icon_texture" {visible = no}
								blockoverride "header_button_text_layout" {}
								datacontext = "[WarsOverviewWar.GetWar]"
								tooltipwidget = { using = War_tooltip }
								action_tooltip = {
									click_type = left
									click_mode = single
									title = "OPEN_WAR"
									on_action = "[WarsOverviewWar.OnClick]"
								}

								vbox = {
									margin_top = 4
									margin_bottom = 10

									vbox = {
										spacing = 2
										country_flag_very_small = {
											datacontext = "[WarsOverviewWar.GetMainEnemy]"
											filter_mouse = none
											alwaystransparent = yes
											blockoverride "tooltip" {}
											blockoverride "contextmenu" {}
											blockoverride "click" {}
											blockoverride "double_click" {}
											blockoverride "show_as_button" { visible = no }
											blockoverride "show_as_icon" { visible = yes }
										}

										icon = {
											size = { 18 18 }
											texture = "[GetConceptTexture('war')]"

											glow = {
												name = "drop_shadow"
												glow_radius = 3
												color = {0.0 0.0 0.0 1.0}
												alpha = 0.3
											}
										}
									}

									text_single = {
										autoresize = no
										size = { 35 20 }
										fontsize = 14
										align = center
										visible = "[Not(War.IsCivilWar)]"
										raw_text = "[War.GetWarScore|+=0%/]"
									}
								}
							}
						}
					}
				}

				expand = {}

				text_single = {
					margin_right = 10
					using = Font_Type_Headers
					align = nobaseline
					block "extra_wars_text" {
						raw_text = "+[GetRelationOverUILimit(GetDataModelSize(DiplomacyLateralView.GetWars))]"
					}
					block "extra_wars_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(DiplomacyLateralView.GetWars), GetRelationsUILimit)]"
					}
				}
			}
		}
	}

	type relation_type_item_subject = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 90 }
		}
		layoutpolicy_horizontal = expanding

		using = bg_cabinet_card_frame

		blockoverride "header_color" {
			texture = "gfx/interface/colors/mid_green.dds"
		}
		blockoverride "header_pattern" {
			texture = "gfx/interface/cards/headers/header_pattern_07.dds"
			alpha = 0.7
		}

		blockoverride "header_content" {
			card_header_button_08 = {
				visible = "[RelationTypeItem.HasUIAction]"
				allow_outside = yes
				size = { 100% 100% }

				tooltipwidget = {
					SimpleContextualTooltipType = {
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"
								glow = {
									name = "drop_shadow"
									glow_radius = 3
									color = {0.0 0.0 0.0 1.0}
									alpha = 0.3
								}
							}	
						}
					}
				}
				using = relation_type_item_action

				hbox = {
					expand = {}
					
					icon = {
						size = { 22 22 }
						texture = "gfx/interface/icons/diplomatic_status/vassalizing_action.dds"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}
					
					expand = {}
				}
			}

			widget = {
				visible = "[Not(RelationTypeItem.HasUIAction)]"
				tooltipwidget = {
					using = SubjectHeaderTT_tooltip
				}
				size = { 100% 100% }

				hbox = {
					expand = {}

					icon = {
						size = { 25 25 }
						texture = "[RelationTypeItem.AccessIcon]"
						
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					expand = {}
				}

				# HEADER
				hbox = {
					spacing = 8
					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/minus_button.dds"
						tooltip = "[RelationTypeItem.OnClickRemoveTooltip]"
						onclick = "[RelationTypeItem.OnClickRemove]"
						enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
						visible = "[RelationTypeItem.OnClickRemoveVisible]"
					}

					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/plus_button.dds"
						tooltip = "[RelationTypeItem.OnClickTooltip]"
						onclick = "[RelationTypeItem.OnClick]"
						enabled = "[RelationTypeItem.OnClickEnabled]"
						visible = "[RelationTypeItem.OnClickVisible]"
					}
				}
			}
		}
		
		blockoverride "bottom_content" {								
			hbox = {
				margin_bottom = 2
				margin_left = 3

				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}

				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 3
					margin_left = 7

					text_single = {
						visible = "[RelationTypeItem.ShowExtraInfo]"
						minimumsize = { 300 20 }
						align = nobaseline
						text = "[RelationTypeItem.GetExtraInfo]"
					}

					block "relations_datamodel" {
						datamodel = "[DataModelFirst(RelationTypeItem.GetRelations,'(int32)8')]"
					}
					item = {
						container = {
							ignoreinvisible = yes
							widget = {
								size = {49 65}

								widget = {
									size = {45 65}

									using = bg_square_tile
									blockoverride "container_color" {
										modify_texture = {
											using = color_bg_blue_texture
											blend_mode = multiply
										}
										margin = {0 0}
										margin_right = 0
										margin_bottom = 3
									}
									header_button_left = {
										size = { 100% 104% }
										blockoverride "header_button_frame_inner" {visible = no}
										blockoverride "icon_texture" {visible = no}
										blockoverride "header_button_text_layout" {}
										datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
										datacontext = "[RelationDescItem.GetCountry]"
										
										using = button_action_provider
										blockoverride "button_action_provider_tooltipwidget" {
											tooltipwidget = {
												using = SubjectTypeDetail_tooltip
											} 
										}
										onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(RelationDescItem.GetCountry.Self)]"
		
										vbox = {
											margin = {0 3}
											spacing = 1

											widget = {
												size = { 24 20 }

												icon = {
													size = { 24 24 }
													position = {0 -7}
													texture = "[GetSubjectTypeIcon(RelationDescItem.GetCountry.GetDiplomacy.GetSubjectType)]"
			
													alpha = 0.8
													using = bg_circle_piechart
													blockoverride "inside_color" {
														modify_texture = {
															using = color_bg_blue_texture
															blend_mode = multiply
														}
													}
													blockoverride "frame_color" {
														modify_texture = {
															using = color_new_gold_texture
															blend_mode = multiply
														}
														modify_texture = {
															using = color_gold_texture
															# blend_mode = multiply
															alpha = 0.5
														}
													}
			
													glow = {
														name = "drop_shadow"
														glow_radius = 3
														color = {0.0 0.0 0.0 1.0}
														alpha = 0.3
													}
												}
											}
											
											widget = {
												size = { 32 20 }
												country_flag_very_small = {
													visible = "[RelationDescItem.GetCountry.IsValid]"
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}
											
		
											text_single = {
												align = center|nobaseline
												visible = "[And(RelationDescItem.GetCountry.GetDiplomacy.IsSubject, RelationDescItem.GetCountry.GetDiplomacy.IsDisloyalSubject)]"
												text = "[RelationDescItem.GetCountry.GetDiplomacy.GetSubjectLoyalty|R2%/]"
												datacontext = "[RelationDescItem.GetCountry]"
												fontsize = 11
											}
											text_single = {
												align = center|nobaseline
												visible = "[And(RelationDescItem.GetCountry.GetDiplomacy.IsSubject, Not(RelationDescItem.GetCountry.GetDiplomacy.IsDisloyalSubject))]"
												text = "[RelationDescItem.GetCountry.GetDiplomacy.GetSubjectLoyalty|G2%/]"
												datacontext = "[RelationDescItem.GetCountry]"
												fontsize = 11
											}

											expand = {}
										}
									}
								}
							}
						}
					}
				}

				expand = {}

				extra_list_vertical = {
					block "extra_relations_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
					}
					blockoverride "extra_list_text_content" {
						block "extra_relations_text" {
							raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
							align = center
						}
					}
					
					tooltipwidget = {
						using = relation_list_tooltip
					}
				}	
				expand = {}
			}
		}
	}

	type relation_type_item_truce_or_annul_treaties = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 90 }
		}
		layoutpolicy_horizontal = expanding

		using = bg_cabinet_card_frame

		blockoverride "header_color" {
			texture = "gfx/interface/colors/purple.dds"
		}
		blockoverride "header_pattern" {
			texture = "gfx/interface/cards/headers/header_pattern_07.dds"
			alpha = 0.7
		}

		blockoverride "header_content" {
			card_header_button_08 = {
				visible = "[RelationTypeItem.HasUIAction]"
				allow_outside = yes
				size = { 100% 100% }

				using = relation_type_item_action

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
					
					}

					expand = {}
				}
			}

			widget = {
				visible = "[Not(RelationTypeItem.HasUIAction)]"
				tooltipwidget = {
					SimpleContextualTooltipType = {
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"

							}
						}

						blockoverride "concept_link" {
							text = "[truce|E]"
						}
						
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"

					}
				}
				size = { 100% 100% }

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					expand = {}
				}

				# HEADER
				hbox = {
					spacing = 8
					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/minus_button.dds"
						tooltip = "[RelationTypeItem.OnClickRemoveTooltip]"
						onclick = "[RelationTypeItem.OnClickRemove]"
						enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
						visible = "[RelationTypeItem.OnClickRemoveVisible]"
					}

					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/plus_button.dds"
						tooltip = "[RelationTypeItem.OnClickTooltip]"
						onclick = "[RelationTypeItem.OnClick]"
						enabled = "[RelationTypeItem.OnClickEnabled]"
						visible = "[RelationTypeItem.OnClickVisible]"
					}
				}
			}
		}
		
		blockoverride "bottom_content" {								
			hbox = {
				margin_bottom = 2
				margin_left = 3

				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}

				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 3
					margin_left = 7

					text_single = {
						visible = "[RelationTypeItem.ShowExtraInfo]"
						minimumsize = { 300 20 }
						align = nobaseline
						text = "[RelationTypeItem.GetExtraInfo]"
					}

					block "relations_datamodel" {
						datamodel = "[DataModelFirst(RelationTypeItem.GetRelations,'(int32)8')]"
					}
					item = {
						container = {
							tooltipwidget = {
								container = {
									alwaystransparent = no
									container = {
										visible = "[RelationTypeItem.IsRelationType('truce')]"
										datacontext = "[RelationDescItem.GetCountry]"			
										using = TruceTooltip
									}
									container = {
										visible = "[RelationTypeItem.IsRelationType('annul_treaties')]"
										ContextualTooltipType = {
											blockoverride "title_icon" {
												icon = {
													size = { 50 50 }
													texture = "gfx/interface/icons/diplomatic_status/annul_treaties.dds"
													visible = "[RelationTypeItem.IsRelationType('annul_treaties')]"
												}
											}
										
											blockoverride "title_text" {
												datacontext = "[RelationDescItem.GetCountry]"												
												text = "ANNUL_TREATIES_WITH_COUNTRY_TITTLE"
											}
				
											blockoverride "concept_link" {
												text = "ANNUL_TREATIES_CONCEPT_LINK"
											}
		
											blockoverride "tooltip_content" {
												TooltipTextBlock = {
													blockoverride "text" {
														text = "[RelationDescItem.GetToolTip]"												
													}
												}
											}
										}
									}								
								}
							}
							
							ignoreinvisible = yes

							widget = {
								size = {49 65}

								widget = {
									size = {45 65}

									using = bg_square_tile
									blockoverride "container_color" {
										modify_texture = {
											using = color_bg_blue_texture
											blend_mode = multiply
										}
										margin = {0 0}
										margin_right = 0
										margin_bottom = 3
									}
									
									header_button_left = {
										size = { 100% 104% }
										blockoverride "header_button_frame_inner" {visible = no}
										blockoverride "icon_texture" {visible = no}
										blockoverride "header_button_text_layout" {}	
										datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
										onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(RelationDescItem.GetCountry.Self)]"
										tooltip_enabled = no
		
										vbox = {
											margin = {0 3}
											spacing = 4

											widget = {
												size = {32 32}
												visible = "[RelationDescItem.HasProgress]"
												
												icon = {
													using = bg_circle_piechart
													texture = "gfx/interface/icons/diplomatic_status/truce.dds"
													visible = "[RelationTypeItem.IsRelationType('truce')]"
													size = { 75% 75% }
													parentanchor = center
													blockoverride "frame_color" {
														modify_texture = {
															using = color_new_gold_texture
															blend_mode = multiply
														}
														modify_texture = {
															using = color_gold_texture
															# blend_mode = multiply
															alpha = 0.5
														}
													}
												}

												piechart = {
													visible = "[RelationDescItem.HasProgress]"
													parentanchor = center
				
													size = { 90% 90% }
				
													using = piechart_angles
				
													icon = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														size = { 97% 97% }
														parentanchor = center
														color = { 0.45 0.59  0.67 1 }
														alpha = 0.3
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[RelationDescItem.GetProgress]"
														color = { 0.01 0.6 0.9 1 }
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
														color = { 1 1 1 0 }
													}
												}
				


												icon = {
													texture = "gfx/interface/icons/diplomatic_status/annul_treaties.dds"
													visible = "[RelationTypeItem.IsRelationType('annul_treaties')]"
													size = { 60% 60% }
													parentanchor = center
												}
											}
											
											widget = {
												size = { 32 20 }
												country_flag_very_small = {
													visible = "[RelationDescItem.GetCountry.IsValid]"
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}

											expand = {}
										}
									}
								}
							}
						}
					}
				}

				expand = {}

				extra_list_vertical = {
					block "extra_relations_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
					}
					blockoverride "extra_list_text_content" {
						block "extra_relations_text" {
							raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
						}
					}
					
					tooltipwidget = {
						using = relation_list_tooltip
					}
				}	
				expand = {}
			}
		}
	}

	type relation_type_item_annexation = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 90 }
		}
		layoutpolicy_horizontal = expanding

		using = bg_cabinet_card_frame

		blockoverride "header_color" {
			texture = "gfx/interface/colors/mid_green.dds"
		}
		blockoverride "header_pattern" {
			texture = "gfx/interface/cards/headers/header_pattern_07.dds"
			alpha = 0.7
		}

		blockoverride "header_content" {
			card_header_button_08 = {
				visible = "[RelationTypeItem.HasUIAction]"
				allow_outside = yes
				size = { 100% 100% }

				using = relation_type_item_action

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
					}

					expand = {}
				}
			}

			widget = {
				visible = "[Not(RelationTypeItem.HasUIAction)]"
				tooltipwidget = {
					SimpleContextualTooltipType = {
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"

								modify_texture = {
									using = color_new_gold_texture
								}
							}
						}

						blockoverride "concept_link" {
							text = "[annexing|E]"
						}
						
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"

					}
				}
				size = { 100% 100% }

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					expand = {}
				}

				# HEADER
				hbox = {
					spacing = 8
					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/minus_button.dds"
						tooltip = "[RelationTypeItem.OnClickRemoveTooltip]"
						onclick = "[RelationTypeItem.OnClickRemove]"
						enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
						visible = "[RelationTypeItem.OnClickRemoveVisible]"
					}

					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/plus_button.dds"
						tooltip = "[RelationTypeItem.OnClickTooltip]"
						onclick = "[RelationTypeItem.OnClick]"
						enabled = "[RelationTypeItem.OnClickEnabled]"
						visible = "[RelationTypeItem.OnClickVisible]"
					}
				}
			}
		}
		
		blockoverride "bottom_content" {								
			hbox = {
				margin_bottom = 2
				margin_left = 3

				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}

				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 3
					margin_left = 7

					text_single = {
						visible = "[RelationTypeItem.ShowExtraInfo]"
						minimumsize = { 300 20 }
						align = nobaseline
						text = "[RelationTypeItem.GetExtraInfo]"
					}

					block "relations_datamodel" {
						datamodel = "[DataModelFirst(RelationTypeItem.GetRelations,'(int32)8')]"
					}
					item = {
						container = {
							tooltipwidget = {
								ContextualTooltipType = {
									blockoverride "title_icon" {
										icon = {
											size = { 50 50 }
											texture = "gfx/interface/icons/diplomatic_actions/annex.dds"
											visible = "[RelationTypeItem.IsRelationType('annex')]"
										}
									}
								
									blockoverride "title_text" {
										visible = "[RelationTypeItem.IsRelationType('annex')]"
										datacontext = "[RelationDescItem.GetCountry]"
										text = "ANNEXATION_OF_COUNTRY_TITLE"
									}
														
									blockoverride "concept_link" {
										visible = "[RelationTypeItem.IsRelationType('annex')]"
										text = [annexing|E]
									}

									blockoverride "tooltip_content" {
										TooltipTextBlock = {
											blockoverride "text" {
												text = "[RelationDescItem.GetToolTip]"
											}
										}
										hbox = {
											vbox = {
												widget = {
													size = { 120 120 }
													# using = layoutpolicy_expanding
													using = marker_bg_circle

													piechart = {
														parentanchor = center
														block "piechart_size" {
															size = { 90% 90% }
														}
														using = piechart_angles

														pieslice = {
															texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
															value = "[RelationDescItem.GetCountry.GetDiplomacy.GetBeingAnnexedProgress]"
															color = { 0.01 0.6 0.9 1 }
															alpha = 1
														}

														pieslice = {
															texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
															value = "[Subtract_float('(float)100.0', RelationDescItem.GetCountry.GetDiplomacy.GetBeingAnnexedProgress)]"
															color = { 0.0 0.1 0.1 1 }
															alpha = 1
														}
													}

													icon = {
														size = { 55% 55% }
														parentanchor = vcenter|hcenter
														tooltip_enabled = no
														texture = "gfx/interface/icons/outliner/categories/annexation.dds"
														texture_density = 2
													}
												}

												text_single = {
													text = "[RelationDescItem.GetCountry.GetDiplomacy.GetBeingAnnexedDate]"						
													default_format = "#subtle_name"
												}
											}
											widget = {
												size = { 30 30 }
											}
											TooltipContentSection = {
												TooltipStringPairList = {
													textcontext =  "[RelationDescItem.GetCountry.GetDiplomacy.GetBeingAnnexedInfo]"
												}
												TooltipStringPairList = {
													textcontext =  "[RelationDescItem.GetCountry.GetDiplomacy.GetBeingAnnexedCostInfo]"
												}
											}
										}
									}
								}
							}
							ignoreinvisible = yes

							widget = {
								size = {49 65}

								widget = {
									size = {45 65}

									using = bg_square_tile
									blockoverride "container_color" {
										modify_texture = {
											using = color_bg_blue_texture
											blend_mode = multiply
										}
										margin = {0 0}
										margin_right = 0
										margin_bottom = 3
									}
									

									small_card_button_01 = {
										size = { 100% 104% }

										datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
										onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(RelationDescItem.GetCountry.Self)]"
										tooltip_enabled = no
		
										vbox = {
											margin = {0 3}
											spacing = 4

											widget = {
												size = {32 32}
												visible = "[RelationDescItem.HasProgress]"
												
												piechart = {
													visible = "[RelationDescItem.HasProgress]"
													parentanchor = center
				
													size = { 90% 90% }
				
													using = piechart_angles
				
													icon = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														size = { 97% 97% }
														parentanchor = center
														color = { 0.45 0.59  0.67 1 }
														alpha = 0.3
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[RelationDescItem.GetProgress]"
														color = { 0.01 0.6 0.9 1 }
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
														color = { 1 1 1 0 }
													}
												}
				
												icon = {
													texture = "gfx/interface/icons/diplomatic_actions/annex.dds"
													visible = "[RelationTypeItem.IsRelationType('annex')]"
													size = { 80% 80% }
													parentanchor = center
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}
											
											widget = {
												size = { 32 20 }
												country_flag_very_small = {
													position = {2 0}
													visible = "[RelationDescItem.GetCountry.IsValid]"
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}

											expand = {}
										}
									}
								}
							}
						}
					}
				}

				expand = {}

				extra_list_vertical = {
					block "extra_relations_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
					}
					blockoverride "extra_list_text_content" {
						raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
					}
					
					tooltipwidget = {
						using = relation_list_tooltip
					}
				}
				expand = {}
			}
		}
	}

	type relation_type_item_annexation_target = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 90 }
		}
		layoutpolicy_horizontal = expanding

		using = bg_cabinet_card_frame

		blockoverride "header_color" {
			texture = "gfx/interface/colors/mid_green.dds"
		}
		blockoverride "header_pattern" {
			texture = "gfx/interface/cards/headers/header_pattern_07.dds"
			alpha = 0.7
		}

		blockoverride "header_content" {
			card_header_button_08 = {
				visible = "[RelationTypeItem.HasUIAction]"
				allow_outside = yes
				size = { 100% 100% }

				using = relation_type_item_action

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
					}

					expand = {}
				}
			}

			widget = {
				visible = "[Not(RelationTypeItem.HasUIAction)]"
				tooltipwidget = {
					SimpleContextualTooltipType = {
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"

								modify_texture = {
									using = color_new_gold_texture
								}
							}
						}

						blockoverride "concept_link" {
							text = "[annexing|E]"
						}
						
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"

					}
				}
				size = { 100% 100% }

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					expand = {}
				}

				# HEADER
				hbox = {
					spacing = 8
					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/minus_button.dds"
						tooltip = "[RelationTypeItem.OnClickRemoveTooltip]"
						onclick = "[RelationTypeItem.OnClickRemove]"
						enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
						visible = "[RelationTypeItem.OnClickRemoveVisible]"
					}

					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/plus_button.dds"
						tooltip = "[RelationTypeItem.OnClickTooltip]"
						onclick = "[RelationTypeItem.OnClick]"
						enabled = "[RelationTypeItem.OnClickEnabled]"
						visible = "[RelationTypeItem.OnClickVisible]"
					}
				}
			}
		}
		
		blockoverride "bottom_content" {								
			hbox = {
				margin_bottom = 2
				margin_left = 3

				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}

				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 3
					margin_left = 7

					text_single = {
						visible = "[RelationTypeItem.ShowExtraInfo]"
						minimumsize = { 300 20 }
						align = nobaseline
						text = "[RelationTypeItem.GetExtraInfo]"
					}

					block "small_relations_datamodel" {
						datamodel = "[DataModelFirst(RelationTypeItem.GetRelations,'(int32)8')]"
					}
					item = {
						container = {
							tooltipwidget = {
								ContextualTooltipType = {
									blockoverride "title_icon" {
										icon = {
											size = { 50 50 }
											texture = "gfx/interface/icons/diplomatic_actions/annex.dds"
											visible = "[RelationTypeItem.IsRelationType('annex_target')]"
										}
									}
								
									blockoverride "title_text" {
										visible = "[RelationTypeItem.IsRelationType('annex_target')]"
										datacontext = "[RelationDescItem.GetCountry]"
										text = "ANNEXATION_TARGET_OF_COUNTRY_TITLE"
									}
														
									blockoverride "concept_link" {
										visible = "[RelationTypeItem.IsRelationType('annex_target')]"
										text = [annexing|E]
									}

									blockoverride "tooltip_content" {
										TooltipTextBlock = {
											blockoverride "text" {
												text = "[RelationDescItem.GetToolTip]"
											}
										}
										hbox = {
											vbox = {
												widget = {
													size = { 120 120 }
													# using = layoutpolicy_expanding
													using = marker_bg_circle

													piechart = {
														parentanchor = center
														block "piechart_size" {
															size = { 90% 90% }
														}
														using = piechart_angles

														pieslice = {
															texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
															value = "[Country.GetDiplomacy.GetBeingAnnexedProgress]"
															color = { 0.01 0.6 0.9 1 }
															alpha = 1
														}

														pieslice = {
															texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
															value = "[Subtract_float('(float)100.0', Country.GetDiplomacy.GetBeingAnnexedProgress)]"
															color = { 0.0 0.1 0.1 1 }
															alpha = 1
														}
													}

													icon = {
														size = { 55% 55% }
														parentanchor = vcenter|hcenter
														tooltip_enabled = no
														texture = "gfx/interface/icons/outliner/categories/annexation.dds"
														texture_density = 2
													}
												}

												text_single = {
													text = "[Country.GetDiplomacy.GetBeingAnnexedDate]"						
													default_format = "#subtle_name"
												}
											}
											widget = {
												size = { 30 30 }
											}
											TooltipContentSection = {
												TooltipStringPairList = {
													textcontext =  "[Country.GetDiplomacy.GetBeingAnnexedInfo]"
												}
												TooltipStringPairList = {
													textcontext =  "[Country.GetDiplomacy.GetBeingAnnexedCostInfo]"
												}
											}
										}
									}
								}
							}
							ignoreinvisible = yes

							widget = {
								size = {49 65}

								widget = {
									size = {45 65}

									using = bg_square_tile
									blockoverride "container_color" {
										modify_texture = {
											using = color_bg_blue_texture
											blend_mode = multiply
										}
										margin = {0 0}
										margin_right = 0
										margin_bottom = 3
									}
									

									small_card_button_01 = {
										size = { 100% 104% }

										datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
										onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(RelationDescItem.GetCountry.Self)]"
										tooltip_enabled = no
		
										vbox = {
											margin = {0 3}
											spacing = 4

											widget = {
												size = {32 32}
												visible = "[RelationDescItem.HasProgress]"
												
												piechart = {
													visible = "[RelationDescItem.HasProgress]"
													parentanchor = center
				
													size = { 90% 90% }
				
													using = piechart_angles
				
													icon = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														size = { 97% 97% }
														parentanchor = center
														color = { 0.45 0.59  0.67 1 }
														alpha = 0.3
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[RelationDescItem.GetProgress]"
														color = { 0.01 0.6 0.9 1 }
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
														color = { 1 1 1 0 }
													}
												}
				
												icon = {
													texture = "gfx/interface/icons/diplomatic_actions/annex.dds"
													visible = "[RelationTypeItem.IsRelationType('annex_target')]"
													size = { 80% 80% }
													parentanchor = center
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}
											
											widget = {
												size = { 32 20 }
												country_flag_very_small = {
													position = {2 0}
													visible = "[RelationDescItem.GetCountry.IsValid]"
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}

											expand = {}
										}
									}
								}
							}
						}
					}
				}

				expand = {}

				extra_list = {
					blockoverride "extra_list_size" {size = { 35 28} }
					block "extra_small_relations_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
					}
					blockoverride "extra_list_text_content" {
						block "extra_small_relations_text" {
						raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
						}
					}

					tooltipwidget = {
						using = relation_list_tooltip
					}
				}
				expand = {}
			}
		}
	}

	type relation_type_item_casus_belli = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 90 }
		}
		layoutpolicy_horizontal = expanding

		using = bg_cabinet_card_frame

		blockoverride "header_color" {
			texture = "gfx/interface/colors/mid_green.dds"
		}
		blockoverride "header_pattern" {
			texture = "gfx/interface/cards/headers/header_pattern_07.dds"
			alpha = 0.7
		}

		blockoverride "header_content" {
			card_header_button_08 = {
				visible = "[RelationTypeItem.HasUIAction]"
				allow_outside = yes
				size = { 100% 100% }
				tooltipwidget = {
					SimpleContextualTooltipType = {
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"
	
								glow = {
									name = "drop_shadow"
									glow_radius = 3
									color = {0.0 0.0 0.0 1.0}
									alpha = 0.3
								}
							}	
						}
					}
				}
				using = relation_type_item_action

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
					}

					expand = {}
				}
			}

			widget = {
				visible = "[Not(RelationTypeItem.HasUIAction)]"
				tooltip = "[RelationTypeItem.GetToolTip]"
				size = { 100% 100% }

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					expand = {}
				}

				# HEADER
				hbox = {
					spacing = 8
					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/minus_button.dds"
						tooltip = "[RelationTypeItem.OnClickRemoveTooltip]"
						onclick = "[RelationTypeItem.OnClickRemove]"
						enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
						visible = "[RelationTypeItem.OnClickRemoveVisible]"
					}

					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/plus_button.dds"
						tooltip = "[RelationTypeItem.OnClickTooltip]"
						onclick = "[RelationTypeItem.OnClick]"
						enabled = "[RelationTypeItem.OnClickEnabled]"
						visible = "[RelationTypeItem.OnClickVisible]"
					}
				}
			}
		}
		
		blockoverride "bottom_content" {								
			hbox = {
				margin_bottom = 2
				margin_left = 3

				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}

				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 3
					margin_left = 7

					text_single = {
						visible = "[RelationTypeItem.ShowExtraInfo]"
						minimumsize = { 300 20 }
						align = nobaseline
						text = "[RelationTypeItem.GetExtraInfo]"
					}

					block "small_relations_datamodel" {
						datamodel = "[DataModelFirst(RelationTypeItem.GetRelations,'(int32)8')]"
					}
					item = {
						container = {
							tooltipwidget = {
								ContextualTooltipType = {
									blockoverride "title_icon" {
										icon = {
											size = { 50 50 }
											texture = "gfx/interface/icons/diplomatic_status/casus_belli.dds"
										}
									}

									blockoverride "title_text" {
										datacontext = "[RelationDescItem.GetCountry]"
										text = "CASUS_BELLI_ON_COUNTRY"
									}
														
									blockoverride "concept_link" {
										text = [casus_belli|E]
									}
									blockoverride "tooltip_content" {
										TooltipTextBlock = {
											blockoverride "text" {
												text = "[RelationDescItem.GetToolTip]"
											}
										}
									}
								}
							}
							ignoreinvisible = yes

							widget = {
								size = {49 65}

								widget = {
									size = {45 65}

									using = bg_square_tile
									blockoverride "container_color" {
										modify_texture = {
											using = color_bg_blue_texture
											blend_mode = multiply
										}
										margin = {0 0}
										margin_right = 0
										margin_bottom = 3
									}
									

									header_button_left = {
										size = { 100% 104% }
										blockoverride "header_button_frame_inner" {visible = no}
										blockoverride "icon_texture" {visible = no}
										blockoverride "header_button_text_layout" {}

										datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
										onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(RelationDescItem.GetCountry.Self)]"
										tooltip_enabled = no
		
										vbox = {
											margin = {0 3}
											spacing = 4

											widget = {
												size = {32 32}
												
												piechart = {
													visible = "[RelationDescItem.HasProgress]"
													parentanchor = center
				
													size = { 90% 90% }
				
													using = piechart_angles
				
													icon = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														size = { 97% 97% }
														parentanchor = center
														color = { 0.45 0.59  0.67 1 }
														alpha = 0.3
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[RelationDescItem.GetProgress]"
														color = { 0.01 0.6 0.9 1 }
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
														color = { 1 1 1 0 }
													}
												}
				
												icon = {
													texture = "gfx/interface/icons/diplomatic_status/casus_belli.dds"
													size = { 80% 80% }
													parentanchor = center
												}
											}
											
											widget = {
												size = { 32 20 }
												country_flag_very_small = {
													visible = "[RelationDescItem.GetCountry.IsValid]"
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}

											expand = {}
										}
									}
								}
							}
						}
					}
				}

				expand = {}

				extra_list = {
					blockoverride "extra_list_size" {size = { 35 28} }
					block "extra_small_relations_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
					}
					blockoverride "extra_list_text_content" {
						block "extra_small_relations_text" {
							raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
						}	
					}
					
					tooltipwidget = {
						using = relation_list_tooltip
					}
				}
				expand = {}
			}
		}
	}

	type relation_type_item_casus_belli_target = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 90 }
		}
		layoutpolicy_horizontal = expanding

		using = bg_cabinet_card_frame

		blockoverride "header_color" {
			texture = "gfx/interface/colors/mid_green.dds"
		}
		blockoverride "header_pattern" {
			texture = "gfx/interface/cards/headers/header_pattern_07.dds"
			alpha = 0.7
		}

		blockoverride "header_content" {
			card_header_button_08 = {
				visible = "[RelationTypeItem.HasUIAction]"
				allow_outside = yes
				size = { 100% 100% }

				using = relation_type_item_action

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}

						modify_texture = {
							using = color_new_gold_texture
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						modify_texture = {
							using = color_new_gold_texture
						}
					}

					expand = {}
				}
			}

			widget = {
				visible = "[Not(RelationTypeItem.HasUIAction)]"
				tooltipwidget = {
					SimpleContextualTooltipType = {
						blockoverride "title_icon" {
							icon = {
								using = tooltip_title_icon_size
								texture = "[RelationTypeItem.AccessIcon]"
							}
						}

						blockoverride "concept_link" {
							text = "[casus_belli|E]"
						}
						
						lowpriotextcontext = "[RelationTypeItem.GetToolTip]"

					}
				}
				size = { 100% 100% }

				hbox = {
					expand = {}

					icon = {
						visible = "[RelationTypeItem.IsInternationalOrganization]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}

					icon = {
						visible = "[Not(RelationTypeItem.IsInternationalOrganization)]"
						size = { 22 22 }
						texture = "[RelationTypeItem.AccessIcon]"
					}

					expand = {}
				}

				# HEADER
				hbox = {
					spacing = 8
					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/minus_button.dds"
						tooltip = "[RelationTypeItem.OnClickRemoveTooltip]"
						onclick = "[RelationTypeItem.OnClickRemove]"
						enabled = "[RelationTypeItem.OnClickRemoveEnabled]"
						visible = "[RelationTypeItem.OnClickRemoveVisible]"
					}

					ui_direction_button = {
						size = { 18 18 }
						using = bg_circle
						texture = "gfx/interface/buttons/flats/plus_button.dds"
						tooltip = "[RelationTypeItem.OnClickTooltip]"
						onclick = "[RelationTypeItem.OnClick]"
						enabled = "[RelationTypeItem.OnClickEnabled]"
						visible = "[RelationTypeItem.OnClickVisible]"
					}
				}
			}
		}
		
		blockoverride "bottom_content" {								
			hbox = {
				margin_bottom = 2
				margin_left = 3

				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}

				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 3
					margin_left = 7

					text_single = {
						visible = "[RelationTypeItem.ShowExtraInfo]"
						minimumsize = { 300 20 }
						align = nobaseline
						text = "[RelationTypeItem.GetExtraInfo]"
					}

					block "relations_datamodel" {
						datamodel = "[DataModelFirst(RelationTypeItem.GetRelations,'(int32)8')]"
					}
					item = {
						container = {
							tooltipwidget = {
								ContextualTooltipType = {
									blockoverride "title_icon" {
										icon = {
											size = { 50 50 }
											texture = "gfx/interface/icons/diplomatic_status/casus_belli.dds"
										}
									}

									blockoverride "title_text" {
										text = "CASUS_BELLI_FROM_COUNTRY"
									}
														
									blockoverride "concept_link" {
										text = [casus_belli|E]
									}
									blockoverride "tooltip_content" {
										TooltipTextBlock = {
											blockoverride "text" {
												text = "[RelationDescItem.GetToolTip]"
											}
										}
									}
								}
							}
							ignoreinvisible = yes

							widget = {
								size = {49 65}

								widget = {
									size = {45 65}

									using = bg_square_tile
									blockoverride "container_color" {
										modify_texture = {
											using = color_bg_blue_texture
											blend_mode = multiply
										}
										margin = {0 0}
										margin_right = 0
										margin_bottom = 3
									}
									

									header_button_left = {
										size = { 100% 104% }
										blockoverride "header_button_frame_inner" { visible = no }
										blockoverride "icon_texture" { visible = no }
										blockoverride "header_button_text_layout" {}

										datacontext = "[RelationDescItem.GetRelationDescItemUIAction]"
										onmousehierarchyenter = "[PdxGuiWidget.SetHighlightCountry(RelationDescItem.GetCountry.Self)]"
										tooltip_enabled = no
		
										vbox = {
											margin = {0 3}
											spacing = 4

											widget = {
												size = {32 32}
												
												piechart = {
													visible = "[RelationDescItem.HasProgress]"
													parentanchor = center
				
													size = { 90% 90% }
				
													using = piechart_angles
				
													icon = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														size = { 97% 97% }
														parentanchor = center
														color = { 0.45 0.59  0.67 1 }
														alpha = 0.3
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[RelationDescItem.GetProgress]"
														color = { 0.01 0.6 0.9 1 }
													}
				
													pieslice = {
														texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
														value = "[Subtract_float('(float)100.0', RelationDescItem.GetProgress)]"
														color = { 1 1 1 0 }
													}
												}
				
												icon = {
													texture = "gfx/interface/icons/diplomatic_status/casus_belli.dds"
													size = { 80% 80% }
													parentanchor = center
												}
											}
											
											widget = {
												size = { 32 20 }
												country_flag_very_small = {
													visible = "[RelationDescItem.GetCountry.IsValid]"
													datacontext = "[RelationDescItem.GetCountry]"
												}
											}

											expand = {}
										}
									}
								}
							}
						}
					}
				}

				expand = {}

				extra_list_vertical = {
					block "extra_relations_visible" {
						visible = "[GreaterThan_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
					}
					blockoverride "extra_list_text_content" {
						block "extra_relations_text" {
							raw_text = "+[Subtract_int32(GetDataModelSize(RelationTypeItem.GetRelations), '(int32)8')]"
						}
					}
					
					tooltipwidget = {
						using = relation_list_tooltip
					}
				}

				expand = {}
			}
		}
	}

	type membership_ios_item = header_paper_card_horizontal {
		blockoverride "header_paper_card_size"{
			size = { -1 45 }
		}
		layoutpolicy_horizontal = expanding

		visible = "[Not(IsDataModelEmpty(Player.GetDiplomacy.GetInternationalOrganizations))]"

		using = bg_cabinet_card_frame

		blockoverride "bg_card_header_01_bg" {
			background = {
				texture = "gfx/interface/component_tiles/square_tile.dds"
				texture_density = 2
				spriteType = corneredtiled
				spriteborder = { 10 10 }

				modify_texture = {
					using = color_purple_texture
					blend_mode = multiply
				}

				modify_texture = {
					texture = "gfx/interface/cards/headers/header_pattern_07.dds"
					alpha = 0.7
					texture_density = 2
					spriteType = corneredtiled
					blend_mode = overlay
				}
			}

			background = {
				using = color_black_texture
				alpha = 0.6
			}
		}

		blockoverride "header_content" {
			widget = {
				size = { 100% 100% }

				tagtooltip_enabled = yes
				tooltip = "[international_organizations|e]"

				hbox = {
					expand = {}

					icon = {
						size = { 22 22 }
						texture = "gfx/interface/icons/alerts_icons/international_organization.dds"
						glow = {
							name = "drop_shadow"
							glow_radius = 3
							color = {0.0 0.0 0.0 1.0}
							alpha = 0.3
						}
					}
					expand = {}
				}
			}
		}

		# RIGHT
		blockoverride "bottom_content" {
			hbox = {
				using = bg_corner_flavor
				blockoverride "corner_flavor_texture" {
					texture = "gfx/interface/component_decoration/bg_corner_flavor_06.dds"
					texture_density = 2
					spriteType = Corneredstretched
					spriteborder = { 35 35 }
					alpha = 0.7
				}
				blockoverride "corner_flavor_color" {
					modify_texture = {
						using = color_bg_blue_texture
						blend_mode = multiply
					}
				}
				
				margin = { 10 0 }
				hbox = {
					layoutpolicy_vertical = expanding
					spacing = 4
					datamodel = "[DataModelFirst(Player.GetDiplomacy.GetInternationalOrganizations, GetRelationsUILimit)]"
					item = {
						header_button_left = {
							size = { 30 30 }
							blockoverride "button_icon_stretch_sprite" {}
							blockoverride "header_button_text_margins" {}
							blockoverride "header_button_frame_inner" {visible = no}
							blockoverride "header_button_icon_size" { using = layoutpolicy_expanding }
							# blockoverride "header_button_icon_size" { size = { 36 36 } }
							blockoverride "header_button_text_layout" {}
							blockoverride "icon_overlay" {}
							blockoverride "icon_texture" {
								texture = "[InternationalOrganization.GetIcon]"
								texture_density = 2
								size = { 100% 100% }
							}
							# blockoverride "icon_size" {
							# 	size = { 80% 80% }
							# }
							
							onclick = "[OpenInternationalOrganizationView(InternationalOrganization.Self)]"
							tooltipwidget = {
								LeftClickButtonTooltip = {
									blockoverride "onclick_text" { 
										text = "OPEN_IO"
									}
								}
							}
							visible = "[InternationalOrganization.IsCountryMember(Player.Self)]"
						}
					}
				}

				expand = {}

				text_single = {
					margin = {5 5}
					using = Font_Type_Headers
					raw_text = "+[GetRelationOverUILimit(GetDataModelSize(Player.GetDiplomacy.GetInternationalOrganizations))]"
					align = nobaseline
					visible = "[GreaterThan_int32(GetDataModelSize(Player.GetDiplomacy.GetInternationalOrganizations), GetRelationsUILimit)]"
					tooltipwidget = {
						using = relation_list_tooltip
					}
					using = bg_number_container_bckg
					blockoverride "number_container_alpha" {
						alpha = 0.5
					}
					blockoverride "number_container_color" {
						modify_texture = {
							using = color_bg_blue_texture
							blend_mode = multiply
						}
					}
				}
			}
		}
	}

	# type great_power_portrait = portrait_standard_full_body_center_button {
	# 	parentanchor = hcenter|bottom
	# 	position = { 0 5 }
	# 	size = { 80 80 }
	# }

	# type icon_label = hbox
	# {
	# 	layoutpolicy_horizontal = expanding
	# 	layoutstretchfactor_horizontal = 1

	# 	block "icon_label_tooltip" {}

	# 	icon = {
	# 		size = { 20 20 }
	# 		visible = no
	# 		texture = "gfx/interface/debug/generic_icon.png" ## PLACEHOLDER

	# 		block "icon_setup" {}
	# 	}

	# 	text_single = {
	# 		layoutpolicy_horizontal = expanding
	# 		margin_left = 5
	# 		autoresize = yes
	# 		fontsize_min = 14
	# 		# block "text_label_setup" {}
	# 	}
	# }
}
