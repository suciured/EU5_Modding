template Vegetation_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "MAP_TT_VEGETATION_TITLE"
        }

        blockoverride "title_icon_texture" {
            texture = "[GetVegetationIcon(Vegetation.Self)]"
        }

        blockoverride "concept_link" {
            text = [vegetation|E]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('vegetation')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[Vegetation.GetTooltip]"
            }
            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[Vegetation.GetDesc]"
                }
            }
        }
    }
}

template Topography_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "MAP_TT_TOPOGRAPHY_TITLE"
        }

        blockoverride "title_icon_texture" {
            texture = "[GetTopographyIcon(Topography.Self)]"
        }

        blockoverride "concept_link" {
            text = [topography|E]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('topography')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipBlockList = {
                ontextcontextchanged = "[SetBlockListFromTextContext(PdxGuiWidget.AccessSelf)]"
                textcontext = "[Topography.GetTooltip]"
            }
            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[Topography.GetDesc]"
                }
            }
        }
    }
}

template Climate_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "MAP_TT_CLIMATE_TITLE"
        }

        blockoverride "title_icon_texture" {
            texture = "[GetClimateIcon(Climate.Self)]"
            widget = {
                size = { 30 30 }

                background =  {
                    texture = "[GetClimateFrame(Location.GetClimate)]"
                }
                icon = {
                    size = { 30 30 }
                    texture = "[GetClimateIcon(Location.GetClimate)]"
                    glow = {
                        name = "drop_shadow"
                        glow_radius = 3
                        color = {0.0 0.0 0.0 1.0}
                        alpha = 0.3
                    }
                }
            }
        }

        blockoverride "title_icon" {
            widget = {
                using = tooltip_title_icon_size

                background =  {
                    texture = "[GetClimateFrame(Climate.Self)]"
                }
                icon = {
                    using = tooltip_title_icon_size
                    # size = { 30 30 }
                    texture = "[GetClimateIcon(Climate.Self)]"
                    glow = {
                        name = "drop_shadow"
                        glow_radius = 3
                        color = {0.0 0.0 0.0 1.0}
                        alpha = 0.3
                    }
                }
            }
        }

        blockoverride "concept_link" {
            text = [climate|E]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('climate')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[Climate.GetTooltip]"
            }
            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[Climate.GetDesc]"
                }
            }
        }
    }
}

template location_simple_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[Location.GetRankIcon]"
                tooltipwidget = {
                    using = location_rank_tooltip
                }
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('locations')]"
            }
        }

        blockoverride "title_text" {
            text = "[Location.GetNameWithNoTooltip]"
        }

        blockoverride "concept_link" {
            text = [location|E]
        }

        blockoverride "tooltip_content" {
            location_geography_bar = {}
            location_details = {}

            hbox = { # SPECIFIC MODIFIERS
                visible = "[Location.HasSpecificBaseModifier]"
                layoutpolicy_horizontal = expanding
                using = bg_text_mask_container_turquoise
                margin = { 10 6 }
                spacing = 7
                tooltipwidget = {
                    ContextualTooltipType = {
                        blockoverride "title_icon" {
                            icon = {
                                using = tooltip_title_icon_size
                                texture = "[Location.GetSpecificBaseModifier.GetModifier.GetIcon]"
                            }
                        }

                        blockoverride "title_text" {
                            text = "[Location.GetSpecificBaseModifier.GetName]"
                        }
                        blockoverride "concept_link" {
                            text = "[location_modifier|e]"
                        }
                        
                        blockoverride "tooltip_content" {
                            TooltipStringPairList = {
                                textcontext = "[Location.GetSpecificBaseModifier.GetDesc]"
                            }

                            TooltipFlavorTextBlock = {
                                visible = "[Location.HasFlavorText]"
                                blockoverride "text" {
                                    text = "[Location.GetFlavorText]"
                                }
                            }
                        }
                    }
                }
                
                widget = {
                    size = { 27 27 }
                    tagtooltip_enabled = yes

                    icon = {
                        size = { 100% 100% }
                        texture = "[Location.GetSpecificBaseModifier.GetModifier.GetIcon]"
                        texture_density = 2
                        alpha = 1
                        glow = {
                            name = "drop_shadow"
                            glow_radius = 3
                            color = {0.0 0.0 0.0 1.0}
                            alpha = 0.5
                        }
                    }
                }
                text_multi = {
                    layoutpolicy_horizontal = expanding
                    size = {-1 25}
                    autoresize = no
                    align = left|vcenter
                    # default_format = "#yellow_titles"
                    text = "[Location.GetSpecificBaseModifier.GetName|W]"
                    fontsize = 15
                    using = FontDefaultColor
                }
            }

            TooltipFlavorTextBlock = {
                visible = "[Location.HasFlavorText]"
                blockoverride "text" {
                    text = "[Location.GetFlavorText]"
                }
            }
        }
    }
}

template tooltip_location_alt_content {
    visible = "[Location.IsLand]"

    TooltipTextBlock = {
        visible = "[Location.IsOccupied]"
        blockoverride "text" {
            text = "LOCATION_TOOLTIP_OCCUPIED"
            using = Font_Size_Medium
        }
    }

    TooltipTextBlock = {
        visible = "[Location.IsFrozen]"
        blockoverride "text" {
            text = "FROZEN_TOOLTIP"
            using = Font_Size_Medium
        }
    }

    TooltipStringPairList = {
        visible = "[Location.HasWinter]"
        textcontext = "[Location.GetWinterInfo]"
    }

    TooltipTextBlock = {
        visible = "[And(Location.HasFortTooltip, HasAnyUnitsSelected)]"
        blockoverride "text" {
            text = "[Location.GetFortInfo]"
        }
    }

    tooltipmeta = {
        texture = "gfx/interface/icons/location_icons/attrition.dds"
        game_concept = "[attrition|e]"
    }
    TooltipStringPairList = {
        visible = "[HasAnyUnitsSelected]"
        textcontext = "[Location.GetUnitsSelectedTooltipForLocation]"
    }

    # TooltipStringPairList = {
    # 	textcontext = "[Location.GetTooltipBreakdownProperties]"
    # }

    location_geography_bar = {}
    location_details = {}

    TooltipListBase = {
        visible = "[And(Location.HasSpecificBaseModifier, Not(HasAnyUnitsSelected))]"

        TooltipManualTableField = { # SPECIFIC MODIFIERS
            tooltipwidget = {
                using = raw_good_location_modifier_tooltip
            }

            text_single = {
                layoutpolicy_horizontal = expanding
                text = "[location_modifier|e]"
            }
            

            icon = {
                size = { 27 27 }
                texture = "[Location.GetSpecificBaseModifier.GetModifier.GetIcon]"

                glow = {
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.5
                }
            }

            text_single = {
                text = "[Location.GetSpecificBaseModifier.GetName|L]"
                fontsize = 15
                using = FontDefaultColor
            }
        }
    }

    TooltipFlavorTextBlock = {
        visible = "[And(Location.HasFlavorText, Not(HasAnyUnitsSelected))]"
        blockoverride "text" {
            text = "[Location.GetFlavorText]"
        }
    }
}

template location_tooltip_alt {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                visible = "[And(Not(Location.GetArea.IsSea), Not(Location.IsCorridor))]"
                using = tooltip_title_icon_size
                texture = "[Location.GetRankIcon]"
                tooltipwidget = {
                    using = location_rank_tooltip
                }
            }
            icon = {
                visible = "[Location.GetArea.IsSea]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/geopolitics/exploration_sea.dds"
                tooltipwidget = {
                    using = seazone_tooltip
                }
            }
            icon = {
                visible = "[Location.IsCorridor]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/mapitems/desert_connector.dds"
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('locations')]"
            }
        }

        blockoverride "title_text" {
            text = "MAP_TT_LOCATION_ALT_TITLE"
        }

        blockoverride "concept_link" {
            text = "[Select_CString(Location.GetArea.IsSea, Select_CString(Location.GetTopography.IsDeepOcean, sea_current, seazone), Select_CString(Location.IsCorridor, corridor, location))|e]"
        }

        blockoverride "tooltip_content" {
            TooltipDebugStringPairList = {
                textcontext = "[Location.GetDebugText]"
            }

            hbox = {
                visible = "[Location.ShowMarketForMapModeTooltip]"
                layoutpolicy_horizontal = expanding
                margin = { 10 10 }
                background = {
                    using = bg_round_corners
                    alpha = 0.3
                }

                icon = {
                    size = { 32 32 }
                    texture = "gfx/interface/buttons/flats/market.dds"
                }

                text_single = {
                    align = left
                    text = "[Location.GetMarket.GetNameWithNoTooltip]"
                    using = Font_Size_Big
                    default_format = "#subtle_name"
                }

                text_single = {
                    align = right
                    text = "[Location.GetMarketAccessWithTooltip]"
                }
            }
            
            block "tooltip_location_specific" {
                TooltipListScrollArea = {
                    visible = "[Location.HasMapmodeSpecificTooltip]"
                    blockoverride "block_scrollarea" {
                        maximumsize = { -1 300 }
                    }
                    
                    blockoverride "scrollarea_content" {
                        TooltipTextBlock = {
                            set_parent_dimension_to_minimum = height
                            layoutpolicy_horizontal = expanding
                            textcontext = "[Location.GetMapmodeSpecificTooltip]"
                        }
                    }
                }
            }

            TooltipContentSection = {
                using = tooltip_location_alt_content
            }
        }
    }
}

template raw_good_location_modifier_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[Location.GetSpecificBaseModifier.GetModifier.GetIcon]"
            }
        }

        blockoverride "title_text" {
            text = "[Location.GetSpecificBaseModifier.GetName]"
        }
        blockoverride "concept_link" {
            text = "[location_modifier|e]"
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[Location.GetSpecificBaseModifier.GetDesc]"
            }

            TooltipFlavorTextBlock = {
                visible = "[Location.HasFlavorText]"
                blockoverride "text" {
                    text = "[Location.GetFlavorText]"
                }
            }
        }
    }
}

template location_rank_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[Location.GetRankIcon]"
            }
        }

        blockoverride "title_text" {
            text = "[Location.GetRankAndName]"
        }

        blockoverride "concept_link" {
            text = "[location_rank|e]"
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('cities')]"
            }
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('provinces')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                visible = "[Location.IsCapital]"
                blockoverride "text" {
                    text = "SIMPLE_PROVINCE_ICON_COUNTRY_CAPITAL_TOOLTIP"
                }
            }
            TooltipTextBlock = {
                visible = "[Location.IsProvinceCapital]"
                blockoverride "text" {
                    text = "SIMPLE_PROVINCE_ICON_STATE_CAPITAL_TOOLTIP"
                }
            }
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "LOCATIONRANK_TOOLTIP"
                }
            }

            # TooltipBlockList = {
            #     textcontext = "[Location.GetRank.GetRankTooltip]"
            # }

            # TooltipBlockList = {
            #     visible = "[Not(StringIsEmpty(Location.GetUpgradeRankEffects))]"
            #     textcontext = "[Location.GetUpgradeRankEffects]"
            # }

            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[Location.GetRank.GetDescription]"
                }
            }

            block "location_rank_tooltip_button" {}
        }
    }
}

# template Building_upgrade_tooltip {
#     ContextualTooltipType = {
#         blockoverride "title_icon" {
#             icon = {
#                 using = tooltip_title_icon_size
#                 texture = "[GetBuildingIcon(BuildingType.Self)]"
#             }
#         }

#         blockoverride "title_text" {
#             text = "UPGRADE_BUILDING_ACTION"
#         }

#         blockoverride "concept_link" {
#             text = "[building_type|e]"
#         }

#         blockoverride "tooltip_content" {
#             vbox = {
#                 visible = "[BuildingType.IsUpgradeable]"
#                 datamodel = "[BuildingType.GetReplacedBy]"
#                 item = {
#                     hbox = {
#                         icon = {
#                             size = { 33 33 }
#                             texture = "[GetBuildingIcon(BuildingType.Self)]"
#                             glow = {
#                                 name = "drop_shadow"
#                                 glow_radius = 3
#                                 color = {0.0 0.0 0.0 1.0}
#                                 alpha = 0.6
#                             }
#                         }
#                         tooltipwidget = {
#                             using = BuildingType_tooltip
#                         }
#                     }
#                 }
#             }
#         }
#     }
# }

types LocationDetailsTypes {
    type location_details = TooltipListBase {
        visible = "[And(Location.IsPossibleToOwn, Not(HasAnyUnitsSelected))]"
        ignoreinvisible = yes

        TooltipManualTableField = {
            hbox = {
                visible = "[Location.HasOwner]"
                spacing = 5

                country_flag_mini = {
                    datacontext = "[Location.GetOwner]"
                }

                text_single = {
                    autoresize = yes
                    align = right
                    raw_text = "[Location.GetOwner.GetName]"
                }

                icon = {
                    size = { 16 16 }
                    texture = "[GetIntegrationLevelIcon(Location.GetIntegrationLevel)]"
                    tooltipwidget = {
                        using = location_core_tooltip
                    }
                }
            }

            hbox = {
                visible = "[Not(Location.HasOwner)]"
                spacing = 5

                block "location_not_owned" {
                    text_single = {
                        autoresize = yes
                        align = right
                        text = "LOCATION_TOOLTIP_NOT_OWNED"
                    }
                }
            }

            expand = {}

            hbox = {
                visible = "[Location.HasOwner]"
                spacing = 5

                tooltipwidget = {
                    using = location_control_tooltip
                }
                text_single = {
                    autoresize = yes
                    align = right
                    text = "[Location.GetControl|%0]"
                    default_format = "#yellow_titles"
                }

                piechart = {
                    using = bg_circle
                    size = { 22 22 }

                    tooltipwidget = {
                        using = location_control_tooltip
                    }
                    
                    using = piechart_angles

                    pieslice_no_highlight = {
                        texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
                        value = "[FixedPointToFloat(Location.GetControl)]"
                        color = { 1 1 1 1 }
                    }

                    pieslice_no_highlight = {
                        texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
                        value = "[Subtract_float('(float)1.0', FixedPointToFloat(Location.GetControl))]"
                        color = { 1 1 1 1 }
                    }

                    icon = {
                        size = { 12 12 }
                        parentanchor = center
                        texture = "gfx/interface/icons/location_icons/control.dds"
                    }

                    using = bg_circle_piechart
                }
            }
        }

        TooltipManualTableField = { #RELIGION - MARKET
            visible = "[Location.IsPossibleToOwn]"
            hbox = {
                spacing = 5
                icon = {
                    size = { 24 24 }
                    texture = "gfx/interface/icons/location_icons/population.dds"
                }

                text_single = {
                    autoresize = yes
                    align = right
                    raw_text = "[Location.GetTotalPopulationWithBreakDown]"
                }
            }

            expand = {}

            hbox = {
                spacing = 5
                datacontext = "[Location.GetMarket]"
                text_single = {
                    autoresize = yes
                    align = right
                    raw_text = "[Location.GetMarket.GetShortNameWithNoTooltip]"
                    
                    default_format = "#yellow_titles"
                }

                piechart = {
                    using = bg_circle
                    size = { 22 22 }

                    using = piechart_angles

                    pieslice_no_highlight = {
                        texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
                        value = "[FixedPointToFloat(Location.GetMarketAccess)]"
                        color = { 1 1 1 1 }
                    }

                    pieslice_no_highlight = {
                        texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
                        value = "[Subtract_float('(float)1.0', FixedPointToFloat(Location.GetMarketAccess))]"
                        color = { 1 1 1 1 }
                    }

                    icon = {
                        size = { 12 12 }
                        parentanchor = center
                        texture = "gfx/interface/icons/location_icons/market.dds"
                        alpha = 1
                    }
                    using = bg_circle_piechart
                    tooltipwidget = {
                        using = location_market_tooltip
                    }
                }
                
                tooltipwidget = {
                    using = Market_tooltip
                }
            }
        }

        TooltipManualTableField = {
            visible = "[Location.IsPossibleToOwn]"

            hbox = {
                spacing = 5
                datacontext = "[Location.GetDominantReligion]"
                tooltipwidget = { using = religion_tooltip	}

                icon = {
                    size = { 24 24 }
                    texture = "[GetReligionIcon(Location.GetDominantReligion.Self)]"
                }

                text_single = {
                    autoresize = yes
                    align = right
                    text = "[Location.GetDominantReligion.GetNameWithNoTooltip]"
                    default_format = "#yellow_titles"
                }
            }

            expand = {}

            hbox = {
                spacing = 5
                tooltipwidget = {
                    using = location_tax_base_tooltip
                }
                text_single = {
                    autoresize = yes
                    align = right
                    raw_text = "[Location.GetTotalTaxBase|2]"
                    default_format = "#yellow_titles"
                }
                icon_pie_left = {
                    visible = "[GreaterThan_CFixedPoint(Location.GetTotalTaxBase, '(CFixedPoint)0')]"
                    tooltipwidget = {
                        using = location_tax_base_tooltip
                    }
                    blockoverride "PieSize" { size = { 24 24 } }
                    blockoverride "pie_datamodel" {
                        datacontext = "[Location.GetPopulationChart]"
                        datacontext = "[LocationPopulationChart.GetPopsPiechartWidget]"
                        datamodel = "[PopsPiechartWidget.GetTax]"
                    }

                    blockoverride "pieslice_item" {
                        pieslice_no_highlight = {
                            texture = "gfx/interface/pie_charts/piechart_alpha.dds"
                            texture_density = 2
                            tooltip_enabled = no
                            value = "[PopTaxItem.GetPercentage]"
                            color = "[PopTaxItem.GetColor]"
                            alpha = 0.99
                            alwaystransparent = yes
                        }
                    }
                    blockoverride "Icon_Size" { size = { 60% 60% } }
                    blockoverride "Icon" {
                        texture = "gfx/interface/icons/location_icons/tax_base.dds"
                        texture_density = 2
                        alwaystransparent = yes
                    }

                    background = {
                        texture = "gfx/interface/component_tiles/hud_corners/circle_frame.dds"
                        texture_density = 2

                        modify_texture = {
                            using = color_gold_texture
                        }

                        using = overlay_gold
                    }
                }
                widget = {
                    # visible = "[Location.HasOwner]"
                    visible = "[Not(GreaterThan_CFixedPoint(Location.GetTotalTaxBase, '(CFixedPoint)0'))]"
                    size = { 24 24 }
                    icon = {
                        size = { 100% 100% }
                        texture = "gfx/interface/icons/location_icons/tax_base.dds"
                    }
                    tooltip = "[tax_base|e]"
                    tagtooltip_enabled = yes
                }
            }
        }

        TooltipManualTableField = { #CULTURE- RAW MATERIAL
            visible = "[Location.IsPossibleToOwn]"
            hbox = {
                spacing = 5
                icon = {
                    size = { 24 24 }
                    texture = "gfx/interface/icons/location_icons/culture.dds"
                }
                text_single = {
                    autoresize = yes
                    align = right
                    text = "[Location.GetDominantCulture.GetNameWithNoTooltip]"
                    datacontext = "[Location.GetDominantCulture]"
                    # default_format = "#subtle_name"
                    default_format = "#yellow_titles"
                    tooltipwidget = {
                        using = culture_tooltip
                    }
                }
            }

            expand = {}

            hbox = {
                datacontext = "[Location.GetRawMaterial]"
                spacing = 5
                text_single = {
                    autoresize = yes
                    align = right
                    text = "[Location.GetRawMaterial.GetNameWithNoTooltip]"
                    # default_format = "#subtle_name"
                    default_format = "#yellow_titles"
                }

                icon = {
                    size = { 24 24 }
                    texture = "[GetGoodsIcon(Location.GetRawMaterial)]"
                }
                tooltipwidget = {
                    using = location_rgo_button_tooltip
                }
            }
        }
    }

    type location_geography_bar = TooltipStatsBar {
        blockoverride "items" {
            TooltipStatBarItem = { #TOPOGRAPHY
                name = "topography"
                # visible = "[BuildingType.IsMultipleLevels]"
                datacontext = "[Location.GetTopography]"

                blockoverride "item_content" {
                    widget = {
                        size = { 30 30 }

                        background =  {
                            texture = "[GetClimateFrame(Location.GetClimate)]"
                        }

                        icon = {
                            size = { 30 30 }
                            texture = "[GetTopographyIcon(Location.GetTopography)]"

                            glow = {
                                name = "drop_shadow"
                                glow_radius = 3
                                color = {0.0 0.0 0.0 1.0}
                                alpha = 0.3
                            }
                        }
                    }
                }

                tooltipwidget = {
                    using = Topography_tooltip
                }
            }

            TooltipStatBarItem = { #CLIMATE
                name = "climate"
                # visible = "[BuildingType.IsMultipleLevels]"
                datacontext = "[Location.GetClimate]"
                blockoverride "item_content" {
                    widget = {
                        size = { 30 30 }

                        background =  {
                            texture = "[GetClimateFrame(Location.GetClimate)]"
                        }
                        icon = {
                            size = { 30 30 }
                            texture = "[GetClimateIcon(Location.GetClimate)]"
                            glow = {
                                name = "drop_shadow"
                                glow_radius = 3
                                color = {0.0 0.0 0.0 1.0}
                                alpha = 0.3
                            }
                        }
                    }
                }

                tooltipwidget = {
                    using = Climate_tooltip
                }
            }

            TooltipStatBarItem = { #VEGETATION
                name = "vegetation"
                # visible = "[GetDescriptionForUIngType.IsMultipleLevels]"
                visible = "[Not(Location.GetArea.IsSea)]"
                datacontext = "[Location.GetVegetation]"

                blockoverride "item_content" {
                    widget = {
                        size = { 30 30 }
                        datacontext = "[Location.GetVegetation]"

                        background =  {
                            texture = "[GetClimateFrame(Location.GetClimate)]"
                        }
                        icon = {
                            size = { 30 30 }
                            texture = "[GetVegetationIcon(Location.GetVegetation)]"
                            glow = {
                                name = "drop_shadow"
                                glow_radius = 3
                                color = {0.0 0.0 0.0 1.0}
                                alpha = 0.3
                            }
                        }
                    }
                }

                tooltipwidget = {
                    using = Vegetation_tooltip
                }
            }

            TooltipStatBarItem = { # COASTAL
                name = "coastal"
                visible = "[Location.IsCoastal]"

                blockoverride "item_content" {
                    widget = {
                        size = { 30 30 }
                        background =  {
                            texture = "[GetClimateFrame(Location.GetClimate)]"
                        }
                        icon = {
                            size = { 100% 100% }
                            texture = "gfx/interface/icons/location_icons/coastal.dds"
                            visible = "[Not(Location.IsBlockadedByEnemies)]"
                            glow = {
                                name = "drop_shadow"
                                glow_radius = 3
                                color = {0.0 0.0 0.0 1.0}
                                alpha = 0.3
                            }
                        }

                        icon = {
                            size = { 100% 100% }
                            texture = "gfx/interface/icons/location_icons/coastal_blockade.dds"
                            visible = "[Location.IsBlockadedByEnemies]"
                            glow = {
                                name = "drop_shadow"
                                glow_radius = 3
                                color = {0.0 0.0 0.0 1.0}
                                alpha = 0.3
                            }
                        }
                    }
                }

                tooltipwidget = {
                    using = coastal_tooltip
                }
            }

            TooltipStatBarItem = { # LAND
                name = "land"
                visible = "[Not(Location.IsCoastal)]"

                blockoverride "item_content" {
                    widget = {
                        size = { 30 30 }
                        datacontext = "[Location.GetTopography]"

                        background =  {
                            texture = "[GetClimateFrame(Location.GetClimate)]"
                        }
                        icon = {
                            size = { 30 30 }
                            texture = "gfx/interface/icons/location_icons/inland.dds"
                            glow = {
                                name = "drop_shadow"
                                glow_radius = 3
                                color = {0.0 0.0 0.0 1.0}
                                alpha = 0.3
                            }
                        }
                    }
                }

                tooltipwidget = {
                    using = Inland_tooltip
                }
            }
        }
    }

    # type location_modifiers_bar = hbox { # NOT IN USE, REPLACED BY ICON+TEXT
    #     visible = "[Location.HasSpecificBaseModifier]"
    #     tooltip = "[location_modifiers|e]"
    #     tagtooltip_enabled = yes
    #     layoutpolicy_horizontal = expanding

    #     background = {
    #         using = tile_background_squared_texture
    #         alpha = 0.3
    #         modify_texture = {
    #             using = color_turquoise_texture
    #         }
    #     }

    #     margin = { 5 5 }
    #     margin_left = 5
    #     spacing = 5

    #     icon = {
    #         size = { 27 27 }
    #         texture = "gfx/interface/icons/map_subdivisons/location.dds"
    #     }

    #     hbox = {
    #         layoutpolicy_horizontal = expanding
    #         background = {
    #             using = tile_background_squared_texture
    #             alpha = 0.3
    #             modify_texture = {
    #                 using = color_tool_blue_texture
    #             }
    #         }

    #         margin = { 5 5 }
    #         spacing = 5

    #         icon = {
    #             size = { 27 27 }
    #             texture = "[Location.GetSpecificBaseModifier.GetModifier.GetIcon]"
    #             visible = "[Location.HasSpecificBaseModifier]"
    #             tooltipwidget = {
    #                 ContextualTooltipType = {
    #                     blockoverride "title_icon" {
    #                         icon = {
    #                             using = tooltip_title_icon_size
    #                             texture = "[Location.GetSpecificBaseModifier.GetModifier.GetIcon]"
    #                         }
    #                     }

    #                     blockoverride "title_text" {
    #                         text = "[Location.GetSpecificBaseModifier.GetName]"
    #                     }
    #                     blockoverride "concept_link" {
    #                         text = "[location_modifier|e]"
    #                     }
                        
    #                     blockoverride "tooltip_content" {
    #                         TooltipStringPairList = {
    #                             textcontext = "[Location.GetSpecificBaseModifier.GetDesc]"
    #                         }

    #                         TooltipFlavorTextBlock = {
    #                             visible = "[Location.HasFlavorText]"
    #                             blockoverride "text" {
    #                                 text = "[Location.GetFlavorText]"
    #                             }
    #                         }
    #                     }
    #                 }
    #             }
    #         }
    #         expand = {}
    #     }
	# }
}

template AverageSatisfaction_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                name = "sad face"
                visible = "[LessThanOrEqualTo_CFixedPoint(Location.GetAverageSatisfaction,'(CFixedPoint)0.25')]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/sad.dds"
                texture_density = 2
            }

            icon = {
                name = "neutral face"
                visible = "[And(GreaterThan_CFixedPoint(Location.GetAverageSatisfaction,'(CFixedPoint)0.25'), LessThanOrEqualTo_CFixedPoint(Location.GetAverageSatisfaction,'(CFixedPoint)0.5'))]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/neutral.dds"
                texture_density = 2
            }

            icon = {
                name = "happy face"
                visible = "[GreaterThan_CFixedPoint(Location.GetAverageSatisfaction,'(CFixedPoint)0.5')]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/happy.dds"
                texture_density = 2
            }
        }

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "AVERAGE_L_SATISFACTION_TITLE"
        }
        blockoverride "concept_link" {
            text = [pop_satisfaction|E]
        }

        blockoverride "tooltip_content" {
            TooltipScrolledColumnList = {
                blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
                textcontext = "[Location.GetAverageSatisfactionInfo]"
            }

            TooltipScrolledStringPairList = {
                textcontext = "[Location.GetAverageSatisfactionImpact]"
            }
        }
    }
}

template LocationPopItem_Breakdown {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetGraphicalCultureTextureForCountryPopType(PopType.Self, Location.GetOwner.Self)]"
                tooltipwidget = { using = PopType_tooltip }
            }
        }

        blockoverride "title_text" {
            text = "POP_AMOUNT_IN_LOC_LABEL"
        }
        blockoverride "concept_link" {
            text = [population|E]
        }

        blockoverride "tooltip_content" {
            TooltipColumnList = {
                blockoverride "empty_list_text" { text = "NO_POP_SOURCES" }
                textcontext =  "[Location.GetPopTypeBreakDown(PopType.Self)]"
            }

            TooltipTextBlock = {
                blockoverride "text" { text = "[Location.GetGrowthTooltip(PopType.Self)]" }
            }

            TooltipScrolledStringPairList = {
                visible = "[PopType.HasCap]"
                blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
                blockoverride "block_title" { text = "POP_CAPACITY_IN_LOC_LABEL" }
                blockoverride "empty_list_text" { text = "NO_POP_CAPACITY_SOURCES" }
                textcontext = "[Location.GetPopCapTooltip(PopType.Self)]"
            }
        }
    }
}

# template LocationPopItem_CapTooltip {
#     ContextualTooltipType = {
#         blockoverride "title_icon" {
#             icon = {
#                 using = tooltip_title_icon_size
#                 texture = "[GetGraphicalCultureTextureForCountryPopType(PopType.Self, LocationPopItem.GetLocation.GetOwner.Self)]"
#                 tooltipwidget = { using = PopType_tooltip }
#             }
#         }

#         blockoverride "title_text" {
#             datacontext = "[LocationPopItem]"
#             text = "POP_CAPACITY_IN_LOC_LABEL"
#         }
#         blockoverride "concept_link" {
#             text = [population_capacity|E]
#         }

#         blockoverride "tooltip_content" {
#             TooltipStringPairList = {
#                 textcontext =  "[LocationPopItem.GetCapTooltip]"
#             }

#         }
#     }

# }

template LocationBuildingLevels_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetConceptTexture('supported_building_levels')]"
            }
        }

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "BUILDING_LEVELS_LABEL"
        }
        blockoverride "concept_link" {
            text = [supported_building_levels|E]
        }
        blockoverride "tooltip_content" {

            TooltipStringPairList = {
                datacontext = "[Location]"
                textcontext = "LOCATION_CURR_LEVELS"

                tooltipwidget = {
                    SimpleContextualStringPairTooltipType = {
                        blockoverride "title_icon" {
                            icon = {
                                using = tooltip_title_icon_size
                                texture = "gfx/interface/icons/outliner/categories/buildings.dds"
                            }
                        }
                        blockoverride "concept_link" {
                            text = "[buildings|e]"
                        }
                        lowpriotextcontext =  "[Location.GetBuildingLevelInfo]"
                    }
                }
            }


            TooltipStringPairList = {
                blockoverride "block_title" {
                    datacontext = "[Location]"
                    text = "LOCATION_MAX_BUILD_LEVELS_LABEL"
                }
                textcontext = "[Location.GetDescriptionFor('free_building_levels')]"
            }


            TooltipStringPairList = {
                visible = "[Location.HasTooManyBuildingLevel]"
                datacontext = "[Location]"
                blockoverride "block_title" {
                    text = "LOCATION_TOO_MANY_BUILD_LEVELS_LABEL"
                }
                textcontext = "[Location.GetTooManyBuildingInfo]"
            }
        }
    }
}

template LocationProximity_tooltip {
    ContextualTooltipType = {
        block "location_proximity_widgetid" {}
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/distance_capital.dds"
            }
        }

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "PROXIMITY_LABEL"
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('proximity')]"

                widget = {
                    size = { 100% 100% }
                    visible = "[TutorialIsStepKey('lesson_mapmodes_2')]"
                    using = tutorial_highlight_widget_bg
                    using = tutorial_highlight_widget_anim
                }
            }

            hint_button = {
                action_tooltip = {
                    title = "OPEN_HINT"
                    on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_control')]"
                }
            }
        }
        blockoverride "concept_link" {
            text = [proximity|E]
        }

        blockoverride "tooltip_content" {
            tooltipmeta = {
                game_concept = [proximity|e]
                texture = "[GetConceptTexture('proximity')]"
            }
            TooltipTextBlock = {
                visible = "[Location.IsCapital]"
                blockoverride "text" {
                    text = "PROXIMITY_CAPITAL_TEXT"
                }
            }

            TooltipTextBlock = {
                visible = "[And(Location.IsCapital, Location.GetOwner.IsPlayer)]"
                blockoverride "text" {
                    text = "PROXIMITY_CAPITAL_TEXT_2"
                }
                blockoverride "textblock_background_tint"  {
                    modify_texture = {
                        using = color_light_green_texture
                    }
                }
            }
            TooltipTextBlock = { #PROXIMITY = 0
                visible = "[And(Not(Location.IsCapital), EqualTo_CFixedPoint(Location.GetProximityToOwnerCapital, '(CFixedPoint)0'))]"
                blockoverride "text" {
                    text = "NO_PROXIMITY_TT_TEXT"
                }
                blockoverride "textblock_background_tint"  {
                    modify_texture = {
                        using = color_dark_red_texture
                    }
                }
            }
            TooltipScrolledStringPairList = { #PROXIMITY PATH
                visible = "[And(Not(Location.IsCapital), Not(EqualTo_CFixedPoint(Location.GetProximityToOwnerCapital, '(CFixedPoint)0')))]"
                blockoverride "block_title" {
                    text = "PROXIMITY_LIST_TITLE"
                }
                blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
                textcontext = "[Location.GetProximityInfo]"
            }

            TooltipStringPairList = { #EFFECTS
                datacontext = "[Location]"
                visible = "[And(Not(Location.IsCapital), Not(StringIsEmpty(Location.GetProximityEffect)))]"
                blockoverride "block_title" {
                    text = "LIST_TITLE_EFFECTS"
                }
                textcontext = "[Location.GetProximityEffect]"
            }
        }
    }
}

template location_food_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/food.dds"
                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.6
                }
            }
        }
        blockoverride "title_text" {
            text = "LOCATION_FOOD_TT_HEADER"
        }

        blockoverride "concept_link" {
            text = [local_food|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('food')]"
            }
            hint_button = {
                action_tooltip = {
                    title = "OPEN_HINT"
                    on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_food')]"
                }
            }
        }

        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "LOCATION_FOOD_TT_TEXT"
                }
            }
            TooltipStringPairList = {
                textcontext = "[Location.GetFoodSources]"
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "FOOD_PRODUCTIVITY_LIST_TITLE"
                }
                textcontext = "[Location.GetFoodsOutputModifiersTooltip]"
            }

            TooltipListBase = {
                blockoverride "block_title" {
                    text = "LOCATION_FOOD_TT_TABLE_TITLE"
                }

                TooltipListColumnContent = {
                    ignoreinvisible = yes
                    TooltipTableColumn = {

                        blockoverride "field_left" {
                            datacontext = "[PopType]"
                            tooltipwidget = {
                                using = LocationPopItem_Breakdown
                            }

                            icon = {
                                size = { 24 24 }
                                texture = "[GetGraphicalCultureTextureForCountryPopType(PopType.Self, Location.GetOwner.Self)]"
                            }
                        }

                        blockoverride "field_text" {
                            default_format = "#subtle_name"
                            raw_text = " [Location.GetTotalPopTypeSize(PopType.Self)]"
                        }

                        blockoverride "field_right" { expand = {} }
                    }

                    TooltipTableColumn = {
                        # blockoverride "column_title" {}
                        # blockoverride "column_title_text" { text = "[pop_food_consumption|e]" }

                        blockoverride "field_left" { expand = {} }
                        blockoverride "field_text" {
                            raw_text = "[Location.GetFoodConsumption(PopType.Self)|+=2]@food!"
                            tooltipwidget = {
                                ContextualTooltipType = {
                                    blockoverride "title_icon" {
                                        icon = {
                                            using = tooltip_title_icon_size
                                            texture = "gfx/interface/icons/location_icons/food.dds"
                                        }
                                    }
                                    blockoverride "title_text" {
                                        text = "game_concept_pop_food_consumption"
                                    }

                                    blockoverride "concept_link" {
                                        text = "[food_consumption|e]"
                                    }

                                    blockoverride "tooltip_content" {
										TooltipStringPairList = {
											textcontext = "[Location.GetFoodConsumptionInfo(PopType.Self)]"
                                        }
                                    }
                                }
                            }
                        }
                    }

                    blockoverride "column_datamodel"  { datamodel = "[Location.GetPresentPopTypes]" }
                }
            }
        }
    }
}

template food_productivity_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
				texture = "gfx/interface/icons/map_modes/food_productivity.dds"
                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.6
                }
            }
        }
        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "LOCATION_FOOD_PRODUCTIVITY_TT_HEADER"
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('food_productivity')]"
            }
            hint_button = {
                action_tooltip = {
                    title = "OPEN_HINT"
                    on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_food')]"
                }
            }
        }

        blockoverride "concept_link" {
            text = [food_productivity|e]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "FOOD_PRODUCTIVITY_LIST_TITLE"
                }
                textcontext = "[Location.GetFoodsOutputModifiersTooltip]"
            }
        }
    }
}

template population_location_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/population.dds"

                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.3
                }
            }
        }
        blockoverride "title_text" {
            text = "LOC_POP_TT_TITLE"
        }

        blockoverride "concept_link" {
            text = [population|E]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('population')]"
            }
        }

        blockoverride "tooltip_content" {
            hbox = {
                margin_left = 10
                spacing = 30

                icon_pie_left = {
                    blockoverride "PieSize" { size = { 70 70 } }
                    blockoverride "pie_datamodel" {
                        datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetCultures]"
                    }

                    ###Slices and Icon
                    blockoverride "SliceTooltip" {
                        tooltipwidget = {
                            ContextualTooltipType = {
                                blockoverride "title_text" {
                                    datacontext = "[Location]"
                                    text = "POP_CULTURE_OF"
                                }
                                blockoverride "title_icon" {
                                    icon = {
                                        using = tooltip_title_icon_size
                                        texture = "gfx/interface/icons/location_icons/culture.dds"
                                    }
                                }

                                blockoverride "concept_link" {
                                    text = [culture|E]
                                }
                                blockoverride "tooltip_content" {

                                    pie_chart_legend = {
                                        blockoverride "datamodel" {	datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetCultures]" }
                                        blockoverride "color" { color = "[PopCultureItem.GetColor]" }
                                        blockoverride "leftside_info" {text = "[PopCultureItem.GetName]"}
                                        blockoverride "middle_info" {
                                            text = "[PopCultureItem.GetAbsoluteSize]"
                                        }
                                        blockoverride "rightside_info" {
                                            text = "[PopCultureItem.GetPercentage|%2]"
                                            alwaystransparent = no
                                        }
                                    }
                                }
                            }
                        }
                    }
                    blockoverride "SliceValue" { value = "[PopCultureItem.GetPercentage]" }
                    blockoverride "SliceColor" { color = "[PopCultureItem.GetColor]" }
                    blockoverride "Icon" {
                        texture = "gfx/interface/icons/location_icons/culture.dds"
                        position = { 0 1 }

                        modify_texture = {
                            using = overlay_stone_texture
                            blend_mode = overlay
                            alpha = 1
                        }

                        using = overlay_window

                        glow = {
                            name = "drop_shadow"
                            glow_radius = 3
                            color = {0.0 0.0 0.0 1.0}
                            alpha = 0.3
                        }
                    }
                    blockoverride "Icon_Size" {
                        size = { 30 30 }
                    }
                    blockoverride "datamodel" { visible = no }
                }

                icon_pie_left = {
                    blockoverride "PieSize" { size = { 70 70 } }
                    blockoverride "pie_datamodel" {
                        datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetReligions]"
                    }

                    ###Slices and Icon
                    blockoverride "SliceTooltip" {
                        tooltipwidget = {
                            ContextualTooltipType = {
                                blockoverride "title_text" {
                                    datacontext = "[Location]"
                                    text = "POP_RELIGION_OF"
                                }

                                blockoverride "title_icon" {
                                    icon = {
                                        using = tooltip_title_icon_size
                                        texture = "gfx/interface/icons/location_icons/main_religion.dds"
                                    }
                                }
                                blockoverride "concept_link" {
                                    text = [religion|E]
                                }
                                blockoverride "tooltip_content" {

                                    pie_chart_legend = {
                                        blockoverride "datamodel" {	datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetReligions]" }
                                        blockoverride "color" { color = "[PopReligionItem.GetColor]" }
                                        blockoverride "leftside_info" {text = "[PopReligionItem.GetName]"}
                                        blockoverride "middle_info" {text = "[PopReligionItem.GetAbsoluteSize]"}
                                        blockoverride "rightside_info" {text = "[PopReligionItem.GetPercentage|%2]"}
                                    }
                                }
                            }
                        }
                    }
                    blockoverride "SliceValue" { value = "[PopReligionItem.GetPercentage]" }
                    blockoverride "SliceColor" { color = "[PopReligionItem.GetColor]" }
                    blockoverride "Icon" {
                        texture = "gfx/interface/icons/location_icons/main_religion.dds"
                    }
                    blockoverride "Icon_Size" { size = { 35 35 } }
                    blockoverride "datamodel" { visible = no }
                }

                icon_pie_left = {
                    blockoverride "PieSize" { size = { 70 70 } }
                    blockoverride "pie_datamodel" {
                        datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetPopTypes]"
                    }

                    ###Slices and Icon
                    blockoverride "SliceTooltip" {
                        tooltipwidget = {
                            ContextualTooltipType = {
                                blockoverride "title_text" {
                                    datacontext = "[Location]"
                                    text = "POP_TYPES_OF"
                                }

                                blockoverride "title_icon" {
                                    icon = {
                                        using = tooltip_title_icon_size
                                        texture = "gfx/interface/icons/location_icons/estates.dds"
                                    }
                                }
                                blockoverride "title_text" {
                                    text = "POP_TYPES_OF"
                                }
                                blockoverride "concept_link" {
                                    text = [pop_type|E]
                                }
                                blockoverride "tooltip_content" {
                                    pie_chart_legend = {
                                        blockoverride "datamodel" {	datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetPopTypes]" }
                                        blockoverride "color" { color = "[PopTypeItem.GetColor]" }
                                        blockoverride "leftside_info" {text = "[PopTypeItem.GetName]"}
                                        blockoverride "middle_info" {text = "[PopTypeItem.GetAbsoluteSize]"}
                                        blockoverride "rightside_info" {text = "[PopTypeItem.GetPercentage|%2]"}
                                    }
                                }
                            }
                        }
                    }
                    blockoverride "SliceValue" { value = "[PopTypeItem.GetPercentage]" }
                    blockoverride "SliceColor" { color = "[PopTypeItem.GetColor]" }
                    blockoverride "Icon" {
                        texture = "gfx/interface/icons/location_icons/estates.dds"
                        position = { 0 -2 }
                    }
                    blockoverride "Icon_Size" { size = { 38 38 } }
                    blockoverride "datamodel" { visible = no }
                }

                icon_pie_left = {
                    blockoverride "PieSize" { size = { 70 70 } }
                    blockoverride "pie_datamodel" {
                        datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetPolitics]"
                    }

                    ###Slices and Icon
                    blockoverride "SliceTooltip" {
                        tooltipwidget = {
                            ContextualTooltipType = {
                                blockoverride "title_text" {
                                    datacontext = "[Location]"
                                    text = "POP_POLITICS_OF"
                                }

                                blockoverride "title_icon" {
                                    icon = {
                                        using = tooltip_title_icon_size
                                        texture = "gfx/interface/icons/location_icons/government.dds"
                                    }
                                }

                                blockoverride "concept_link" {
                                    text = [political_power|E]
                                }
                                blockoverride "tooltip_content" {
                                    pie_chart_legend = {
                                        blockoverride "datamodel" {	datamodel = "[Location.GetPopulationChart.GetPopsPiechartWidget.GetPolitics]" }
                                        blockoverride "color" { color = "[PopPoliticsItem.GetColor]" }
                                        blockoverride "leftside_info" {text = "[PopPoliticsItem.GetName]"}
                                        blockoverride "middle_info" {
                                            text = "[PopPoliticsItem.GetPopulation]"
                                            tooltip = "[population|e]"
                                            tagtooltip_enabled = yes
                                        }
                                        blockoverride "rightside_info" {
                                            text = "[PopPoliticsItem.GetPercentage|%2]"
                                            alwaystransparent = no
                                            tooltipwidget = {
                                                ContextualTooltipType = {
                                                    blockoverride "title_icon" {
                                                        icon = {
                                                            using = tooltip_title_icon_size
                                                            texture = "gfx/interface/icons/location_icons/government.dds"
                                                        }
                                                    }

                                                    blockoverride "title_text" {
                                                        text = "LOCATION_POLITICS_TOOLTIP_INDIVIDUAL"
                                                    }

                                                    blockoverride "concept_link" {
                                                        text = "[estate_power|E]"
                                                    }

                                                    blockoverride "tooltip_content" {
                                                        TooltipTextBlock = {
                                                            blockoverride "text" {
                                                                text = "[PopPoliticsItem.GetTooltip]"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    blockoverride "SliceValue" { value = "[PopPoliticsItem.GetPercentage]" }
                    blockoverride "SliceColor" { color = "[PopPoliticsItem.GetColor]" }
                    blockoverride "Icon" {
                        texture = "gfx/interface/icons/location_icons/government.dds"
                        position = { 0 -2 }
                    }
                    blockoverride "Icon_Size" { size = { 35 35 } }
                    blockoverride "datamodel" { visible = no }
                }
            }

            widget = {
                size = { 10 10 }
            }

            widget = {
                tooltipwidget = {
                    ContextualTooltipType = {
                        blockoverride "title_text" {
                            datacontext = "[Location]"
                            text = "POP_BREAKDOWN_DET"
                        }

                        blockoverride "title_icon" {
                            icon = {
                                using = tooltip_title_icon_size
                                texture = "gfx/interface/icons/location_icons/new/population.dds"
                            }
                        }

                        blockoverride "concept_link" {
                            text = [population|E]
                        }

                        blockoverride "tooltip_content" {
                            TooltipScrolledColumnList = {
                                blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
                                textcontext = "[Location.GetTotalPopList]"
                            }
                        }
                    }
                }
                size = { 440 28 }
                using = fake_table_dark_background
                text_single = {
                    text = "[population|e]"
                }
                text_single = {
                    parentanchor = right
                    align = right
                    raw_text = "[Location.GetTotalPopulation|L]@population!"
                }
            }
            widget = {
                size = { 440 28 }
                using = fake_table_dark_background
                text_single = {
                    text = "[population_growth|e]"
                }
                text_single = {
                    parentanchor = right
                    align = right
                    text = "[Location.GetPopGrowth|2+=%]"

                    tooltipwidget = {
                        ContextualTooltipType = {
                            blockoverride "title_icon" {
                                icon = {
                                    using = tooltip_title_icon_size
                                    texture = "gfx/interface/icons/location_icons/new/population_growth.dds"
                                }
                            }

                            blockoverride "title_text" {
                                datacontext = "[Location]"
                                text = "POP_GROWTH_TT_HEADER_TEXT"
                            }

                            blockoverride "concept_link" {
                                text = [population_growth|E]
                            }

                            blockoverride "tooltip_content" {
                                TooltipStringPairList = {
                                    blockoverride "block_title" {
                                        text = "POP_GROWTH_TT_TEXT"
                                    }
                                    textcontext =  "[Location.GetPopGrowthInfo]"
                                }
                            }
                        }
                    }
                }
            }
            widget = {
                size = { 440 28 }
                using = fake_table_light_background
                text_single = {
                    text = "[migration_attraction|e]"
                }
                text_single = {
                    parentanchor = right
                    align = right
                    text = "[Location.GetLocalMigrationAttraction]"
                }
            }
            vbox = {
                layoutpolicy_horizontal = expanding

                spacing = 10
                ignoreinvisible = yes
                allow_outside = yes

                TooltipStringPairList = {
                    datacontext = "[Location]"
                    blockoverride "block_title" {
                        text = "POP_CAP_DUE_TO"
                    }
                    textcontext = "[Location.GetPopulationCapacityInfo]"
                }
            }
        }
    }
}

template Inland_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "LANDLOCKED_LOCATION"
        }

        blockoverride "title_icon_texture" {
            texture = "gfx/interface/icons/location_icons/inland.dds"
        }

        blockoverride "concept_link" {
            text = [inland|E]
        }

        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "LANDLOCKED_LOCATION_DESC"
                }
            }
        }
    }
}

template coastal_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            datacontext = "[Location]"

            text = "COASTAL_LOCATION"
        }

        blockoverride "title_icon" {
            ContextualTooltipDefaultIcon = {
                visible = "[Not(Location.IsBlockadedByEnemies)]"
                blockoverride "title_icon_texture" {
                    texture = "gfx/interface/icons/location_icons/coastal.dds"
                }
            }

            ContextualTooltipDefaultIcon = {
                visible = "[Location.IsBlockadedByEnemies]"
                blockoverride "title_icon_texture" {
                    texture = "gfx/interface/icons/location_icons/coastal_blockade.dds"
                }
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('maritime')]"
            }
        }

        blockoverride "concept_link" {
            text = [coastal|e]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                visible = "[Location.IsBlockadedByEnemies]"
                blockoverride "block_title" {
                    datacontext = "[Location]"
                    text = "BLOCKADED_BY_ENEMIES"
                }
                textcontext = "[Location.GetBlockadeImpact]"
            }
            TooltipStringPairList = {
                textcontext = "[ShowModifierEffect('coastal')]"
            }
            TooltipStringPairList = {
                blockoverride "block_title" {
                    datacontext = "[Location]"
                    text = "BLOCKADE_FORCE_REQUIRED_TT"
                }
                textcontext = "[Location.GetDescriptionFor('blockade_force_required')]"
            }
        }
    }
}

template location_institution_status_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = SPREAD_OF_INS_IN_LOC
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetInstitutionIcon(ActiveInstitution.GetInstitution)]"
            }
        }

        blockoverride "concept_link" {
            text = [institution|E]
        }
        blockoverride "tooltip_content" {

            TooltipStringPairList = {
                visible = "[And(ActiveInstitution.IsActive, Not(Location.GetOwner.HasEmbracedInstitution(ActiveInstitution.GetInstitution)))]"
                textcontext = "[Location.GetInstitutionInfo(ActiveInstitution.GetInstitution)]"
            }

            TooltipStringPairList = {
                visible = "[Location.GetOwner.HasEmbracedInstitution(ActiveInstitution.GetInstitution)]"
                textcontext = "[Location.GetInstitutionInfo(ActiveInstitution.GetInstitution)]"
            }

            TooltipTextBlock = {
                visible = "[Not(ActiveInstitution.IsActive)]"
                blockoverride "text" {
                    text = "[Location.GetInstitutionInfo(ActiveInstitution.GetInstitution)]"
                }
            }
        }
    }
}

template offer_peace_location_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                visible = "[And(Not(Location.GetArea.IsSea), Not(Location.IsCorridor))]"
                using = tooltip_title_icon_size
                texture = "[Location.GetRankIcon]"
                tooltipwidget = {
                    using = location_rank_tooltip
                }
            }
            icon = {
                visible = "[Location.GetArea.IsSea]"
                using = tooltip_title_icon_size
                texture = "[Location.GetRankIcon]"
                tooltipwidget = {
                    using = seazone_tooltip
                }
            }
            icon = {
                visible = "[Location.IsCorridor]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/mapitems/desert_connector.dds"                
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('offer_peace')]"
            }
        }

        blockoverride "title_text" {
            text = "MAP_TT_LOCATION_ALT_TITLE"
        }

        blockoverride "concept_link" {
            text = "[Select_CString(Location.GetArea.IsSea, Select_CString(Location.GetTopography.IsDeepOcean, sea_current, seazone), Select_CString(Location.IsCorridor, corridor, location))|e]"
        }

        blockoverride "tooltip_content" {
            TooltipDebugStringPairList = {
                textcontext = "[Location.GetDebugText]"
            }
            
            block "tooltip_location_specific" {
                TooltipListScrollArea = {
                    visible = "[Not(StringIsEmpty(Location.GetMapmodeSpecificTooltip))]"
                    blockoverride "block_scrollarea" {
                        maximumsize = { -1 300 }
                    }
                    
                    blockoverride "scrollarea_content" {
                        TooltipScrolledConditionList = {
							blockoverride "block_scrollarea" { maximumsize = { -1 400 }}
							ontextcontextchanged = "[SetConditionListWithTitleFromTextContext(PdxGuiWidget.AccessSelf)]"
                            set_parent_dimension_to_minimum = height
                            layoutpolicy_horizontal = expanding
                            textcontext = "[Location.GetMapmodeSpecificTooltip]"
                        }
                    }
                }
            }
            
			TooltipContentSection = {
				using = tooltip_location_alt_content
			}
        }
    }
}

template institution_in_location_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                texture = "gfx/interface/icons/location_icons/institutions.dds"
                using = tooltip_concept_title_icon_size
            }
        }

        blockoverride "title_text" {
            text = "INSTITUTION_IN_LOCATION"
        }

        blockoverride "concept_link" {
            text = [institutions|E]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('institution')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipListBase = {
				blockoverride "block_title" {
					text = "ACTIVE_NOT_PRESENT_INSTITUTIONS_TITLE"
				}

                TooltipListColumnContent = {
                    visible = "[DataModelHasItems(GetActiveInstitutions)]"
                    layoutpolicy_horizontal = expanding
                    TooltipTableColumn = {
                        name = "InstitutionColumn1"
                        blockoverride "column_datamodel" {
                            datamodel = "[GetActiveInstitutions]"
                            ignoreinvisible = yes
                        }

                        blockoverride "field_background" {
                            background = {
                                visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInParent)]"
                                using = tooltip_table_field_texture
                            }
                        }

                        blockoverride "field_text" {
                            text = "[ActiveInstitution.GetInstitution.GetNameWithNoTooltip]"
                            default_format = "#subtle_name"
                            using = Font_Size_Medium
                        }

                        blockoverride "field_left" {
                            visible = "[Location.CanInstitutionSpread(ActiveInstitution.GetInstitution)]"
                            icon = {
                                size = { 28 28 }
                                texture = "[GetInstitutionIcon(ActiveInstitution.GetInstitution)]"
                            }
                            onmousehierarchyenter = "[SetSelectedInstitution(ActiveInstitution.GetInstitution)]"
                            onmousehierarchyleave = "[ClearSelectedInstitution]"
                            datacontext = "[ActiveInstitution.GetInstitution]"
                            tooltipwidget = {
                                using = Institution_tooltip
                            }
                        }

                        blockoverride "field_right" { expand = {} }
                    }

                    TooltipTableColumn = {
                        layoutpolicy_horizontal = fixed

                        blockoverride "column_datamodel" {
                            datamodel = "[GetActiveInstitutions]"
                        }

                        blockoverride "field_background" {
                            background = {
                                visible = "[IsOdd_int32(PdxGuiWidget.GetIndexInParent)]"
                                using = tooltip_table_field_texture
                            }
                        }

                        blockoverride "field_text" {
                            align = right|nobaseline
                            text = "[Location.GetCurrentProgressInfo(ActiveInstitution.GetInstitution)]"
                            tooltipwidget = {
                                using = location_institution_status_tooltip
                            }
                        }

                        blockoverride "field_left" { expand = {} }
                        
                        blockoverride "field_right" { 
                            visible = "[Location.CanInstitutionSpread(ActiveInstitution.GetInstitution)]"
                        }
                    }
                }

                TooltipListEmptyContent = {
                    visible = "[EqualTo_int32(PdxGuiWidget.AccessParent.FindChild('InstitutionColumn1').CountVisibleChildren, '(int32)0' )]"
                }
			}

            TooltipListBase = {
                blockoverride "block_title" {
                    text = "PRESENT_INSTITUTIONS_TITLE"
                }

                flowcontainer = {
                    name = "InstitutionIcons"
                    min_width = 430
                    wrap_length = 430
                    spacing = 5
                    ignoreinvisible = yes

                    datamodel = "[GetActiveInstitutions]"
                    item = {
                        widget = {
                            size = { 50 60 }
                            visible = "[Location.HasInstitution(ActiveInstitution.GetInstitution)]"
                            datacontext = "[ActiveInstitution.GetInstitution]"
                            icon = {
                                parentanchor = center
                                using = tooltip_title_icon_size
                                texture = "[GetInstitutionIcon(ActiveInstitution.GetInstitution)]"
                            }

                            tooltipwidget = {
                                using = Institution_tooltip
                            }
                        }
                    }
                }

                TooltipListEmptyContent = {
                    visible = "[EqualTo_int32(PdxGuiWidget.AccessParent.FindChild('InstitutionIcons').CountVisibleChildren, '(int32)0' )]"
                }
            }
        }
    }
}

template location_control_tooltip {
    ContextualTooltipType = {
        block "location_control_widgetid" {}
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/control.dds"
            }
        }
        blockoverride "title_text" {
            text = "EFFECTIVE_CONTROL"
        }

        blockoverride "concept_link" {
            text = "[control|e]"
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                name = "control_tooltip_button"
                datacontext = "[GetMapMode('control')]"

                widget = {
                    size = { 100% 100% }
                    visible = "[Or(TutorialIsStepKey('lesson_mapmodes_1c'), TutorialIsStepKey('lesson_mapmodes_1'))]"
                    using = tutorial_highlight_widget_bg
                    using = tutorial_highlight_widget_anim
                }
            }

            hint_button = {
                action_tooltip = {
                    title = "OPEN_HINT"
                    on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_control')]"
                }
            }
        }

        blockoverride "tooltip_content" {
            hbox = {
                layoutpolicy_horizontal = expanding
                spacing = 5
                widget = { ### PIECHART

                    size = { 100 100 }
                    # using = marker_bg_circle

                    piechart = {
                        using = bg_circle
                        parentanchor = center
                        size = { 90% 90% }

                        using = piechart_angles
                        using = bg_circle_piechart

                        pieslice_no_highlight = {
                            texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
                            value = "[FixedPointToFloat(Location.GetControl)]"
                            color = { 1 1 1 1 }
                        }

                        pieslice_no_highlight = {
                            texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
                            value = "[Subtract_float('(float)1.0', FixedPointToFloat(Location.GetControl))]"
                            color = { 1 1 1 1 }
                        }

                        icon = {
                            size = { 50% 50% }
                            parentanchor = center
                            texture = "gfx/interface/icons/location_icons/control.dds"
                        }
                    }
                }

                TooltipListBase = { ### SIDE TABLE
                    TooltipListRowContent = {
                        TooltipManualTableField = {
                            blockoverride "field_content" {
                                text_single = {
                                    text = "LOCATION_CONTROL_TT_CURRENT"
                                    default_format = "#W"
                                }
                                expand = {}
                                text_single = {
                                    raw_text = "[Location.GetControl|%0W]"
                                }
                            }
                        }

                        TooltipManualTableField = {
                            blockoverride "field_content" {
                                text_single = {
                                    text = "LOCATION_CONTROL_TT_MONTHLY"
                                    default_format = "#W"
                                }
                                expand = {}
                                text_single = {
                                    raw_text = "[Location.GetMonthlyControl]"
                                }
                            }
                        }

                        TooltipManualTableField = {
                            blockoverride "field_content" {
                                text_single = {
                                    raw_text = "[max_control|e]:"
                                }
                                expand = {}
                                text_single = {
                                    raw_text = "[Location.GetMaxControl]"
                                    # tooltipwidget = {
                                    #     SimpleContextualTooltipType = {
                                    #         blockoverride "title_icon" {
                                    #             icon = {
                                    #                 using = tooltip_title_icon_size
                                    #                 texture = "gfx/interface/icons/location_icons/control.dds"
                                    #             }
                                    #         }
                                    #         blockoverride "title_text" {
                                    #             text = "MAX_CONTROL_TT_HEADER"
                                    #         }

                                    #         blockoverride "concept_link" {
                                    #             text = "[max_control|e]"
                                    #         }

                                    #         textcontext =  "[Location.GetMaxControlInfo]"
                                    #     }
                                    # }
                                }
                            }
                        }
                    }
                }
                
                # TooltipStringPairList = {
                #     textcontext =  "[Location.GetControlInfo]"
                # }
            }

            TooltipListBase = { 
                blockoverride "block_title" {
                    text = "LOCATION_CONTROL_TAX_BASE_TITLE"
                }
                TooltipListRowContent = {
                    TooltipManualTableField = {
                        blockoverride "field_content" {
                            text_single = {
                                raw_text = "[max_tax_base|e]:"
                            }
                            expand = {}
                            text_single = {
                                raw_text = "[Location.GetTotalPossibleTaxBase|2] [max_tax_base_icon]"
                            }
                        }
                    }

                    TooltipManualTableField = {
                        blockoverride "field_content" {
                            text_single = {
                                text = "LOCATION_CONTROL_TAX_BASE"
                            }
                            expand = {}
                            text_single = {
                                raw_text = "[Location.GetTotalTaxBase|W2L]@tax_base!"
                            }
                        }
                    }
                }
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "LOCATION_CONTROL_EFFECTS"
                }
                textcontext = "[Location.GetControlEffect]"
            }
        }
    }
}

template location_tax_base_details {
    hbox = {
        layoutpolicy_horizontal = expanding
        spacing = 10
        widget = { ### POWER PIECHART
            size = { 100 100 }
            using = marker_bg_circle

            icon_pie_left = {
                parentanchor = center
                blockoverride "PieSize" { size = { 90% 90% } }
                blockoverride "pie_datamodel" {
                    datacontext = "[Location.GetPopulationChart]"
                    datacontext = "[LocationPopulationChart.GetPopsPiechartWidget]"
                    datamodel = "[PopsPiechartWidget.GetTax]"
                }

                ###Slices and Icon
                blockoverride "SliceTooltip" {}
                blockoverride "SliceValue" { value = "[PopTaxItem.GetPercentage]" }
                blockoverride "SliceColor" { color = "[PopTaxItem.GetColor]" }
                blockoverride "Icon" {
                    texture = "gfx/interface/icons/location_icons/tax_base.dds"
                }
                blockoverride "Icon_Size" { size = { 55% 55% } }
                blockoverride "datamodel" { visible = no }

                # using = bg_circle_piechart
            }

            tooltip = "[tax_base_share]"
            tagtooltip_enabled = yes

        }

        TooltipListBase = { ### SIDE TABLE
            blockoverride "block_title" {
                text = "TAX_BASE_TT_LIST_TITLE"
            }
            TooltipListRowContent = {
                TooltipManualTableField = {
                    blockoverride "field_content" {
                        text_single = {
                            text = "[max_tax_base|e]"
                        }
                        expand = {}
                        text_single = {
                            raw_text = "[Location.GetTotalPossibleTaxBase|W2] [max_tax_base_icon]"
                            tagtooltip_enabled = yes
                            tooltip = "[max_tax_base|e]"
                        }
                    }
                }

                TooltipManualTableField = {
                    blockoverride "field_content" {
                        tooltipwidget = {
                            using = location_control_tooltip
                        }
                        text_single = {
                            text = "TAX_BASE_TT_LIST"
                        }
                        expand = {}
                        text_single = {
                            raw_text = "[Subtract_CFixedPoint(Location.GetControl, '(CFixedPoint)1.0')|%2+]"
                        }
                    }
                }
            }
        }
    }

    TooltipListBase = { ### ESTATES TAXES
        visible = "[GreaterThan_CFixedPoint(Location.GetTotalTaxBase, '(CFixedPoint)0')]"
        blockoverride "block_title" {
            text = "TAX_BASE_TT_ESTATES_LIST_TITLE"
        }

        TooltipListColumnContent = {
            TooltipTableColumn = {
                blockoverride "column_title" {}
                blockoverride "column_title_text" {
                    text = "[estates|e]"
                }
                blockoverride "column_title_right" {
                    expand = {}
                }

                blockoverride "field_left" {
                    visible = "[Estate.ExistsForCountry]"
                    tooltipwidget = {
                        using = Estate_tooltip
                    }
                    icon = {
                        size = { 10 20 }
                        texture = "gfx/interface/component_tiles/bookmark_white.dds"
                        tintcolor = "[Estate.GetType.GetMapColor]"
                    }
                }

                blockoverride "field_text" {
                    default_format = "#subtle_name"
                    align = left|nobaseline
                    raw_text = "[Estate.GetName]"
                }

                blockoverride "field_right" { expand = {} }
            }

            TooltipTableColumn = {
                blockoverride "column_title" {}
                blockoverride "column_title_left" {
                    expand = {}
                }
                blockoverride "column_title_text" {
                    text = "[tax_base_share|e]"
                }

                blockoverride "field_left" {
                    expand = {}
                    visible = "[Estate.ExistsForCountry]"
                    tooltipwidget = {
                        SimpleContextualTooltipType = {
                            blockoverride "title_icon" {
                                icon = {
                                    using = tooltip_title_icon_size
                                    texture = "gfx/interface/icons/location_icons/tax_base.dds"
                                }
                            }
                            blockoverride "title_text" {
                                text = "TAX_BASE_TT_ESTATES_LIST_SHARE_TITLE"
                            }

                            blockoverride "concept_link" {
                                text = "[tax_base_share|e]"
                            }

                            textcontext =  "TAX_BASE_TT_ESTATES_LIST_SHARE"
                        }
                    }
                }
                blockoverride "field_text" {
                    visible = "[Estate.ExistsForCountry]"
                    raw_text = "[Location.GetEstateTaxBase(Estate.Self)|2L]@gold! ([Location.GetEstateTaxBasePercent(Estate.Self)|0%]@tax_base!)"
                }
            }

            TooltipTableColumn = {
                blockoverride "column_title" {}
                blockoverride "column_title_left" {
                    expand = {}
                }
                blockoverride "column_title_text" {
                    raw_text = "Taxed amount"
                    default_format = "#explanation_link"
                    tooltip = "[tax|e]"
                    tagtooltip_enabled = yes
                }

                blockoverride "field_left" {
                    expand = {}
                    visible = "[Estate.ExistsForCountry]"
                    tooltipwidget = {
                        SimpleContextualTooltipType = {
                            blockoverride "title_icon" {
                                icon = {
                                    using = tooltip_title_icon_size
                                    texture = "gfx/interface/icons/resources/gold.dds"
                                }
                            }
                            blockoverride "title_text" {
                                text = "TAX_BASE_TT_ESTATES_LIST_TAXED_TITLE"
                            }

                            blockoverride "concept_link" {
                                text = "[taxes|e]"
                            }

                            textcontext =  "TAX_BASE_TT_ESTATES_LIST_TAXED"
                        }
                    }
                }

                blockoverride "field_text" {
                    visible = "[Estate.ExistsForCountry]"
                    raw_text = "[Multiply_CFixedPoint(Location.GetOwner.GetEconomy.GetTaxRate(Estate.GetType), Location.GetEstateTaxBase(Estate.Self))|+=2]@gold! ([Location.GetOwner.GetEconomy.GetTaxRate(Estate.GetType)|2%])"
                }
            }

            blockoverride "column_datamodel"  {  datamodel = "[DataModelSkipFirst(Location.GetOwner.GetGovernment.GetEstates, '(int32)1')]" }
        }
    }

    TooltipStringPairList = {
        visible = "[Location.HasOwner]"
        textcontext = "TAX_BASE_TT_TEXT"
    }
}

template location_tax_base_tooltip {
    ContextualTooltipType = {
        widgetid = "location_tax_base_tooltip"

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/tax_base.dds"
            }
        }

        blockoverride "title_text" {
            text = "BASE_TAX_FROM_LOC_TITLE"
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('tax_base')]"
            }
        }

        blockoverride "concept_link" {
            text = [tax_base|e]
        }

        blockoverride "tooltip_content" {
            using = location_tax_base_details
        }
    }
}

template location_development_tooltip {
    ContextualTooltipType = {

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/development.dds"
            }
        }

        blockoverride "title_text" {
            text = "DEVELOPMENT_IN_LOC"
        }

        blockoverride "concept_link" {
            text = [development|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('development')]"
            }
        }

        blockoverride "tooltip_content" {

            TooltipStringPairList = {
                blockoverride "block_title" {
                    datacontext = "[Location]"

                    text = "DEV_CHANGE_DUE_TO"

                }
                textcontext = "[Location.GetDescriptionValueAndPercentWithCountryFor('local_monthly_development','local_monthly_development_modifier','global_monthly_development')]"
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    datacontext = "[Location]"
                    text = "DEV_EFFECT_DUE_TO"

                }
                textcontext = "[Location.GetDevelopmentEffect]"
            }
        }
    }
}

template location_prosperity_tooltip {
    ContextualTooltipType = {

        blockoverride "title_icon" {
            icon = {
                visible = "[Not(LessThan_CFixedPoint(Location.GetProsperity, '(CFixedPoint)0.0'))]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/new/prosperity.dds"
            }

            icon = {
                visible = "[LessThan_CFixedPoint(Location.GetProsperity, '(CFixedPoint)0.0')]"
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/prosperity_low.dds"
            }
        }

        blockoverride "title_text" {
            text = "PROSPERITY_IN_LOC"
        }

        blockoverride "concept_link" {
            text = "[prosperity|e]"
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('prosperity')]"
            }
        }

        blockoverride "tooltip_content" {

            TooltipStringPairList = {
                blockoverride "block_title" {
                    datacontext = "[Location]"

                    text = "PROSP_CHANGE_DUE_TO"

                }
                textcontext = "[Location.GetProsperityChangeInfo]"
            }



            TooltipStringPairList = {
                blockoverride "block_title" {
                    datacontext = "[Location]"
                    text = "PROSP_EFFECT_DUE_TO"

                }
                textcontext = "[Location.GetProsperityEffect]"
            }
        }
    }
}

template supply_limit_tooltip {
    ContextualTooltipType = {
        datacontext = "[Location]"
        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "SUPPLY_LIMIT_TT_HEADER"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/supply_limit.dds"
                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.6
                }
            }
        }
        blockoverride "concept_link" {
            text = [supply_limit|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('supply')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "SUPPLY_LIMIT_TT_TEXT"
                }
                textcontext = "[Location.GetSupplyLimitInfo]"
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "[Location.GetUsedSupplyAndMax]"
                }
                visible = "[And(Not(Location.IsHiddenByFoW), NotEqualTo_CFixedPoint(Location.GetUsedSupply, '(CFixedPoint)0'))]"
                textcontext = "[Location.GetAttritionTooltip]"
            }
        }
    }
}

template yearly_pop_growth_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/monthly_growth.dds"
                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.6
                }
            }
        }
        blockoverride "title_text" {
            datacontext = "[LocationView.GetLocation]"
            text = "POP_GROWTH_TT_HEADER_TEXT"
        }
        blockoverride "concept_link" {
            text = [population_growth|E]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "POP_GROWTH_TT_TEXT"
                }
                textcontext =  "[LocationView.GetLocation.GetPopGrowthInfo]"
            }
        }
    }
}

template MigrationAttraction_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                texture = "gfx/interface/icons/location_icons/new/migration.dds"
                using = tooltip_title_icon_size
            }
        }

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "MIGRATION_ATTRACTION_TT_HEADER"
			autoresize = yes
        }

        blockoverride "concept_link" {
            text = [migration_attraction|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('migration')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "MIGRATION_ATTRACTION_TT_TEXT"
                }
                textcontext = "[Location.GetLocalMigrationAttractionInfo]"
            }

            TooltipScrolledRowList = {
                blockoverride "block_scrollarea" { maximumsize = { -1 200 }}
                visible = "[Not(StringIsEmpty(Location.GetMigrationInformation))]"
                textcontext = "[Location.GetMigrationInformation]"
            }
        }
    }
}

template MonthlyControl_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                texture = "gfx/interface/icons/location_icons/control.dds"
                using = tooltip_title_icon_size
            }
        }

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "MONTHLY_CONTROL_TT_HEADER"
        }

        blockoverride "concept_link" {
            text = [control|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('control')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[Location.GetMonthlyControlInfo]"
            }
        }
    }
}
template MaxControl_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                texture = "gfx/interface/icons/location_icons/control.dds"
                using = tooltip_title_icon_size
            }
        }

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "MAX_CONTROL_TT_HEADER"
        }

        blockoverride "concept_link" {
            text = [control|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('control')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "MAX_CONTROL_TT_TEXT"
                }
                textcontext = "[Location.GetMaxControlInfo]"
            }
        }
    }
}

template location_warscore_tooltip {
    ContextualTooltipType = {
        datacontext = "[Location]"
        blockoverride "title_text" {
            # datacontext = "[Location]"
            text = "LOCATION_WARSCORE_TT_HEADER"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/war_score.dds"
                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.6
                }
            }
        }
        blockoverride "concept_link" {
            text = [war_score|e]
        }
        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    datacontext = "[Location]"
                    text = "LOCATION_WARSCORE_TT_TEXT"
                }
                textcontext = "[LocationView.GetLocation.GetWarWorthTooltip]"
            }
            TooltipTextBlock = {   
                blockoverride "text" {
                    text = "COUNTRY_WARSCORE_TT_TEXT"
                }                
            }
        }
    }
}

template location_core_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "LOCATION_INTEGRATION_TT_TITLE"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetIntegrationLevelIcon(Location.GetIntegrationLevel)]"
            }
        }
        blockoverride "concept_link" {
            text = [integration_status|e]
        }
        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                visible = "[Location.IsCurrentlyBeingIntegrated]"

                blockoverride "text" {
                    text = "LOCATION_INTEGRATION_TT_TEXT"
                }
            }
            TooltipStringPairList = {
                visible = "[Location.IsCurrentlyBeingIntegrated]"
                textcontext = "[Location.GetIntegrationFinishedInfo]"
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "LOCATION_INTEGRATION_TT_LIST"
                }
                textcontext = "[Location.GetCurrentIntegrationInfo]"
            }
        }
    }
}

# template location_occupation_tooltip {
#     ContextualTooltipType = {
#         blockoverride "title_text" {
#             text = "[Location.GetIntegrationHeader]"
#         }
#         blockoverride "title_icon" {
#             icon = {
#                 using = tooltip_title_icon_size
#                 texture = "[GetIntegrationLevelIcon(Location.GetIntegrationLevel)]"
#             }
#         }
#         blockoverride "concept_link" {
#             text = [integration_status|e]
#         }
#         blockoverride "tooltip_content" {
#             TooltipStringPairList = {
#                 textcontext = "[Location.GetIntegrationInfo]"
#             }

#             TooltipStringPairList = {
#                 textcontext = "[Location.GetCoresList]"
#             }
#         }
#     }
# }

template rgo_output_tooltip {
    ContextualTooltipType = {
        datacontext = "[Location]"
        datacontext = "[Location.GetRawMaterial]"
        datacontext = "[Location.GetOwner]"
        datacontext = "[Location.GetMarket]"

        blockoverride "title_icon" {
            button = {
                using = tooltip_title_icon_size
                texture = "[GetGoodsIcon(Location.GetRawMaterial)]"
                tooltipwidget = {
                    using = SpecificGoodsMarket_tooltip
                }
                action_tooltip = {
                    click_type = left
                    click_mode = single
                    title = "OPEN_GOOD_PANEL"
                    on_action = "[ShowGoods(Location.GetRawMaterial)]"
                }
            }
        }

        blockoverride "title_text" {
            text = "RGO_EXPAND_RGO_TOOLTIP_TITLE_TEXT"
        }

        blockoverride "concept_link" {
            text = [raw_material|E]
        }

        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "RAW_MATERIAL_LOCATION_TABLE_CURRENT_OUTPUT_TT_TEXT"
                }
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "RAW_MATERIAL_LOCATION_TABLE_CURRENT_OUTPUT_TT_TITLE"
                }
                textcontext = "[Location.GetRawMaterialsOutputBreakdown]"
            }
        }
    }
}

template location_rgo_max_level_breakdown_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            button = {
                using = tooltip_title_icon_size
                texture = "[GetGoodsIcon(Location.GetRawMaterial)]"
                onclick = "[ShowGoods(Location.GetRawMaterial)]"
                tooltipwidget = {
                    LeftClickButtonTooltip = {
                        blockoverride "onclick_text" { text = "OPEN_GOOD_PANEL" }
                    }
                }
            }
        }

        blockoverride "title_text" {
            text = "RAW_MATERIAL_LOCATION_TABLE_MAX_LEVEL_T"
        }

        blockoverride "concept_link" {
            text = [rgo|e]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "RAW_MATERIAL_LOCATION_TABLE_MAX_LEVEL_TT_TITLE"
                }
                textcontext = "[Location.GetMaximumMaxRGOWorkersInfoForUI][Localize('RAW_MATERIAL_LOCATION_TABLE_MAX_LEVEL_POP_DISPLAY')]"
            }
        }
    }
}

template location_rgo_build_time_breakdown_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            button = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/text_icons/time.dds"
            }
        }

        blockoverride "title_text" {
            text = "RAW_MATERIAL_BUILD_TIME_T"
        }

        blockoverride "concept_link" {
            text = [goods|e]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                block "rgo_upgrade_cost_time_breakdown_context" {
                    textcontext = "[LocationView.GetUpgradeRGOBuildTimeBreakdown]"
                }
            }
        }
    }
}

template location_rgo_tooltip_location_content {
    hbox = {
        layoutpolicy_horizontal = expanding
        spacing = 10
        widget = { ### EMPLOYMENT PIECHART
            visible = "[GreaterThan_CFixedPoint(Location.GetMaxRGOWorkers, '(CFixedPoint)0')]"
            size = { 100 100 }
            using = marker_bg_circle
            tooltip = "[rgo_pops|e]"
            tagtooltip_enabled = yes

            piechart = {
                parentanchor = center
                block "piechart_size" {
                    size = { 90% 90% }
                }
                using = piechart_angles

                datacontext = "[Location.GetRawMaterial]"
                datacontext = "[Location.GetOwner]"
                datacontext = "[Location.GetMarket]"

                icon = {
                    size = { 55% 55% }
                    parentanchor = vcenter|hcenter
                    texture = "gfx/interface/icons/pops/laborers.dds"
                }

                pieslice_no_highlight = {
                    filter_mouse = none
                    alwaystransparent = yes
                    texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
                    value = "[Divide_CFixedPoint(Location.GetEffectiveRGOWorkers, Location.GetMaxRGOWorkers)]"
                    color = { 1 1 1 1 }
                }

                pieslice_no_highlight = {
                    filter_mouse = none
                    alwaystransparent = yes
                    texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
                    value = "[Subtract_float('(float)1.0', FixedPointToFloatPercentageCapped(Divide_CFixedPoint(Location.GetEffectiveRGOWorkers, Location.GetMaxRGOWorkers), '(bool)yes'))]"
                    color = { 1 1 1 1 }
                }
            }
        }

        TooltipListBase = { ### SIDE TABLE
            TooltipListRowContent = {
                TooltipManualTableField = {
                    blockoverride "field_content" {
                        tooltip = "[rgo_pops|e]"
                        tagtooltip_enabled = yes
                        text_single = {
                            text = "RAW_MATERIAL_LOCATION_TABLE_TT"
                        }
                        expand = {}
                        text_single = {
                            raw_text = "[Location.GetRGOWorkers|Y]/[Multiply_CFixedPoint(Location.GetMaxRGOWorkers, '(CFixedPoint)1000')|0Y]"
                        }
                    }
                }

                TooltipManualTableField = {
                    blockoverride "field_content" {
                        text_single = {
                            text = "RAW_MATERIAL_LOCATION_TABLE_START_TT"
                        }
                        expand = {}
                        text_single = {
                            text = "RAW_MATERIAL_LOCATION_TABLE_START_RIGHT_TT"
                            tooltipwidget = {
                                using = location_rgo_max_level_breakdown_tooltip
                            }
                        }
                    }
                }

                TooltipManualTableField = {
                    blockoverride "field_content" {
                        text_single = {
                            text = "RAW_MATERIAL_LOCATION_TABLE_END_TT"
                        }
                        expand = {}
                        text_single = {
                            visible = "[GreaterThan_CFixedPoint(Location.GetMaxRGOWorkers, '(CFixedPoint)0')]"
                            raw_text = "[Divide_CFixedPoint(Location.GetRawMaterialsOutput, Location.GetMaxRGOWorkers)|2L] @supply! "

                            tooltipwidget = {
                                using = rgo_output_tooltip
                            }
                        }

                        text_single = {
                            visible = "[Not(GreaterThan_CFixedPoint(Location.GetMaxRGOWorkers, '(CFixedPoint)0'))]"
                            raw_text = "- @supply! "
                        }
                    }
                }

                TooltipManualTableField = {                    
                    blockoverride "field_content" {
                        text_single = {
                            text = "RAW_MATERIAL_LOCATION_TABLE_PROFIT_PER_LEVEL"
                        }
                        expand = {}
                        text_single = {
                            visible = "[GreaterThan_CFixedPoint(Location.GetRGOProfitPerLevel, '(CFixedPoint)0')]"
                            maximumsize = {55 -1}
                            align = nobaseline
                            fontsize = 14
                            raw_text = "[Location.GetRGOProfitPerLevel|+2] @tax_base!"
                        }
                    }
                }
            }
        }
    }

    datacontext = "[GetPopTypeByName('laborers')]"
    TooltipContentSection = {
        using = construct_building_in_location_employment_info
    }
}

template location_rgo_tooltip_content {
    # TooltipContentSection = {
    #     using = SpecificGoodsFromMarketContent
    #     blockoverride "data_from" {}

    #     TooltipTextBlock = {
    #         blockoverride "text" {
    #             text = "RAW_MATERIAL_LOCATION_TABLE_TITLE_TT"
    #         }
    #     }
    # }

    block "location_rgo_cost_and_time" {
        TooltipContentSection = { # Cost and time
            vbox = {
                layoutpolicy_horizontal = expanding
                spacing = 5
                vbox = {
                    layoutpolicy_horizontal = expanding
                    TooltipTableHeader = {
                        blockoverride "tableheader_text" {
                            text = "CONSTRUCTION_UNITTYPE"
                            default_format = "#W"
                        }
                    }

                    TooltipContentSection = {
                        layoutpolicy_horizontal = expanding
                        visible = "[Location.HasUpgradeRGOConstructionDemand]"
                        datacontext = "[Location.GetUpgradeRGOConstructionDemand]"
                        using = demands_details_no_location_rgo
                    }
                }

                TooltipStringPairList = {
                    # blockoverride "block_scrollarea" { maximumsize = { -1 420 } }
                    block "cost_and_time_context" {
                        textcontext = "[Location.GetUpgradeRGOBuildCostAndTime]"
                    }

                    blockoverride "field_text_format" {
                        tooltipwidget = {
                            using = location_rgo_build_time_breakdown_tooltip
                        }
                    }
                }
            }
        }
    }

    # TooltipTextBlock = {
    # 	block "upgrade_rgo_visibility"
    # 	{
    # 		visible = "[Not(StringIsEmpty(Location.GetUpgradeRGOTooltip))]"
    # 	}

    # 	blockoverride "text"
    # 	{
    # 		block "upgrade_rgo_context"
    # 		{
    # 			text = "[Location.GetUpgradeRGOTooltip]"
    # 		}
    # 	}
    # }
} 

template location_rgo_button_tooltip {
    ContextualTooltipType = {
        datacontext = "[Location]"
        datacontext = "[Location.GetRawMaterial]"
        datacontext = "[Location.GetOwner]"
        datacontext = "[Location.GetMarket]"
        blockoverride "title_text" {
            text = "RAW_MATERIAL_LOCATION_TOOLTIP_T"
        }
        blockoverride "title_icon" {
            button = {
                using = tooltip_title_icon_size
                texture = "[GetGoodsIcon(Location.GetRawMaterial)]"
                tooltipwidget = {
                    using = SpecificGoodsMarket_tooltip
                }
                action_tooltip = {
                    click_type = left
                    click_mode = single
                    title = "OPEN_GOOD_PANEL"
                    on_action = "[ShowGoods(Location.GetRawMaterial)]"
                }
            }
        }
        blockoverride "concept_link" {
            text = [resource_gathering_operations|e]
        }
        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('raw_material')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipDebugTextBlock = {
                textcontext = "[Location.GetUpgradeRGOTooltip]"
            }

            TooltipContentSection = {
                using = location_rgo_tooltip_location_content
            }

            TooltipContentSection = {
                using = location_rgo_tooltip_content
            }
        }
    }
}

template expand_rgo_ranking_tt {
    ContextualTooltipType = {
        datacontext = "[ConstructScoreRanking.GetGoods]"
        datacontext = "[Location.GetMarket]"

        blockoverride "title_icon_texture" {
            texture = "[GetGoodsIcon(Goods.Self)]"
            tooltipwidget = { using = Goods_tooltip }
        }

        blockoverride "title_text" {
            text = "EXPAND_RGO_IN_MARKET_TITLE"
        }

        blockoverride "tooltip_content" {
            TooltipConditionList = {
                visible = "[Not(ConstructScoreRanking.HasScoreItems)]"
                textcontext = "EXPAND_RGO_IN_BEST_LOCATION_ACTION_EMPTY"
            }

            TooltipListBase = {
                visible = "[ConstructScoreRanking.HasScoreItems]"

                blockoverride "block_title" {
                    text = "EXPAND_RGO_IN_BEST_LOCATION_TITLE"
                }

                TooltipListColumnContent = {
                    TooltipTableColumn = {
                        blockoverride "column_title" {}
                        blockoverride "column_title_text" { text = "[location|e]" }
                        blockoverride "field_text" { text = "[ConstructScoreItem.GetLocation.GetName]" }
                        blockoverride "field_right" { expand = {} }
                    }

                    TooltipTableColumn = {
                        blockoverride "column_title" {}
                        blockoverride "column_title_text" { text = "[control|e]" }
                        blockoverride "field_left" { expand = {} }
                        blockoverride "field_text" { text = "[ConstructScoreItem.GetLocation.GetControl|%1]" }
                    }

                    TooltipTableColumn = {
                        blockoverride "column_title" {}
                        blockoverride "column_title_text" { text = "[market_access|e]" }
                        blockoverride "field_left" { expand = {} }
                        blockoverride "field_text" { text = "[ConstructScoreItem.GetLocation.GetMarketAccess|%1]" }
                    }

                    TooltipTableColumn = {
                        visible = "[Not(ConstructScoreRanking.HasGoodsAndAreValid)]"
                        blockoverride "column_title" {}
                        blockoverride "column_title_text" { text = "[goods|e]" }
                        blockoverride "field_left" { expand = {} }
                        blockoverride "field_text" { raw_text = "[ConstructScoreItem.GetLocation.GetRawMaterial.GetName] [ConstructScoreItem.GetLocation.GetRawMaterial.GetIcon]" }
                    }

                    TooltipTableColumn = {
                        blockoverride "column_title" {}
                        blockoverride "column_title_text" { text = "EXPAND_RGO_IN_BEST_LOCATION_PROFIT_LABEL" }
                        blockoverride "field_left" { expand = {} }
                        blockoverride "field_text" { raw_text = "[ConstructScoreItem.GetNetProfitValue|+=<2]@gold!" }
                    }

                    TooltipTableColumn = {
                        visible = "[IsBuildDebug]"
                        background = { using = bg_tooltip_debug }
                        blockoverride "column_title" {}
                        blockoverride "column_title_text" { raw_text = "[employment|e]" }
                        blockoverride "field_left" { expand = {} }
                        blockoverride "field_text" { raw_text = "[ConstructScoreItem.GetEmployabilityStr]@laborers!" }
                    }

                    blockoverride "column_datamodel" { datamodel = "[ConstructScoreRanking.GetConstructScoreItems]" }
                }
            }

            block "extra_rgo_content" {
                TooltipContentSection = {
                    using = location_rgo_tooltip_content
                }
            }
        }
    }
}

# template location_market_attraction_tooltip {
#     ContextualTooltipType = {
#         blockoverride "title_text" {
#             text = "LOCATION_MARKET_ATTRACTION_HEADER"
#         }
#         blockoverride "title_icon" {
#             icon = {
#                 using = tooltip_title_icon_size
#                 texture = "gfx/interface/buttons/flats/market.dds"
#             }
#         }
#         blockoverride "concept_link" {
#             text = [market_attraction|e]
#         }
#         blockoverride "tooltip_content" {
#             TooltipScrolledStringPairList = {
#                 blockoverride "block_scrollarea" { maximumsize = { -1 220 }}
#                 textcontext = "[Location.GetMarketAttractionInfo]"
#             }
#         }
#     }
# }

template location_market_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "LOCATION_MARKET_TITLE_TT"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/market.dds"
            }
        }
        blockoverride "concept_link" {
            text = [market|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('market')]"
            }
            hint_button = {
                action_tooltip = {
                    title = "OPEN_HINT"
                    on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_market')]"
                }
            }
        }

        blockoverride "tooltip_content" {
            TooltipDebugStringPairList = {
                textcontext = "[Location.GetMarket.GetDebugText]"
            }

            TooltipListBase = {
                hbox = {
                    layoutpolicy_horizontal = expanding
                    margin = { 10 5 }
                    spacing = 15
    
                    widget = {
                        size = { 42 42 }
                        tooltip = "[market_access|e]"
                        tagtooltip_enabled = yes
                        piechart = {
                            using = bg_circle
                            size = { 42 42 }
                            minimumsize = { 22 22 }
        
                            using = piechart_angles
        
                            pieslice_no_highlight = {
                                texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
                                value = "[FixedPointToFloat(Location.GetMarketAccess)]"
                                color = { 1 1 1 1 }
                            }
        
                            pieslice_no_highlight = {
                                texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
                                value = "[Subtract_float('(float)1.0', FixedPointToFloat(Location.GetMarketAccess))]"
                                color = { 1 1 1 1 }
                            }
        
                            icon = {
                                size = { 26 26 }
                                parentanchor = center
                                texture = "[GetConceptTexture('market_access')]"
                                alpha = 1
                            }
                            using = bg_circle_piechart
                    }
                    }
    
                    vbox = {
                        layoutpolicy_horizontal = expanding
                        spacing = 3
                        text_single = {
                            layoutpolicy_horizontal = expanding
                            size = {-1 20}
                            autoresize = no
                            align = left|nobaseline
                            using = Font_Size_Big
                            text = "[Location.GetMarket.GetName]"
                        }
    
                        text_single = {
                            layoutpolicy_horizontal = expanding
                            size = {-1 20}
                            autoresize = no
                            align = left|nobaseline
                            fontsize = 15
                            raw_text = "[Location.GetMarketAccess|%2]"
                            tooltip = "[market_access|e]"
                            tagtooltip_enabled = yes
                        }
                    }
    
                    expand = {}
                }
            }

            TooltipStringPairList = {
                visible = "[Location.IsLand]"
                blockoverride "block_title" {
                    text = "LOCATION_MARKET_TABLE_TT"
                }
                textcontext = "[Location.GetMarketAccessBreakdown]"
            }

            TooltipStringPairList = {
                visible = "[Not(Location.IsLand)]"
                blockoverride "block_title" {
                    text = "SEAZONE_MARKET_TABLE_TT"
                }
                textcontext = "[Location.GetMarketAccessBreakdown]"
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "LOCATION_MARKET_TABLE_HEADER_TT"
                }
                blockoverride "stringpair_datamodel" {
                    datamodel = "[DataModelFirst(StringPairList.GetRows, '(int32)5')]"
                }
                # blockoverride "block_scrollarea" { maximumsize = { -1 180 }}
                tooltipmeta = {
                    game_concept = [market_attraction|e]
                    texture = "gfx/interface/icons/flat_icons/market_attraction.dds"
                }
                textcontext = "[Location.GetMarketAttractionInfo]"
            }

            TooltipStatsBar = {
                visible = "[Location.IsLand]"
                blockoverride "items" {
                    TooltipStatBarIconTextItem = {
                        blockoverride "item_icon" {
                            texture = "gfx/interface/icons/flat_icons/trade_market/current_imports.dds"
                            alpha = "[TransparentIfFalse(Location.HasImports)]"
                        }
                        blockoverride "item_text" {
                            visible = "[Not(EqualTo_CFixedPoint(Location.GetImportsAmount, '(CFixedPoint)0'))]"
                            using = Font_Size_Medium
                            raw_text = "[Location.GetImportsAmount|2V]@good!"
                        }

                        tooltipwidget = {
                            ContextualTooltipType = {
                                blockoverride "title_text" {
                                    text = "LOCATION_MARKET_IMPORTS"
                                }
                                blockoverride "title_icon" {
                                    icon = {
                                        using = tooltip_title_icon_size
                                        texture = "gfx/interface/icons/flat_icons/trade_market/current_imports.dds"
                                    }
                                }
                                blockoverride "concept_link" {
                                    text = [imports|e]
                                }
                                blockoverride "tooltip_content" {
                                    TooltipScrolledStringPairList = {
                                        blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
                                        textcontext = "[Location.GetImportsInfo]"
                                    }
                                }
                            }
                        }
                    }

                    TooltipStatBarIconTextItem = {
                        blockoverride "item_icon" {
                            texture = "gfx/interface/icons/flat_icons/trade_market/current_exports.dds"
                            alpha = "[TransparentIfFalse(Location.HasExports)]"
                        }
                        blockoverride "item_text" {
                            visible = "[Not(EqualTo_CFixedPoint(Location.GetExportsAmount, '(CFixedPoint)0'))]"
                            using = Font_Size_Medium
                            raw_text = "[Location.GetExportsAmount|2V]@good!"
                        }
                        tooltipwidget = {
                            ContextualTooltipType = {
                                blockoverride "title_text" {
                                    text = "LOCATION_MARKET_EXPORTS"
                                }
                                blockoverride "title_icon" {
                                    icon = {
                                        using = tooltip_title_icon_size
                                        texture = "gfx/interface/icons/flat_icons/trade_market/current_exports.dds"
                                    }
                                }
                                blockoverride "concept_link" {
                                    text = [exports|e]
                                }
                                blockoverride "tooltip_content" {
                                    TooltipScrolledStringPairList = {
                                        blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
                                        textcontext = "[Location.GetExportsInfo]"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

template location_art_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "LOCATION_ART_TITLE"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/art_works.dds"
            }
        }
        blockoverride "concept_link" {
            text = [work_of_art|e]
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('works_of_art')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipScrolledStringPairList = {
                blockoverride "block_scrollarea" { maximumsize = { -1 220 }}
                textcontext = "[Location.GetPresentArt]"
            }
            TooltipStringPairList = {
                visible = "[GreaterThan_int32(Location.GetNumWorksOfArt, '(int32)0')]"
                textcontext = "[Location.GetArtEffect]"
            }
        }
    }
}

template CurrentLocationRank_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[Location.GetRankIcon]"
            }
        }

        blockoverride "title_text" {
            text = "[LocationRank.GetNameWithNoTooltip]"
        }

        blockoverride "concept_link" {
            text = [location_rank|E]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[LocationRank.GetRankTooltip]"
            }

            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[LocationRank.GetDescription]"
                }
            }
        }
    }
}

template LocationRank_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetLocationRankIcon(LocationRank.Self)]"
            }
        }

        blockoverride "title_text" {
            text = "LOCATION_RANK_TITLE"
        }

        blockoverride "concept_link" {
            text = [location_rank|E]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[LocationRank.GetRankTooltip]"
            }

            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[LocationRank.GetDescription]"
                }
            }
        }
    }
}

template LocationRankTag_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetLocationRankIcon(LocationRank.Self)]"
            }
        }

        blockoverride "title_text" {
            text = "LOCATION_RANK_TAG_TITLE"
        }

        blockoverride "concept_link" {
            text = [location_rank|E]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[LocationRank.GetRankTooltip]"
            }

            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[LocationRank.GetDescription]"
                }
            }
        }
    }
}

template adjacency_distance_tooltip {
    ContextualTooltipType = {
        tooltipmeta = {
            texture = "gfx/interface/icons/location_icons/distance_capital.dds"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/distance_capital.dds"
            }
        }
        blockoverride "title_text" {
            text = "[AdjacencyDistanceWrap.GetName]"
        }

        blockoverride "concept_link" {
            text = [proximity|E]
        }
        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[AdjacencyDistanceWrap.GetTooltip]"
            }
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "PROXIMITY_ADJACENT_DISTANCE_TEXT"
                }
            }
        }
    }
}

template location_migration_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "[LocationMigrationWrap.GetName]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/new/migration.dds"
            }
        }

        blockoverride "concept_link" {
            text = [migration|E]
        }
        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "[LocationMigrationWrap.GetTooltip]"
                }
            }
        }
    }
}

template sea_current_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "[SeaCurrentWrap.GetName]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/map_modes/rivers.dds"
            }
        }

        blockoverride "concept_link" {
            text = [seazone|E]
        }

        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "[SeaCurrentWrap.GetTooltip]"
                }
            }
        }
    }
}

template river_driection_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "[RiverDirectionWrap.GetName]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/map_modes/rivers.dds"
            }
        }

        blockoverride "concept_link" {
            text = [river|E]
        }

        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "[RiverDirectionWrap.GetTooltip]"
                }
            }
        }
    }
}

template RoadType_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "[RoadType.GetNameWithNoTooltip]"
        }

        blockoverride "title_icon_texture" {
            texture = "[GetRoadTypeIcon(RoadType.Self)]"
        }

        blockoverride "concept_link" {
            text = [road|E]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
				  blockoverride "block_title" {
                    text = "BETWEEN_ROAD_LOC"
                }
                textcontext = "[RoadType.GetTooltip]"
            }
			
			TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "HAS_ROAD_IN_BOTH_LOC"
                }
				
                textcontext = "[ShowModifierEffect('has_road')]"
            }


			
			
			
            TooltipStringPairList = {
                textcontext = "[RoadType.GetMaintenanceString]"
            }
            TooltipFlavorTextBlock = {
                blockoverride "text" {
                    text = "[RoadType.GetDesc]"
                }
            }
        }
    }
}

template Exploration_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "[Exploration.GetNameWithNoTooltip]"
        }

        blockoverride "concept_link" {
            text = [exploration|E]
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/geopolitics/current_explorers.dds"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[Exploration.GetUITooltip]"
            }
        }
    }
}

template Migration_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/new/population.dds"

                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.3
                }
            }
        }
        blockoverride "title_text" {
            text = "[Migration.GetNameWithNoTooltip]"
        }

        blockoverride "concept_link" {
            text = [migration|E]
        }
        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "[Migration.GetUITooltip]"
                }
            }
        }
    }
}

# template seazone_s_tooltip {
#     ContextualTooltipType = {
#         blockoverride "title_text" {
#             text = "[Location.GetNameWithNoTooltip]"
#         }

#         blockoverride "concept_link" {
#             text = [seazone|E]
#         }

#         blockoverride "tooltip_content" {

#             TooltipDebugStringPairList = {
#                 textcontext = "[Location.GetDebugText]"
#             }

#             TooltipStringPairList = {
#                 visible = "[Location.HasWinter]"
#                 textcontext = "[Location.GetWinterInfo]"
#             }

#             TooltipTextBlock = {
#                 visible = "[And(Location.ShowSpecificsForSeazoneMapModeTooltip, Location.HasMapmodeSpecificTooltip)]"
#                 blockoverride "text" {
#                     text = "[Location.GetMapmodeSpecificTooltip]"
#                 }
#             }

#             TooltipStringPairList = {
#                 textcontext = "[Location.GetUITooltip]"
#             }

#             TooltipIllustration = {

#                 blockoverride "illustration_scene" {
#                     scene = "[Location.GenerateSceneDesc]"
#                 }
#             }
#         }
#     }
# }

template seazone_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            raw_text = "[Location.GetNameWithNoTooltip]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetTopographyIcon(Location.GetTopography)]"
                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.3
                }
                background =  {
                    texture = "[GetClimateFrame(Location.GetClimate)]"
                }
            }
        }

       blockoverride "concept_link" {
            text = "[Select_CString(Location.GetTopography.IsLake, lake, seazone)|e]"
        }

        blockoverride "tooltip_content" {

            TooltipDebugStringPairList = {
                textcontext = "[Location.GetDebugText]"
            }

            TooltipIconTextItem =  {
                visible = "[Location.IsFrozen]"
                blockoverride "item_icon" {
                    size = { 32 32 }
                    texture = "gfx/interface/icons/location_icons/blockade_byice.dds"
                    glow = {
                        name = "drop_shadow"
                        glow_radius = 3
                        color = {0.0 0.0 0.0 1.0}
                        alpha = 0.3
                    }
                }

                blockoverride "item_text" {
                    text = "[frozen|e]"
                }
            }

            TooltipStringPairList = {
                visible = "[Location.HasWinter]"
                textcontext = "[Location.GetWinterInfo]"
            }

            TooltipScrolledTextBlock = {
                visible = "[Not(StringIsEmpty(Location.GetMapmodeSpecificTooltip))]"
                blockoverride "block_scrollarea" { maximumsize = { -1 300 } }
                textcontext = "[Location.GetMapmodeSpecificTooltip]"
            }

            TooltipStringPairList = {
                textcontext = "[Location.GetUITooltip]"
            }

            TooltipIllustration = {
                blockoverride "illustration_scene" {
                    scene = "[Location.GenerateSceneDesc]"
                }
            }
        }
    }
}

template Wasteland_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            raw_text = "[Location.GetNameWithNoTooltip]"
        }

        blockoverride "concept_link" {
            text = [impassable|E]
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/map_subdivisons/impassable_terrain.dds"
            }
        }

        blockoverride "tooltip_content" {

            TooltipDebugStringPairList = {
                textcontext = "[Location.GetDebugText]"
            }

            TooltipStringPairList = {
                visible = "[Location.HasWinter]"
                textcontext = "[Location.GetWinterInfo]"
            }

            TooltipTextBlock = {
                visible = "[And(Location.ShowSpecificsForSeazoneMapModeTooltip, Location.HasMapmodeSpecificTooltip)]"
                blockoverride "text" {
                    text = "[Location.GetMapmodeSpecificTooltip]"
                }
            }

            TooltipStringPairList = {
                textcontext = "[Location.GetUITooltip]"
            }

            TooltipIllustration = {

                blockoverride "illustration_scene" {
                    scene = "[Location.GenerateSceneDesc]"
                }
            }
        }

        blockoverride "tooltip_ui_action_block" {}
    }
}

template PopulationCapacity_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/supply_limit.dds"
            }
        }

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "POPULATIONCAPACIT_IN_LOC"
        }

        blockoverride "concept_link" {
            text = [population_capacity|e]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                datacontext = "[Location]"
                blockoverride "block_title" {
                    text = "POP_CAP_DUE_TO"
                }
                textcontext = "[Location.GetPopulationCapacityInfo]"
            }
        }
    }
}

template ForeignBuildingsFlags_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            datacontext = "[LocationView.GetLocation]"
            text = "BUILDING_BASED_COUNTRIES_TOOLTIP"
        }

        blockoverride "concept_link" {
            text = "[building_based|e]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/country_types/building.dds"

                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.4
                }
            }
        }

        blockoverride "tooltip_content" {
            TooltipListScrollArea = {
                blockoverride "block_scrollarea" {
                    maximumsize = { -1 500 }
                }

                blockoverride "scrollarea_content" {
                    fixedgridbox = {
                        resizeparent = yes
                        addcolumn = 500
                        addrow = 70

                        datamodel = "[LocationView.GetBuildingBasedOwners]"
                        item = {
                            widget = {
                                size = { 100% 65 }
                                hbox = {
                                    using = bg_market_card
                                    using = bg_cabinet_card_frame

                                    country_card = {}
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

template CultureCountriesFlags_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            datacontext = "[LocationView.GetLocation]"
            text = "CULTURE_BASED_COUNTRIES_TOOLTIP"
        }

		blockoverride "concept_link" {
            text = "[society_of_pops|e]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/country_types/pop.dds"

                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.4
                }
            }
        }

        blockoverride "tooltip_content" {
            TooltipListScrollArea = {
                blockoverride "block_scrollarea" {
                    maximumsize = { -1 500 }
                }

                blockoverride "scrollarea_content" {
                    fixedgridbox = {
                        resizeparent = yes
                        addcolumn = 500
                        addrow = 70

                        datamodel = "[LocationView.GetPopBasedOwners]"
                        block "datamodel_list" {}
                        item = {
                            widget = {
                                size = { 100% 65 }

                                hbox = {
                                    using = bg_market_card
                                    using = bg_cabinet_card_frame

                                    country_card = {}
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

template LocationModifier_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[LocationModifierWrap.GetIcon]"

                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.3
                }
            }
        }

        blockoverride "title_text" {
            text = "[LocationModifierWrap.GetName]"
        }

        blockoverride "concept_link" {
            text = "[location_modifier|e]"
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "LIST_TITLE_SOURCES"
                }
                textcontext = "[LocationModifierWrap.GetTooltip]"
            }
        }
    }
}

template LocationCountryDoubleModifier_tooltip {
    ContextualTooltipType = {

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[LocationCountryDoubleModifierWrap.GetIcon]"
            }
        }

        blockoverride "title_text" {
            text = "[LocationCountryDoubleModifierWrap.GetName]"
        }

        blockoverride "concept_link" {
            text = "[location_modifier|e]"
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[LocationCountryDoubleModifierWrap.GetTooltip]"
            }
        }
    }
}

template LocationDoubleModifier_tooltip {
    ContextualTooltipType = {

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[LocationDoubleModifierWrap.GetIcon]"
            }
        }

        blockoverride "title_text" {
            text = "[LocationDoubleModifierWrap.GetName]"
        }

        blockoverride "concept_link" {
            text = "[location_modifier|e]"
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[LocationDoubleModifierWrap.GetTooltip]"
            }
        }
    }
}

template LocationPercentCountryModifier_tooltip {
    ContextualTooltipType = {

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[LocationPercentCountryModifierWrap.GetIcon]"
            }
        }

        blockoverride "title_text" {
            text = "[LocationPercentCountryModifierWrap.GetName]"
        }

        blockoverride "concept_link" {
            text = "[location_modifier|e]"
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[LocationPercentCountryModifierWrap.GetTooltip]"
            }
        }
    }
}

template NaturalHarborSuitability_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {

            text = "HARBOR_SUITABILITY_TITLE"
        }

        blockoverride "concept_link" {
            text = "[natural_harbor_suitability|e]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetConceptTexture('natural_harbor_suitability')]"
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('natural_harbor_suitability')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "NATURAL_HARBOR_ALSO"
                }

                textcontext = "[Location.GetNaturalHarborImpactInfo]"
            }
        }
    }
}

template HarborCapacity_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {

            text = "HARBOR_CAPACITY_TITLE"
        }

        blockoverride "concept_link" {
            text = "[harbor_capacity|e]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetConceptTexture('harbor_capacity')]"
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('natural_harbor_suitability')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "HARBOR_SUITABILITY_DESC"
                }

                textcontext = "[Location.GetDescriptionFor('harbor_suitability')]"
            }

            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "HARBOR_SUITABILITY_IMPACT"
                }
                textcontext = "[Location.GetHarborCapacityImpactInfo]"
            }
        }
    }
}

template WeatherSystem_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "[WeatherSystem.GetNameWithNoTooltip]"
        }

        blockoverride "concept_link" {
            text = [weather_system|E]
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/weather.dds"

                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.3
                }
            }
        }

        blockoverride "tooltip_content" {
            TooltipBlockList = {
                textcontext = "[WeatherSystem.GetTooltip]"
            }
        }
    }
}

template location_disease_tooltip {
    ContextualTooltipType = {
        datacontext = "[Location]"

        blockoverride "title_text" {
            datacontext = "[Location]"
            text = "LOCATION_DISEASE_HEADER"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/map_modes/disease.dds"
            }
        }

        blockoverride "concept_link" {
            text = [disease|e]
        }
        
        blockoverride "tooltip_content" {
            vbox = {
                datamodel = "[GetDiseases]"
                item = {
                    hbox = {
                        visible = "[Location.HasAnyPresence(Disease.Self)]"
                        icon = {
                            using = tooltip_title_icon_size
                            texture = "[GetDiseaseIcon(Disease.Self)]"
                            tooltipwidget = {
                                using = Disease_tooltip
                            }
                        }
                        TooltipStringPairList = {
                            textcontext = "[Location.GetDiseaseInfo(Disease.Self)]"
                        }
                    }
                }
            }

            TooltipRowList = {
                visible = "[Location.HasAnyDiseaseResistance]"
                textcontext = "RESISTANCES_LABEL"
            }

            overlappingitembox = {
                size = { 400 80 }
                spacing = 5
                ignoreinvisible = yes

                datamodel = "[GetDiseases]"
                item = {
                    widget = {
                        visible = "[Location.HasDiseaseResistance(Disease.Self)]"
                        size = { 60 80 }
                        tooltipwidget = {
                            using = Disease_tooltip
                        }
                        icon = {
                            size = { 48 48 }
                            texture = "[GetDiseaseIcon(Disease.Self)]"
                        }
                        text_single = {
                            position = { 0 50 }
                            maximumsize = { 60 30 }
                            parentanchor = hcenter
                            align = center|nobaseline
                            text = "[Location.GetDiseaseResistance(Disease.Self)|0%]"
                        }
                    }
                }
            }
        }
    }
}

template locationview_employed_tt {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "EMPLOYMENT_LABEL_T"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetGraphicalCultureTextureForCountryPopType(PopType.Self, Location.GetOwner.Self)]"
                size = {30 30 }
                tooltipwidget = { using = PopType_tooltip }
            }
        }

        blockoverride "concept_link" {
            text = "[available_population|e]"
        }

        blockoverride "tooltip_content" {

            TooltipTextBlock = {
                visible = "[LessThan_CFixedPoint(Location.GetEffectiveUnEmployedValue(PopType.Self), '(CFixedPoint)0')]"
                blockoverride "text" {
                    text = "EMPLOYMENT_TT_RED_ALERT"
                }

                blockoverride "textblock_background_tint"  {
                    modify_texture = {
                        using = color_red_texture
                    }
                }
            }
            TooltipTextBlock = {
                visible = "[And(LessThan_CFixedPoint(Location.GetEffectiveUnEmployedValue(PopType.Self), '(CFixedPoint)0'),
                    LessThan_CFixedPoint(Location.GetPopSatisfaction(PopType.Self), '(CFixedPoint)0.5'))]"
                blockoverride "text" {
                    text = "EMPLOYMENT_SATISFACTION_TT_RED_ALERT"
                }

                blockoverride "textblock_background_tint"  {
                    modify_texture = {
                        using = color_red_texture
                    }
                }
            }

            TooltipTextBlock = {
                blockoverride "text" {
                    text = "EMPLOYMENT_TT_TEXT"
                }
            }

            hbox = {
                layoutpolicy_horizontal = expanding
                spacing = 7

                widget = { #PIECHART
                    visible = "[GreaterThan_CFixedPoint(Location.GetExpectedUnEmployedValue(PopType.Self), '(CFixedPoint)0')]"
                    size = { 100 100 }
                    using = marker_bg_circle

                    piechart = {
                        tooltipwidget = {
                            using = employment_breakdown_tooltip
                        }
                        parentanchor = center
                        block "piechart_size" {
                            size = { 90% 90% }
                        }
                        using = piechart_angles
                        pieslice_no_highlight = {
                            texture = "gfx/interface/pie_charts/pie_chart_alpha_80_green.dds"
                            value = "[FixedPointToFloat(Location.GetUnEmployedPercentageWithConstruction(PopType.Self))]"
                            color = { 1 1 1 1 }
                            alwaystransparent = yes
                        }
                        pieslice_no_highlight = {
                            texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
                            value = "[Subtract_float('(float)1.0', FixedPointToFloat(Location.GetUnEmployedPercentageWithConstruction(PopType.Self)))]"
                            
                            color = { 0.01 0.6 0.9 1 }
                            alwaystransparent = yes
                        }
                    }

                    icon = {
                        size = { 55% 55% }
                        parentanchor = center
                        position = {-1 0}
                        texture = "[GetGraphicalCultureTextureForCountryPopType(PopType.Self, Location.GetOwner.Self)]"
                        glow = {
                            name = "drop_shadow"
                            glow_radius = 3
                            color = {0.0 0.0 0.0 1.0}
                            alpha = 0.3
                        }
                    }
                }

                widget = { #PIECHART
                    visible = "[Not(GreaterThan_CFixedPoint(Location.GetExpectedUnEmployedValue(PopType.Self), '(CFixedPoint)0'))]"
                    size = { 100 100 }
                    using = marker_bg_circle
					

                    piechart = {
                        tooltipwidget = {
                            using = employment_breakdown_tooltip
                        }
                        parentanchor = center
                        block "piechart_size" {
                            size = { 90% 90% }
                        }
                        using = piechart_angles

                        pieslice_no_highlight = {
                            texture = "gfx/interface/pie_charts/pie_chart_alpha_80_red.dds"
                            value = "[FixedPointToFloat(Location.GetUnEmployedPercentageWithConstruction(PopType.Self))]"
                            color = { 1 1 1 1 }
                            alwaystransparent = yes
                        }
                        pieslice_no_highlight = {
                            texture = "gfx/interface/pie_charts/pie_chart_alpha_80.dds"
                            value = "[Subtract_float('(float)1.0', FixedPointToFloat(Location.GetUnEmployedPercentageWithConstruction(PopType.Self)))]"
                            
                            color = { 0.01 0.6 0.9 1 }
                            alwaystransparent = yes
                        }
                    }

                    icon = {
                        size = { 55% 55% }
                        parentanchor = center
                        position = {-1 0}
                        texture = "[GetGraphicalCultureTextureForCountryPopType(PopType.Self, Location.GetOwner.Self)]"
                        glow = {
                            name = "drop_shadow"
                            glow_radius = 3
                            color = {0.0 0.0 0.0 1.0}
                            alpha = 0.3
                        }
                    }
                }

                vbox = {
                    spacing = 5
                    layoutpolicy_horizontal = expanding

                    TooltipListBase = { # AVAILABLE 
                        TooltipManualTableField = {
                            using = bg_text_mask_container_turquoise
                            
                            blockoverride "field_content" {
                                margin_left = 3
                                spacing = -5
                                icon = {
                                    visible = "[LessThan_CFixedPoint(Location.GetExpectedUnEmployedValue(PopType.Self), '(CFixedPoint)0')]"
                                    layoutpolicy_vertical = expanding
                                    size = { 18 -1 }
                                    texture = "gfx/interface/component_tiles/bookmark_white.dds"
                                    modify_texture = { 
                                        using = color_red_texture 
                                        blend_mode = multiply
                                    }
                                }
                                icon = {
                                    visible = "[Not(LessThan_CFixedPoint(Location.GetExpectedUnEmployedValue(PopType.Self), '(CFixedPoint)0'))]"
                                    layoutpolicy_vertical = expanding
                                    size = { 18 -1 }
                                    texture = "gfx/interface/component_tiles/bookmark_white.dds"
                                    modify_texture = { 
                                        using = color_light_green_texture 
                                        blend_mode = multiply
                                    }
                                }
                                text_multi = {
                                    autoresize = yes
                                    text = "EMPLOYMENT_TT_TABLE_AVAILABLE"
                                }
                                expand = {}
                                text_multi = {
                                    align = right
                                    autoresize = yes
                                    raw_text = "[Location.GetExpectedUnEmployed(PopType.Self)|G]"
                                }
                            }
                        }

                        TooltipManualTableField = {
                            visible = "[GreaterThan_CFixedPoint(Location.GetCivilConstructionsNeededPopsValue(PopType.Self), '(CFixedPoint)0')]"
                            blockoverride "field_content" {
                                text_multi = {
                                    autoresize = yes
                                    text = "EMPLOYMENT_TT_TABLE_CURRENT_AVAILABLE"
                                }
                                expand = {}
                                text_multi = {
                                    align = right
                                    autoresize = yes
                                    raw_text = "[Location.GetEffectiveUnEmployed(PopType.Self)|G]"
                                }
                            }
                        }

                        TooltipManualTableField = {
                            visible = "[GreaterThan_CFixedPoint(Location.GetCivilConstructionsNeededPopsValue(PopType.Self), '(CFixedPoint)0')]"
                            blockoverride "field_content" {
                                text_multi = {
                                    autoresize = yes
                                    text = "EMPLOYMENT_TT_TABLE_QUEUE"
                                }
                                expand = {}
                                text_multi = {
                                    align = right
                                    autoresize = yes
                                    raw_text = "@construction! #h -[Location.GetCivilConstructionsNeededPops(PopType.Self)] #!"
                                    default_format = "#bold"
                                    hbox = {
                                        datamodel = "[DataModelFirst(Location.GetCivilConstructions,'(int32)1')]"
                                        item = {
                                            hbox = {
                                                using = layoutpolicy_expanding
                                                tooltipwidget = {
                                                    using = Construction_tooltip
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
    
                    TooltipListBase = { # CURRENT EMPLOYMENT
                        TooltipListRowContent = {
                            TooltipManualTableField = {
                                using = bg_text_mask_container_turquoise
                                blockoverride "field_content" {
                                    margin_left = 3
                                    spacing = -5
                                    icon = {
                                        layoutpolicy_vertical = expanding
                                        size = { 18 -1 }
                                        texture = "gfx/interface/component_tiles/bookmark_white.dds"
                                        modify_texture = { 
                                            using = color_progress_blue_texture 
                                            blend_mode = multiply
                                        }
                                    }
                                    text_multi = {
										layoutpolicy_horizontal = expanding
                                        text = "EMPLOYMENT_TT_TABLE_EMPLOYMENT"
                                    }
                                    expand = {}
                                    text_multi = {
						                align = right
										layoutpolicy_horizontal = expanding
                                        raw_text = "[Multiply_CFixedPoint('(CFixedPoint)1000.0', Multiply_CFixedPoint(Location.GetTotalPopTypeSizeValue(PopType.Self), Subtract_CFixedPoint('(CFixedPoint)1.0', Location.GetUnEmployedPercentage(PopType.Self))))|0L]"
                                        tooltipwidget = {
                                            using = employment_breakdown_tooltip
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }

            TooltipListBase = { 
                TooltipListRowContent = {
                    TooltipManualTableField = {
                        tooltipwidget = {
                            using = location_promotion_tooltip
                        }
                        blockoverride "field_content" {
                            text_multi = {
								autoresize = yes
                                text = "BUILD_LOCATION_POP_PROMOTE"
                            }
                            expand = {}									
                            text_multi = {
								autoresize = yes
                                raw_text = "[Location.GetPromote]"
                                default_format = "#bold"
                            }
                        }
                    }
                    TooltipManualTableField = {
                        blockoverride "field_content" {
                            text_multi = {
								autoresize = yes
                                text = "EMPLOYMENT_TT_AVAILABLE_PEASANTS"
                            }
                            expand = {}									
                            text_multi = {
								autoresize = yes
                                raw_text = "[GetUnEmployedPeasantsFromLocation(Location.Self)|L] @peasants!"
                            }
                            tooltipwidget = {
                                using = available_peasants_tooltip
                            }
                        }
                    }
                }
            }
        }
    }
}

template employment_breakdown_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetGraphicalCultureTextureForCountryPopType(PopType.Self, Location.GetOwner.Self)]"
            }
        }
    
        blockoverride "title_text" {
            text = "EMPLOYMENT_LABEL_LIST_TITLE"
        }
                            
        blockoverride "concept_link" {
            text = [employment|E]
        }

        blockoverride "tooltip_content" {
            TooltipScrolledStringPairList = {
                blockoverride "block_scrollarea" { maximumsize = { -1 420 }}
                textcontext = "[Location.GetEmploymentInfo(PopType.Self)]"
            }
        }
    }
}

template location_danger_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            country_flag_small = {
                visible = "[Location.GetOwner.IsValid]"
                datacontext = "[Location.GetOwner]"
            }
        }

        blockoverride "title_text" {
            text = "MAP_TT_DANGER_TITLE"
        }

        blockoverride "concept_link" {
            text = [location|e]
        }

        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                visible = "[Not(Or(Location.HasVolcano,Location.HasEarthquakes))]"

                blockoverride "text" {
                    text = "LOCATION_NO_DANGER"
                }
            }

            TooltipTableField = {
                margin = { 10 0 }
                spacing = 10

                visible = "[Location.HasVolcano]"

                icon = {
                    size = { 50 50 }
                    texture = "gfx/interface/topography/volcano.dds"
                }

                text_single = {
                    using = layoutpolicy_expanding
                    using = Font_Size_Small
                    align = nobaseline
                    text = "VOLCANO_LOCATION_TOOLTIP"
                }

                expand = {}
            }

            TooltipTableField = {
                margin = { 10 0 }
                spacing = 10

                visible = "[Location.HasEarthquakes]"

                icon = {
                    size = { 50 50 }
                    texture = "gfx/interface/topography/earthquake.dds"
                }

                text_single = {
                    using = layoutpolicy_expanding
                    align = nobaseline
                    using = Font_Size_Small
                    text = "EARTHQUAKE_LOCATION_TOOLTIP"
                }

                expand = {}
            }
			
			TooltipContentSection = {
				using = tooltip_location_alt_content
			}
        }
    }
}

template LocationMaritime_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {

            text = "MARITIME_LOC_TT_TITLE"
        }

        blockoverride "concept_link" {
            text = "[maritime_presence|e]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/flat_icons/geopolitics/maritime_presence.dds"
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('maritime')]"
            }
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[Location.GetMaritimePresencesInfo]"
            }
			
			TooltipContentSection = {
				using = tooltip_location_alt_content
			}
        }
    }
}

template LocationLiteracy_tooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "LITERACY_LOC_TT_TITLE"
        }

        blockoverride "concept_link" {
            text = "[literacy|e]"
        }

        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/literacy.dds"
            }
        }

        blockoverride "title_button" {
            mapmode_tooltip_button = {
                datacontext = "[GetMapMode('literacy')]"
            }
        }

        blockoverride "tooltip_content" {

            TooltipStringPairList = {
                textcontext = "[Location.GetLiteracyInfo]"
            }
        }
    }
}

# template location_great_power_tooltip {
#     ContextualTooltipType = {
#         datacontext = "[Location.GetOwner]"
#         blockoverride "title_icon" {
#             country_flag_small = {
#                 datacontext = "[Country]"
#             }
#         }

#         blockoverride "title_text" {
#             text = "[Country.GetLongNameWithNoTooltip]"
#         }

#         blockoverride "concept_link" {
#             text = [great_power|E]
#         }

#         blockoverride "tooltip_content" {
#             hbox = {
#                 visible = "[Country.IsGreatPower]"
#                 icon = {
#                     using = tooltip_title_icon_size
#                     texture = "gfx/interface/icons/flat_icons/great_power_score.dds"
#                 }
#                 TooltipTextBlock = {
#                     blockoverride "text" {
#                         text = "GREAT_POWER_MAPMODE_TT"
#                     }
#                 }
#             }

#             TooltipTextBlock = {
#                 visible = "[Not(Country.IsGreatPower)]"
#                 blockoverride "text" {
#                     text = "NOT_GREAT_POWER_MAPMODE_TT"
#                 }
#             }

#             TooltipStringPairList = {
#                 textcontext = "[Country.GetGreatPowerScoreInfo]"
#             }
#         }
#     }
# }

template location_winter_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetWinterIcon(Location.Self)]"
            }
        }

        blockoverride "title_text" {
            text = "[Location.GetWinterName]"
        }

        blockoverride "concept_link" {
            text = [winter|E]
        }

        blockoverride "tooltip_content" {

            TooltipStringPairList = {
                textcontext = "[Location.GetWinterDetails]"
            }

			TooltipContentSection = {
				using = tooltip_location_alt_content
			}
        }
    }
}

template location_road_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/roads/roads.dds"
            }
        }

        blockoverride "title_text" {
            text = "LOCATION_ROAD_TITLE"
        }

        blockoverride "concept_link" {
            text = [road|E]
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                textcontext = "[Location.GetRoadsInfo]"
            }
        }
    }
}

template location_promotion_tooltip {
    ContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/location_icons/promotion.dds"
                glow = {
                    name = "drop_shadow"
                    glow_radius = 3
                    color = {0.0 0.0 0.0 1.0}
                    alpha = 0.6
                }
            }
        }

        blockoverride "title_text" {
            text = "PROMOTE_LABEL"
        }
        blockoverride "concept_link" {
            text = "[promotion|E]"
        }

        blockoverride "tooltip_content" {
            TooltipStringPairList = {
                blockoverride "block_title" {
                    text = "PROMOTION_TT_LIST_TITLE"
                }
                textcontext =  "[Location.GetPromoteInfo]"
            }

            TooltipStringPairList = {
                textcontext =  "[Location.GetPromotePopFactors]"
            }
        }
    }
}

template available_peasants_tooltip {
    SimpleContextualTooltipType = {
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "gfx/interface/icons/pops/peasants.dds"
            }
        }
        blockoverride "concept_link" {
            text = [available_population|E]
        }
        
        lowpriotextcontext = BUILD_LOCATION_AVAILABLE_PEASANTS
    }
}

template RebelsLocationTooltip {
    ContextualTooltipType = {
        blockoverride "title_icon_texture" {
             texture = "[GetConceptTexture('rebel')]"
        }

        blockoverride "title_text" {
            text = "REBEL_LOCATION_TITLE"
        }
        blockoverride "concept_link" {
            text = [rebels|E]
        }

        blockoverride "tooltip_content" {
            TooltipContentSection = {
                datacontext = "[Location.GetQuickRebelLocationList]"
                datamodel = "[QuickRebelLocationList.GetRebels]"

                item = {
                    TooltipColumnList = {
                        textcontext =  "[QuickRebelLocationList.GetTooltipForRebel(Rebel.Self)]"
                    }
                }
            }
        }
    }
}

template SoundTollLocationTooltip {
    ContextualTooltipType = {
        blockoverride "title_text" {
            text = "SOUND_TOLL_SOURCES"
        }
        blockoverride "title_icon" {
            icon = {
                using = tooltip_title_icon_size
                texture = "[GetConceptTexture('sound_toll')]"
            }
        }
        blockoverride "concept_link" {
            text = [sound_toll|E]
        }
        blockoverride "tooltip_content" {
            TooltipTextBlock = {
                blockoverride "text" {
                    text = "TOLL_OWNER"
                }
            }

            TooltipScrolledStringPairList = {
                blockoverride "block_scrollarea" { maximumsize = { -1 360 } }
                textcontext = "[Location.GetSoundTollInfo]"
                visible = "[Not(StringIsEmpty(Location.GetSoundTollInfo))]"
            }

            TooltipTextBlock = {
                visible = "[StringIsEmpty(Location.GetSoundTollInfo)]"
                blockoverride "text" {
                    text = "NO_TOLL_INCOME"
                }
            }
        }
    }
}



template victory_cards_location_tooltip {
	ContextualTooltipType = {
		blockoverride "title_icon" {
			icon = {
				using = tooltip_title_icon_size
				texture = "gfx/interface/icons/map_modes/victory_cards.dds"
				texture_density = 2
				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.7
				}
			}
		}
		blockoverride "title_text" {
			text = "VICTORY_CARDS_IN_LOC"
		}
		blockoverride "concept_link" {
			text = [victory_cards|e]
		}
			
		blockoverride "tooltip_content" {
			TooltipStringPairList = {
                visible = "[Location.HasVictoryCard]"
                textcontext = "[Location.GetVictoryCardInfo]"
            }
			
			
			TooltipTextBlock = {
				visible = "[Not(Location.HasVictoryCard)]"
				blockoverride "text" {
					text = "NO_VC_HERE"
				}
			}

		}
	}
}