template PopNeeds_tooltip {
	ContextualTooltipType = {
		blockoverride "title_icon" {
			icon = {
				using = tooltip_title_icon_size
				texture = "[GetGraphicalCultureTextureForPop(Pop.Self)]"
			}
		}

		blockoverride "title_text" {
			datacontext = "[Pop]"
			text = "POP_CURRENT_GOODS_NEEDS_LABEL"
		}

		blockoverride "concept_link" {
			text = [pop_needs|E]
		}
		
		blockoverride "tooltip_content" {
			TooltipStringPairList = {
				tooltipmeta = {
					texture = "[GetGraphicalCultureTextureForPop(Pop.Self)]"
					game_concept = "[pop_needs|E]"
				}
				textcontext = "[Pop.GetGoodsInformation]"
			}
		}
	}
}



template PopLiteracy_tooltip {
	ContextualTooltipType = {
		blockoverride "title_icon" {
			icon = {
				using = tooltip_title_icon_size
				texture = "[GetGraphicalCultureTextureForPop(Pop.Self)]"
				datacontext = "[Pop.GetType]"
				tooltipwidget = { using = PopType_tooltip }
			}
		}

		blockoverride "title_text" {
			datacontext = "[Pop]"
			text = "POP_LITERACY_TITLE_LABEL"
		}

		blockoverride "concept_link" {
			text = [literacy|E]
		}
		
		blockoverride "tooltip_content" {
		
			TooltipStringPairList = {
				textcontext = "[Pop.GetLocalLiteracyImpactInfo]"
			}
			
			TooltipStringPairList = {
				textcontext = "[Pop.GetLiteracyChangeInfo]"
			}
			TooltipStringPairList = {
				textcontext = "[Pop.GetMaxLiteracyInfo]"
			}
		}
	}
}	

template Pop_tooltip {
	ContextualTooltipType = {
		blockoverride "title_icon" {
			icon = {
				using = tooltip_title_icon_size
				texture = "[GetGraphicalCultureTextureForPop(Pop.Self)]"
			}
		}

		blockoverride "title_text" {
			text = "[Pop.GetNameWithNoTooltip]"
		}

		blockoverride "concept_link" {
			text = "[pop|e]"
		}
		blockoverride "tooltip_content" {

			TooltipDebugTextBlock = {
				blockoverride "text" {
					debug_text = "[Pop.GetDebugText]"
				}
			}
		
			TooltipListBase = {
				TooltipManualTableField = {
					visible = "[Pop.HasOwnerOrLocationOwner]"
					text_single = {
						using = layoutpolicy_expanding
						text = "[country_with_icon|e]"
					}
		
					text_single = {
						visible = "[Pop.HasOwnerOrLocationOwner]"
						autoresize = yes
						align = right
						text = "[Pop.GetOwnerOrLocationOwner.GetNameWithFlag]"
					}
				}
				TooltipManualTableField = {
					visible = "[Not(Pop.HasOwnerOrLocationOwner)]"
					text_single = {
						using = layoutpolicy_expanding
						text = "[country_with_icon|e]"
					}
		
					text_single = {
						autoresize = yes
						align = right
						text = "MODIFIER_NONE"
					}
				}
				TooltipManualTableField = {
					text_single = {
						using = layoutpolicy_expanding
						text = "AMOUNT_OF_POPS"
					}
		
					text_single = {
						autoresize = yes
						align = right
						text = "[Pop.GetSize]"
					}
				}				
				
				TooltipManualTableField = {
					text_single = {
						using = layoutpolicy_expanding
						text = "[religion_with_icon|e]"
					}
							
					hbox = {
						spacing = 5
						datacontext = "[Pop.GetReligion]"
						default_format = "#L"
	
						icon = {
							size = { 24 24 }
							texture = "[GetReligionIcon(Pop.GetReligion.Self)]"
							
						}

						text_single = {
							autoresize = yes
							align = right
							text = "[Pop.GetReligion.GetAdjective]"
						}
	
					}
				}			
				
				TooltipManualTableField = {
					text_single = {
						using = layoutpolicy_expanding
						text = "[culture_with_icon|e]"
					}
							
					text_single = {
						autoresize = yes
						align = right
						text = "[Pop.GetCulture.GetName]"
					}
				}	

				TooltipManualTableField = {
					visible = "[Pop.HasEstate]"
					
					text_single = {
						using = layoutpolicy_expanding
						text = "[estate_with_icon|e]"
					}
							
					text_single = {
						autoresize = yes
						align = right
						text = "[Pop.GetEstate.GetName]"
						datacontext = "[Pop.GetEstate]"
						tooltipwidget = { using = Estate_tooltip	}
					}
				}

				TooltipManualTableField = {
					text_single = {
						using = layoutpolicy_expanding
						text = "[pop_satisfaction_with_icon|e]"
					}
							
					text_single = {
						autoresize = yes
						align = right
						text = "[Pop.GetSatisfactionLabel]"
					}
				}

				TooltipManualTableField = {
					text_single = {
						using = layoutpolicy_expanding
						text = "[pop_needs_with_icon|e]"
					}
							
					text_single = {
						autoresize = yes
						align = right
						
						text = "[Pop.GetGoodsAccess|2%L]"
						
						tooltipwidget = {
							using = PopNeeds_tooltip
						}
					}
				}

				TooltipManualTableField = {
					text_single = {
						using = layoutpolicy_expanding
						text = "[literacy_with_icon|e]"
					}
							
					text_single = {
						autoresize = yes
						align = right
						text = "[Pop.GetLiteracy|2/%L]"
						tooltipwidget = {
							using = PopLiteracy_tooltip
						}
					}
				}
				
				TooltipManualTableField = {
					visible = "[Pop.HasRebel]"
					text_single = {
						using = layoutpolicy_expanding
						text = "[rebel_with_icon|e]"
					}
							
					hbox = {
						spacing = 5
						datacontext = "[Pop.GetRebel]"
						tooltipwidget = {
							using = Rebel_tooltip
						}
	
						text_single = {
							autoresize = yes
							align = right
							text = "[Pop.GetRebel.GetName]"
						}
	
						icon = {
							size = { 24 24 }
							texture = "[GetRebelsIcon(Pop.GetRebel)]"
							
						}
					}
				}
			}

			TooltipScrolledStringPairList = {
				visible = "[Pop.HasAnyLevy]"
				
				blockoverride "block_title" {
					datacontext = "[Pop]"
					text = "POP_HAS_LEVIES"
				}
				
				blockoverride "block_scrollarea" { maximumsize = { -1 320 }}
				
				textcontext = "[Pop.GetLeviesInformation]"
			}
			
			TooltipFlavorTextBlock = {
				blockoverride "text" {
					text = "[Pop.GetType.GetDesc]"
				}
			}
		}
	}
}

template PopPromotionTooltip {
	ContextualTooltipType = {
		blockoverride "title_icon" {
			icon = {
				using = tooltip_title_icon_size
				texture = "gfx/interface/icons/location_icons/monthly_promotion.dds"

				glow = {
					name = "drop_shadow"
					glow_radius = 3
					color = {0.0 0.0 0.0 1.0}
					alpha = 0.3
				}
			}
		}

		blockoverride "title_text" {
			datacontext = "[Player]"
			text = "PROMOTION_TOOLTIP_T"
		}

		blockoverride "concept_link" {
			raw_text = "[promotion|e] | [demotion|e]"
		}

		blockoverride "tooltip_content" {
			TooltipStringPairList = {
				blockoverride "block_title" {
					datacontext = "[Player]"
					text = "LIST_TITLE_PROMOTION"
				}
				textcontext = "[Country.GetDescriptionFor('global_pop_promotion_speed_modifier')]"
			}
			TooltipStringPairList = {
				blockoverride "block_title" {
					datacontext = "[Player]"
					text = "LIST_TITLE_DEMOTION"
				}
				textcontext = "[Country.GetDescriptionFor('global_pop_demotion_speed_modifier')]"
			}
		}
	}
}

template BuildingPromoteTime_tooltip {
	ContextualTooltipType = {
		blockoverride "title_text" {
			text = "[BuildingPromoteTimeWrapper.GetTitle]"
		}

		blockoverride "concept_link" {
			text = [promote|E]
		}
	
		blockoverride "tooltip_content" {
			TooltipStringPairList = {
				blockoverride "block_title" {
					text = "[BuildingPromoteTimeWrapper.GetPromotionDesc]"
				}
				textcontext = "[BuildingPromoteTimeWrapper.GetBreakdown]"
			}

			TooltipStringPairList = {
				blockoverride "block_title" {
					text = "ALERT_PROMOTE_BREAKDOWN_DETAIL_FOR_POP_HEADER"
				}
				textcontext =  "[BuildingPromoteTimeWrapper.GetPopModifier]"
			}
		}
	}
}