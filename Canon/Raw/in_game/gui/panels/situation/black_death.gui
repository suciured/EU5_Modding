situation_panel = {

	##################################### TOP HEADER #####################################

	# ORIGIN
	blockoverride "situation_header_left" {
		tooltipwidget = {
			ContextualTooltipType = {
				blockoverride "title_text" {
					text = "ORIGIN"
				}
				blockoverride "title_icon" {
					icon = {
						texture = "[SituationView.GetActiveSituation.GetIcon]"
						using = tooltip_title_icon_size
					}
				}
				blockoverride "concept_link" {
					text = "[location|e]"
				}
					
				blockoverride "tooltip_content" {
					TooltipTextBlock = {
						blockoverride "text" {
							text = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetOrigin.GetName]"
						}
					}
				}
			}	
		}
		icon = {
			size = {32 32}
			texture = "gfx/interface/icons/map_subdivisons/location.dds"
		}

		vbox = {
			layoutpolicy_horizontal = expanding
			text_single = {
				layoutpolicy_horizontal = expanding
				text = "ORIGIN"
				default_format = "#subtle_name"
			}

			text_single = {
				layoutpolicy_horizontal = expanding
				fontsize = 13
				text = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetOrigin.GetName]"
			}
		}
		expand = {}
	}

	# TOTAL DEATHS
	blockoverride "situation_header_right" {
		
		tooltipwidget = {
			ContextualTooltipType = {
				blockoverride "title_text" {
					text = "TOTAL_DEATHS"
				}
				blockoverride "title_icon" {
					icon = {
						texture = "[SituationView.GetActiveSituation.GetIcon]"
						using = tooltip_title_icon_size
					}
				}
				blockoverride "concept_link" {
					text = "[population|e]"
				}
					
				blockoverride "tooltip_content" {
					TooltipStringPairList = {
						blockoverride "stringpair_datamodel" {
							datamodel = "[DataModelFirst(StringPairList.GetRows, '(int32)25')]"
						}
						textcontext = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetDeathsTooltip()]"
					}
				}
			}	
		}
		tooltip = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetDeathsTooltip()]"
		expand = {}
		vbox = {
			layoutpolicy_horizontal = expanding
			text_single = {
				layoutpolicy_horizontal = expanding
				align = right|nobaseline
				# fontsize = 13
				text = "TOTAL_DEATHS"
				default_format = "#subtle_name"
			}

			text_single = {
				layoutpolicy_horizontal = expanding
				align = right|nobaseline
				text = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetDeaths]"
			}
		}

		icon = {
			size = {32 32}
			texture = "gfx/interface/icons/flat_icons/geopolitics/privateer.dds"
		}
	}
	
	##################################### MAIN IMAGE #####################################

	# DEFAULT

	##################################### TAB NAME #####################################

	##################################### SUBHEADER #####################################

	blockoverride "situation_subheader_content"{}

	##################################### MAIN CONTENT #####################################

	# DEFAULT
	# blockoverride "action_group_header" { using = bg_disease_situation_header }

	blockoverride "situation_panel_main_content" {

		# End Requirements
		situation_card_expandable = {
			blockoverride "header_button_onclick" {
				onclick = "[LateralView.Vars.Toggle( 'requirements_toggled' )]"
			}
			blockoverride "header_text" {
				text = "END_REQUIREMENTS"
			}
			blockoverride "header_icon" {
				texture = "gfx/interface/icons/disasters/end_requirements_green.dds"
			}
			blockoverride "bottom_content" {
				text_single = {
					raw_text = "black_death_end_trigger_tt"
				}
			}
			blockoverride "visible_hint" {}
			blockoverride "onaction_hint" {
				action_tooltip = {
					title = "OPEN_HINT"
					on_action = "[OpenLateralViewWithParams('hints', 'selected_hint = hint_black_death')]"
				}
			}
			blockoverride "bottom_content_onclick" {
				visible = "[LateralView.Vars.Exists( 'requirements_toggled' )]"
			}
			blockoverride "icon_replace_visible_yes" {
				visible = "[LateralView.Vars.Exists( 'requirements_toggled' )]"
			}
			blockoverride "icon_replace_visible_not" {
				visible = "[Not(LateralView.Vars.Exists( 'requirements_toggled' ))]"
			}
		}

		situation_fancy_two_line_card = {
			block "card_datacontext" { }	#We need two countries here, not one, so we will have to define both individually
			
			#Left - Affected Locations
			blockoverride "left_flag" {
				icon = {
					tooltipwidget = {
						ContextualTooltipType = {
							blockoverride "title_text" {
								text = "AFFECTED_LOCATIONS"
							}
							blockoverride "title_icon" {
								icon = {
									texture = "[SituationView.GetActiveSituation.GetIcon]"
									using = tooltip_title_icon_size
								}
							}
							blockoverride "concept_link" {
								text = "[location|e]"
							}
								
							blockoverride "tooltip_content" {
								TooltipStringPairList = {
									textcontext = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetLocationsAffectedForCountryTooltip(Player.Self)]"
								}
							}
						}	
					}
					size = {40 40}
					texture = "gfx/interface/icons/outliner/categories/sieges.dds"
				}
			}
			blockoverride "left_bottom_flag" { }
			blockoverride "left_top_text" {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				text = "AFFECTED_LOCATIONS"
			}
			blockoverride "left_bottom_text" {
				layoutpolicy_horizontal = expanding
				align = left|nobaseline
				text = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetNumLocationsAffectedForCountry(Player.Self)]"
				tooltipwidget = {
					ContextualTooltipType = {
						blockoverride "title_text" {
							text = "AFFECTED_LOCATIONS"
						}
						blockoverride "title_icon" {
							icon = {
								texture = "[SituationView.GetActiveSituation.GetIcon]"
								using = tooltip_title_icon_size
							}
						}
						blockoverride "concept_link" {
							text = "[location|e]"
						}
							
						blockoverride "tooltip_content" {
							TooltipStringPairList = {
								textcontext = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetLocationsAffectedForCountryTooltip(Player.Self)]"
							}
						}
					}	
				}
			}
			
			#Right - Opposers' Strongest Country
			blockoverride "right_flag" {
				icon = {
					tooltipwidget = {
						ContextualTooltipType = {
							blockoverride "title_text" {
								text = "COUNTRY_DEATHS"
							}
							blockoverride "title_icon" {
								icon = {
									texture = "[SituationView.GetActiveSituation.GetIcon]"
									using = tooltip_title_icon_size
								}
							}
							blockoverride "concept_link" {
								text = "[population|e]"
							}
								
							blockoverride "tooltip_content" {
								TooltipTextBlock = {
									blockoverride "text" {
										text = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetDeathsInCountryTooltip(Player.Self)]"
									}
								}
							}
						}	
					}
					size = {40 40}
					texture = "gfx/interface/icons/flat_icons/geopolitics/privateer.dds"
				}
			}
			blockoverride "right_bottom_flag" {	}
			blockoverride "right_top_text" {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				text = "COUNTRY_DEATHS"
				tooltipwidget = {
					ContextualTooltipType = {
						blockoverride "title_text" {
							text = "COUNTRY_DEATHS"
						}
						blockoverride "title_icon" {
							icon = {
								texture = "[SituationView.GetActiveSituation.GetIcon]"
								using = tooltip_title_icon_size
							}
						}
						blockoverride "concept_link" {
							text = "[population|e]"
						}
							
						blockoverride "tooltip_content" {
							TooltipTextBlock = {
								blockoverride "text" {
									text = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetDeathsInCountryTooltip(Player.Self)]"
								}
							}
						}
					}	
				}
			}
			blockoverride "right_bottom_text" {
				layoutpolicy_horizontal = expanding
				align = right|nobaseline
				text = "[SituationView.GetActiveSituation.GetSituation.MakeScope.GetVariable('original_outbreak').GetDiseaseOutbreak.GetDeathsInCountry(Player.Self)]"
			}
        }
	}

	blockoverride "situation_panel_main_content_bottom" {
		
		situation_card_actions = {
			blockoverride "card_header_text" {
				text = "BUILD_PLAGUE_BUILDINS_TITLE"
			}
			blockoverride "card_header_icon" {}
			blockoverride "actions_content" {
				vbox = {
					layoutpolicy_horizontal = expanding
					button_regular = {
						down = "[GetVariableSystem.Exists('ui_library_down_state')]"
						size = { 480 30 }
						fontsize = 14
						text = "BUILD_PLAGUE_BUILDINS"

						using = bg_button_flavor_1

						action_tooltip = {
							click_type = left
							click_mode = single
							title = "BUILD_PLAGUE_BUILDINS"
							on_action = "[OpenLateralViewWithFilter('production', 'local_disease_resistance')]"
						}

						tooltipwidget = {
							BasicFunctionalTooltip = { }
						}
					}
				}				
			}
		}
	}
}
