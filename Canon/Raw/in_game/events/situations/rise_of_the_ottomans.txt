namespace = rise_of_the_ottomans

######################################
# The start of the situation events
######################################

rise_of_the_ottomans.1 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.1.title
	desc = rise_of_the_ottomans.1.desc
	image = "gfx/interface/illustrations/situation/rise_of_the_ottomans.dds"
	immediate = {
		
		situation:rise_of_the_ottomans.var:strongest_beylik_variable = {
			save_scope_as = target_country
			ruler_or_regent = { save_scope_as = target_character }
		}
		
		if = {
			limit = { has_reform = government_reform:anatolian_beylik }
			set_variable = {
				name = trunk_road_event_eligible_variable
				years = 5
			}
			set_variable = {
				name = silver_dirham_event_eligible_variable
				years = 5
			}
		}
	}

	option = {
		name = rise_of_the_ottomans.1.a

		if = {
			limit = {
				tag = BYZ
			}
			add_stability = stability_extreme_penalty
		}
		if = {
			limit = {
				NOT = { has_reform = government_reform:anatolian_beylik }
				any_pop = {
					owner = root
					culture = culture:turkish_culture
				}
			}
			every_pop = {
				limit = {
					owner = root
					culture = culture:turkish_culture
				}
				add_pop_satisfaction = pop_satisfaction_ultimate_penalty
			}
		}

		if = {
			limit = { 
				has_reform = government_reform:anatolian_beylik 
				any_neighbor_country = {
					NOT = { is_subject_of = root }
					ROOT = { can_declare_war_on = prev }
				}
			}
			every_neighbor_country = {
				root = {
					add_opinion = {
						target = prev
						modifier = anatolian_struggle_modifier
					}
				}
			}
		}
	}
}

rise_of_the_ottomans.2 = {
	type = country_event
	category = situation_event
	image = "gfx/interface/illustrations/situation/rise_of_the_ottomans.dds"
	title = rise_of_the_ottomans.2.title
	desc = rise_of_the_ottomans.1.desc		# same desc
	immediate = {
		ruler_or_regent = { save_scope_as = target_character }
		save_scope_as = target_country

		set_variable = {
			name = trunk_road_event_eligible_variable
			years = 5
		}
		set_variable = {
			name = silver_dirham_event_eligible_variable
			years = 5
		}
	}

	option = {
		name = rise_of_the_ottomans.2.a
		set_variable = { name = tur_rise_of_ottoman_flag value = 1 }
		add_reform = government_reform:legacy_of_osman

		if = {
			limit = { 
				has_reform = government_reform:anatolian_beylik 
				any_neighbor_country = {
					NOT = { is_subject_of = root }
					ROOT = { can_declare_war_on = prev }
				}
			}
			every_neighbor_country = {
				root = {
					add_opinion = {
						target = prev
						modifier = anatolian_struggle_modifier
					}
				}
			}
		}
	}
}



######################################
# The end of the situation events
######################################
rise_of_the_ottomans.3 = {
	type = country_event

	title = rise_of_the_ottomans.3.title
	desc = rise_of_the_ottomans.3.desc



	option = {
		name = rise_of_the_ottomans.3.a

		if = {
			limit = {
				has_reform = government_reform:legacy_of_osman
			}
			remove_reform = government_reform:legacy_of_osman
			add_government_power = government_power_extreme_penalty
		}
	}

}

rise_of_the_ottomans.4 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.4.title
	desc = rise_of_the_ottomans.4.desc

	immediate = {
		ordered_in_global_list = {
			variable = eligible_beylik_list
			order_by = {
				add = {
					value = country_total_army_levy_size
				}
				multiply = country_rank_level
				add = {
					value = army_size
					multiply = 10
				}
				add = {
					value = country_total_navy_levy_size
					divide = 2
				}
				add = {
					value = monthly_income_trade_and_tax
					divide = 10
				}
				if = {
					limit = { is_great_power = yes }
					add = 100
				}
			}
			max = 1
			check_range_bounds = no
			save_scope_as = target_country
			ruler_or_regent = { save_scope_as = target_character }
		}
	}

	option = {
		name = rise_of_the_ottomans.4.a

	}
}


rise_of_the_ottomans.5 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.5.title
	desc = rise_of_the_ottomans.5.desc

	immediate = {
		set_variable = rise_of_the_ottomans_winner_variable
	}

	option = {
		name = rise_of_the_ottomans.5.a

		if = {
			limit = {
				has_variable = was_not_tur_variable
			}
			custom_tooltip = history_rewritten_tt
			custom_tooltip = ability_to_form_rum_tt
			unlock_government_reform_effect = { type = legacy_of_the_turks }
		}
		else = {
			hidden_effect = {
				unlock_government_reform_effect = { type = legacy_of_the_ottomans }
				remove_variable = tur_rise_of_ottoman_flag
			}

			if = {
				limit = {
					has_reform = government_reform:legacy_of_osman
				}
				remove_reform = government_reform:legacy_of_osman
				add_reform = government_reform:legacy_of_the_ottomans
			}
		}
		unlock_policy_effect = { type = eyalet_division }
		add_policy = policy:eyalet_division
		unlock_government_reform_effect = { type = turkish_pashas }
		add_reform = government_reform:turkish_pashas
	}

	after = {
		if = {
			limit = { has_variable = was_not_tur_variable }
			remove_variable = was_not_tur_variable
		}
	}
}

rise_of_the_ottomans.6 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.6.title
	desc = rise_of_the_ottomans.6.desc

	immediate = {
		save_scope_as = target_country
		ruler_or_regent = { save_scope_as = target_character }

		hidden_effect = {
			if = {
				limit = {
					any_known_country = {
						has_reform = government_reform:leader_of_the_turks
					}
				}
				random_known_country = {
					limit = { has_reform = government_reform:leader_of_the_turks }
					remove_reform = government_reform:leader_of_the_turks
				}
			}
		}
	}

	option = {
		name = rise_of_the_ottomans.6.a

		add_reform = government_reform:leader_of_the_turks
	}

	option = {
		name = rise_of_the_ottomans.6.b

		custom_tooltip = tur_choose_reform_later_tt
		hidden_effect = {
			set_variable = {
				name = declined_leader_of_the_turks_variable
				years = 3
			}
		}
	}
}


######################################
# Ottomans at Peace, create action..
######################################

rise_of_the_ottomans.100 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.100.title
	desc = rise_of_the_ottomans.100.desc

	immediate = {
		ruler_or_regent ?= { save_scope_as = target_character1 }
		scope:target.owner = {
			save_scope_as = target_country
			ruler_or_regent ?= { save_scope_as = target_character2 }
		}
	}


	option = {
		name = rise_of_the_ottomans.100.a
		add_casus_belli = { target = scope:target.owner type = casus_belli:cb_conquer_province province = scope:target }
		refresh_map_colors = yes
	}

}



rise_of_the_ottomans.101 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.101.title
	desc = rise_of_the_ottomans.101.desc

	immediate = {
		ordered_neighbor_country = {
			limit = {
				is_subject = no
				at_war = no
				NOT = { is_subject_of = prev }
				NOT = { is_rival_of = prev }
				NOT = { is_enemy_of = prev }
				religion = prev.religion
				total_population < prev.total_population
				culture.language = prev.culture.language
				NOT = { has_variable = rise_of_the_ottomans_vassal_cooldown_variable }
			}
			max = 5
			check_range_bounds = no
			order_by = {
				value = total_population
				multiply = -1
				if = {
					limit = { has_variable = more_likely_to_accept_vassalization_variable }
					multiply = 1000
				}
			}
			add_to_list = potential_vassal_list
		}

		if = {
			limit = {
				any_in_list = {
					list = potential_vassal_list
					has_variable = more_likely_to_accept_vassalization_variable
				}
			}
			random_in_list = {
				list = potential_vassal_list
				limit = { has_variable = more_likely_to_accept_vassalization_variable }
				
				save_scope_as = target_country
			}
		}
		
		else = {
			random_in_list = {
				list = potential_vassal_list
				
				save_scope_as = target_country
			}
		}

		save_scope_as = target_country2
	}


	option = {
		name = rise_of_the_ottomans.101.a
		custom_tooltip = rise_of_the_ottomans.101.tt
		scope:target_country = { trigger_event_silently = rise_of_the_ottomans.102 }
		if = {
			limit = {
				scope:target_country = { has_variable = more_likely_to_accept_vassalization_variable }
			}
			custom_tooltip = explain_flavor_tur.43_tt
		}
	}

	option = {
		name = rise_of_the_ottomans.101.b

		scope:target_country = {
			set_variable = {
				name = rise_of_the_ottomans_vassal_cooldown_variable
				years = 5
			}
		}
	}

}


rise_of_the_ottomans.102 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.102.title
	desc = rise_of_the_ottomans.102.desc


	option = {
		name = rise_of_the_ottomans.102.a

		ai_chance = {
			factor = 50
			modifier = {
				factor = 10
				has_variable = more_likely_to_accept_vassalization_variable
			}
		}

		show_as_tooltip = {
			scope:target_country = {
				make_subject_of = {
					target = scope:target_country2
					type = subject_type:vassal
				}
			}
		}
		scope:target_country2 = { trigger_event_silently = rise_of_the_ottomans.103 }

	}

	option = {
		name = rise_of_the_ottomans.102.b

		ai_chance = {
			factor = 50
		}

		show_as_tooltip = {
			c:TUR = {
				add_casus_belli = { target = scope:target_country type = casus_belli:cb_conquer_province province = scope:target_country.capital.province }
			}
		}
		scope:target_country2 = { trigger_event_silently = rise_of_the_ottomans.104 }

		set_variable = {
			name = rise_of_the_ottomans_vassal_cooldown_variable
			years = 5
		}
	}
}



rise_of_the_ottomans.103 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.103.title
	desc = rise_of_the_ottomans.103.desc

	option = {
		name = rise_of_the_ottomans.103.a
		scope:target_country = {
			make_subject_of = {
				target = root
				type = subject_type:vassal
			}
		}
		if = {
			limit = {
				scope:target_country = { has_variable = more_likely_to_accept_vassalization_variable }
			}
			hidden_effect = {
				scope:target_country = { remove_variable = more_likely_to_accept_vassalization_variable }
			}
			trigger_event_non_silently = flavor_tur.44
		}
	}
}


rise_of_the_ottomans.104 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.104.title
	desc = rise_of_the_ottomans.104.desc

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	option = {
		name = rise_of_the_ottomans.104.a
		add_casus_belli = { target = scope:target_country type = casus_belli:cb_conquer_province province = scope:target_country.capital.province }
	}
}



rise_of_the_ottomans.105 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.105.title
	desc = rise_of_the_ottomans.105.desc

	illustration_tags = {
		10 = happy
		10 = interior
	}

	immediate = {
		random_owned_location = {
			limit = {
				integration_level = conquered
				integration_progress > 0
			}
			province = {
				save_scope_as = target_province
			}
		}
	}

	option = {
		name = rise_of_the_ottomans.105.a
		historical_option = yes
		scope:target_province = {
			every_location_in_province = {
				limit = {
					integration_level = conquered
					integration_progress > 0
				}
				change_integration_progress = 20
			}
		}
		change_societal_value = {
			type = individualism_vs_communalism
			value = societal_value_minor_move_to_right
		}

	}

	option = {
		name = rise_of_the_ottomans.105.b
		scope:target_province = {
			every_location_in_province = {
				limit = {
					integration_level = conquered
					integration_progress > 0
				}
				change_integration_progress = 10
			}
		}

		add_stability = stability_mild_bonus

	}
}

rise_of_the_ottomans.106 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.106.title
	desc = rise_of_the_ottomans.106.desc

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		scope:target = {
			save_scope_as = target_country2
			ruler ?= { save_scope_as = target_character2 }
			set_variable = {
				name = recently_gave_territory
				years = 5
			}
		}
		scope:target_2 = {
			save_scope_as = target_location
		}
		if = {
			limit = {
				country_exists = scope:target_country2
				scope:target_country2 = {
					OR = {
						has_ruler = yes
						has_regent = yes
					}
					ruler_or_regent ?= {
						has_dynasty = yes
					}
					any_character = {
						culture = scope:target_country2.culture
						religion = scope:target_country2.religion
						dynasty ?= scope:target_country2.ruler_or_regent.dynasty
						is_female = yes
						is_married = no
					}
				}
			}
			scope:target_country2 = {
				random_character = {
					limit = {
						culture = scope:target_country2.culture
						religion = scope:target_country2.religion
						dynasty ?= scope:target_country2.ruler_or_regent.dynasty
						is_female = yes
						is_married = no
					}
					save_scope_as = target_character_4
				}
			}
		}
		else = {
			create_character = {
				culture = scope:target_country2.culture
				religion = scope:target_country2.religion
				age = 18
				female = yes
				estate = estate_type:nobles_estate
				create_in_limbo = yes
				save_scope_as = target_character_4
			}
		}
		scope:target_1 = {
			save_scope_as = target_character3
		}
		scope:actor = {
			save_scope_as = target_country1
			ruler ?= {
				save_scope_as = target_character
				dynasty ?= { save_scope_as = target_dynasty }
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.106.a

		ai_chance = {
			factor = 75
		}

		hidden_effect = {
			scope:target_character_4 = {
				if = {
					limit = { country_exists = scope:target_country2 }
					move_country = scope:target_country2
				}
				else = { move_country = scope:actor }
			}
		}
		scope:target_character3 = {
			marry_character = scope:target_character_4
		}
		scope:target_location = {
			change_location_owner = scope:target_country1
			change_integration_level = integrated
		}
		create_relation = {
			first = scope:target_country1
			second = root
			type = relation_type:guarantee
		}
		add_truce_with = { target = scope:target_country1 }
		add_opinion_mutual_effect = {
			target = scope:actor
			modifier = opinion_marriage_between_beyliks
		}
		add_trust = {
			modifier = trust_beylik_marriage
			target = scope:target_country1
		}
		scope:target_country1 = {
			add_trust = {
				modifier = trust_beylik_marriage
				target = scope:target_country2
			}
		}
		hidden_effect = {
			scope:target_country1 = { set_variable = accepted_marriage }
		}
	}

	option = {
		name = rise_of_the_ottomans.106.b
		ai_chance = {
			factor = 25
		}

		hidden_effect = {
			scope:target_country1 = { set_variable = declined_marriage }
		}
		add_opinion_mutual_effect = {
			target = scope:target_country1
			modifier = belligerent_diplomacy
		}
		add_prestige = prestige_weak_bonus
		show_as_tooltip = {
			scope:actor = {
				add_casus_belli = {
					type = casus_belli:cb_insulted_us
					target = root
				}
			}
		}
	}

	after = {
		scope:target_country1 = { trigger_event_non_silently = rise_of_the_ottomans.107 }
	}
}

rise_of_the_ottomans.107 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.107.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_variable = declined_marriage
				}
				desc = rise_of_the_ottomans.107.desc_a
			}
			triggered_desc = {
				trigger = {
					always = yes
				}
				desc = rise_of_the_ottomans.107.desc_b
			}
		}
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		capital = { save_scope_as = target_location2 }
	}

	option = {	#Yes
		name = rise_of_the_ottomans.107.a

		trigger = {
			has_variable = accepted_marriage
		}
		hidden_effect = {
			remove_variable = accepted_marriage
			remove_variable = declined_marriage
		}
		show_as_tooltip = {
			scope:target_character3 = {
				marry_character = scope:target_character_4
			}
			scope:target_location = {
				change_location_owner = scope:target_country1
				change_integration_level = integrated
			}
			create_relation = {
				first = scope:target_country2
				second = scope:target_country1
				type = relation_type:guarantee
			}
			add_truce_with = { target = scope:target_country2 }
			add_opinion_mutual_effect = {
				target = scope:target_country2
				modifier = opinion_marriage_between_beyliks
			}
			add_trust = {
				modifier = trust_beylik_marriage
				target = scope:target_country2
			}
			scope:target_country2 = {
				add_trust = {
					modifier = trust_beylik_marriage
					target = root
				}
			}
		}
	}

	option = {
		name = rise_of_the_ottomans.107.b
		trigger = {
			has_variable = declined_marriage
		}
		hidden_effect = {
			remove_variable = accepted_marriage
			remove_variable = declined_marriage
		}
		add_casus_belli = {
			type = casus_belli:cb_insulted_us
			target = scope:target_country2
		}
		add_prestige = prestige_weak_penalty
		add_government_power = government_power_weak_penalty
	}
}

rise_of_the_ottomans.108 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.108.title
	desc = rise_of_the_ottomans.108.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	immediate = {
		c:BYZ.ruler_or_regent ?= { save_scope_as = target_character }
		ruler_or_regent ?= { save_scope_as = target_character2 }
		save_scope_as = target_country
		c:BYZ ?= {
			ordered_character = {
				limit = {
					is_ruler = no
					is_heir = no
					is_regent = no
					is_female = no
				}
				order_by = total_abilities
				max = 1
				check_range_bounds = no
				save_scope_as = target_character3
			}
		}

	}

	option = {	#Ask for official sponsorship
		name = rise_of_the_ottomans.108.a

		c:BYZ ?= {
			set_variable = beylik_requests_official_sponsorship_var
			trigger_event_non_silently = rise_of_the_ottomans.111
		}
		custom_tooltip = gain_recognition_tt
	}

	option = {	#Demand money in exchange for a truce
		name = rise_of_the_ottomans.108.b

		c:BYZ ?= {
			set_variable = beylik_requests_money_var
			trigger_event_non_silently = rise_of_the_ottomans.112
		}
		custom_tooltip = gain_money_tt

	}

	option = {	#Demand royal gifts
		name = rise_of_the_ottomans.108.c

		c:BYZ ?= {
			set_variable = beylik_requests_royal_gifts_var
			trigger_event_non_silently = rise_of_the_ottomans.113
		}
		custom_tooltip = gain_court_official_tt

	}

	option = {	#Nevermind.
		name = rise_of_the_ottomans.108.d

		add_government_power = government_power_mild_bonus
	}
}

#Official sponsorship
rise_of_the_ottomans.111 = {
	type = country_event
	category = situation_event

	#Use desc and title of 109 because this is a different version of the same event
	#separated into multiple events due to limitations of event insights
	title = rise_of_the_ottomans.109.title
	desc = rise_of_the_ottomans.109.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {	#Yes
		name = rise_of_the_ottomans.109.a

		ai_chance = {
			factor = 10
		}
		add_government_power = government_power_extreme_penalty
		if = {
			limit = { exists = scope:target_country }
			add_opinion_mutual_effect = {
				target = scope:target_country
				modifier = belligerent_diplomacy
			}
			scope:target_country = {
				add_country_modifier = {
					modifier = sovereign_of_anatolia
					years = 10
					mode = replace
				}
				set_variable = got_modifier_var
			}
		}
	}

	option = {	#No
		name = rise_of_the_ottomans.109.b
		ai_chance = {
			factor = 5
		}

		add_government_power = government_power_weak_bonus
		if = {
			limit = { exists = scope:target_country }
			add_opinion_mutual_effect = {
				target = scope:target_country
				modifier = refused_diplomatic_offer
			}
		}
	}
	after = {
		if = {
			limit = { has_variable = beylik_requests_official_sponsorship_var }
			remove_variable = beylik_requests_official_sponsorship_var
		}
		scope:target_country = { trigger_event_non_silently = rise_of_the_ottomans.110 }
	}
}
#Money in exchange for a truce
rise_of_the_ottomans.112 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.109.title
	desc = rise_of_the_ottomans.109.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}

	option = {	#Yes
		name = rise_of_the_ottomans.109.a

		ai_chance = {
			factor = 10
		}
		add_government_power = government_power_extreme_penalty
		if = {
			limit = { exists = scope:target_country }
			add_opinion_mutual_effect = {
				target = scope:target_country
				modifier = belligerent_diplomacy
			}
		}

		change_gold_effect = { scale = -6 }
		if = {
			limit = { exists = scope:target_country }
			scope:target_country = {
				add_gold = {
					value = root.monthly_income_total
					multiply = 6
				}
				set_variable = got_money_var
			}
		}

	}

	option = {	#No
		name = rise_of_the_ottomans.109.b
		ai_chance = {
			factor = 5
		}

		add_government_power = government_power_weak_bonus
		if = {
			limit = { exists = scope:target_country }
			add_opinion_mutual_effect = {
				target = scope:target_country
				modifier = refused_diplomatic_offer
			}
		}
	}
	after = {
		if = {
			limit = { has_variable = beylik_requests_money_var }
			remove_variable = beylik_requests_money_var
		}
		scope:target_country = { trigger_event_non_silently = rise_of_the_ottomans.110 }
	}
}
#Demand royal gifts
rise_of_the_ottomans.113 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.109.title
	desc = rise_of_the_ottomans.109.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {	#Yes
		name = rise_of_the_ottomans.109.a

		ai_chance = {
			factor = 10
		}
		add_government_power = government_power_extreme_penalty

		if = {
			limit = { exists = scope:target_country }
			add_opinion_mutual_effect = {
				target = scope:target_country
				modifier = belligerent_diplomacy
			}
		}
		scope:target_character3 ?= { move_country = scope:target_country }
		c:TUR = { set_variable = got_character_var }
	}

	option = {	#No
		name = rise_of_the_ottomans.109.b
		ai_chance = {
			factor = 5
		}

		add_government_power = government_power_weak_bonus
		if = {
			limit = { exists = scope:target_country }
			add_opinion_mutual_effect = {
				target = scope:target_country
				modifier = refused_diplomatic_offer
			}
		}
	}
	after = {
		if = {
			limit = { has_variable = beylik_requests_royal_gifts_var }
			remove_variable = beylik_requests_royal_gifts_var
		}
		scope:target_country = { trigger_event_non_silently = rise_of_the_ottomans.110 }
	}
}

rise_of_the_ottomans.110 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.110.title
	desc = rise_of_the_ottomans.110.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	option = {
		name = rise_of_the_ottomans.110.a
		trigger = {
			custom_tooltip = {
				text = byz_accepted_proposal_tt
				OR = {
					has_variable = got_money_var
					has_variable = got_modifier_var
					has_variable = got_character_var
				}
			}
		}

		if = {
			limit = { has_variable = got_money_var }
			hidden_effect = { remove_variable = got_money_var }
			show_as_tooltip = {
				add_gold = {
					value = c:BYZ.monthly_income_total
					multiply = 6
				}
			}
		}
		if = {
			limit = { has_variable = got_modifier_var }
			hidden_effect = { remove_variable = got_modifier_var }
			show_as_tooltip = {
				add_country_modifier = {
					modifier = sovereign_of_anatolia
					years = 10
					mode = replace
				}
			}
		}
		if = {
			limit = { has_variable = got_character_var }
			hidden_effect = { remove_variable = got_character_var }
			show_as_tooltip = {
				scope:target_character3 = { move_country = scope:target_country }
			}
		}
	}

	option = {
		name = rise_of_the_ottomans.110.b

		trigger = {
			custom_tooltip = {
				text = byz_declined_proposal_tt
				NOR = {
					has_variable = got_money_var
					has_variable = got_modifier_var
					has_variable = got_character_var
				}
			}
		}

		show_as_tooltip = {
			add_opinion_mutual_effect = {
				target = c:BYZ
				modifier = refused_diplomatic_offer
			}
		}
		add_government_power = government_power_weak_penalty
	}
}

rise_of_the_ottomans.200 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.200.title
	desc = rise_of_the_ottomans.207.desc
	historical_info = rise_of_the_ottomans.200.historical_info
	immediate = {
		location:izmit = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		set_variable = {
			name = location_pop_size_var
			value = {
				add = scope:target_location.population
				divide = 100
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			set_variable = {
				name = location_coastal_harbor_suitability_var
				value = {
					add = 1
					add = scope:target_location.modifier:harbor_suitability
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			set_variable = {
				name = location_has_castle_var
				value = 1.1
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			set_variable = {
				name = location_num_buildings_var
				value = {
					add = scope:target_location.num_buildings
					divide = 10
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			set_variable = {
				name = location_is_capital_var
				value = 1.2
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			set_variable = {
				name = location_has_roads_var
				value = {
					add = scope:target_location.num_roads
					divide = 4
				}
			}
		}
		set_variable = {
			name = location_market_access_var
			value = {
				add = scope:target_location.market_access
				multiply = 2
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.200.a

		add_prestige = prestige_mild_bonus
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		remove_variable = location_pop_size_var
		remove_variable = location_market_access_var
		remove_variable = location_pop_size_var
		if = {
			limit = { has_variable = location_coastal_harbor_suitability_var }
			remove_variable = location_coastal_harbor_suitability_var
		}
		if = {
			limit = { has_variable = location_has_castle_var }
			remove_variable = location_has_castle_var
		}
		if = {
			limit = { has_variable = location_num_buildings_var }
			remove_variable = location_num_buildings_var
		}
		if = {
			limit = { has_variable = location_has_roads_var }
			remove_variable = location_has_roads_var
		}
		if = {
			limit = { has_variable = location_is_capital_var }
			remove_variable = location_is_capital_var
		}
	}
}

rise_of_the_ottomans.201 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.201.title
	desc = rise_of_the_ottomans.207.desc

	historical_info = rise_of_the_ottomans.201.historical_info
	immediate = {
		location:bursa = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		set_variable = {
			name = location_pop_size_var
			value = {
				add = scope:target_location.population
				divide = 100
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			set_variable = {
				name = location_coastal_harbor_suitability_var
				value = {
					add = 1
					add = scope:target_location.modifier:harbor_suitability
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			set_variable = {
				name = location_has_castle_var
				value = 1.1
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			set_variable = {
				name = location_num_buildings_var
				value = {
					add = scope:target_location.num_buildings
					divide = 10
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			set_variable = {
				name = location_is_capital_var
				value = 1.2
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			set_variable = {
				name = location_has_roads_var
				value = {
					add = scope:target_location.num_roads
					divide = 4
				}
			}
		}
		set_variable = {
			name = location_market_access_var
			value = {
				add = scope:target_location.market_access
				multiply = 2
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.201.a

		add_prestige = prestige_mild_bonus
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		remove_variable = location_pop_size_var
		remove_variable = location_market_access_var
		remove_variable = location_pop_size_var
		if = {
			limit = { has_variable = location_coastal_harbor_suitability_var }
			remove_variable = location_coastal_harbor_suitability_var
		}
		if = {
			limit = { has_variable = location_has_castle_var }
			remove_variable = location_has_castle_var
		}
		if = {
			limit = { has_variable = location_num_buildings_var }
			remove_variable = location_num_buildings_var
		}
		if = {
			limit = { has_variable = location_has_roads_var }
			remove_variable = location_has_roads_var
		}
		if = {
			limit = { has_variable = location_is_capital_var }
			remove_variable = location_is_capital_var
		}
	}
}

rise_of_the_ottomans.202 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.202.title
	desc = rise_of_the_ottomans.207.desc

	historical_info = rise_of_the_ottomans.202.historical_info
	immediate = {
		location:konya = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		set_variable = {
			name = location_pop_size_var
			value = {
				add = scope:target_location.population
				divide = 100
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			set_variable = {
				name = location_coastal_harbor_suitability_var
				value = {
					add = 1
					add = scope:target_location.modifier:harbor_suitability
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			set_variable = {
				name = location_has_castle_var
				value = 1.1
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			set_variable = {
				name = location_num_buildings_var
				value = {
					add = scope:target_location.num_buildings
					divide = 10
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			set_variable = {
				name = location_is_capital_var
				value = 1.2
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			set_variable = {
				name = location_has_roads_var
				value = {
					add = scope:target_location.num_roads
					divide = 4
				}
			}
		}
		set_variable = {
			name = location_market_access_var
			value = {
				add = scope:target_location.market_access
				multiply = 2
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.202.a

		add_prestige = prestige_mild_bonus
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		remove_variable = location_pop_size_var
		remove_variable = location_market_access_var
		remove_variable = location_pop_size_var
		if = {
			limit = { has_variable = location_coastal_harbor_suitability_var }
			remove_variable = location_coastal_harbor_suitability_var
		}
		if = {
			limit = { has_variable = location_has_castle_var }
			remove_variable = location_has_castle_var
		}
		if = {
			limit = { has_variable = location_num_buildings_var }
			remove_variable = location_num_buildings_var
		}
		if = {
			limit = { has_variable = location_has_roads_var }
			remove_variable = location_has_roads_var
		}
		if = {
			limit = { has_variable = location_is_capital_var }
			remove_variable = location_is_capital_var
		}
	}
}

rise_of_the_ottomans.203 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.203.title
	desc = rise_of_the_ottomans.207.desc

	historical_info = rise_of_the_ottomans.203.historical_info
	immediate = {
		location:ankara = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		set_variable = {
			name = location_pop_size_var
			value = {
				add = scope:target_location.population
				divide = 100
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			set_variable = {
				name = location_coastal_harbor_suitability_var
				value = {
					add = 1
					add = scope:target_location.modifier:harbor_suitability
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			set_variable = {
				name = location_has_castle_var
				value = 1.1
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			set_variable = {
				name = location_num_buildings_var
				value = {
					add = scope:target_location.num_buildings
					divide = 10
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			set_variable = {
				name = location_is_capital_var
				value = 1.2
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			set_variable = {
				name = location_has_roads_var
				value = {
					add = scope:target_location.num_roads
					divide = 4
				}
			}
		}
		set_variable = {
			name = location_market_access_var
			value = {
				add = scope:target_location.market_access
				multiply = 2
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.203.a

		add_prestige = prestige_mild_bonus
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		remove_variable = location_pop_size_var
		remove_variable = location_market_access_var
		remove_variable = location_pop_size_var
		if = {
			limit = { has_variable = location_coastal_harbor_suitability_var }
			remove_variable = location_coastal_harbor_suitability_var
		}
		if = {
			limit = { has_variable = location_has_castle_var }
			remove_variable = location_has_castle_var
		}
		if = {
			limit = { has_variable = location_num_buildings_var }
			remove_variable = location_num_buildings_var
		}
		if = {
			limit = { has_variable = location_has_roads_var }
			remove_variable = location_has_roads_var
		}
		if = {
			limit = { has_variable = location_is_capital_var }
			remove_variable = location_is_capital_var
		}
	}
}

rise_of_the_ottomans.204 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.204.title
	desc = rise_of_the_ottomans.207.desc

	historical_info = rise_of_the_ottomans.204.historical_info
	immediate = {
		location:kayseri = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		set_variable = {
			name = location_pop_size_var
			value = {
				add = scope:target_location.population
				divide = 100
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			set_variable = {
				name = location_coastal_harbor_suitability_var
				value = {
					add = 1
					add = scope:target_location.modifier:harbor_suitability
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			set_variable = {
				name = location_has_castle_var
				value = 1.1
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			set_variable = {
				name = location_num_buildings_var
				value = {
					add = scope:target_location.num_buildings
					divide = 10
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			set_variable = {
				name = location_is_capital_var
				value = 1.2
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			set_variable = {
				name = location_has_roads_var
				value = {
					add = scope:target_location.num_roads
					divide = 4
				}
			}
		}
		set_variable = {
			name = location_market_access_var
			value = {
				add = scope:target_location.market_access
				multiply = 2
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.204.a

		add_prestige = prestige_mild_bonus
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		remove_variable = location_pop_size_var
		remove_variable = location_market_access_var
		remove_variable = location_pop_size_var
		if = {
			limit = { has_variable = location_coastal_harbor_suitability_var }
			remove_variable = location_coastal_harbor_suitability_var
		}
		if = {
			limit = { has_variable = location_has_castle_var }
			remove_variable = location_has_castle_var
		}
		if = {
			limit = { has_variable = location_num_buildings_var }
			remove_variable = location_num_buildings_var
		}
		if = {
			limit = { has_variable = location_has_roads_var }
			remove_variable = location_has_roads_var
		}
		if = {
			limit = { has_variable = location_is_capital_var }
			remove_variable = location_is_capital_var
		}
	}
}

rise_of_the_ottomans.205 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.205.title
	desc = rise_of_the_ottomans.207.desc

	historical_info = rise_of_the_ottomans.205.historical_info
	immediate = {
		set_variable = {
			name = recently_elevanted_stronghold_variable
			years = 5
		}
		location:sivas = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		set_variable = {
			name = location_pop_size_var
			value = {
				add = scope:target_location.population
				divide = 100
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			set_variable = {
				name = location_coastal_harbor_suitability_var
				value = {
					add = 1
					add = scope:target_location.modifier:harbor_suitability
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			set_variable = {
				name = location_has_castle_var
				value = 1.1
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			set_variable = {
				name = location_num_buildings_var
				value = {
					add = scope:target_location.num_buildings
					divide = 10
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			set_variable = {
				name = location_is_capital_var
				value = 1.2
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			set_variable = {
				name = location_has_roads_var
				value = {
					add = scope:target_location.num_roads
					divide = 4
				}
			}
		}
		set_variable = {
			name = location_market_access_var
			value = {
				add = scope:target_location.market_access
				multiply = 2
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.205.a

		add_prestige = prestige_mild_bonus
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		remove_variable = location_pop_size_var
		remove_variable = location_market_access_var
		remove_variable = location_pop_size_var
		if = {
			limit = { has_variable = location_coastal_harbor_suitability_var }
			remove_variable = location_coastal_harbor_suitability_var
		}
		if = {
			limit = { has_variable = location_has_castle_var }
			remove_variable = location_has_castle_var
		}
		if = {
			limit = { has_variable = location_num_buildings_var }
			remove_variable = location_num_buildings_var
		}
		if = {
			limit = { has_variable = location_has_roads_var }
			remove_variable = location_has_roads_var
		}
		if = {
			limit = { has_variable = location_is_capital_var }
			remove_variable = location_is_capital_var
		}
	}
}

rise_of_the_ottomans.206 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.206.title
	desc = rise_of_the_ottomans.207.desc

	historical_info = rise_of_the_ottomans.206.historical_info
	immediate = {
		location:smyrna = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		set_variable = {
			name = location_pop_size_var
			value = {
				add = scope:target_location.population
				divide = 100
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			set_variable = {
				name = location_coastal_harbor_suitability_var
				value = {
					add = 1
					add = scope:target_location.modifier:harbor_suitability
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			set_variable = {
				name = location_has_castle_var
				value = 1.1
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			set_variable = {
				name = location_num_buildings_var
				value = {
					add = scope:target_location.num_buildings
					divide = 10
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			set_variable = {
				name = location_is_capital_var
				value = 1.2
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			set_variable = {
				name = location_has_roads_var
				value = {
					add = scope:target_location.num_roads
					divide = 4
				}
			}
		}
		set_variable = {
			name = location_market_access_var
			value = {
				add = scope:target_location.market_access
				multiply = 2
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.206.a

		add_prestige = prestige_mild_bonus
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		remove_variable = location_pop_size_var
		remove_variable = location_market_access_var
		remove_variable = location_pop_size_var
		if = {
			limit = { has_variable = location_coastal_harbor_suitability_var }
			remove_variable = location_coastal_harbor_suitability_var
		}
		if = {
			limit = { has_variable = location_has_castle_var }
			remove_variable = location_has_castle_var
		}
		if = {
			limit = { has_variable = location_num_buildings_var }
			remove_variable = location_num_buildings_var
		}
		if = {
			limit = { has_variable = location_has_roads_var }
			remove_variable = location_has_roads_var
		}
		if = {
			limit = { has_variable = location_is_capital_var }
			remove_variable = location_is_capital_var
		}
	}
}

rise_of_the_ottomans.207 = {
	type = location_event

	title = rise_of_the_ottomans.207.title
	desc = rise_of_the_ottomans.207.desc
	immediate = {
		root = {
			save_scope_as = target_location
			set_variable = {
				name = recently_elevanted_stronghold_variable
				years = 5
			}
		}
		owner = {
			set_variable = {
				name = location_pop_size_var
				value = {
					add = scope:target_location.population
					divide = 100
				}
			}
		}
		if = {
			limit = {
				scope:target_location = {
					is_coastal = yes
					modifier:harbor_suitability > 0
				}
			}
			owner = {
				set_variable = {
					name = location_coastal_harbor_suitability_var
					value = {
						add = 1
						add = scope:target_location.modifier:harbor_suitability
					}
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { has_building = building_type:castle }
			}
			owner = {
				set_variable = {
					name = location_has_castle_var
					value = 1.1
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { num_buildings > 10 }
			}
			owner = {
				set_variable = {
					name = location_num_buildings_var
					value = {
						add = scope:target_location.num_buildings
						divide = 10
					}
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { is_capital = yes }
			}
			owner = {
				set_variable = {
					name = location_is_capital_var
					value = 1.2
				}
			}
		}
		if = {
			limit = {
				scope:target_location = { num_roads > 4 }
			}
			owner = {
				set_variable = {
					name = location_has_roads_var
					value = {
						add = scope:target_location.num_roads
						divide = 4
					}
				}
			}
		}
		owner = {
			set_variable = {
				name = location_market_access_var
				value = {
					add = scope:target_location.market_access
					multiply = 2
				}
			}
		}
	}

	option = {	#Yes
		name = rise_of_the_ottomans.200.a

		owner = { add_prestige = prestige_mild_bonus }
		scope:target_location = {
			if = {
				limit = {
					NOT = { has_location_modifier = stronghold_city_modifier }
				}
				add_location_modifier = {
					modifier = stronghold_city_modifier
					years = 10
					mode = add_and_extend
				}
			}
			custom_tooltip = based_on_target_location_splendor_and_importance_tt
			change_control = {
				value = control_mild_bonus
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_has_roads_var }
					}
					multiply = owner.var:location_has_roads_var
				}
				if = {
					limit = {
						owner = { has_variable = location_has_castle_var }
					}
					multiply = owner.var:location_has_castle_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
			change_prosperity = {
				value = 0.05
				multiply = owner.var:location_pop_size_var
				if = {
					limit = {
						owner = { has_variable = location_coastal_harbor_suitability_var }
					}
					multiply = owner.var:location_coastal_harbor_suitability_var
				}
				if = {
					limit = {
						owner = { has_variable = location_is_capital_var }
					}
					multiply = owner.var:location_is_capital_var
				}
			}
		}
	}
	after = {
		owner = {
			remove_variable = location_pop_size_var
			remove_variable = location_market_access_var
			remove_variable = location_pop_size_var
			if = {
				limit = { has_variable = location_coastal_harbor_suitability_var }
				remove_variable = location_coastal_harbor_suitability_var
			}
			if = {
				limit = { has_variable = location_has_castle_var }
				remove_variable = location_has_castle_var
			}
			if = {
				limit = { has_variable = location_num_buildings_var }
				remove_variable = location_num_buildings_var
			}
			if = {
				limit = { has_variable = location_has_roads_var }
				remove_variable = location_has_roads_var
			}
			if = {
				limit = { has_variable = location_is_capital_var }
				remove_variable = location_is_capital_var
			}
		}
	}
}

rise_of_the_ottomans.208 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.208.title
	desc = rise_of_the_ottomans.208.desc
	illustration_tags = {
		10 = angry
		10 = interior
	}
	option = {
		name = rise_of_the_ottomans.208.a

		add_war_exhaustion = war_exhaustion_extreme_penalty
		add_stability = stability_mild_penalty
		scope:target = {
			change_prosperity = prosperity_weak_penalty
		}
	}
}

rise_of_the_ottomans.209 = {
	type = country_event
	category = situation_event

	illustration_tags = {
		10 = armed
		10 = exterior
	}
	title = rise_of_the_ottomans.209.title
	desc = rise_of_the_ottomans.209.desc

	option = {
		name = rise_of_the_ottomans.209.a
		add_government_power = government_power_extreme_penalty
		add_stability = stability_extreme_penalty
	}
}

rise_of_the_ottomans.210 = {
	type = country_event
	category = situation_event
	illustration_tags = {
		10 = angry
		10 = interior
	}
	title = rise_of_the_ottomans.210.title
	desc = rise_of_the_ottomans.210.desc

	trigger = {
		is_situation_active = situation:rise_of_the_ottomans
		tag = BYZ
		scope:target = {
			location_key = alasehir
			owner ?= c:BYZ
			controller = {
				OR = {
					tag = TUR
					has_reform = government_reform:anatolian_beylik
				}
			}
		}
	}

	immediate = {
		location:alasehir.controller = { save_scope_as = target_country }
		location:alasehir = { save_scope_as = target_location }
	}
	option = {
		name = rise_of_the_ottomans.210.a

		add_war_exhaustion = war_exhaustion_extreme_penalty
		scope:target_country = { trigger_event_non_silently = rise_of_the_ottomans.211 }
	}
}

rise_of_the_ottomans.211 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.210.title
	desc = rise_of_the_ottomans.211.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	immediate = {
		c:BYZ = { save_scope_as = target_country }
		location:alasehir = { save_scope_as = target_location }
	}
	option = {
		name = rise_of_the_ottomans.211.a

		add_army_tradition = army_tradition_extreme_bonus
		if = {
			limit = { war_exhaustion > 0 }
			add_war_exhaustion = war_exhaustion_mild_bonus
		}
		else = {
			add_gold = {
				value = scope:target_location.population
				multiply = 10
			}
		}
	}
}

rise_of_the_ottomans.212 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.212.title
	desc = rise_of_the_ottomans.212.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TUR
		from = 1337.1.1
		to = 1375.1.1
		monthly_chance = 10
	}
	illustration_tags = {
		10 = interior
	}
	trigger = {
		situation:rise_of_the_ottomans = { situation_is_active = yes }
		character:krd_ali_karasid = {
			is_alive = yes
			owner = root
		}
		at_war = no
		country_exists = c:KRD
		c:KRD = {
			is_subject = no
			at_war = no
			stability < 10
		}
	}

	immediate = {
		c:KRD = {
			save_scope_as = target_country
			character:krd_ali_karasid = { save_scope_as = target_character }
			ruler_or_regent ?= { save_scope_as = target_character2 }
		}
	}

	#We are the arbiters of stability and peace.
	option = {
		name = rise_of_the_ottomans.212.a

		add_casus_belli =  {
			target = c:KRD
			type = casus_belli:cb_subject_broke_free
		}
		add_government_power = government_power_weak_bonus
		if = {
			limit = {
				has_mutual_scripted_relation = {
					type = relation_type:alliance
					target = c:KRD
				}
			}
			remove_relation = {
				type = relation_type:alliance
				first = root
				second = c:KRD
			}
		}
	}

	#Let us not be hasty.
	option = {
		name = rise_of_the_ottomans.212.b

		drop_antagonism_bomb = {
			target = capital
			modifier = antagonism_renounced_claim
			value = -2
		}
		add_stability = stability_mild_bonus
	}
}

rise_of_the_ottomans.213 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.213.title
	desc = rise_of_the_ottomans.213.desc
	historical_info = rise_of_the_ottomans.213.historical_info
	trigger = {	has_variable = trunk_road_event_eligible_variable }

	image = "gfx/interface/icons/trade_goods/illustrations/_default.dds"

	immediate = { remove_variable = trunk_road_event_eligible_variable }

	option = {
		name = rise_of_the_ottomans.213.a

		custom_tooltip = control_of_the_erzurum_trunk_road_tt
		if = {
			limit = {
				OR = {
					owns = location:sivas
					owns = location:erzurum
					owns = location:konya
				}
			}
			add_estate_satisfaction = {
				type = estate_type:burghers_estate
				value = estate_satisfaction_mild_bonus
			}
		}
	}
}

rise_of_the_ottomans.214 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.214.title
	desc = rise_of_the_ottomans.214.desc
	historical_info = rise_of_the_ottomans.214.historical_info
	trigger = {	has_variable = silver_dirham_event_eligible_variable }

	image = "gfx/interface/illustrations/government/economy_balance.dds"

	immediate = { remove_variable = silver_dirham_event_eligible_variable }

	option = {
		name = rise_of_the_ottomans.214.a

		custom_tooltip = silver_dirhams_explanation_tt
	}
}

rise_of_the_ottomans.215 = {
	type = country_event
	category = situation_event
	fire_only_once = yes
	title = rise_of_the_ottomans.215.title
	desc = rise_of_the_ottomans.215.desc
	historical_info = rise_of_the_ottomans.215.historical_info
	trigger = {
		num_locations > 100
		culture = { has_culture_group = culture_group:turkic_group }
		"culture_percentage_in_country(culture:greek_culture)" > 0.25
	}

	image = "gfx/interface/illustrations/government/throne_rooms/throne_room_syrian.dds"

	immediate = { set_variable = enable_turkic_migration_variable }

	option = {
		name = rise_of_the_ottomans.215.a

		custom_tooltip = enable_turkic_migration_tt
	}
}

rise_of_the_ottomans.216 = {
	type = country_event
	category = situation_event
	title = rise_of_the_ottomans.216.title
	desc = rise_of_the_ottomans.216.desc

	illustration_tags = {
		10 = happy
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }

		ordered_province = {
			limit = {
				culture_percentage = {
					culture = root.culture
					value > 0.5
				}
				religion_percentage = {
					religion = root.religion
					value > 0.5
				}
			}
			order_by = {
				value = population
				if = {	#Considerably less likely to choose the same province twice to avoid depopulation
					limit = { has_variable = previously_recently_used_migration_province_variable }
					multiply = 0.5
				}
			}
			save_scope_as = target_province_origin
			set_variable = {
				name = previously_recently_used_migration_province_variable
				years = 20	#In 20 years we can reuse this province as a migration origin
			}
		}
	}

	option = {
		name = rise_of_the_ottomans.216.a

		add_migration = {
			owner = root
			from = scope:target_province_origin.province_definition
			to = scope:target_province_destination.province_definition
			culture = root.culture
			religion = root.religion
			amount = {
				value = scope:target_province_origin.population
				multiply = 0.001
			}
			months = 120
		}

		scope:target_province_destination = {
			if = {
				limit = { has_province_modifier = cultural_intermixing_modifier }
				add_province_modifier = {
					modifier = cultural_intermixing_modifier
					years = 2
					mode = add_and_extend
				}

				custom_tooltip = target_province_destination_already_has_tt
			}
			else = {
				add_province_modifier = {
					modifier = cultural_intermixing_modifier
					years = 5
					mode = add_and_extend
				}
			}
		}
	}
}

rise_of_the_ottomans.217 = {
	type = country_event
	category = situation_event
	title = rise_of_the_ottomans.217.title
	desc = rise_of_the_ottomans.217.desc
	image = "gfx/interface/illustrations/event/backgrounds/exterior/soldiers/syrian_soldiers_exterior.dds"

	immediate = {
		scope:target_subject = {
			ruler_or_regent = { save_scope_as = target_character }

			while =  {
				count = 2
				capital = { create_sub_unit_of_category = sub_unit_category:army_infantry }
			}
		}
	}

	option = {
		name = rise_of_the_ottomans.217.a

		scope:target_subject = {

			show_as_tooltip = {
				while =  {
					count = 2
					capital = { create_sub_unit_of_category = sub_unit_category:army_infantry }
				}
			}
			add_reform = government_reform:uc_bey_reform
			change_subject_type = subject_type:uc_bey
		}
	}
}

rise_of_the_ottomans.218 = {
	type = country_event
	category = situation_event
	title = rise_of_the_ottomans.218.title
	desc = rise_of_the_ottomans.218.desc
	image = "gfx/interface/icons/trade_goods/illustrations/_default.dds"
	historical_info = rise_of_the_ottomans.213.historical_info
	immediate = {
		ruler_or_regent = { save_scope_as = target_character }
	}

	option = {
		name = rise_of_the_ottomans.213.a

		historical_option = yes

		ai_chance = {
			factor = 100
		}

		grant_estate_privilege = estate_privilege:trunk_road_to_erzurum_privilege
		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = estate_satisfaction_mild_bonus
		}

		custom_tooltip = control_of_the_erzurum_trunk_road_tt
	}

	option = {
		name = rise_of_the_ottomans.218.b

		ai_chance = { factor = 0 }

		add_stability = stability_weak_penalty
		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = estate_satisfaction_severe_penalty
		}
	}
}

rise_of_the_ottomans.300 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.300.title
	desc = rise_of_the_ottomans.300.desc

	illustration_tags = {
		10 = interior
		10 = angry
	}
	immediate = {
		random_fort_in_country = {
			limit = {
				NOT = { has_location_modifier = recently_inspected_fortifications_modifier }
			}
			save_scope_as = target_location
		}
	}

	option = {
		name = rise_of_the_ottomans.300.a

		scope:target_location = {
			add_location_modifier = {
				modifier = decaying_defenses_modifier
				years = 2
				mode = add_and_extend
			}
		}
	}
}

rise_of_the_ottomans.400 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.400.title
	desc = rise_of_the_ottomans.400.desc
	fire_only_once = yes
	illustration_tags = {
		10 = exterior
		10 = happy
	}
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = rise_of_the_ottomans.400.a

		custom_tooltip = tur_press_claims_expanded_tt
	}
}

rise_of_the_ottomans.500 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.500.title
	desc = rise_of_the_ottomans.500.desc
	illustration_tags = {
		10 = exterior
		10 = angry
	}
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = rise_of_the_ottomans.500.a

		custom_tooltip = end_of_the_situation
	}
}

rise_of_the_ottomans.600 = {
	type = country_event
	category = situation_event

	title = rise_of_the_ottomans.600.title
	desc = rise_of_the_ottomans.600.desc
	historical_info = rise_of_the_ottomans.600.historical_info
	fire_only_once = yes

	immediate = {
		set_variable = roto600_variable
		ruler_or_regent = { save_scope_as = target_character }
		capital = { save_scope_as = target_location }
		if = {
			limit = {
				NOT = { country_rank = country_rank:rank_empire }
			}
			set_variable = was_not_empire_var
			set_country_rank = country_rank:rank_empire
		}
	}

	option = {
		name = rise_of_the_ottomans.600.a

		if = {
			limit = {
				has_variable = was_not_empire_var
			}
			custom_tooltip = we_are_now_empire_tt
		}
		else = { add_prestige = prestige_extreme_bonus }
	}

	after = {
		hidden_effect = {
			if = {
				limit = { has_variable = was_not_empire_var }
				remove_variable = was_not_empire_var
			}
		}

	}
}




