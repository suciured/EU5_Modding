namespace = black_death

black_death.1 = {
	type = country_event
	category = situation_event	

	title = black_death.1.title
	desc = black_death.1.desc
	
	image = "gfx/interface/illustrations/situation/black_death.dds"
	
	
	
	option = {
		name = black_death.1.a
		custom_tooltip = black_death.1.a.tt
	}

}

black_death.2 = {
	type = country_event
	category = situation_event	

	title = black_death.2.title
	desc = black_death.2.desc
	
	image = "gfx/interface/illustrations/situation/black_death.dds"
	
	option = {
		name = black_death.2.a
		add_stability = stability_mild_penalty
	}
}

black_death.100 = {
	type = country_event
	category = situation_event	
	category = situation_event

	title = black_death.100.title
	desc = black_death.100.desc
	
	image = "gfx/interface/illustrations/situation/black_death.dds"

	immediate = {
		if = {
			limit = { is_human = yes }
			set_variable = {
				name = bd_total_death_toll_variable
				value = "disease_country_deaths(disease:bubonic_plague)"
				months = 6
			}
		}
	}
	
	
	
	option = {
		name = black_death.100.a

		if = {
			limit = { has_variable = bd_total_death_toll_variable }

			custom_tooltip = total_death_toll_tt
		}
	}

}

black_death.101 = { # Plague-as-Punishment
	type = country_event
	category = situation_event

	title = black_death.101.t
	desc = black_death.101.desc

	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd101_cd }
		country_has_disease = disease:bubonic_plague
		religion = religion:catholic
	}

	immediate = {
		set_variable = bd101_cd
		if = {
			limit = {
				any_province = {
					any_location_in_province = {
						disease_presence = { disease = disease:bubonic_plague value > 0 }
					}
					region = root.capital.region
				}
			}
			random_province = {
				limit = {
					any_location_in_province = {
						disease_presence = { disease = disease:bubonic_plague value > 0 }
					}
					region = root.capital.region
				}
				save_scope_as = target_province
			}
		}
	}

	option = { # Order the flagellant' beat by town guards
		name = black_death.101.a

		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_severe_bonus
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
		if = {
			limit = { exists = scope:target_province }
			custom_tooltip = {
				text = plague_lessen_spread_piss_off_peasants_tt
				scope:target_province ?= {
					every_location_in_province = {
						limit = {
							disease_presence = { disease = disease:bubonic_plague value > 0 }
						}
						change_disease_presence = {
							disease = disease:bubonic_plague
							value = -0.05
						}
						every_pop = {
							limit = {
								owner = root
								pop_type = pop_type:peasants
							}
							add_pop_satisfaction = pop_satisfaction_severe_penalty
						}
					}
				}
			}
		}
	}

	option = { # Allow the flagellants to tell everyone the world is going to end
		name = black_death.101.b

		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_severe_bonus
		}
		add_stability = stability_mild_penalty
	}
}

black_death.102 = { # Guilds wage fixing during plague
	type = country_event
	category = situation_event

	title = black_death.102.t
	desc = black_death.102.desc

	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd102_cd }
		country_has_disease = disease:bubonic_plague
		
		any_owned_location = {
			population > 5.0
			disease_presence = { disease = disease:bubonic_plague value > 0 }
		}
	}

	immediate = {
		set_variable = bd102_cd
		random_owned_location = {
			limit = {
				population > 5.0
				disease_presence = { disease = disease:bubonic_plague value > 0 }
			}
			save_scope_as = target_location
		}
	}

	option = {
		name = black_death.102.a

		custom_tooltip = plague_every_pop_in_province_30_satisfaction_tt
		hidden_effect = {
			scope:target_location = {
				every_neighbor_location = {
					limit = { owner ?= ROOT }
					every_pop = {
						limit = {
							owner = root
						}
						add_pop_satisfaction = pop_satisfaction_mild_penalty
					}
				}
			}
		}
	}

	option = {
		name = black_death.102.b
		add_stability = stability_weak_bonus
		capital = {
			market = {
				add_merchant_power = {
					country = root
					key = merchants_not_supported
					years = 10
					power = merchant_power_severe_penalty
				}
			}
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_extreme_penalty
		}
	}
}

black_death.103 = { # Plague standarization
	type = country_event
	category = situation_event

	title = black_death.103.t
	desc = black_death.103.desc

	image = "gfx/interface/illustrations/situation/black_death.dds"
	
	
	trigger = {
		NOT = { has_variable = bd103_cd }
		country_has_disease = disease:bubonic_plague
		any_owned_location = { has_building_with_at_least_one_level = university }
	}

	immediate = { set_variable = bd103_cd }

	option = {
		name = black_death.103.a

		change_gold_effect = { scale = -4
		}
		random_owned_location = { 
			limit = { 
				disease_presence = { disease = disease:bubonic_plague value > 0 }
			}
			change_disease_presence = {
				disease = disease:bubonic_plague
				value = -0.10
			}
		}
	}

	option = {
		name = black_death.103.b
		add_prestige = prestige_mild_penalty
		change_societal_value = { type = traditionalist_vs_innovative value = societal_value_tiny_move_to_left }
	}
}

black_death.1001 = { # Countryside Escapade
	type = country_event
	category = situation_event

	title = black_death.1001.t
	desc = black_death.1001.desc


	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1001_cd }
		country_has_disease = disease:bubonic_plague
		any_owned_location = { 
			region = root.capital.region
			disease_presence = { disease = disease:bubonic_plague value > 0.35 } 
			is_capital = no 
		}
		capital = {
			disease_presence = { disease = disease:bubonic_plague value > 0.1 }
		}
		any_owned_location = {
			disease_presence = { disease = disease:bubonic_plague value <= 0.01 }
			location_rank = location_rank:rural_settlement
		}
	}

	immediate = {
		set_variable = bd1001_cd
		ordered_owned_location = {
			order_by = {
				value = "disease_presence(disease:bubonic_plague)"
				multiply = -1
			}
			limit = {
				region = root.capital.region
				is_capital = no
			}
			max = 1
			check_range_bounds = no
			save_scope_as = target_location
		}
	}

	option = { # Allow them to flee
		name = black_death.1001.a

		ordered_owned_location = {
			order_by = {
				value = "disease_presence(disease:bubonic_plague)"
				multiply = -1
			}
			limit = {
				region = root.capital.region
				disease_presence = { disease = disease:bubonic_plague value > 0.35 }
				is_capital = no
			}
			max = 3
			check_range_bounds = no
			add_location_modifier = {
				modifier = black_death_exodus_ruralization_attraction
				years = 2
				mode = add_and_extend
			}
		}
		capital = {
			add_location_modifier = {
				modifier = fleeing_pops_modifier
				years = 2
				mode = add_and_extend
			}
		}
		ordered_owned_location = {
			order_by = population
			limit = {
				region = root.capital.region
				is_capital = no
				disease_presence = { disease = disease:bubonic_plague value > 0.35 }
			}
			max = 1
			check_range_bounds = no
			add_location_modifier = {
				modifier = fleeing_pops_modifier
				years = 2
				mode = add_and_extend
			}
		}
	}

	option = { # Lock down exit from the cities
		name = black_death.1001.b

		add_stability = stability_severe_penalty
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_extreme_penalty
		}
	}
}

black_death.1002 = { # Conflict of Fads
	type = country_event
	category = situation_event

	title = black_death.1002.t
	desc = black_death.1002.desc


	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1002_cd }
		country_has_disease = disease:bubonic_plague
		any_owned_location ?= {
			disease_presence = { 
				disease = disease:bubonic_plague 
				value > 0 
			}
		} 
	}

	immediate = {
		set_variable = bd1002_cd
		random_owned_location = { 
			limit = {  disease_presence = { disease = disease:bubonic_plague value > 0 } }
			save_scope_as = target_location
		}
		scope:target_location = {
			province = { save_scope_as = target_province }
		}
	}

	option = { # Austerity
		name = black_death.1002.a

		add_stability = stability_weak_penalty
		if = {
			limit = {
				has_country_modifier = black_death_austerity_movement
			}
			add_estate_satisfaction = { type = estate_type:peasants_estate
				value = estate_satisfaction_severe_penalty
			}
		}
		else = {
			add_country_modifier = {
				modifier = black_death_austerity_movement
				years = 5
				mode = add_and_extend
			}
		}
	}

	option = { # Disco inferno!
		name = black_death.1002.b

		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_weak_bonus
		}
		custom_tooltip = plague_satisfaction_and_spread_tt
		hidden_effect = {
			scope:target_province = {
				every_location_in_province = {
					limit = {
						disease_presence = { disease = disease:bubonic_plague value > 0 }
						NOT = { disease_has_stagnated = disease:bubonic_plague}
						"disease_resistance(disease:bubonic_plague)" < 0.5
					}
					every_pop = {
						limit = {
							owner = root
							pop_type = pop_type:peasants
						}
						add_pop_satisfaction = pop_satisfaction_mild_bonus
					}
					change_disease_presence = {
						disease = disease:bubonic_plague
						value = 0.10
					}
				}
			}
		}
	}
}

black_death.1003 = { # Black Death Claims The Throne
	type = country_event
	category = situation_event
	title = black_death.1003.t
	desc = black_death.1003.desc

	image = "gfx/interface/illustrations/situation/black_death.dds"
	
	trigger = {
		NOT = { has_variable = bd1003_cd }
		has_ruler = yes
		ruler.location = {
			disease_presence = { disease = disease:bubonic_plague value > 0 }
		}
	}

	immediate = { 
		set_variable = bd1003_cd
		ruler ?= { save_scope_as = target_portrait_character } 
	}

	option = {
		name = black_death.1003.a
		kill_character = {
			target = ruler
			reason = disease
		}
	}

	option = {
		name = black_death.1003.b

		trigger = {
			capital.market = {
				"stockpile_in_market(goods:medicaments)" > 45
			}
		}

		capital.market = {
			add_goods_supply = {
				goods = goods:medicaments
				amount = market_goods_mild_loss
			}
		}
		random = {
			chance = 45
			kill_character = {
				target = ruler
				reason = disease
			}
		}
	}
}

black_death.1004 = { # The Dire Death
	type = country_event
	category = situation_event

	title = black_death.1004.t
	desc = black_death.1004.desc

	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1004_cd }
		country_has_disease = disease:bubonic_plague
		any_owned_rural_location = { 
			disease_presence = { disease = disease:bubonic_plague value > 0.25 } 
			NOT = { has_location_modifier = damaged_soil }
		}
	}

	immediate = {
		set_variable = bd1004_cd
		random_owned_rural_location = {
			limit = { disease_presence = { disease = disease:bubonic_plague value > 0.25 } }
			save_scope_as = target_location
		}
	}

	option = {
		name = black_death.1004.a

		scope:target_location = {
			add_location_modifier = {
				modifier = damaged_soil
				years = 2
				mode = add_and_extend
			}
			change_control = control_weak_penalty
		}
	}

	option = {
		name = black_death.1004.b

		scope:target_location = {
			every_pop = {
				limit = {
					owner = root
					pop_type = pop_type:peasants
				}
				add_pop_satisfaction = pop_satisfaction_ultimate_penalty
			}
			if = {
				limit = {
					max_control <= {
						value = {
							add = this.max_control
							subtract = 0.05
						}
					}
				}
				change_control = control_weak_bonus
			}
			else = {
				owner = {
					change_societal_value = { type = centralization_vs_decentralization value = societal_value_minor_move_to_left }
				}
			}
		}
	}
}

black_death.1005 = { # Hunt for the cause
	type = country_event
	category = situation_event

	title = black_death.1005.t
	desc = black_death.1005.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"


	trigger = { 
		NOT = { has_variable = bd1005_cd }
		country_has_disease = disease:bubonic_plague 
		any_owned_location = {
			disease_presence = { disease = disease:bubonic_plague value > 0 }
			is_capital = no
			region = root.capital.region
		}
	}

	immediate = { set_variable = bd1005_cd }

	option = {
		name = black_death.1005.a

		add_government_power = government_power_severe_penalty
		custom_tooltip = plague_masses_appeased_tt
	}

	option = {
		name = black_death.1005.b

		add_government_power = government_power_weak_bonus
		ordered_province = { 
			order_by = {
				value = province_satisfaction
				multiply = -1
			}
			limit = {
				region = root.capital.region
				NOT = {
					any_location_in_province = { 
						is_capital = yes
					}
				}
				any_location_in_province = {
					disease_presence = { disease = disease:bubonic_plague value > 0 }
				}
			}
			max = 1
			check_range_bounds = no
			every_location_in_province = {
				every_pop = {
					limit = { 
						owner = root
						pop_type = pop_type:peasants 
						culture = root.culture 
					}
					add_pop_satisfaction = pop_satisfaction_mild_penalty
				}
			}
		}
	}
}

black_death.1006 = { # The Maid Draft
	type = country_event
	category = situation_event

	title = black_death.1006.t
	desc = black_death.1006.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"


	trigger = {
		NOT = { has_variable = bd1006_cd }
		country_has_disease = disease:bubonic_plague
		societal_value:aristocracy_vs_plutocracy <= -50
	}

	immediate = { set_variable = bd1006_cd }

	option = {
		name = black_death.1006.a

		add_stability = stability_mild_penalty
		change_societal_value = { type = serfdom_vs_free_subjects value = societal_value_minor_move_to_left }
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}

	option = {
		name = black_death.1006.b

		add_government_power = government_power_mild_penalty
		change_societal_value = { type = serfdom_vs_free_subjects value = societal_value_minor_move_to_right }
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_extreme_penalty
		}
	}
}

black_death.1007 = { # Delhi's Dilemma
	type = country_event
	category = situation_event

	title = black_death.1007.t
	desc = black_death.1007.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1007_cd }
		tag = DLH
		country_has_disease = disease:bubonic_plague
		any_owned_location = {
			any_pop = { religion = root.religion }
			any_pop = { religion != root.religion }
		}
	}

	immediate = {
		set_variable = bd1007_cd
		random_owned_location = {
			limit = {
				any_pop = { religion = root.religion }
				any_pop = { religion != root.religion }
			}
			save_scope_as = target_location
			random_pop = {
				limit = { religion = root.religion }
				religion = { save_scope_as = target_owner_religion }
			}
			random_pop = {
				limit = { religion != root.religion }
				religion = { save_scope_as = target_other_religion }
			}
		}
	}

	option = {
		name = black_death.1007.a

		create_rebel = {
			category = religious
			religion = scope:target_other_religion
			save_scope_as = target_rebel
		}
		scope:target_location.province = {
			every_location_in_province = {
				every_pop = {
					limit = { religion = scope:target_other_religion }
					change_pop_allegiance = scope:target_rebel
				}
				every_pop = {
					limit = {
						religion = root.religion
					}
					split_pop = {
						fraction = 0.03
						religion = scope:target_other_religion
					}
				}
			}
		}
	}

	option = {
		name = black_death.1007.b

		custom_tooltip = black_death.1007.b.tl
		scope:target_location.province = {
			every_location_in_province = {
				limit = { is_capital = no }
				change_control = control_extreme_penalty
				change_prosperity = prosperity_severe_penalty
			}
		}
	}

	option = {
		name = black_death.1007.c

		add_stability = stability_mild_penalty
		add_government_power = government_power_mild_penalty
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_extreme_penalty
		}
	}
}

black_death.1008 = { # Ghost Ship Washes Ashore
	type = country_event
	category = situation_event

	title = black_death.1008.t
	desc = black_death.1008.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1008_cd }
		OR = {
			country_has_disease = disease:bubonic_plague
			any_known_country = { country_has_disease = disease:bubonic_plague }
		}
		capital.market = {
			has_merchant = root
		}
		any_owned_location = {
			is_coastal = yes
			region = root.capital.region
		}
	}

	immediate = {
		set_variable = bd1008_cd
		random_owned_location = {
			limit = {
				is_coastal = yes
				region = root.capital.region
			}
			save_scope_as = target_location
		}
		random_list = {
			1 = {
				set_variable = { name = outcome1 value = yes }
			}
			1 = {
				set_variable = { name = outcome2 value = yes }
			}
			1 = {
				set_variable = { name = outcome3 value = yes }
			}
		}
	}

	option = {
		name = black_death.1008.a

		custom_tooltip = custom_tooltip_generic_nothing_happens
	}

	option = {
		name = black_death.1008.b

		if = {
			limit = { has_variable = outcome1 }
			capital.market = {
				add_goods_supply = {
					goods = goods:silver
					amount = market_goods_mild_gain
				}
			}
		}
		else_if = {
			limit = { has_variable = outcome2 }
			capital.market = {
				add_goods_supply = {
					goods = goods:medicaments
					amount = market_goods_mild_gain
				}
			}
		}
		else_if = {
			limit = { has_variable = outcome3 }
			capital.market = {
				add_goods_supply = {
					goods = goods:weaponry
					amount = market_goods_weak_gain
				}
			}
		}
		scope:target_location = {
			if = {
				limit = {
					disease_presence = { disease = disease:bubonic_plague value <= 0.85 }
					NOT = { disease_has_stagnated = disease:bubonic_plague}
					"disease_resistance(disease:bubonic_plague)" < 0.5
				}
				set_disease_presence = {
					disease_outbreak = disease:bubonic_plague.original_outbreak
					value = 0.10
				}
			}
			else = {
				change_prosperity = prosperity_severe_penalty
			}
		}
	}
	after = {
		if = {
			limit = { has_variable = outcome1 }
			remove_variable = outcome1 
		}
		if = {
			limit = { has_variable = outcome2 }
			remove_variable = outcome2 
		}
		if = {
			limit = { has_variable = outcome3 }
			remove_variable = outcome3 
		}
	}
}

black_death.1009 = { # Campaign Woes
	type = country_event
	category = situation_event

	title = black_death.1009.t
	desc = black_death.1009.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1009_cd }
		country_has_disease = disease:bubonic_plague
		any_unit = {
			exists = this
			is_army = yes
			NOT = { has_unit_modifier = disease_outbreak }
		}
	}

	immediate = {
		set_variable = bd1009_cd
		random_unit = {
			limit = { 
				is_army = yes 
				NOT = { has_unit_modifier = disease_outbreak }
			}
			save_scope_as = random_unit
			unit_location = {
				save_scope_as = target_location
				province = {
					save_scope_as = target_province
				}
			}
		}
	}

	option = {
		name = black_death.1009.a

		scope:random_unit = {
			add_unit_modifier = {
				modifier = disease_outbreak
				years = 1
				mode = add_and_extend
			}
		}
	}

	option = {
		name = black_death.1009.b

		trigger = { exists = scope:target_province }
		scope:target_province = {
			if = {
				limit = { province_food >= 200 }
				change_province_food = -200
			}
			else = {
				every_location_in_province = { change_prosperity = prosperity_very_weak_penalty }
			}
		}
	}
}

black_death.1010 = { # Armenian Mud
	type = country_event
	category = situation_event

	title = black_death.1010.t
	desc = black_death.1010.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	
	trigger = {
		NOT = { has_variable = bd1010_cd }
		country_has_disease = disease:bubonic_plague
		religion.group = religion_group:muslim
		exists = capital.market
		any_market_with_merchants = {
			location.region = region:caucasus_region
			NOT = { this = root.capital.market }
			"stockpile_in_market(goods:clay)" > 15
		}
	}

	immediate = {
		set_variable = bd1010_cd
		random_market_with_merchants = {
			limit = {
				location.region = region:caucasus_region
				"stockpile_in_market(goods:clay)" > 15
				NOT = { this = root.capital.market }
			}
			save_scope_as = target_market
		}
		random_market_with_merchants = {
			limit = {
				market_possible_goods_trade_surplus = {
					goods = goods:clay
					country = root
					value >= 15
				}
				NOT = { this = root.capital.market }
			}
			save_scope_as = target_market2
		}
	}

	option = {
		name = black_death.1010.a

		add_stability = stability_weak_bonus
		change_gold_effect = { scale = -2
		}
		capital.market = {
			add_goods_supply = {
				goods = goods:clay
				amount = market_goods_weak_gain
			}
		}
		scope:target_market = {
			add_goods_supply = {
				goods = goods:clay
				amount = market_goods_weak_loss
			}
		}
		change_societal_value = { type = traditionalist_vs_innovative value = societal_value_tiny_move_to_left }
	}

	option = {
		name = black_death.1010.b

		trigger = {
			exists = scope:target_market2
		}

		change_gold_effect = { scale = -2
		}

		capital.market = {
			add_goods_supply = {
				goods = goods:medicaments
				amount = market_goods_weak_gain
			}
		}
		scope:target_market = {
			add_goods_supply = {
				goods = goods:medicaments
				amount = market_goods_weak_loss
			}
		}

		change_societal_value = { type = traditionalist_vs_innovative value = societal_value_tiny_move_to_right }
	}

	option = { # Opt-out if no money
		name = black_death.1010.c

		add_stability = stability_weak_penalty
	}
}

black_death.1011 = { # Refugees at The Gates
	type = country_event
	category = situation_event

	title = black_death.1011.t
	desc = black_death.1011.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1011_cd }
		any_known_country = { country_has_disease = disease:bubonic_plague }
		any_owned_non_rural_location = { 
			disease_presence = {  disease = disease:bubonic_plague value <= 0.1 } 
			NOT = { disease_has_stagnated = disease:bubonic_plague}
			"disease_resistance(disease:bubonic_plague)" < 0.5
		}
	}

	immediate = {
		set_variable = bd1011_cd
		random_owned_non_rural_location = {
			limit = { 
				disease_presence = { disease = disease:bubonic_plague value <= 0.1 } 
				NOT = { disease_has_stagnated = disease:bubonic_plague}
				"disease_resistance(disease:bubonic_plague)" < 0.5
			}
			save_scope_as = target_location
		}
		random_list = {
			1 = {
				set_variable = { name = outcome1 value = yes }
			}
			1 = {
				set_variable = { name = outcome2 value = yes }
			}
			1 = { }
		}
	}

	option = {
		name = black_death.1011.a

		#Random chance to spread the disease with the refugees
		if = {
			limit = { 
				country_has_disease = disease:bubonic_plague 
			}
			if = {
				limit = { has_variable = outcome1 }
				scope:target_location = {
					set_disease_presence = {
						disease_outbreak = disease:bubonic_plague.original_outbreak
						value = 0.05
					}
				}
			}
			else_if = {
				limit = { has_variable = outcome2 }
				scope:target_location = {
					set_disease_presence = {
						disease_outbreak = disease:bubonic_plague.original_outbreak
						value = 0.1
					}
				}
			}
		}
		custom_tooltip = pops_lose_10_satisfaction_tt
		hidden_effect = {
			scope:target_location = {
				every_pop = {
					limit = {
						owner = root
					}
					add_pop_satisfaction = pop_satisfaction_mild_penalty
				}
			}
		}
		#Add positive modifier
		scope:target_location = {
			add_location_modifier = {
				modifier = refugees_welcome
				years = 5
				mode = add_and_extend
			}
		}
		#Add negative modifiers
		ordered_owned_location = {  
			limit = { 
				is_capital = no
				this != scope:target_location
				region = root.capital.region
			}  
			order_by = {
				value = "disease_presence(disease:bubonic_plague)"
				multiply = -1
			}   
			max = 3  
			check_range_bounds = no  
			add_location_modifier = {
				modifier = fleeing_pops_modifier
				years = 5
				mode = add_and_extend
			}
		}
		change_societal_value = { type = traditionalist_vs_innovative value = societal_value_tiny_move_to_left }
	}

	option = {
		name = black_death.1011.b

		change_gold_effect = { scale = -1
		}

		scope:target_location = {
			add_location_modifier = {
				modifier = refugees_welcome
				years = 5
				mode = add_and_extend
			}
		}
		ordered_owned_location = {  
			limit = { 
				is_capital = no
				this != scope:target_location
				region = root.capital.region
			}  
			order_by = {
				value = "disease_presence(disease:bubonic_plague)"
				multiply = -1
			}   
			max = 1  
			check_range_bounds = no  
			add_location_modifier = {
				modifier = fleeing_pops_modifier
				years = 5
				mode = add_and_extend
			}
		}
	}

	option = {
		name = black_death.1011.c

		add_prestige = prestige_weak_penalty
		change_societal_value = { type = traditionalist_vs_innovative value = societal_value_tiny_move_to_right }
	}

	after = {
		if = {
			limit = { has_variable = outcome1 }
			remove_variable = outcome1 
		}
		if = {
			limit = { has_variable = outcome2 }
			remove_variable = outcome2 
		}
	}
}

black_death.1012 = { # By Order of The Pope
	type = country_event
	category = situation_event

	title = black_death.1012.t
	desc = black_death.1012.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1012_cd }
		country_has_disease = disease:bubonic_plague
		religion = religion:catholic
		NOT = { c:PAP = root }
		exists = c:PAP.ruler
		c:PAP = { 
			has_ruler = yes 
			NOT = { has_insulted = ROOT }
		}
	}

	immediate = {
		set_variable = bd1012_cd
		c:PAP.ruler = { save_scope_as = target_character } 
	}

	option = {
		name = black_death.1012.a

		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		add_religious_influence_if_valid = { VALUE = religious_influence_weak_bonus }
		add_government_power = government_power_weak_penalty
	}

	option = {
		name = black_death.1012.b

		add_stability = stability_weak_penalty
		add_prestige = prestige_weak_bonus
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_bonus
		}
		c:PAP = {
			add_opinion = {
				target = root
				modifier = opinion_insulted
			}
		}
		add_religious_influence_if_valid = { VALUE = religious_influence_weak_penalty }
	}
}

black_death.1013 = { # Village Stops Paying Taxes
	type = country_event
	category = situation_event

	title = black_death.1013.t
	desc = black_death.1013.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1013_cd }
		country_has_disease = disease:bubonic_plague
		any_owned_rural_location = { disease_presence = { disease = disease:bubonic_plague value > 0.25 } }
		NOT = { has_country_modifier = peasants_estate_less_tax_burden }
	}

	immediate = {
		set_variable = bd1013_cd
		random_owned_rural_location = {
			limit = { disease_presence = { disease = disease:bubonic_plague value > 0.25 } }
			save_scope_as = target_location
		}
	}

	option = {
		name = black_death.1013.a
		scope:target_location = { 
			change_control = control_mild_bonus 
			custom_tooltip = every_pop_25_satisfaction_loss_tt
			hidden_effect = {
				every_pop = {
					limit = {
						owner = root
					}
					add_pop_satisfaction = pop_satisfaction_extreme_penalty
				}
			}
		}
	}

	option = {
		name = black_death.1013.b

		scope:target_location = { 
			change_control = control_mild_penalty 
			custom_tooltip = every_pop_10_satisfaction_gain_tt
			hidden_effect = {
				every_pop = {
					limit = {
						owner = root
					}
					add_pop_satisfaction = pop_satisfaction_mild_bonus
				}
			}
		}
	}

	option = {
		name = black_death.1013.c

		add_stability = stability_mild_bonus
		add_country_modifier = {
			modifier = peasants_estate_less_tax_burden
			years = 5
			mode = add_and_extend
		}
	}
}

black_death.1014 = { # Epidemic Overextension
	type = country_event
	category = situation_event

	title = black_death.1014.t
	desc = black_death.1014.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1014_cd }
		NOT = { has_variable = had_overextension_event }
		country_has_disease = disease:bubonic_plague
		any_owned_location = {
			count > 25
			disease_presence = { disease = disease:bubonic_plague value > 0 }
		}
	}

	
	immediate = {
		set_variable = bd1014_cd
		save_scope_as = target_country
		set_variable = {
			name = had_overextension_event
			value = yes 
		}
		remove_variable = plagued_locations_variable
		set_variable = {
			name = plagued_locations_variable
			value = 0
		}
		ordered_owned_location = {
			order_by = {
				value = {
					value = proximity
					multiply = {
						value = "disease_presence(disease:bubonic_plague)"
					}
				}
			}
			limit = {
				disease_presence = { disease = disease:bubonic_plague value > 0 }
				is_capital = no
			}
			max = 50
			check_range_bounds = no
			set_variable = {
				name = far_away_locations
				value = yes
			}
			owner = {
				change_variable = {
					name = plagued_locations_variable
					add = 1
				}
			}
		}
		ordered_owned_location = {
			order_by = {
				value = {
					value = proximity
					multiply = -1
				}
			}
			limit = {
				has_variable = far_away_locations
			}
			max = 1
			check_range_bounds = no
			save_scope_as = target_location
		}
	}

	option = {
		name = black_death.1014.a

		add_country_modifier = {
			modifier = enforced_central_control_modifier
			years = 5
			mode = add_and_extend
		}
		change_societal_value = { type = centralization_vs_decentralization value = societal_value_move_to_left }
	}

	option = {
		name = black_death.1014.b

		custom_tooltip = far_away_locations_with_plague_loses_10_control_tt
		hidden_effect = {
			every_owned_location = {
				limit = { has_variable = plagued_locations_variable }
				change_control = control_mild_penalty
			}
		}
		
		change_societal_value = { type = centralization_vs_decentralization value = societal_value_move_to_right }
		add_government_power = {
			value = government_power_mild_penalty
			add = {
				value = var:plagued_locations_variable
				divide = 5
				multiply = -1
			}
		}
	}

	after = {
		every_owned_location = {
			limit = {
				has_variable = far_away_locations
			}
			remove_variable = far_away_locations
		}
		remove_variable = plagued_locations_variable
	}
}

black_death.1015 = { # Expired Medicine
	type = country_event
	category = situation_event

	title = black_death.1015.t
	desc = black_death.1015.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"


	trigger = {
		NOT = { has_variable = bd1015_cd }
		country_has_disease = disease:bubonic_plague
		capital.market = {
			"stockpile_in_market(goods:medicaments)" > 25
		}
	}

	immediate = { set_variable = bd1015_cd }

	option = {
		name = black_death.1015.a

	change_gold_effect = { scale = -2
		}
		capital.market = {
			add_goods_supply = {
				goods = goods:medicaments
				amount = market_goods_mild_loss
			}
		}
	}

	option = {
		name = black_death.1015.b

		trigger = {
			any_owned_location = {
				disease_presence = { disease = disease:bubonic_plague value > 0 }
				NOT = { disease_has_stagnated = disease:bubonic_plague}
				"disease_resistance(disease:bubonic_plague)" < 0.5
			}
		}

		custom_tooltip = every_location_with_plague_gets_10_more_tt
		hidden_effect = {
			every_owned_location = {
				limit = { 
					disease_presence = { disease = disease:bubonic_plague value > 0 }
					NOT = { disease_has_stagnated = disease:bubonic_plague}
					"disease_resistance(disease:bubonic_plague)" < 0.5
				}
				change_disease_presence = {
					disease = disease:bubonic_plague
					value = 0.1
				}
			}
		}
	}

	option = {
		name = black_death.1015.c

		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_extreme_penalty
		}
		add_gold_to_estate = {
			estate_type = estate_type:burghers_estate
			value = { value = root.monthly_income_trade_and_tax multiply = -2 }
		}
		every_market_present_in_country = {
			add_merchant_power = {
				country = root
				key = merchants_not_supported
				months = 160
				power = merchant_power_mild_penalty
			}
		}
	}
}

black_death.1016 = { # Social Cravings
	type = country_event
	category = situation_event

	title = black_death.1016.t
	desc = black_death.1016.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = { 
		NOT = { has_variable = bd1016_cd }
		country_has_disease = disease:bubonic_plague 
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 1.5
			has_country_modifier = black_death_austerity_movement
		}
	}

	immediate = {
		set_variable = bd1016_cd
		random_owned_location ?= {
			limit = { 
				disease_presence = { disease = disease:bubonic_plague value > 0 } 
				NOT = { disease_has_stagnated = disease:bubonic_plague}
				"disease_resistance(disease:bubonic_plague)" < 0.5
			}
			save_scope_as = target_location
		}
	}

	option = {
		name = black_death.1016.a
		
		if = {
			limit = {
				exists = scope:target_location
			}
			scope:target_location = {
				province = {
					every_location_in_province = {
						limit = {
							disease_presence = { disease = disease:bubonic_plague value > 0 }
							NOT = { disease_has_stagnated = disease:bubonic_plague}
							"disease_resistance(disease:bubonic_plague)" < 0.5
						}
						change_disease_presence = {
							disease = disease:bubonic_plague
							value = 0.10
						}
					}
					every_location_in_province = {
						limit = {
							disease_presence = { disease = disease:bubonic_plague value = 0 }
							NOT = { disease_has_stagnated = disease:bubonic_plague}
							"disease_resistance(disease:bubonic_plague)" < 0.5
						}
						set_disease_presence = {
							disease_outbreak = disease:bubonic_plague.original_outbreak
							value = 0.05
						}
					}
				}
			}
		}
		else = {
			add_government_power = government_power_mild_penalty
		}
		change_societal_value = { type = serfdom_vs_free_subjects value = societal_value_minor_move_to_right }
	}

	option = {
		name = black_death.1016.b

		add_stability = stability_weak_penalty
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
		change_societal_value = { type = serfdom_vs_free_subjects value = societal_value_tiny_move_to_left }
	}
}

black_death.1017 = { # Bloodletting Galore
	type = country_event
	category = situation_event

	title = black_death.1017.t
	desc = black_death.1017.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = { 
		NOT = { has_variable = bd1017_cd }
		country_has_disease = disease:bubonic_plague 
		any_owned_location = {
			disease_presence = { disease = disease:bubonic_plague value > 0 }
		}
	}
	
	immediate = {
		set_variable = bd1017_cd
		random_owned_location = {
			limit = {
				disease_presence = { disease = disease:bubonic_plague value > 0 }
			}
			save_scope_as = target_location 
			random_neighbor_location = {
				save_scope_as = target_location2
			}
		}
	}

	option = {
		name = black_death.1017.a

		add_research_progress = research_progress_mild_bonus

		scope:target_location = {
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:peasants
				}
				add_pop_satisfaction = pop_satisfaction_extreme_penalty
			}
			change_prosperity  = prosperity_very_weak_bonus
		}
		add_stability = stability_mild_penalty
		change_societal_value = { type = traditionalist_vs_innovative value = societal_value_tiny_move_to_right }
	}

	option = {
		name = black_death.1017.b

		add_research_progress = research_progress_weak_penalty
		change_societal_value = { type = traditionalist_vs_innovative value = societal_value_tiny_move_to_left }
		change_societal_value = { type = spiritualist_vs_humanist value = societal_value_tiny_move_to_left }
	}
}

black_death.1018 = { # Foreign Aid
	type = country_event
	category = situation_event
	title = black_death.1018.t
	desc = black_death.1018.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = { 
		NOT = { has_variable = bd1018_cd }
		any_neighbor_country = { 
			NOT = { is_rival_of = ROOT }
			NOT = { is_enemy_of = ROOT }
			NOT = { 
				has_opinion = {
					target = ROOT 
					modifier = opinion_sent_help 
				}
			}
			NOT = { 
				has_opinion = { 
					target = ROOT 
					modifier = denied_aid 
				}
			}
			country_has_disease = disease:bubonic_plague 
			capital.market = {
				has_merchant = prev
			}
		} 
		capital.market = {
			NOT = {
				has_merchant_power = { 
					country = ROOT
					key = merchants_not_supported 
				}
			}
			NOT = {
				has_merchant_power = { 
					country = ROOT
					key = BANNED_EXPORTS 
				}
			}
		}
	}

	immediate = {
		set_variable = bd1018_cd
		random_neighbor_country = {
			limit = { 
				NOT = { is_rival_of = ROOT }
				NOT = { is_enemy_of = ROOT }
				country_has_disease = disease:bubonic_plague 
			}
			save_scope_as = charity_target
		}
	}

	option = {
		name = black_death.1018.a

		scope:charity_target = {
			add_opinion = {
				target = root
				modifier = opinion_sent_help
			}
		}

		capital.market = {
			add_merchant_power = {
				country = root
				key = merchants_not_supported
				months = 60
				power = merchant_power_weak_penalty
			}
		}
	}

	option = {
		name = black_death.1018.b

		if = {
			limit = { country_has_estate = estate_type:burghers_estate }
			add_estate_satisfaction = { 
				type = estate_type:burghers_estate
				value = estate_satisfaction_extreme_penalty
			}
		}
		else = { add_legitimacy = legitimacy_weak_penalty }

		capital.market = {
			add_merchant_power = {
				country = root
				key = BANNED_EXPORTS
				months = 60
				power = merchant_power_weak_bonus
			}
		}
	}

	option = {
		name = black_death.1018.c

		scope:charity_target = {
			add_opinion = {
				target = root
				modifier = denied_aid
			}
		}

		capital.market = {
			add_goods_supply = {
				goods = goods:medicaments
				amount = market_goods_weak_gain
			}
		}
	}
}

scripted_trigger miniority_pop_trigger = {
	culture != root.culture
	culture = { NOT = { is_accepted_in = root } }
}
scripted_trigger miniority_location_trigger = {
	any_pop = { miniority_pop_trigger = yes }
	any_pop = { culture = root.culture }
}
scripted_trigger miniority_province_trigger = {
	culture_percentage = { culture = root.culture value <= 0.9 }
	any_location_in_province = { miniority_location_trigger = yes }
}
black_death.1020 = { # Scapegoats
	type = country_event
	category = situation_event
	title = black_death.1020.t
	desc = black_death.1020.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"
	trigger = { 
		NOT = { has_variable = bd1020_cd }
		country_has_disease = disease:bubonic_plague 
		any_province = { miniority_province_trigger = yes }
	}
	immediate = {
		set_variable = bd1020_cd
		random_province = {
			limit = { miniority_province_trigger = yes }
			save_scope_as = target_province
			random_location_in_province = {
				limit = { miniority_location_trigger = yes }
				save_scope_as = target_location
				random_pop = {
					limit = { miniority_pop_trigger = yes }
					culture = { save_scope_as = target_culture }
				}
			}
		}
	}
	option = {
		name = black_death.1020.a
		add_effect_scaling_with_societal_value = {
			societal_value = spiritualist_vs_humanist
			effect = stability
			operator = divide
			value = 5
		}
		custom_tooltip = every_location_with_target_culture_receives_changes_tt
		hidden_effect = {
			every_owned_location = {
				limit = { any_pop = { culture = scope:target_culture } }
				every_pop = {
					limit = {
						owner = root
						culture = scope:target_culture
					}
					add_pop_satisfaction = pop_satisfaction_extreme_bonus
				}
				every_pop = {
					limit = {
						owner = root
						culture = root.culture
					}
					add_pop_satisfaction = pop_satisfaction_mild_penalty
				}
			}
		}
		change_societal_value = { type = spiritualist_vs_humanist value = societal_value_minor_move_to_right }
	}

	option = {
		name = black_death.1020.b
		add_effect_scaling_with_societal_value = {
			societal_value = spiritualist_vs_humanist
			effect = stability
			operator = divide
			value = -5
		}
		custom_tooltip = every_location_with_target_culture_receives_changes2_tt
		hidden_effect = {
			every_owned_location = {
				limit = { any_pop = { culture = scope:target_culture } }
				every_pop = {
					limit = {
						owner = root
						culture = scope:target_culture
					}
					add_pop_satisfaction = pop_satisfaction_ultimate_penalty
				}
				every_pop = {
					limit = {
						owner = root
						culture = root.culture
					}
					add_pop_satisfaction = pop_satisfaction_mild_bonus
				}
			}
		}
		change_societal_value = { type = spiritualist_vs_humanist value = societal_value_minor_move_to_left }
	}
}

black_death.1021 = { # Plague Profiteers
	type = country_event
	category = situation_event

	title = black_death.1021.t
	desc = black_death.1021.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"


	trigger = { 
		NOT = { has_variable = bd1021_cd }
		country_has_disease = disease:bubonic_plague 
		capital.market = {
			has_merchant = root
			NOT = {
				market_possible_goods_trade_surplus = {
					goods = goods:medicaments
					country = root
					value >= 1
				}
			}
		}
	}

	immediate = { set_variable = bd1021_cd }

	option = {
		name = black_death.1021.a

		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_extreme_penalty
		}
		capital.market = {
			add_goods_supply = {
				goods = goods:medicaments
				amount = market_goods_weak_gain
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_bonus
		}
	}

	option = {
		name = black_death.1021.b

		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_bonus
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_extreme_penalty
		}
	}

	option = {
		name = black_death.1021.c

		change_gold_effect = { scale = 1.25
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_extreme_penalty
		}
	}
}

black_death.1023 = { # Everyone's at Risk
	type = country_event
	category = situation_event

	title = black_death.1023.t
	desc = black_death.1023.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"


	trigger = {
		NOT = { has_variable = bd1023_cd }
		country_has_disease = disease:bubonic_plague
		any_owned_location = { 
			disease_presence = { disease = disease:bubonic_plague value > 0.3 } 
			local_control >= 0.1
			is_capital = no
			any_pop = {
				pop_type = pop_type:nobles
				pop_satisfaction <= 0.5
			}
		}
	}

	immediate = {
		set_variable = bd1023_cd
		random_owned_location = {
			limit = {
				disease_presence = { disease = disease:bubonic_plague value > 0.3 } 
				local_control >= 0.1
				is_capital = no
				any_pop = {
					pop_type = pop_type:nobles
					pop_satisfaction <= 0.5
				}
			}
			save_scope_as = target_location
		}
	}

	option = {
		name = black_death.1023.a

		scope:target_location = {
			change_control = control_mild_penalty
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:peasants
				}
				add_pop_satisfaction = pop_satisfaction_extreme_penalty
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_weak_bonus
		}
		add_army_tradition = army_tradition_weak_penalty
	}

	option = {
		name = black_death.1023.b

		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_extreme_penalty
		}
		add_stability = stability_mild_penalty
	}
}

black_death.1024 = { # Silk Road Crisis
	type = country_event
	category = situation_event

	title = black_death.1024.t
	desc = black_death.1024.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	weight_multiplier = {
		base = 1
		modifier = {
			add = 2
			any_market_present_in_country = { location = { disease_presence = { disease = disease:bubonic_plague value > 0.20 } } }
		}
	}

	trigger = {
		NOT = { has_variable = bd1024_cd }
		country_has_disease = disease:bubonic_plague
		NOT = { has_country_modifier = open_silk_trade_modifier }
		capital.region = region:persia_region
		any_market_present_in_country = { exists = this }
		NOT = { 
			any_owned_location = { has_location_modifier = state_textiles_modifier }
		}
	}

	immediate = { set_variable = bd1024_cd }
	option = {	
		name = black_death.1024.a	#Free Trade

		add_gold = {
			value = monthly_income_trade_and_tax
			multiply = -4
		}

		add_country_modifier = {
			modifier = open_silk_trade_modifier
			years = 10
			mode = add_and_extend
		}
	}

	option = {
		name = black_death.1024.b	#Mercantilism

		trigger = {
			any_owned_location = {
				raw_material = goods:silk
			}
		}

		add_gold = {
			value = monthly_income_trade_and_tax
			multiply = -4
		}

		every_owned_location = {
			limit = {
				raw_material = goods:silk
			}
			add_location_modifier = {
				modifier = state_textiles_modifier
				years = 10
				mode = add_and_extend 
			}
		}
	}

	option = {
		name = flavor_boh.27.b

		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = estate_satisfaction_extreme_penalty
		}
		add_stability = stability_weak_penalty
	}
}

black_death.1025 = { # Plague Unrest
	type = country_event
	category = situation_event

	title = black_death.1025.t
	desc = black_death.1025.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	trigger = {
		NOT = { has_variable = bd1025_cd }
		country_has_disease = disease:bubonic_plague
		any_owned_location = { disease_presence = { disease = disease:bubonic_plague value > 0.30 } }
		any_neighbor_country ?= {
			count > 0
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 1
			any_owned_location = {
				count > 1
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
		modifier = {
			add = 1
			any_owned_location = {
				count > 2
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
		modifier = {
			add = 1
			any_owned_location = {
				count > 3
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
		modifier = {
			add = 1
			any_owned_location = {
				count > 4
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
		modifier = {
			add = 1
			any_owned_location = {
				count > 5
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
		modifier = {
			add = 2
			any_owned_location = {
				count > 6
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
		modifier = {
			add = 4
			any_owned_location = {
				count > 8
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
		modifier = {
			add = 8
			any_owned_location = {
				count > 12
				disease_presence = { disease = disease:bubonic_plague value > 0.20 } 
			}
		}
	}

	immediate = { 
		set_variable = bd1025_cd
		random_neighbor_country ?= { save_scope_as = blame_target } 
	}

	option = {
		name = black_death.1025.a

		custom_tooltip = every_location_with_plague_scaling_satisfaction_loss_tt
		hidden_effect = {
			every_owned_location = {
				limit = { 
					disease_presence = { disease = disease:bubonic_plague value > 0 }
				}
				every_pop = {
					limit = {
						owner = root
					}
					add_pop_satisfaction = {
						value = {
							value = -1
							multiply = location.local_control
							divide = 10
							max = -0.05
						}
					}
				}
			}
		}
	}

	option = {
		name = black_death.1025.b

		change_gold_effect = { scale = -4
		}
	}

	option = {
		name = black_death.1025.c

		scope:blame_target = {
			add_opinion = {
				target = root
				modifier = opinion_insulted
			}
		}
	}
}

black_death.1026 = { # Another one bites the dust...
	type = country_event
	category = situation_event

	title = black_death.1026.title
	desc = black_death.1026.desc

	image = "gfx/interface/illustrations/situation/black_death.dds"


	trigger = {
		NOT = { has_variable = bd1026_cd }
		any_character = {
			in_cabinet = yes
		}
		country_has_disease = disease:bubonic_plague
	}

	immediate = {
		set_variable = bd1026_cd 
		random_character = {
			limit = {
				in_cabinet = yes
			}
			save_scope_as = target_character
		}
		kill_character = {
			target = scope:target_character
			reason = fever
		}
	}

	option = {
		name = black_death.1026.a

		show_as_tooltip = {
			kill_character = {
				target = scope:target_character
				reason = fever
			}
		}
	}
}
