namespace = character_events

#The Changing behavior of target_character
character_events.1 = {
	type = country_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:target_character }
				desc = character_events.1.title
			}
			triggered_desc = {
				desc = character_events.1.title.no_event_target
			}
		}
	}
	desc = character_events.1.desc	
	trigger = {
		OR = {
			AND = {
				has_ruler = yes
				ruler ?= { has_character_modifier = erratic }
			}
			AND = {
				has_regent = yes
				regent ?= { has_character_modifier = erratic }
			}
		}
	}
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	immediate = {
		event_illustration_estate_effect = {
   	 		foreground = estate_type:peasants_estate
    		background = estate_type:peasants_estate
		}
		if = {
			limit = { has_ruler = yes }
			ruler ?= { save_scope_as = target_character }
		}
		else = {
			regent ?= { save_scope_as = target_character }
		}
		scope:target_character = {
			set_variable = has_erratic_modifier
			if = { limit = { has_character_modifier = erratic_angry } 		set_variable = erratic_angry_variable }
			if = { limit = { has_character_modifier = erratic_excited } 	set_variable = erratic_excited_variable }
			if = { limit = { has_character_modifier = erratic_paranoid } 	set_variable = erratic_paranoid_variable }
			if = { limit = { has_character_modifier = erratic_passive } 	set_variable = erratic_passive_variable }
			if = { limit = { has_character_modifier = erratic_confusing }	set_variable = erratic_confusing_variable }
		}
	}
	option = {
		name = character_events.1.a
		add_legitimacy = legitimacy_weak_penalty
		scope:target_character = {
			hidden_effect = {
				remove_character_modifier = erratic_angry
				remove_character_modifier = erratic_excited
				remove_character_modifier = erratic_paranoid
				remove_character_modifier = erratic_passive
				remove_character_modifier = erratic_confusing
			}
			random_list = {
				1 = { trigger = { NOT = { has_variable = erratic_angry_variable } } add_character_modifier = { modifier = erratic_angry mode = add_and_extend days = -1 } }
				1 = { trigger = { NOT = { has_variable = erratic_excited_variable } } add_character_modifier = { modifier = erratic_excited mode = add_and_extend days = -1 } }
				1 = { trigger = { NOT = { has_variable = erratic_paranoid_variable } } add_character_modifier = { modifier = erratic_paranoid mode = add_and_extend days = -1 } }
				1 = { trigger = { NOT = { has_variable = erratic_passive_variable } } add_character_modifier = { modifier = erratic_passive mode = add_and_extend days = -1 } }
				1 = { trigger = { NOT = { has_variable = erratic_confusing_variable } } add_character_modifier = { modifier = erratic_confusing mode = add_and_extend days = -1 } }
			}
			remove_variable = erratic_angry_variable
			remove_variable = erratic_excited_variable
			remove_variable = erratic_paranoid_variable
			remove_variable = erratic_passive_variable
			remove_variable = erratic_confusing_variable
		}
	}
}