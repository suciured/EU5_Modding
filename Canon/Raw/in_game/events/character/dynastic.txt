namespace = dynastic
dynastic.1 = {
	type = country_event
	title = dynastic.1.title
	desc = dynastic.1.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		religion = religion:catholic
		has_ruler_in_country = yes
		ruler ?= {
			is_female = no
			is_adult = yes
			has_dynasty = yes
			num_of_children < 1
		}
		has_regent = no
		has_consort = no

		government_type = government_type:monarchy
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		create_character = {
			age = { 20 35 }
			female = yes
			create_in_limbo = yes
			save_scope_as = devil_char
		}
	}

	option = {
		name = dynastic.1.a
		add_legitimacy = legitimacy_extreme_penalty
		custom_tooltip = {
			text = new_child_for_ruler
			create_character = {
				dynasty = root.ruler.dynasty
				culture = root.ruler.culture
				religion = root.ruler.religion
				father = root.ruler
				mother = scope:devil_char
				age = 0
				no_stats = yes
				trait_category = none
			}
		}
	}
	option = {
		name = dynastic.1.b
		add_religious_influence_if_valid = { VALUE = 2.00 }
		hidden_effect = {
			kill_character_silently = scope:devil_char
		}
	}
}

dynastic.2 = {
	type = country_event
	title = dynastic.2.title
	desc = dynastic.2.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		ruler ?= { is_female = no }
		has_heir = yes
		heir = {
			age_in_years > 10
			age_in_years < 20
			owner = root
		}
		has_regent = no
		government_type = government_type:monarchy
		religion = religion:catholic
	}


	option = {
		name = dynastic.2.a
		kill_character = {
			target = heir
			reason = fever
		}
		add_religious_influence = religious_influence_mild_bonus
	}
}

dynastic.3 = {
	type = country_event
	title = dynastic.3.title
	desc = dynastic.3.desc
	illustration_tags = {
		10 = armed
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		has_heir = yes
		has_regent = no
		heir = { age_in_years >= 15 owner = root }
		government_type = government_type:monarchy
		stability < -40
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		heir = {
			save_scope_as = heir_char
		}
	}

	option = {
		name = dynastic.3.a
		kill_character = {
			target = ruler
			reason = assassination
			killer = heir
		}
		add_country_modifier = { modifier = illegitimate_ruler years = 5 mode = add_and_extend }
	}
	option = {
		name = dynastic.3.b
		kill_character = {
			target = heir
			reason = self_defence
			killer = ruler
		}
	}
}

dynastic.4 = {
	hide_portraits = yes
	type = country_event
	title = dynastic.4.title
	desc = dynastic.4.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		war_exhaustion >= 4
		has_heir = yes
		heir = {
			age_in_years > 3
			age_in_years < 11
			owner = root
		}
		government_type = government_type:monarchy
		OR = {
			has_ruler_in_country = yes
			AND = {
				has_regent = yes
				regency_type = regency_type:consort_regency
				consort ?= { is_female = no }
			}
		}
	}

	immediate = {
		ruler_or_regent ?= {
			save_scope_as = ruler_char
		}
		heir = {
			save_scope_as = heir_char
		}
	}

	option = {
		name = dynastic.4.a
		change_gold_effect = { scale = -2 }
		add_war_exhaustion = war_exhaustion_mild_bonus
	}
	option = {
		name = dynastic.4.b
		add_manpower = {
			value = root.monthly_manpower
			add = 0.5
			multiply = 2
		}
	}
}

dynastic.5 = {
	type = country_event
	title = dynastic.5.title
	desc = dynastic.5.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		current_month >= 3
		current_month < 6
		has_ruler_in_country = yes
		ruler ?= {
			is_female = no
			is_adult = yes
			num_of_children < 1
			is_married = no
		}
		has_regent = no
		government_type = government_type:monarchy
		has_consort = no
	}


	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		create_character = {
			culture = root.ruler.culture
			religion = root.ruler.religion
			age = { 18 20 }
			female = yes
			trait_category = none

			add_trait = trait:righteous
			save_scope_as = young_female
		}
	}

	option = {
		name = dynastic.5.a
		ruler ?= {
			marry_character = scope:young_female
		}
		add_legitimacy = legitimacy_weak_penalty
	}
	option = {
		name = dynastic.5.b
		trigger = {
			ruler ?= { age_in_years > 35 }
		}
		scope:young_female = { change_father = root.ruler }
	}
	option = {
		name = dynastic.5.c
		add_legitimacy = legitimacy_weak_bonus
		hidden_effect = {
			kill_character_silently = scope:young_female
		}
	}
}

scripted_trigger male_eligible_for_hookup = {
	is_alive = yes
	has_estate = estate_type:nobles_estate
	character_can_marry_trigger = yes
	is_adult = yes
	is_female = no
}

scripted_trigger female_eligible_for_hookup = {
	is_alive = yes
	has_estate = estate_type:nobles_estate
	character_can_marry_trigger = yes
	is_adult = yes
	is_female = yes
}

dynastic.6 = {
	hide_portraits = yes
	type = country_event
	title = dynastic.6.title
	desc = dynastic.6.desc
	illustration_tags = {
		10 = happy
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		ruler ?= {
			num_of_children < 1
			has_dynasty = yes
		}
		has_regent = no
		government_type = government_type:monarchy
		ruler ?= {
			is_adult = yes
		}
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}

		if = {
			limit = {
				ruler ?= { is_female = no }
			}

			if = {
				limit = {
					any_character = { female_eligible_for_hookup = yes }
				}
				
				random_character = {
					limit = { female_eligible_for_hookup = yes }
					save_scope_as = hookup_char
				}
			}

			else = {	
				create_character = {
					estate = estate_type:nobles_estate
					age = { 18 30 }
					female = yes
					create_in_limbo = yes
					save_scope_as = hookup_char
				}
			}

		}
		else = {

			if = {
				limit = {
					any_character = { male_eligible_for_hookup = yes }
				}
				
				random_character = {
					limit = { male_eligible_for_hookup = yes }
					save_scope_as = hookup_char
				}
			}

			else = {	
				create_character = {
					estate = estate_type:nobles_estate
					age = { 18 30 }
					female = no
					create_in_limbo = yes
					save_scope_as = hookup_char
				}
			}

			create_character = {
				estate = estate_type:nobles_estate
				age = { 18 30 }
				female = no
				create_in_limbo = yes
				save_scope_as = hookup_char
			}
		}
	}

	option = {
		name = dynastic.6.a
		trigger = {
			has_ruler_in_country = yes
			ruler ?= { is_female = no }
		}

		hidden_effect = {
			scope:hookup_char = { move_country = root }
		}
		if = {
			limit = {
				scope:hookup_char = {
					is_pregnant = no
					character_age < 45
				}
			}
			trigger_event_silently = { id = dynastic.6001 months = 9 }
		}
		add_prestige = prestige_weak_bonus
	}
	option = {
		name = dynastic.6.b
		trigger = {
			has_ruler_in_country = yes
			ruler ?= { is_female = yes }
		}
		
		hidden_effect = {
			scope:hookup_char = { move_country = root }
		}
		if = {
			limit = {
				ruler ?= {
					is_pregnant = no
					character_age < 45
				}
			}
			trigger_event_silently = { id = dynastic.6001 months = 9 }
		}
		add_prestige = prestige_weak_bonus
	}
	option = {
		name = dynastic.6.c
		add_legitimacy = legitimacy_weak_bonus

		hidden_effect = {
			scope:hookup_char = {
				if = {
					limit = { 
						owner ?= {
							NOT = { this = root }
						}
					}
					kill_character_silently = scope:hookup_char
				}
				else = {
					scope:hookup_char = { banish_character = yes }
				}
			}
		}
	}
}

dynastic.6001 = {
	type = country_event
	title = dynastic.6001.title
	desc = dynastic.6001.desc

	illustration_tags = {
		10 = happy
		10 = interior
	}

	trigger = {
		OR = {
			AND = {
				scope:ruler_char ?= {
					is_female = no
				}
				scope:hookup_char ?= {
					is_alive = yes
					is_pregnant = no
				}
			}
			scope:ruler_char ?= {
				is_female = yes
				is_alive = yes
				is_pregnant = no
			}
		}
	}

	immediate = {
		random_list = {
			50 = {
				save_scope_value_as = {
					name = char_sex
					value = yes
				}
			}
			50 = {
				save_scope_value_as = {
					name = char_sex
					value = no
				}
			}
		}
		if = {
			limit = {
				scope:ruler_char = {
					is_female = no
				}
			}
			create_character = {
				dynasty = scope:ruler_char.dynasty
				culture = scope:ruler_char.culture
				religion = scope:ruler_char.religion
				father = scope:ruler_char
				mother = scope:hookup_char
				age = 0
				female = scope:char_sex
				no_stats = yes
				trait_category = none
				add_character_modifier = { modifier = bastard years = -1 mode = add_and_extend }
				save_scope_as = target_child
			}
		}
		else = {
			create_character = {
				dynasty = scope:ruler_char.dynasty
				culture = scope:ruler_char.culture
				religion = scope:ruler_char.religion
				father = scope:hookup_char
				mother = scope:ruler_char
				age = 0
				female = scope:char_sex
				no_stats = yes
				trait_category = none
				add_character_modifier = { modifier = bastard years = -1 mode = add_and_extend }
				save_scope_as = target_child
			}
		}
	}

	option = {
		name = dynastic.6001.a
		trigger = {
			OR = {
				has_ruler = no
				ruler = { dip <= 70 }
			}
			OR = {
				has_consort = no
				consort = {
					is_alive = no
					character_age > 45
				}
			}
		}
		scope:hookup_char = { move_country = root }
		add_prestige = prestige_mild_penalty
	}

	option = {
		name = dynastic.6001.b
		trigger = {
			ruler ?= { dip > 70 }
			consort ?= {
				is_alive = yes
				character_age <= 45
			}
		}
		add_prestige = legitimacy_weak_bonus
	}

	option = {
		name = dynastic.6001.c
		add_prestige = legitimacy_mild_penalty
	}
}

dynastic.7 = {
	type = country_event
	title = dynastic.7.title
	desc = dynastic.7.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		has_heir = yes
		has_regent = no

		ruler ?= {
			any_child = {
				is_alive = yes
				age_in_years < 15
				owner = root
			}
		}
		government_type = government_type:monarchy
	}

	immediate = {
		ruler ?= {
			random_child = {
				limit = {
					is_alive = yes
					age_in_years < 15
					owner = root
				}
				save_scope_as = target_child
			}
		}
		capital = {
			save_scope_as = target_location
		}
	}


	option = {
		name = dynastic.7.a
		change_gold_effect = { scale = -2.40 }
		random_list = {
			50 = {
				kill_character = {
					target = scope:target_child
					reason = fever
				}
			}
			50 = {
				add_legitimacy = legitimacy_weak_bonus
			}
		}
	}
	option = { #This should be highlighted if we get the ability
		name = dynastic.7.b
		trigger = {
			owns = location:salerno
			location:salerno = {
				has_building_with_at_least_one_level = medical_school
			}
		}
		change_gold_effect = { scale = -3.00 }
		random_list = {
			25 = {
				kill_character = {
					target = scope:target_child
					reason = fever
				}
			}
			75 = {
				add_legitimacy = legitimacy_weak_bonus
			}
		}
	}
	option = {
		name = dynastic.7.c
		random_list = {
			75 = {
				kill_character = {
					target = scope:target_child
					reason = fever
				}
			}
			25 = {
				add_legitimacy = legitimacy_extreme_bonus
			}
		}
	}
}

dynastic.8 = {
	type = country_event
	title = dynastic.8.title
	desc = dynastic.8.desc
	illustration_tags = {
		10 = regular
		10 = exterior
	}
	trigger = {
		religion.group = religion_group:christian
		has_ruler_in_country = yes
		ruler ?= {
			num_of_children < 1
			has_dynasty = yes
		}
		has_regent = no
		government_type = government_type:monarchy
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		create_character = {
			culture = root.ruler.culture
			religion = root.ruler.religion
			estate = estate_type:peasants_estate
			age = 0
			no_stats = yes
			trait_category = none
			create_in_limbo = yes
			save_scope_as = reed_child_char
		}
	}


	option = {
		name = dynastic.8.a
		trigger = {
			OR = {
				ruler ?= {
					is_female = no
				}
				ruler ?= {
					is_married = no
				}
			}
		}
		ruler = {
			adopt_character = scope:reed_child_char
		}
		scope:reed_child_char = {
			change_character_estate = estate_type:nobles_estate
		}
		hidden_effect = {
			scope:reed_child_char = { move_country = root }
		}
		add_legitimacy = legitimacy_mild_penalty
		add_country_modifier = { modifier = adopted_heir years = 5 mode = add_and_extend }
	}

	option = {
		name = dynastic.8.b
		add_gold = 5.00
		kill_character = {
			target = scope:reed_child_char
			reason = starvation
		}
	}
}

dynastic.9 = {
	type = country_event
	title = dynastic.9.title
	desc = dynastic.9.desc
	illustration_tags = {
		10 = happy
		10 = exterior
	}
	trigger = {
		capital ?= { continent = continent:europe }
		OR = {
			current_age = age_1_traditions
			current_age = age_2_renaissance
		}
		religion = religion:catholic
		army_tradition >= 20.00
	}

	option = {
		name = dynastic.9.a
		trigger = {
			has_heir = yes
			heir = {
				age_in_years >= 15
				is_female = no
				owner = root
			}
		}
		random_list = {
			50 = {
				change_gold_effect = { scale = 0.60 }
			}
			45 = {
				add_legitimacy = legitimacy_extreme_bonus
			}
			5 = {
				kill_character = {
					target = heir
					reason = jousting
				}
			}
		}
	}
	option = {
		name = dynastic.9.b
		add_legitimacy = government_power_weak_bonus
	}
	option = {
		name = dynastic.9.c
		add_prestige = prestige_weak_bonus
	}
}

dynastic.10 = {
	type = country_event
	title = dynastic.10.title
	desc = dynastic.10.desc
	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_fur.dds"

	trigger = {
		has_heir = yes
		OR = {
			has_ruler = no
			heir != ruler
		}
		heir = { age_in_years >= 15 owner = root  }
	}

	immediate = {
		heir = {
			save_scope_as = heir_char
		}
		kill_character = {
			target = heir
			reason = hunting_accident
		}
		event_illustration_estate_background_effect = { background = estate_type:nobles_estate }
	}

	option = {
		name = dynastic.10.a
		custom_tooltip = {
			text = dynastic_10_a_helper
		}
	}
}

dynastic.11 = {
	type = country_event
	title = dynastic.11.title
	desc = dynastic.11.desc
	illustration_tags = {
		10 = regular
		10 = exterior
	}
	trigger = {
		has_ruler_in_country = yes
		ruler = {
			has_dynasty = yes
		}
		religion.group = religion_group:christian
		has_heir = yes
		heir = { age_in_years >= 15 owner = root }
		government_type = government_type:monarchy
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		heir = {
			save_scope_as = heir_char
		}
		event_illustration_estate_background_effect = { background = estate_type:nobles_estate }
	}

	option = {
		name = dynastic.11.a
		add_prestige = prestige_extreme_penalty
	}
	option = {
		name = dynastic.11.b
		add_legitimacy = legitimacy_weak_penalty
	}
}


dynastic.12 = {
	type = country_event
	title = dynastic.12.title
	desc = dynastic.12.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		ruler = {
			has_dynasty = yes
		}
		government_type = government_type:monarchy
		religion.group = religion_group:christian
		has_regent = no
		capital = { continent = continent:europe }
	}

	immediate = {
		event_illustration_estate_background_effect = { background = estate_type:nobles_estate }
	}

	option = {
		name = dynastic.12.a
		add_legitimacy = legitimacy_weak_bonus
	}
	option = {
		name = dynastic.12.b
		add_prestige = prestige_mild_bonus
	}
}


scripted_trigger dynastic_13_trigger = {
	government_type = government_type:monarchy
	ruler ?= {
		this != root.ruler
	}

	NOT = {	in_union_with = root }
	stability < -30
}
dynastic.13 = {
	type = country_event
	title = dynastic.13.title
	desc = dynastic.13.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		has_regent = no
		stability > 20
		government_type = government_type:monarchy
		has_ruler_in_country = yes
		ruler ?= { has_dynasty = yes }
		ruler.dynasty = {
			any_character_in_dynasty = {
				is_alive = yes
				is_ruler = yes
				any_ruling_countries = {
					dynastic_13_trigger = yes
				}
			}
		}
	}

	immediate = {
		save_scope_as = dynasty_origin
		ruler = {
			save_scope_as = ruler_char
		}
		ruler.dynasty = {
			random_character_in_dynasty = {
				limit = {
					is_alive = yes
					is_ruler = yes
					any_ruling_countries = {
						dynastic_13_trigger = yes
					}
				}
				random_ruling_countries = {
					limit = {
						dynastic_13_trigger = yes
					}

					save_scope_as = other_with_dynasty
					ruler = {
						save_scope_as = other_ruler_char
					}
				}
			}
		}
	}

	option = {
		name = dynastic.13.a
		scope:other_with_dynasty = {
			trigger_event_silently = { id = dynastic.17 days = 1 }
			add_opinion = { target = root modifier = opinion_dynastic_helper }
		}
		change_gold_effect = { scale = -2 }
		add_prestige = prestige_mild_bonus
	}
	option = {
		name = dynastic.13.b
		scope:other_with_dynasty = {
			trigger_event_silently = { id = dynastic.18 days = 1 }
			add_opinion = { target = root modifier = opinion_ignore_dynasty }
		}
	}
}


scripted_trigger dubious_ancestor = {
	OR = {
		has_dynasty = no
		dip < 30
		NOR = {
			exists = father
			exists = mother
		}
	}
}

dynastic.14 = {
	type = country_event
	title = dynastic.14.title
	desc = dynastic.14.desc
	illustration_tags = {
		10 = regular
		10 = exterior
	}
	trigger = {
		government_type = government_type:monarchy
		religion.group = religion_group:christian
		has_regent = no
		capital = { continent = continent:europe }
		ruler ?= {
			has_dynasty = yes
			OR = {
				father ?= {
					OR = {
						father ?= { dubious_ancestor = yes }
						mother ?= { dubious_ancestor = yes }
					}
				}
				mother ?= {
					OR = {
						father ?= { dubious_ancestor = yes }
						mother ?= { dubious_ancestor = yes }
					}
				}
			}
			NOR = {
				dip > 70
				has_trait = well_connected
				has_trait = righteous
			}
		}
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char

			if = {
				limit = {
					father ?= {
						father ?= { dubious_ancestor = yes }
					}
				}
				father.father = { save_scope_as = disputee_char }
				father = { save_scope_as = target_parent }
			}
			else_if = {
				limit = {
					father ?= {
						mother ?= { dubious_ancestor = yes }
					}
				}
				father.mother = { save_scope_as = disputee_char }
				father = { save_scope_as = target_parent }
			}
			else_if = {
				limit = {
					mother ?= {
						father ?= { dubious_ancestor = yes }
					}
				}
				mother.father = { save_scope_as = disputee_char }
				mother = { save_scope_as = target_parent }
			}
			else = {
				mother.mother = { save_scope_as = disputee_char }
				mother = { save_scope_as = target_parent }
			}
		}
	}

	option = {
		name = dynastic.14.a
		add_legitimacy = legitimacy_mild_penalty
		scope:ruler_char = {
			if = { limit = { has_nickname = no }
				set_nickname = dynastic.14.a.nickname
			}
		}
	}
	option = {
		name = dynastic.14.b
		add_prestige = prestige_mild_penalty
		scope:ruler_char = {
			add_character_modifier = { modifier = bastard years = -1 mode = add_and_extend }
			if = { limit = { has_nickname = no }
				set_nickname = dynastic.14.b.nickname
			}
		}
	}
}



dynastic.17 = {
	type = country_event
	title = dynastic.17.title
	desc = dynastic.17.desc
	illustration_tags = {
		10 = happy
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		ruler = {
			has_dynasty = yes
		}
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
	}

	option = {
		name = dynastic.17.a
		add_stability = stability_mild_bonus
		add_legitimacy = legitimacy_mild_bonus
	}
}

dynastic.18 = {
	type = country_event
	title = dynastic.18.title
	desc = dynastic.18.desc
	illustration_tags = {
		10 = angry
		10 = interior
	}
	option = {
		name = dynastic.18.a
		add_legitimacy = legitimacy_mild_penalty
	}
}

dynastic.19 = {
	type = country_event
	title = dynastic.19.title
	desc = dynastic.19.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		religion.group = religion_group:christian
		has_heir = yes
		has_regent = no
		heir = { age_in_years < 3 owner = root  }
		ruler ?= { is_female = no }
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		heir = {
			save_scope_as = heir_char
		}
	}

	option = {
		name = dynastic.19.a
		add_religious_influence = religious_influence_weak_bonus
		trigger_event_silently = { id = dynastic.21 days = 240 }
	}
	option = {
		name = dynastic.19.b
		kill_character = {
			target = heir
			reason = assassination
			killer = ruler
		}
		trigger_event_silently = { id = dynastic.20 days = 240 }
	}
}


dynastic.20 = {
	type = country_event
	title = dynastic.20.title
	desc = dynastic.20.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}

	trigger = {
		has_ruler_in_country = yes
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
	}

	option = {
		name = dynastic.20.a
		kill_character = {
			target = ruler
			reason = suicide
		}
	}
	option = {
		name = dynastic.20.b
		add_prestige = prestige_weak_penalty
		change_gold_effect = { scale = -12 }
		trigger_event_silently = { id = dynastic.21 days = 320 }
	}
}

dynastic.21 = {
	hide_portraits = yes
	type = country_event
	title = dynastic.21.title
	desc = dynastic.21.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}

	trigger = {
		has_ruler_in_country = yes
		has_heir = yes
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		heir = {
			save_scope_as = heir_char
		}
	}

	option = {
		name = dynastic.21.a
		kill_character = {
			target = ruler
			reason = froze
		}
		add_country_modifier = { modifier = relief_from years = 10 mode = add_and_extend }
	}
	option = {
		name = dynastic.21.b
		add_stability = stability_ultimate_penalty
		add_prestige = prestige_extreme_penalty
	}
}


scripted_trigger dynastic_23_trigger_1 = {
	has_potential_royal_marriage = ROOT
	government_type = government_type:monarchy
	religion = ROOT.religion
		has_ruler_in_country = yes
	ruler ?= {
		character_can_marry_trigger = yes
		NOT = {
			any_child = {
				is_alive = yes
			}
		}
	}
}
scripted_trigger dynastic_23_trigger_2 = {
	is_alive = yes
	is_female = yes
	has_dynasty = yes
	PREV = {
		has_ruler_in_country = yes
		ruler ?= {
			has_dynasty = yes
		}
	}
	dynasty ?= PREV.ruler.dynasty
	age_in_years >= 16
	age_in_years <= 35
	character_can_marry_trigger = yes
}

dynastic.23 = {
	type = country_event
	title = dynastic.23.title
	desc = dynastic.23.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		prestige >= 30.00
		government_type = government_type:monarchy
		at_war = no
		has_regent = no
		has_heir = no
		has_consort = no
		has_ruler_in_country = yes
		ruler ?= {
			is_female = no
			is_adult = yes
			age_in_years < 40
			num_of_children < 1
		}
		any_cabinet_character = {
			count > 0
		}
	}

	immediate = {
		save_scope_as = bachelor_country
		ruler = {
			save_scope_as = bachelor_char
		}
		random_cabinet_character = {
			save_scope_as = advisor_char
		}

		random_known_country = {
			limit = {
				government_type = government_type:monarchy
				religion = ROOT.religion
				any_courtier = {
					dynastic_23_trigger_2 = yes
				}
			}

			save_scope_as = bachelorette_country
		}
	}

	option = {
		name = dynastic.23.a
		add_legitimacy = legitimacy_weak_penalty

		scope:bachelorette_country ?= {
			trigger_event_silently = { id = dynastic.24 days = 200 }
		}
	}
	option = {
		name = dynastic.23.b
		add_prestige = prestige_weak_penalty
	}
}

dynastic.24 = {
	type = country_event
	title = dynastic.24.title
	desc = dynastic.24.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}
	trigger = {
		has_ruler_in_country = yes
		scope:bachelor_country = {
			dynastic_23_trigger_1 = yes
		}
		any_courtier = {
			dynastic_23_trigger_2 = yes
		}
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}
		random_courtier = {
			limit = {
				dynastic_23_trigger_2 = yes
			}

			save_scope_as = bachelorette_char
		}
	}

	option = {
		name = dynastic.24.a

		change_gold_effect = { scale = -1 }

		add_diplomats = -1

		scope:bachelor_char.owner = {
			random_list = {
				1 = { trigger_event_non_silently = { id = dynastic.25 days = 20 } }
				4 = { trigger_event_non_silently = { id = dynastic.26 days = 20 } }
			}
		}
	}
	option = {
		name = dynastic.24.b

		change_gold_effect = { scale = 2 }
	}
}

dynastic.25 = {
	type = country_event
	title = dynastic.25.title
	desc = dynastic.25.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}

	option = {
		name = dynastic.25.a
		scope:bachelor_char = {
			marry_character = scope:bachelorette_char
		}
		reverse_add_opinion = {
			target = scope:bachelorette_country
			modifier = opinion_dynastic_love
		}
	}
	option = {
		name = dynastic.25.b
		reverse_add_opinion = {
			target = scope:bachelorette_country
			modifier = opinion_dynastic_witchcraft
		}
	}
}

dynastic.26 = {
	type = country_event
	title = dynastic.26.title
	desc = dynastic.26.desc
	illustration_tags = {
		10 = regular
		10 = interior
	}

	option = {
		name = dynastic.26.a
		scope:bachelor_char = {
			marry_character = scope:bachelorette_char
		}
		reverse_add_opinion = {
			target = scope:bachelorette_country
			modifier = opinion_dynastic_united
		}
	}
	option = {
		name = dynastic.26.b
		reverse_add_opinion = {
			target = scope:bachelorette_country
			modifier = opinion_dynastic_refused
		}
	}
}

dynastic.27 = {
	type = country_event
	title = dynastic.27.title
	desc = dynastic.27.desc
	illustration_tags = {
		10 = armed
		10 = interior
	}
	trigger = {
		war_exhaustion >= 5
		at_war = no
		has_ruler_in_country = yes
		has_heir = yes
		heir = { age_in_years >= 15 owner = root  }
		government_type = government_type:monarchy
	}

	immediate = {
		ruler = {
			save_scope_as = ruler_char
		}

		heir = {
			save_scope_as = heir_char
		}
	}

	option = {
		name = dynastic.27.a
		kill_character = {
			target = ruler
			reason = suicide
		}
		add_war_exhaustion = war_exhaustion_severe_bonus
		add_stability = stability_extreme_bonus
	}
	option = {
		name = dynastic.27.b
		kill_character = {
			target = heir
			reason = execution
			killer = ruler
		}
		add_war_exhaustion = war_exhaustion_mild_bonus
	}
}

dynastic.28 = {
	type = country_event
	title = dynastic.28.title
	desc = dynastic.28.desc
	illustration_tags = {
		10 = regular
		10 = exterior
	}
	trigger = {
		war_exhaustion >= 4.00
		has_ruler_in_country = yes
		ruler ?= { adm >= 50 }
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
	}

	option = {
		name = dynastic.28.a
		add_prestige = prestige_weak_bonus
	}
	option = {
		name = dynastic.28.b
		add_army_tradition = army_tradition_weak_bonus
	}
}

dynastic.29 = {	#Appanage Being Inherited
	type = country_event
	title = dynastic.29.title
	desc = dynastic.29.desc
	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		save_scope_as = target_overlord
		scope:new_ruler = { save_scope_as = target_ruler }
		every_subject = {
			limit = {
				is_subject_type = appanage
				ruler_or_regent ?= scope:new_ruler
			}
			add_to_list = appanages_to_be_annexed_list
		}
		if = {
			limit = {
				any_in_list = {
					list = appanages_to_be_annexed_list
					is_human = yes
				}
			}
			random_in_list = {
				list = appanages_to_be_annexed_list
				limit = { is_human = yes }
				save_scope_as = target_appanage
			}
		}
		else = {
			ordered_in_list = {
				list = appanages_to_be_annexed_list
				order_by = great_power_score
				save_scope_as = target_appanage
			}
		}
	}

	option = {
		name = dynastic.29.a
		ai_chance = 1

		if = {
			limit = {
				scope:target_appanage = { is_human = yes }
				is_human = no	#Let's not
			}
			scope:target_appanage = { trigger_event_non_silently = dynastic.30 }
		}
		else = {
			annex_country = { 
				country = scope:target_appanage 
				reason = Diplomatic
				transfer = yes	#This transfers currencies like manpower, sailors, characters, and occupations
			}
		}
		
		#The following script integrates all appanages with our ruler
		#In case there are > 1

		if = {
			limit = {
				any_in_list = {
					list = appanages_to_be_annexed_list
					count > 1
				}
			}
			every_in_list = {
				list = appanages_to_be_annexed_list
				limit = { 
					is_human = no 
					this != scope:target_appanage
				}
				root = {
					annex_country = { 
						country = prev
						reason = Diplomatic
						transfer = yes 
					}
				}
			}
		}

	}
	option = {
		name = dynastic.29.b

		trigger = { is_human = yes }
		ai_chance = 0

	}
}

dynastic.30 = {	#Appanage Being Inherited
	type = country_event
	title = dynastic.29.title
	desc = dynastic.29.desc
	illustration_tags = {
		10 = regular
		10 = exterior
	}

	option = {
		name = dynastic.30.a

		change_player = scope:target_overlord
	}

	after = {
		scope:target_overlord = {
			annex_country = { 
				country = scope:target_appanage 
				reason = Diplomatic
				transfer = yes 
			}
		}
	}
}


