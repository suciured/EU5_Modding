namespace = banking

#################################
# The Rise of the Fuggers
#################################
banking.1 = {
	hide_portraits = yes
	type = country_event
	title = banking.1.title
	desc = banking.1.desc

	image = "gfx/interface/illustrations/institutions/banking.dds"

	fire_only_once = yes

	trigger = {
		owns = location:augsburg
		current_date > 1420.1.1
	}

	option = {
		name = banking.1.a
		location:augsburg = {
			create_building_country_in_location = {
				name = {
					name = THE_FUGGERS
				}
				reforms = {
					banking_country
				}
				save_scope_as = the_fuggers





				hidden_effect = {
					change_country_flag = THE_FUGGERS
					change_country_tag = FUGGE
					change_heir_selection = heir_selection:bank_selection
					change_government_type = government_type:republic

					if = {
						limit = {
							NOT = { exists = dynasty:fugger_dynasty }
						}
						create_named_dynasty = fugger_dynasty
					}

					add_gold = 1000

					create_character = {
						first_name = name_james
						birth_date = 1398.5.15
						adm = 90
						dip = 60
						mil = 10
						birth_location = location:augsburg
						dynasty = dynasty:fugger_dynasty
						save_scope_as = fugger_ruler
						script = jacob_fugger
						estate = estate_type:burghers_estate
					}
					set_new_ruler = scope:fugger_ruler
				}
			}
			change_building_level_in_location = {
				building = building_type:banking_office
				value = 1
				owner = scope:the_fuggers
			}
		}

		every_other_country = {
			limit = {
				religion.group = religion_group:christian
				capital.continent = continent:europe
			}
			trigger_event_silently = banking.2

		}
	}
}


# notification for all..
banking.2 = {
	type = country_event
	title = banking.1.title
	desc = banking.1.desc

	image = "gfx/interface/illustrations/institutions/banking.dds"
	option = {
		name = banking.2.a

		custom_tooltip = the_fuggers_appear_in_augsburg_tt
	}
}



#################################
# The Rise of the Welser
#################################

banking.3 = {
	hide_portraits = yes
	type = country_event
	title = banking.3.title
	desc = banking.3.desc

	image = "gfx/interface/illustrations/institutions/banking.dds"

	fire_only_once = yes

	trigger = {
		owns = location:nuremberg
		current_date > 1400.1.1
	}

	option = {
		name = banking.3.a
		location:nuremberg = {
			create_building_country_in_location = {
				name = {
					name = THE_WELSER
				}
				reforms = {
					banking_country
				}
				save_scope_as = the_welsers





				hidden_effect = {
					change_country_flag = THE_WELSER
					change_country_tag = WELSE
					change_heir_selection = heir_selection:bank_selection
					change_government_type = government_type:republic

					if = {
						limit = {
							NOT = { exists = dynasty:welser_dynasty }
						}
						create_named_dynasty = welser_dynasty
					}

					add_gold = 1000

					create_character = {
						first_name = name_bartholomew
						birth_date = 1350
						adm = 70
						dip = 60
						mil = 40
						birth_location = location:nuremberg
						dynasty = dynasty:welser_dynasty
						save_scope_as = welser_ruler
						estate = estate_type:burghers_estate
					}
					set_new_ruler = scope:welser_ruler
				}
			}
			change_building_level_in_location = {
				building = building_type:banking_office
				value = 1
				owner = scope:the_welsers
			}
		}

		every_other_country = {
			limit = {
				religion.group = religion_group:christian
				capital.continent = continent:europe
			}
			trigger_event_silently = banking.4

		}
	}
}


# notification for all..
banking.4 = {
	type = country_event
	title = banking.3.title
	desc = banking.3.desc

	image = "gfx/interface/illustrations/institutions/banking.dds"
	option = {
		name = banking.4.a

		custom_tooltip = the_welsers_appear_in_augsburg_tt
	}
}