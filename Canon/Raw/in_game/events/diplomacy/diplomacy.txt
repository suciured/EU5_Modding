namespace = diplomatic_annex

diplomatic_annex.1 = {
	type = country_event

	title = diplomatic_annex.1.title
	desc = diplomatic_annex.1.desc
	
	
	trigger = {
		scope:target = {
			NOT = { has_variable = no_annex_event_trigger }
			NOT = { is_subject_type = appanage }
		}
	}
	
	
	illustration_tags = {
		10 = exterior
		10 = happy
	}

	immediate = {
		scope:target.capital = {
			random_pop = {

				limit = {
					is_upper_class = yes
				}
				save_scope_as = target_pop
				save_scope_as = target_pop_bckg
			}
		}

		scope:target = {
			every_neighbor_country = {
				limit = { 
					this != root 
					NOT = { is_rival_of = scope:target }
					NOT = { is_subject_of = root }
				}
				add_to_list = annex_neighbors
			}
			
		}


	}

	
	option = {
		name = diplomatic_annex.1.a
		
		custom_tooltip = {
			text = every_subject_hates_us_tt
			every_subject = {
				limit = {
					this != scope:target
				}
				add_opinion = { target = root modifier = opinion_annexed_other_subject } 
			}
		}
		custom_tooltip = {
			text = every_annex_target_neighbor_hates_us_tt
			every_in_list = {
				list = annex_neighbors
				add_opinion = { target = root modifier = opinion_annexed_neighbor } 
			}
		}
		
	}
}


#Historical Rival Events
namespace = historical_rival_events

#Historical Rivalry Declared
historical_rival_events.1 = {
	type = country_event
	title = historical_rival_events.1.title
	desc = historical_rival_events.1.desc
	illustration_tags = {
		10 = interior
		10 = angry
	}
	immediate = {
		save_scope_as = target_country
		capital = {
			random_pop = {
				limit = { is_upper_class = yes }
				save_scope_as = target_pop
				save_scope_as = target_pop_bckg
			}
		}
	}
	#Eye for an eye, tooth for a tooth!
	option = {
		name = historical_rival_events.1.a
		historical_option = yes
		add_historical_rival_scripted = {
			target = scope:rivalling_country
			trigger_recipient_event = no
		}
	}
	#An unfortunate development...
	option = {
		name = historical_rival_events.1.b
	}
}

#Historical Rivalry Ends
historical_rival_events.2 = {
	type = country_event
	title = historical_rival_events.2.title
	desc = historical_rival_events.2.desc
	illustration_tags = {
		10 = interior
		10 = happy
	}
	immediate = {
		save_scope_as = target_country
		capital = {
			random_pop = {
				limit = { is_upper_class = yes }
				save_scope_as = target_pop
				save_scope_as = target_pop_bckg
			}
		}
	}
	#It is time to move on.
	option = {
		name = historical_rival_events.2.a
		historical_option = yes
		if = {
			limit = { has_historical_rival = scope:rivalling_country }
			remove_historical_rival_scripted = {
				target = scope:rivalling_country
				trigger_recipient_event = no
			}
		}
	}
	#Never forgive. Never forget.
	option = {
		name = historical_rival_events.2.b
		trigger = {
			has_historical_rival = scope:rivalling_country
		}
	}
}