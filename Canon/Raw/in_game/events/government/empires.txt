namespace = empires
# Threats to the Crown
empires.1 = {
	type = country_event
	title = empires.1.title
	desc = empires.1.desc
	
	trigger = {
		government_type = government_type:monarchy
		num_of_non_rural >= 10
		at_war = yes
		num_loans > 10
		has_ruler = yes
		ruler = { mil < 50 }
		gold < 200
		prestige > 10
		NOT = { has_country_modifier  = military_funding }
		NOT = {
			any_current_war = {
				any_war_participant = {
					NOT = { this = root }
					war_score_versus = {
						target = root
						value >= 0.2
					}
				}
			}
		}
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler ?= { save_scope_as = target_ruler }
	}
	
	option = {
		name = empires.1.a
		add_country_modifier = { modifier = military_funding months = 60 mode = add_and_extend }  
	}
	
	option = {
		name = empires.1.b
		add_prestige = prestige_mild_penalty
	}
}

# National Fragmentation
empires.2 = {
	type = country_event
	title = empires.2.title
	desc = empires.2.desc
	trigger = {
		num_of_non_rural > 25
		has_ruler = yes
		ruler = { adm < 30 }
		stability < 0
		religious_unity < 0.5
		any_owned_non_rural_location = {
			NOT = {	dominant_culture.language = root.culture.language }
			count > root.num_provinces
		}
	}
	
	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}
	
	option = {
		name = empires.2.a
		change_gold_effect = { scale = -3.00 }
	}
	
	option = {
		name = empires.2.b
		add_prestige = prestige_mild_penalty
	}
}

# <target_minister>'s Reforms
empires.3 = {
	type = country_event
	title = empires.3.title
	desc = empires.3.desc
	
	trigger = {
		num_of_non_rural >= 25
		num_loans >= 20
		any_cabinet_character = {
			modifier:is_head_of_cabinet = yes
		}
		NOT = { has_country_modifier = debt_funding_plan }
		NOT = { has_country_modifier = tax_reform }

	}
	
	illustration_tags = {
        10 = happy
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		random_cabinet_character = {
			limit = {
				modifier:is_head_of_cabinet = yes
			}
			save_scope_as = target_minister
		}
	}
	
	option = {
		name = empires.3.a
		add_country_modifier = { modifier = debt_funding_plan months = 60 mode = add_and_extend }  
	}
	
	option = {
		name = empires.3.b
		add_country_modifier = { modifier = tax_reform months = 60 mode = add_and_extend }  
	}
}

# Prospering Times
empires.4 = {
	type = country_event
	title = empires.4.title
	desc = empires.4.desc
	
	trigger = {
		num_of_non_rural > 50
		stability > 50
		num_loans < 1
		num_artists > 0
		NOT = {	has_variable = prosper_time_event }
		at_war = no
		any_owned_non_rural_location = {
			NOT = { location_rank = location_rank:city }
		}
	}
	
	illustration_tags = {
        10 = happy
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		hidden_effect = {
			random_owned_non_rural_location = {
				limit = {
					NOT = { location_rank = location_rank:city }
				}
				save_scope_as = target_location
			}
			random_owned_non_rural_location = {
				limit = {
					NOT = { location_rank = location_rank:city }
					province = { is_starving = no }
				}
				save_scope_as = target_location
			}
			random_owned_non_rural_location = {
				limit = {
					NOT = { location_rank = location_rank:city }
					province = { is_starving = no }
					is_capital = no
					is_connected_to = root.capital
				}
				save_scope_as = target_location
			}
			random_owned_non_rural_location = {
				limit = {
					NOT = { location_rank = location_rank:city }
					province = { is_starving = no }
					is_capital = no
					prosperity > 0
					is_connected_to = root.capital
				}
				save_scope_as = target_location
			}
			set_variable = { name = prosper_time_event value = scope:target_location }
		}
	}
	
	option = {
		name = empires.4.a
		scope:target_location = {
			change_development = development_extreme_bonus
			change_location_rank_effect = { location_rank = location_rank:city }
			add_location_modifier = {
				modifier = birth_of_a_new_city_adm
				years = 50
				mode = add_and_extend
			}
		}
	}
	
	option = {
		name = empires.4.b
		scope:target_location = {
			change_development = development_extreme_bonus
			change_location_rank_effect = { location_rank = location_rank:city }
			add_location_modifier = {
				modifier = birth_of_a_new_city_dip
				years = 50
				mode = add_and_extend
			}
		}
	}
	
	option = {
		name = empires.4.c
		scope:target_location = {
			change_development = development_extreme_bonus
			change_location_rank_effect = { location_rank = location_rank:city }
			add_location_modifier = {
				modifier = birth_of_a_new_city_mil
				years = 50
				mode = add_and_extend
			}
		}
	}
}

# The Reign of [target_character.GetNameWithNoTooltip]
empires.5 = {
	type = country_event
	title = empires.5.title
	desc = empires.5.desc

	trigger = {
		is_eligible_for_the_great_ruler_event = yes
	}
	
	illustration_tags = {
        10 = happy
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		save_scope_as = target_country
		ruler ?= { save_scope_as = target_character }
	}
	
	option = {
		name = empires.5.a
		set_character_as_the_great = { target = scope:target_character }
	}
}