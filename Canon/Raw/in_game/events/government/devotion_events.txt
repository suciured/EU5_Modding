namespace = devotion_events

########################
# General Hospital
########################
devotion_events.1 = {
	type = country_event
	title = devotion_events.1.title
	desc = devotion_events.1.desc

	illustration_tags = {
		10 = happy
		10 = interior
	}

	trigger = {
		government_type = government_type:theocracy
		NOT = {	capital ?= { has_building = building_type:hospital } }
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.1.a
		capital ?= {
			change_building_level_in_location = {
				building = building_type:hospital
				value = 1
			}
		}
	}
	option = {
		name = devotion_events.1.b
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}

		add_devotion = devotion_mild_bonus
	}
}

########################
# Fort Maintenance
########################
devotion_events.2 = {
	type = country_event
	title = devotion_events.2.title
	desc = devotion_events.2.desc

	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = {	has_country_modifier = dev_fort_maintenance }
		any_fort_in_country = { count > 0 }
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
	}

	option = {
		name = devotion_events.2.a
		add_country_modifier = { modifier = dev_fort_maintenance years = 10 mode = add_and_extend }
	}
	option = {
		name = devotion_events.2.b
		add_devotion = devotion_mild_penalty
	}
}

##############################
# Modernization of the Forts
##############################
devotion_events.3 = {
	type = country_event
	title = devotion_events.3.title
	desc = devotion_events.3.desc

	illustration_tags = {
		10 = angry
		10 = exterior
	}

	trigger = {
		has_country_modifier = dev_fort_maintenance
		government_type = government_type:theocracy
		any_fort_in_country = { count > 0 }
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.3.a
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}

		add_country_modifier = { modifier = dev_modern_forts years = 10 mode = add_and_extend }
	}
	
	option = {
		name = devotion_events.3.b
		add_devotion = devotion_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

######################
# Too High Taxes
######################
devotion_events.4 = {
	type = country_event
	title = devotion_events.4.title
	desc = devotion_events.4.desc
	
	illustration_tags = {
		10 = armed
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		any_fort_in_country = { count > 0 }
		has_country_modifier = dev_modern_forts
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.4.a
		remove_country_modifier = dev_modern_forts
		add_prestige = prestige_mild_penalty
	}
	
	option = {
		name = devotion_events.4.b
		add_prestige = prestige_mild_bonus
		add_stability = stability_extreme_penalty
	}
}

##########################
# Embellishment of Forts
##########################
devotion_events.5 = {
	type = country_event
	title = devotion_events.5.title
	desc = devotion_events.5.desc
	
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		any_fort_in_country = { count > 0 }
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.5.a
		add_devotion = devotion_mild_bonus
	}
	
	option = {
		name = devotion_events.5.b
		add_prestige = prestige_mild_bonus
		change_gold_effect = { scale = -2 }
	}
}

###################################
# The Quest for Religious Freedom
###################################
devotion_events.6 = {
	type = country_event
	title = devotion_events.6.title
	desc = devotion_events.6.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}

	trigger = {
		religion = religion:catholic
		religion:lutheran = { is_religion_enabled = yes}
		government_type = government_type:theocracy
		NOT = { tag = PAP }
		any_owned_location = {
			development > 20.00
			dominant_religion ?= religion:catholic
			is_capital = no
			any_neighbor_location = {
				dominant_religion ?= religion:lutheran
			}
		}
		country_has_estate = estate_type:clergy_estate
	}

	immediate = {
		random_owned_location = {
			limit = {
				development >= 20.00
				dominant_religion ?= religion:catholic
				is_capital = no
				any_neighbor_location = {
					dominant_religion ?= religion:lutheran
				}
			}
			save_scope_as = target_location
		}

		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.6.a
		add_devotion = devotion_mild_bonus
		add_prestige = prestige_mild_bonus
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}

		scope:target_location = {
			change_development  = development_mild_penalty
		}
	}
	
	option = {
		name = devotion_events.6.b
		add_devotion = devotion_mild_penalty
				add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_bonus
		}

		scope:target_location = {
			every_pop = {
				limit = {
					religion = religion:catholic
				}
				split_pop = {
					fraction = { 0.20 0.30 }
					religion = religion:lutheran
				}
			}
			change_control = control_severe_penalty
		}
	}
}

#################
# False Beliefs
#################
devotion_events.7 = {
	type = country_event
	title = devotion_events.7.title
	desc = devotion_events.7.desc
	
	illustration_tags = {
		10 = angry
		10 = interior
	}
	
	trigger = {
		has_reform = government_reform:military_order_reform
		religious_unity < 0.9
		any_owned_location = {
			dominant_religion ?= { this != root.religion }
			dominant_religion.group ?= root.religion.group
			NOT = { has_location_modifier = dev_heretical_expulsion }
			NOT = { has_location_modifier = dev_heretics_tolerated }
		}
	}

	immediate = {
		random_owned_location = {
			limit = {
				dominant_religion ?= { this != root.religion }
				dominant_religion.group ?= root.religion.group
				NOT = { has_location_modifier = dev_heretical_expulsion }
				NOT = { has_location_modifier = dev_heretics_tolerated }
			}
			save_scope_as = target_location
		}
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.7.a
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		add_devotion = devotion_mild_bonus

		scope:target_location = {
			add_location_modifier = { modifier = dev_heretical_expulsion years = 10 mode = add_and_extend }
		}
	}
	
	option = {
		name = devotion_events.7.b
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
		add_devotion = devotion_mild_penalty

		scope:target_location = {
			add_location_modifier = { modifier = dev_heretics_tolerated years = 10 mode = add_and_extend }
		}
	}
}

########################
# Forgery of Documents
########################
devotion_events.8 = {
	type = country_event
	title = devotion_events.8.title
	desc = devotion_events.8.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}

	trigger = {
		government_type = government_type:theocracy
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.8.a
		add_stability = stability_weak_bonus
		custom_tooltip = {
			text = devotion_events.8.ct

			random = {
				chance = 20
				trigger_event_silently = { id = devotion_events.9  days = 90 }
			}
		}
	}
	
	option = {
		name = devotion_events.8.b
		add_devotion = devotion_weak_bonus
	}
}

####################
# Forged Documents
####################
devotion_events.9 = {
	type = country_event
	title = devotion_events.9.title
	desc = devotion_events.9.desc

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.9.a
		add_stability = stability_weak_penalty
		add_prestige = prestige_mild_penalty
	}
}

########################
# The Local Noble
########################
devotion_events.10 = {
	type = country_event
	title = devotion_events.10.title
	desc = devotion_events.10.desc

	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = { religion.group = religion_group:muslim }
		has_heir = yes
		has_ruler = yes
		heir = {
			birth_location = root.capital
			has_dynasty = yes
			is_adult = yes
		}
		devotion < 80.00
	}

	immediate = {
		heir = { save_scope_as = target_heir }
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.10.a
		add_devotion = devotion_mild_bonus
	}
}

########################
# The Foreign Noble
########################
devotion_events.11 = {
	type = country_event
	title = devotion_events.11.title
	desc = devotion_events.11.desc
	
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = { religion.group = religion_group:muslim }
		has_heir = yes
		has_ruler = yes
		heir = {
			birth_location ?= { owner ?= { this != root } }
			has_estate = estate_type:nobles_estate
			is_adult = yes
			culture = {
				NOR = {
					is_primary_or_accepted_in = root
					is_tolerated_in = root
				}
			}
		}
	}

	immediate = {
		heir = { save_scope_as = target_heir }
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.11.a
		add_prestige = prestige_mild_bonus
	}
}

########################
# The Merchant's Heir
########################
devotion_events.12 = {
	type = country_event
	title = devotion_events.12.title
	desc = devotion_events.12.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = { religion.group = religion_group:muslim }
		has_heir = yes
		has_ruler = yes
		heir = {
			has_dynasty = no
			dip > 50
			is_adult = yes
		}
		country_has_estate = estate_type:burghers_estate
		country_has_estate = estate_type:nobles_estate
		country_has_estate = estate_type:peasants_estate
	}

	immediate = {
		heir = { save_scope_as = target_heir }
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.12.a
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_weak_bonus
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_weak_bonus
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_weak_bonus
		}
	}
}

##########################
# The Talented Theologian
##########################
devotion_events.13 = {
	type = country_event
	title = devotion_events.13.title
	desc = devotion_events.13.desc
	
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = { religion.group = religion_group:muslim }
		has_heir = yes
		has_ruler = yes
		heir = {
			adm > 70
			has_dynasty = yes
			is_adult = yes
		}
		country_has_estate = estate_type:clergy_estate
	}

	immediate = {
		heir = { save_scope_as = target_heir }
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.13.a
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
	}
}

##########################
# The Local Preacher
##########################
devotion_events.14 = {
	type = country_event
	title = devotion_events.14.title
	desc = devotion_events.14.desc
	
	illustration_tags = {
		10 = happy
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = { religion.group = religion_group:muslim }
		has_heir = yes
		has_ruler = yes
		heir = {
			has_dynasty = no
			dip < 50
			is_adult = yes
		}
		country_has_estate = estate_type:peasants_estate
	}

	immediate = {
		heir = { save_scope_as = target_heir }
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.14.a
		add_prestige = prestige_weak_bonus
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_bonus
		}
	}
}

###########################
# The Influential Reformer
###########################
devotion_events.26 = {
	type = country_event
	title = devotion_events.26.title
	desc = devotion_events.26.desc
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy

		OR = {
			religion = religion:calvinist
			religion = religion:lutheran
		}
		has_heir = yes
		has_ruler = yes
		heir = {
			is_adult = yes
		}
	}

	immediate = {
		heir = { save_scope_as = target_heir }
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.26.a
		add_prestige = prestige_mild_bonus
	}
}

###########################
# Rule Challenged
###########################
devotion_events.15 = {
	type = country_event
	title = devotion_events.15.title
	desc = devotion_events.15.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		has_ruler = yes
		government_type = government_type:theocracy
		NOT = { tag = PAP }
		devotion < 30.00
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.15.a
		add_stability = stability_extreme_penalty
	}
}

#################################################
# Campaign Against Superstitious Practices
#################################################
devotion_events.16 = {
	type = country_event
	title = devotion_events.16.title
	desc = devotion_events.16.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}

	trigger = {
		government_type = government_type:theocracy
		NOT = {
			religion.group = religion_group:muslim
		}
		has_ruler = yes
		country_has_estate = estate_type:peasants_estate
		country_has_estate = estate_type:burghers_estate
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.16.a
		add_devotion = devotion_mild_penalty

		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_bonus
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_bonus
		}
	}
	option = {
		name = devotion_events.16.b
		add_devotion = devotion_mild_bonus

		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

###########################
# The Mad Seer
###########################
devotion_events.18 = {
	type = country_event
	title = devotion_events.18.title
	desc = devotion_events.18.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		has_ruler = yes
		exists = capital
	}

	immediate = {
		create_character = {
			age = { 20 60 }
			religion = root.ruler.religion
			random_estate_type_trigger = {
				root = { estate_type_allowed_in_cabinet = {	estate_type = prev } }
			}
			create_in_limbo = yes
			save_scope_as = mad_seer
		}

		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.18.a
		add_devotion = devotion_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}

		kill_character = {
			target = scope:mad_seer
			reason = execution
			killer = ruler
		}
	}
	
	option = {
		name = devotion_events.18.b
		add_stability = stability_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
		hidden_effect = {
			kill_character_silently = {
				target = scope:mad_seer
				reason = vanished
			}
		}
	}
	
	option = {
		name = devotion_events.18.c
		trigger = {
			ruler = { has_trait = zealot }
		}

		add_devotion = devotion_mild_bonus
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
		scope:mad_seer = { move_country = root }
	}
}

#################################
# A Council After Our Own Tastes
#################################
devotion_events.19 = {
	type = country_event
	title = devotion_events.19.title
	desc = devotion_events.19.desc

	illustration_tags = {
		10 = regular
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = { tag = PAP }
		devotion < 70
		stability < 0
		has_ruler = yes
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.19.a
		add_stability = stability_mild_bonus
	}
	
	option = {
		name = devotion_events.19.b
		add_devotion = devotion_mild_bonus
	}
}

#################################
# The Secularists Among Us
#################################
devotion_events.21 = {
	type = country_event
	title = devotion_events.21.title
	desc = devotion_events.21.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		NOT = { tag = PAP }
		devotion < 20
		has_ruler = yes
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.21.a
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_extreme_penalty
		}
		change_government_type = government_type:monarchy
	}
	
	option = {
		name = devotion_events.21.b
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		add_devotion = devotion_extreme_bonus
		add_prestige = prestige_extreme_penalty
	}
}

######################
# Decadence Rules
######################
devotion_events.22 = {
	type = country_event
	title = devotion_events.22.title
	desc = devotion_events.22.desc
	illustration_tags = {
		10 = angry
		10 = interior
	}

	trigger = {
		government_type = government_type:theocracy
		devotion < 50
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.22.a
		add_manpower = { value = root.monthly_manpower multiply = -1.00 }
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	
	option = {
		name = devotion_events.22.b
		change_gold_effect = { scale = -2	}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

######################
# Corrupt Ruler
######################
devotion_events.23 = {
	type = country_event
	title = devotion_events.23.title
	desc = devotion_events.23.desc
	
	illustration_tags = {
		10 = angry
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		devotion < 50
		has_ruler = yes
		ruler = { NOT = { has_trait = incorruptible } }
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.23.a
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
		add_devotion = devotion_mild_penalty
	}
	
	option = {
		name = devotion_events.23.b
		add_stability = stability_extreme_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
	}
}

################################
# Volunteers for the Holy Fight
################################
devotion_events.24 = {
	type = country_event
	title = devotion_events.24.title
	desc = devotion_events.24.desc
	
	illustration_tags = {
		10 = armed
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		monthly_manpower > 0
		OR = {
			any_country_at_war_with = { NOT = { religion = root.religion } }
			any_neighbor_country = {
				has_truce_with = root
				NOT = { religion = root.religion }
			}
		}
		devotion > 75.00
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.24.a
		add_manpower = { value = root.monthly_manpower multiply = 2.00 }
	}
}

################################
# Conflict between City and Gov
################################
devotion_events.100 = {
	type = country_event
	title = devotion_events.100.title
	desc = devotion_events.100.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:christian
		num_of_non_rural >= 2
		NOT = { tag = PAP }
		has_ruler = yes
	}
	
	immediate = {
		random_owned_non_rural_location = {
			limit = { is_capital = no }
			save_scope_as = target_location
		}
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	option = {
		name = devotion_events.100.a
		add_devotion = devotion_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_bonus
		}
	}
	
	option = {
		name = devotion_events.100.b
		add_devotion = devotion_mild_bonus
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}

		scope:target_location = {
			add_location_modifier = { modifier = add_unrest_5_modifier years = 10 mode = add_and_extend }
		}
	}
}

################################
# The Lanterne of Light
################################
devotion_events.101 = {
	type = country_event
	title = devotion_events.101.title
	desc = devotion_events.101.desc
	
	illustration_tags = {
		10 = angry
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:christian
		OR = {
			devotion < 50
			religious_unity < 0.7
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.101.a
		add_devotion = devotion_mild_bonus
		add_prestige = prestige_weak_penalty
	}
	
	option = {
		name = devotion_events.101.b
		add_prestige = prestige_mild_bonus
		add_stability = stability_mild_penalty
	}
}

################################
# Bonfire of the Vanities
################################
devotion_events.104 = {
	hide_portraits = yes
	type = country_event
	title = devotion_events.104.title
	desc = devotion_events.104.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:christian
		capital ?= {
			any_work_of_art_in_location = {	count > 0 }
		}
	}

	immediate = {
		create_character = {
			religion = root.religion
			random_estate_type_trigger = {
				root = { estate_type_allowed_in_cabinet = {	estate_type = prev } }
			}
			create_in_limbo = yes
			save_scope_as = preacher
		}

		capital ?= {
			random_work_of_art_in_location = {
				save_scope_as = target_art
			}
		}

		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.104.a
		add_devotion = devotion_mild_bonus
		add_stability = stability_weak_penalty
		hidden_effect = {
			kill_character_silently = {
				target = scope:preacher
				reason = vanished
			}
		}
	}
	
	option = {
		name = devotion_events.104.b
		add_prestige = prestige_weak_bonus
		add_stability = stability_weak_penalty
		hidden_effect = {
			kill_character_silently = {
				target = scope:preacher
				reason = vanished
			}
		}
	}
	
	option = {
		name = devotion_events.104.c
		trigger = {
			ruler ?= { has_trait = zealot }
		}
		scope:preacher = { move_country = root }
		add_devotion = devotion_mild_bonus
		destroy_art = scope:target_art
	}
}

################################
# Jubilee in Capital
################################
devotion_events.107 = {
	type = country_event
	title = devotion_events.107.title
	
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { tag = PAP }
				desc = devotion_events.107.desc_pope
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = devotion_events.107.desc
			}
		}
	}
	
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		religion = religion:catholic
		government_type = government_type:theocracy
		has_policy = clerical_state
		has_ruler = yes
		NOT = { has_country_modifier = dev_jubilee }
		country_exists = c:PAP
		c:PAP = {
			religion = religion:catholic
			has_ruler = yes
		}
	}

	immediate = {
		save_scope_as = from_country
		c:PAP = {
			ruler = {
				save_scope_as = pope
			}
		}
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.107.a
		add_country_modifier = { modifier = dev_jubilee years = 10 mode = add_and_extend }
		if = {
			limit = { NOT = { tag = PAP } }
			c:PAP = {
				trigger_event_silently = { id = devotion_events.108 }
			}
		}
	}
	
	option = {
		name = devotion_events.107.b
		add_devotion = devotion_mild_bonus
	}
}

################################
# Jubilee in Neighbor Capital
################################
devotion_events.108 = {
	hide_portraits = yes
	type = country_event
	title = devotion_events.108.title
	desc = devotion_events.108.desc
	
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	immediate = {
		save_scope_as = papacy
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}
	
	option = {
		name = devotion_events.108.a
		add_opinion = { target = scope:from_country modifier = opinion_jubilee_bad }
		scope:from_country = {
			set_variable = { name = dev_jubilee_bad_flag value = 1 }
			trigger_event_silently = { id = devotion_events.109 }
		}
	}
	
	option = {
		name = devotion_events.108.b
		add_opinion = { target = scope:from_country modifier = opinion_jubilee_good }
		scope:from_country = {
			set_variable = { name = dev_jubilee_good_flag value = 1 }
			trigger_event_silently = { id = devotion_events.109 }
		}
	}
}

########################################
# The Pope Reacts to Jubilee in Capital
########################################
devotion_events.109 = {
	type = country_event
	title = devotion_events.109.title
	desc = devotion_events.109.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.109.a
		trigger = {
			has_variable = dev_jubilee_bad_flag
		}
		remove_variable = dev_jubilee_bad_flag
		show_as_tooltip = {
			c:PAP = {
				add_opinion = { target = root modifier = opinion_jubilee_bad }
			}
		}
	}
	
	option = {
		name = devotion_events.109.b
		trigger = {
			has_variable = dev_jubilee_good_flag
		}
		remove_variable = dev_jubilee_good_flag
		show_as_tooltip = {
			c:PAP = {
				add_opinion = { target = root modifier = opinion_jubilee_good }
			}
		}
	}
}

########################################
# Confiscation of a Calvinist Church
########################################
devotion_events.117 = {
	type = country_event
	title = devotion_events.117.title
	desc = devotion_events.117.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:christian
		religion:calvinist = { is_religion_enabled = yes}
		NOT = {	religion = religion:calvinist }
		NOT = { tag = PAP }
		any_owned_location = { dominant_religion ?= religion:calvinist }
		has_ruler = yes
		country_has_estate = estate_type:burghers_estate
		country_has_estate = estate_type:peasants_estate
	}

	immediate = {
		random_owned_location = {
			limit = {
				dominant_religion ?= religion:calvinist
			}
			save_scope_as = target_location
		}
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.117.a
		scope:target_location = {
			add_location_modifier = { modifier = dev_confiscated_reformed_church years = 10 mode = add_and_extend }
		}
	}
}

###########################
# Hallesches Heilthum
###########################
devotion_events.118 = {
	type = country_event
	title = devotion_events.118.title
	desc = devotion_events.118.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:christian
		devotion < 70
		exists = previous_ruler
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		previous_ruler = { save_scope_as = old_ruler }
	}

	option = {
		name = devotion_events.118.a
		trigger = {
			OR = {
				religion = religion:calvinist
				religion = religion:lutheran
			}
		}
		add_devotion = devotion_mild_bonus
	}
	
	option = {
		name = devotion_events.118.b
		trigger = {
			NOR = {
				religion = religion:calvinist
				religion = religion:lutheran
			}
		}
		add_stability = stability_mild_bonus
	}
}

###########################
# The Nag's Head Rumor
###########################
devotion_events.119 = {
	type = country_event
	title = devotion_events.119.title
	desc = devotion_events.119.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:christian
		NOT = { tag = PAP }
		has_ruler = yes
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.119.a
		add_devotion = devotion_mild_penalty
	}
	
	option = {
		name = devotion_events.119.b
		add_prestige = prestige_mild_penalty
	}
}

###########################
# The Local Imām Khatib
###########################
devotion_events.200 = {
	type = country_event
	title = devotion_events.200.title
	desc = devotion_events.200.desc
	
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		has_ruler = yes
		has_heir = yes
		heir = {
			birth_location = root.capital
			has_dynasty = yes
			is_adult = yes
		}
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		heir = { save_scope_as = target_heir }
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.200.a
		add_prestige = prestige_mild_bonus
		change_gold_effect = { scale = 1 }
	}
}

###########################
# The Guiding Principles
###########################
devotion_events.201 = {
	type = country_event
	title = devotion_events.201.title
	desc = devotion_events.201.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}
	
	trigger = {
		religion.group = religion_group:muslim
		government_type = government_type:theocracy
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.201.a
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}

	}
	
	option = {
		name = devotion_events.201.b
		add_devotion = devotion_mild_bonus
	}
}

###########################
# Heart of Mercy
###########################
devotion_events.202 = {
	type = country_event
	title = devotion_events.202.title
	desc = devotion_events.202.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		societal_value:mysticism_vs_jurisprudence > 20
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.202.a
		add_devotion = devotion_weak_bonus
	}

	option = {
		name = devotion_events.202.b
		add_prestige = prestige_weak_bonus
	}
}

###########################
# Bayt al-Mal
###########################
devotion_events.203 = {
	type = country_event
	title = devotion_events.203.title
	desc = devotion_events.203.desc
	
	illustration_tags = {
		10 = happy
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		NOT = {	is_during_bankruptcy = yes }
		num_loans < 5
		devotion < 80
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.203.a
		change_gold_effect = { scale = 6.00 }
	}
	
	option = {
		name = devotion_events.203.b
		add_devotion = devotion_extreme_bonus
	}
}

###########################
# The Education of Women
###########################
devotion_events.204 = {
	type = country_event
	title = devotion_events.204.title
	desc = devotion_events.204.desc

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"
	
	trigger = {
		religion.group = religion_group:muslim
		government_type = government_type:theocracy
		NOT = {
			has_country_modifier = dev_educated_women
		}
	}

	option = {
		name = devotion_events.204.a
		add_country_modifier = { modifier = dev_educated_women years = 20 mode = add_and_extend }
	}
	
	option = {
		name = devotion_events.204.b
		add_prestige = prestige_extreme_bonus
	}
}

###########################
# The Bazaar
###########################
devotion_events.205 = {
	type = country_event
	title = devotion_events.205.title
	desc = devotion_events.205.desc

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		exists = capital
		capital = {
			market ?= {
				is_traded_in_market = goods:livestock
				is_traded_in_market = goods:cloth
				OR = {
					is_traded_in_market = goods:saffron
					is_traded_in_market = goods:pepper
					is_traded_in_market = goods:chili
				}
			}
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	option = {
		name = devotion_events.205.a
		change_gold_effect = { scale = 2 }
	}
	
	option = {
		name = devotion_events.205.b
		add_devotion = devotion_mild_bonus
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
	}
}

###########################
# The Corrupt Governor
###########################
devotion_events.207 = {
	type = country_event
	title = devotion_events.207.title
	desc = devotion_events.207.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		devotion > 20
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.207.a
		add_devotion = devotion_mild_penalty
	}
}

###########################
# A Kafir in Our Court
###########################
devotion_events.208 = {
	type = country_event
	title = devotion_events.208.title
	desc = devotion_events.208.desc
	
	illustration_tags = {
		10 = angry
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		any_cabinet_character = {
			count > 0
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		random_cabinet_character = {
			save_scope_as = minister
		}
	}

	option = {
		name = devotion_events.208.a
		add_devotion = devotion_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	
	option = {
		name = devotion_events.208.b
		add_prestige = prestige_mild_penalty
	}
	
	option = {
		name = devotion_events.208.c
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
		remove_from_cabinet = scope:minister
		scope:minister = { add_character_modifier = { modifier = banned_from_cabinet years = 20 mode = add_and_extend }	}

	}
}

###########################
# A Coup Against Decadence
###########################
devotion_events.209 = {
	type = country_event
	title = devotion_events.209.title
	desc = devotion_events.209.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		has_ruler = yes
		devotion < 50
		OR = {
			root = {
				stability < 0
				societal_value:mysticism_vs_jurisprudence < 0
			}
			ruler = { has_trait = sinner }
		}

		country_has_estate = estate_type:peasants_estate
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.209.a
		add_stability = stability_extreme_penalty
	}
	
	option = {
		name = devotion_events.209.b
		capital = { every_pop = {	add_pop_satisfaction = pop_satisfaction_severe_penalty	} }
	}
}

###########################
# The Rafida
###########################
devotion_events.210 = {
	type = country_event
	title = devotion_events.210.title
	desc = devotion_events.210.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion = religion:sunni
		any_owned_location = {
			dominant_religion ?= religion:shia
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.210.a
		custom_tooltip = {
			text = devotion_events.210.a.tt
			every_owned_location = {
				limit = {
					dominant_religion ?= religion:shia
				}
				add_location_modifier = { modifier = dev_rafida years = 10 mode = add_and_extend }
			}
		}

		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
	}
	
	option = {
		name = devotion_events.210.b
		add_devotion = devotion_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

###########################
# The Nasibi
###########################
devotion_events.211 = {
	type = country_event
	title = devotion_events.211.title
	desc = devotion_events.211.desc
	
	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion = religion:shia
		any_owned_location = {
			dominant_religion ?= religion:sunni
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.211.a
		custom_tooltip = {
			text = devotion_events.211.a.tt
			every_owned_location = {
				limit = {
					dominant_religion ?= religion:sunni
				}
				add_location_modifier = { modifier = dev_nasibi years = 10 mode = add_and_extend }
			}
		}

		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
	}
	
	option = {
		name = devotion_events.211.b
		add_devotion = devotion_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

################################
# The Dishonesty in the Majlis
################################
devotion_events.212 = {
	type = country_event
	title = devotion_events.212.title
	desc = devotion_events.212.desc
	
	illustration_tags = {
		10 = angry
		10 = interior
	}
	
	trigger = {
		has_ruler = yes
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		societal_value:mysticism_vs_jurisprudence > 0
		devotion > 50.00
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = devotion_events.212.a
		add_prestige = prestige_mild_penalty
	}
	
	option = {
		name = devotion_events.212.b
		add_devotion = devotion_mild_penalty
	}
}

################################
# Advisor Accused of Shirk
################################
devotion_events.213 = {
	type = country_event
	title = devotion_events.213.title
	desc = devotion_events.213.desc
	
	illustration_tags = {
		10 = angry
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		any_cabinet_character = {
			count > 0
		}
	}

	immediate = {
		random_cabinet_character = {
			save_scope_as = minister
		}
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.213.a
		remove_from_cabinet = scope:minister
		scope:minister = { add_character_modifier = { modifier = banned_from_cabinet years = 20 mode = add_and_extend }	}
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
	}
	
	option = {
		name = devotion_events.213.b
		add_devotion = devotion_mild_penalty
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_left }
	}
}

################################
# Abolish Idolatry?
################################
devotion_events.214 = {
	type = country_event
	title = devotion_events.214.title
	desc = devotion_events.214.desc

	illustration_tags = {
		10 = angry
		10 = exterior
	}
	
	trigger = {
		has_ruler = yes
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
	}

	immediate = {
		ruler = { save_scope_as = target_ruler }
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.214.a
		add_devotion = devotion_mild_bonus
		add_prestige = prestige_weak_penalty
	}
	
	option = {
		name = devotion_events.214.b
		add_prestige = prestige_weak_bonus
		add_devotion = devotion_mild_penalty
	}
}

################################
# Taxes or Agriculture
################################
devotion_events.215 = {
	type = country_event
	title = devotion_events.215.title
	desc = devotion_events.215.desc
	
	illustration_tags = {
		10 = regular
		10 = exterior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		country_has_estate = estate_type:peasants_estate
		has_law = iqta_law
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
	}

	option = {
		name = devotion_events.215.a
		trigger = {
			NOT = { has_policy = efficient_tax_farming }
		}
		add_policy = policy:efficient_tax_farming
		add_stability = stability_weak_penalty
	}
	
	option = {
		name = devotion_events.215.b
		trigger = {
			NOT = { has_policy = land_acquisition }
		}
		add_policy = policy:land_acquisition
		add_stability = stability_weak_penalty
	}
	
	option = {
		name = devotion_events.215.c
		trigger = {
			NOT = { has_policy = lenient_taxation }
		}
		add_policy = policy:lenient_taxation
		add_stability = stability_weak_penalty
	}
	
	option = {
		name = devotion_events.215.d

		add_stability = stability_mild_bonus
		add_estate_satisfaction = {
			type = estate_type:peasants_estate
			value = estate_satisfaction_weak_penalty
		}
	}
}

################################
# Reforms of the Pious
################################
devotion_events.216 = {
	type = country_event
	title = devotion_events.216.title
	desc = devotion_events.216.desc
	
	illustration_tags = {
		10 = regular
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		societal_value:mysticism_vs_jurisprudence > 10
		devotion > 75.00
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		random_owned_location = {
			save_scope_as = target_locationA
		}
		random_owned_location = {
			limit = {
				NOT = { this = scope:target_locationA }
			}
			save_scope_as = target_locationB
		}
	}

	option = {
		name = devotion_events.216.a
		add_prestige = prestige_mild_bonus
	}
	
	option = {
		name = devotion_events.216.b
		scope:target_locationA = {
			change_development  = development_weak_bonus
		}
		scope:target_locationB = {
			change_development  = development_weak_bonus
		}
	}
	
	option = {
		name = devotion_events.216.c
		add_devotion = devotion_mild_bonus
	}
}

#########################################
# The Qāḍī, the Hisbah and the Muhtasib
#########################################
devotion_events.219 = {
	type = country_event
	title = devotion_events.219.title
	desc = devotion_events.219.desc

	illustration_tags = {
		10 = angry
		10 = interior
	}
	
	trigger = {
		government_type = government_type:theocracy
		religion.group = religion_group:muslim
		societal_value:mysticism_vs_jurisprudence < 0
		stability < 0
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = devotion_events.219.a
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		add_country_modifier = { modifier = dev_mutaween years = 10 mode = add_and_extend }
	}
	
	option = {
		name = devotion_events.219.b
		add_devotion = devotion_mild_penalty
	}
}