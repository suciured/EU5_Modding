namespace = flavor_cas_por

# Royal Fifth
flavor_cas_por.1 = {
	type = country_event
	title = flavor_cas_por.1.title
	desc = flavor_cas_por.1.desc
	image = "gfx/interface/icons/trade_goods/illustrations/_default.dds" #Could be changed with gold or silver.

	fire_only_once = yes
	dynamic_historical_event = {
		tag = CAS
		tag = SPA
		from = 1400.1.1
		to = 1600.1.1
		monthly_chance = 10
	}

	trigger = {
		OR = { 
			has_ruler = yes
			has_heir = yes
		}
		OR = {
			any_owned_location = {
				continent != root.capital.continent
				OR = {
					raw_material = goods:goods_gold
					raw_material = goods:silver
				}
			}
			any_subject = {
				any_owned_location = {
					continent != root.capital.continent
					OR = {
						raw_material = goods:goods_gold
						raw_material = goods:silver
					}
				}
			}
		}
	}

	immediate = {
		unlock_policy_effect = {
			type = royal_fifth_law
		}
		ruler_or_heir_if_regent = {
			save_scope_as = target_character
		}
		random_owned_location = {
			limit = {
				continent != root.capital.continent
				OR = {
					raw_material = goods:goods_gold
					raw_material = goods:silver
				}
			}
			save_scope_as = target_location
		}
		random_subject = {
			limit = {
				any_owned_location = {
					continent != root.capital.continent
					OR = {
						raw_material = goods:goods_gold
						raw_material = goods:silver
					}
				}
			}
			random_owned_location = {
				limit = {
					continent != root.capital.continent
					OR = {
						raw_material = goods:goods_gold
						raw_material = goods:silver
					}
				}
				save_scope_as = target_location
				random_pop = {
					save_scope_as = target_pop
				}
			}
		}
		scope:target_location.raw_material = {
			save_scope_as = target_goods
		}
	}

	option = {
		name = flavor_cas_por.1.a
		
		add_policy = policy:royal_fifth_law

		scope:target_location = {
			change_max_raw_material_workers = 1
		}
	
		add_all_estate_satisfaction = {
			value = estate_satisfaction_mild_penalty
		}
	}

	option = {
		name = flavor_cas_por.1.b
		
		add_prestige = prestige_mild_bonus
	}
}

# Royal Fifth (Portugal)
flavor_cas_por.2 = {
	hide_portraits = yes
	type = country_event
	title = flavor_cas_por.2.title
	desc = flavor_cas_por.2.desc
	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_silver.dds" #Could be changed with gold or the _default.

	fire_only_once = yes
	dynamic_historical_event = {
		tag = POR
		from = 1400.1.1
		to = 1600.1.1
		monthly_chance = 10
	}

	trigger = {
		OR = { 
			has_ruler = yes
			has_heir = yes
		}
		OR = {
			any_owned_location = {
				continent != root.capital.continent
				OR = {
					raw_material = goods:goods_gold
					raw_material = goods:silver
				}
			}
			any_subject = {
				any_owned_location = {
					continent != root.capital.continent
					OR = {
						raw_material = goods:goods_gold
						raw_material = goods:silver
					}
				}
			}
		}
	}

	immediate = {
		unlock_policy_effect = {
			type = royal_fifth_law
		}
		ruler_or_heir_if_regent = {
			save_scope_as = target_character
		}
		random_owned_location = {
			limit = {
				continent != root.capital.continent
				OR = {
					raw_material = goods:goods_gold
					raw_material = goods:silver
				}
			}
			save_scope_as = target_location
		}
		random_subject = {
			limit = {
				any_owned_location = {
					continent != root.capital.continent
					OR = {
						raw_material = goods:goods_gold
						raw_material = goods:silver
					}
				}
			}
			random_owned_location = {
				limit = {
					continent != root.capital.continent
					OR = {
						raw_material = goods:goods_gold
						raw_material = goods:silver
					}
				}
				save_scope_as = target_location
				random_pop = {
					save_scope_as = target_pop
				}
			}
		}
		scope:target_location.raw_material = {
			save_scope_as = target_goods
		}
	}

	option = {
		name = flavor_cas_por.2.a
		
		add_policy = policy:royal_fifth_law

		add_yearly_gold = 0.25
	}

	option = {
		name = flavor_cas_por.2.b
		
		add_prestige = prestige_mild_bonus
	}
}

