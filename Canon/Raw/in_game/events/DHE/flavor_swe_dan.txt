namespace = flavor_swe_dan

scripted_effect transfer_the_locs = {
	location:asbo = { change_location_owner = c:SKE }
	location:laholm = { change_location_owner = c:SKE }
	c:DAN ?= { add_gold = 250 }
	c:SWE ?= { add_gold = -250 }
}

# The Scania Affair
flavor_swe_dan.1 = {
	type = country_event
	title = flavor_swe_dan.1.title
	desc = flavor_swe_dan.1.desc
	historical_info = flavor_swe_dan.1.historical_info

	fire_only_once = yes
	dynamic_historical_event = {
		tag = SWE
		from = 1338.1.1
		to = 1350.1.1
		monthly_chance = 10
	}
	
	image = "gfx/interface/illustrations/event/backgrounds/special/shortage.dds"
	
	trigger = {
		at_war = no
		c:DAN ?= {
			num_loans > 0
			owns = location:asbo
			owns = location:laholm
		}
		c:SKE ?= {
			is_subject_of = c:SWE
		}
	}

	option = {
		name = flavor_swe_dan.1.a

		historical_option = yes
		c:DAN = {
			trigger_event_non_silently = flavor_swe_dan.2
		}
		custom_tooltip = flavor_swe_dan_offer
	}
	option = {
		name = flavor_swe_dan.1.b
		add_prestige = prestige_mild_bonus
	}
}

# Denmark gets offer..
flavor_swe_dan.2 = {
	type = country_event
	title = flavor_swe_dan.2.title
	desc = flavor_swe_dan.2.desc
	historical_info = flavor_swe_dan.1.historical_info

	image = "gfx/interface/illustrations/event/backgrounds/special/shortage.dds"

	option = {
		name = flavor_swe_dan.2.a
		historical_option = yes

		c:SWE ?= {
			trigger_event_non_silently = flavor_swe_dan.3
		}
		show_as_tooltip = {
			transfer_the_locs = yes
		}
	}

	option = {
		name = flavor_swe_dan.2.b
		add_stability = stability_severe_penalty
		
		c:SWE ?= {
			trigger_event_non_silently = flavor_swe_dan.4
			#trigger_event_non_silently = { id = flavor_swe_dan.4 days = 15 }
		}
	}

}

# Swedish Notification
flavor_swe_dan.3 = {
	type = country_event
	title = flavor_swe_dan.3.title
	desc = flavor_swe_dan.3.desc
	
	illustration_tags = {
		10 = happy
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		location:laholm = {
			save_scope_as = target_location
		}
	}
	
	option = {
		name = flavor_swe_dan.3.a
		transfer_the_locs = yes
	}
}

flavor_swe_dan.4 = {
	type = country_event
	title = flavor_swe_dan.4.title
	desc = flavor_swe_dan.4.desc
	
	image = "gfx/interface/illustrations/event/backgrounds/special/shortage.dds"
	
	option = {
		name = flavor_swe_dan.4.a
		add_casus_belli = {	
			target = c:DAN
			type = casus_belli:cb_conquer_province
			province = location:laholm.province
		}
	}
}
