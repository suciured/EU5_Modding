namespace = flavor_flo

flavor_flo.1 = { #Michelangelo
	type = country_event
	title = flavor_flo.1.title
	desc = flavor_flo.1.desc

	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1500.1.1
		to = 1550.1.1
		monthly_chance = 5
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		create_character = { #https://en.wikipedia.org/wiki/Michelangelo
			first_name = name_michael.name_angel
			last_name = Buonarroti_Simoni
			birth_date = 1475.3.6
			birth_location = location:sansepolcro
			culture = culture:tuscan
			estate = estate_type:burghers_estate
			artist_skill = 0.99
			artist = sculptor
			add_trait = trait:meticulous
			script = michelangelo_artist
			save_scope_as = target_artist
		}
	}

	option = {
		name = flavor_flo.1.a

		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
		add_prestige = prestige_mild_bonus
	}
}

flavor_flo.2 = { #The Emperor Condemns [ROOT.GetCountry.GetNameWithNoTooltip]'s Elevation
	hide_portraits = yes
	type = country_event
	title = flavor_flo.2.title
	desc = flavor_flo.2.desc


	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1500.1.1
		to = 1600.1.1
		monthly_chance = 5
	}

	trigger = {
		religion = religion:catholic
		NOT = { international_organization:hre.leader_country = root }
		OR = {
			AND = {
				c:PAP = { opinion = { target = prev value > 50 } }
				international_organization:hre.leader_country = { opinion = { target = prev value < 70 } }
				government_type = government_type:monarchy
				num_of_non_rural < 6
			}
			AND = {
				has_reform = government_reform:dynastic_signoria_reform
				own_entire_area = area:tuscany_area
			}
		}

	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		international_organization:hre.leader_country.ruler = {
			save_scope_as = target_emperor
		}
	}

	option = {
		name = flavor_flo.2.a
		international_organization:hre.leader_country = {
			add_opinion = { target = c:FLO modifier = opinion_emperor_tus_refused }
		}
		c:PAP = {
			add_opinion = { target = c:FLO modifier = opinion_papal_tus_refused }
		}
		if = {
			limit = { government_type = government_type:republic }
			change_government_type = government_type:monarchy
		}
		add_prestige = prestige_weak_bonus
		trigger_event_silently = { id = flavor_flo.3  days = { 200 1000 } }
		historical_option = yes
	}
	option = {
		name = flavor_flo.2.b
		add_prestige = prestige_mild_penalty

		international_organization:hre.leader_country = {
			add_opinion = { target = c:FLO modifier = opinion_emperor_tus_yielded }
		}
		c:PAP = {
			add_opinion = { target = c:FLO modifier = opinion_papal_tus_yielded }
		}
	}
}

flavor_flo.3 = { #The Emperor Confirms [ROOT.GetCountry.GetNameWithNoTooltip]'s Elevation
	type = country_event
	title = flavor_flo.3.title
	desc = flavor_flo.3.desc

	illustration_tags = {
        10 = happy
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		international_organization:hre.leader_country.ruler = {
			save_scope_as = target_emperor
		}
		if = {
			limit = {
				NOT = { tag = TUS }
			}
			form_country = formable_country:TUS_f
		}
		set_variable = flo_grand_duchy_tus_flag
	}

	option = {
		name = flavor_flo.3.a
		international_organization:hre.leader_country = {
			remove_opinion = { target = root modifier = opinion_emperor_tus_refused }
		}
		add_legitimacy = legitimacy_weak_bonus
	}
}

flavor_flo.4 = { #The Construction Projects of [ROOT.GetCountry.GetGovernment.GetRuler.GetNameWithNoTooltip]
	hide_portraits = yes
	type = country_event

	title = flavor_flo.4.title
	desc = flavor_flo.4.desc


	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1550.1.1
		to = 1610.1.1
		monthly_chance = 10
	}

	trigger = {
		owns = location:pisa
		at_war = no
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		ruler ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_flo.4.a
		location:pisa = {
			change_development  = development_severe_bonus
		}
	}
}

flavor_flo.5 = { #The [ROOT.GetCountry.GetGovernment.GetRulerTitle]'s Treasury
	hide_portraits = yes
	type = country_event
	title = flavor_flo.5.title
	desc = flavor_flo.5.desc

	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1400.1.1
		to = 1600.1.1
		monthly_chance = 10
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		ruler ?= {
			save_scope_as = target_character
		}
	}

	trigger = {
		government_type = government_type:monarchy
		dynasty_exists = medici_dynasty
		ruler ?= { dynasty = dynasty:medici_dynasty }
		has_advance = a_land_of_banks
	}

	option = {
		name = flavor_flo.5.a
		add_prestige = prestige_mild_bonus
	}
	option = {
		name = flavor_flo.5.b
		add_legitimacy = legitimacy_mild_bonus
	}
}

flavor_flo.6 = { #The Reforms of [ROOT.GetCountry.GetGovernment.GetRuler.GetNameWithNoTooltip]
	hide_portraits = yes
	type = country_event
	title = flavor_flo.6.title
	desc = flavor_flo.6.desc

	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1760.1.1
		to = 1790.1.1
		monthly_chance = 10
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_flo.6.a
		add_stability = stability_mild_penalty

		historical_option = yes

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_move_to_left
		}

		change_societal_value = {
			type = serfdom_vs_free_subjects
			value = societal_value_move_to_right
		}
		change_societal_value = {
			type = aristocracy_vs_plutocracy
			value = societal_value_move_to_right
		}


	}
	option = {
		name = flavor_flo.6.b
		add_stability = stability_mild_bonus
	}
}

flavor_flo.8 = { #The Medici Oriental Press
	type = country_event
	title = flavor_flo.8.title
	desc = flavor_flo.8.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1400.1.1
		to = 1600.1.1
		monthly_chance = 3
	}

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"

	trigger = {
		has_embraced_institution = institution:printing_press
	}

	option = {
		name = flavor_flo.8.a
		add_country_modifier = { modifier = oriental_press years = 25 mode = add_and_extend }
	}
}

flavor_flo.20 = { #The Pazzi Conspiracy
	hide_portraits = yes
	type = country_event
	title = flavor_flo.20.title
	desc = flavor_flo.20.desc

	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1475.1.1
		to = 1480.1.1
		monthly_chance = 20
	}

	trigger = {
		OR = {
			government_type = government_type:monarchy
			has_reform = government_reform:dynastic_signoria_reform
		}
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		create_named_dynasty = de_pazzi_dynasty
		dynasty:de_pazzi_dynasty = {
			save_scope_as = target_dynasty
		}
		create_character = {
			first_name = name_james #Jacopo
			culture = culture:tuscan
			birth_location = location:florence
			dynasty = dynasty:de_pazzi_dynasty
			estate = estate_type:nobles_estate
			save_scope_as = target_character
			create_in_limbo = yes
		}
	}

	option = {
		name = flavor_flo.20.a
		add_stability = stability_extreme_penalty
		kill_character_silently = scope:target_character
	}
	option = {
		name = flavor_flo.20.b
		kill_character_silently = ruler
		scope:target_character = { move_country = root }
	}
}

flavor_flo.27 = { #The Clock Tower of the Palazzo della Signoria
	type = country_event
	title = flavor_flo.27.title
	desc = flavor_flo.27.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1337.1.1
		to = 1400.1.1
		monthly_chance = 3
	}

	trigger = {
		owns = location:florence
		location:florence = {
			OR = {
				has_building_with_at_least_one_level = republican_assembly
				has_building_with_at_least_one_level = royal_court
			}
		}
		months_of_income >= 2
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		location:florence = { save_scope_as = target_location }
	}

	option = {
		name = flavor_flo.27.a

		change_gold_effect = { scale = -2 }
		scope:target_location = { change_prosperity = prosperity_very_weak_bonus }
		add_government_power = government_power_mild_bonus
		add_prestige = prestige_weak_bonus
	}

	option = {
		name = flavor_flo.27.b

		change_gold_effect = { scale = -2 }
		scope:target_location = { change_prosperity = prosperity_very_weak_bonus }
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_bonus
		}
	}

	option = {
		name = flavor_flo.27.c

		add_prestige = prestige_weak_penalty
	}
}

flavor_flo.28 = { # The Florence Cathedral
	type = country_event
	title = flavor_flo.28.title
	desc = flavor_flo.28.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1400.1.1
		to = 1500.1.1
		monthly_chance = 100
	}

	trigger = {
		owns = location:florence
		location:florence = { has_building_with_at_least_one_level = cathedral }
		months_of_income >= 4
		character:flo_brunelleschi ?= {
			is_alive = yes
			owner ?= root
		}
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:clergy_estate }
		location:florence = { save_scope_as = target_location }
		character:flo_brunelleschi = {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_flo.28.a

		change_gold_effect = { scale = -4 }
		scope:target_location = {
			create_art = {
				quality = 90
				artist = scope:target_character
				type = work_of_art_type:monument
				key = duomo_di_firenze
			}
		}
		scope:target_character = {
			add_artist_skill = 0.03
		}
	}

	option = {
		name = flavor_flo.28.b

		change_gold_effect = { scale = -1 }
		culture = {
			add_cultural_tradition = cultural_tradition_mild_bonus
			add_cultural_influence = cultural_influence_mild_bonus
		}
		scope:target_character = {
			add_artist_skill = 0.01
		}
	}

	option = {
		name = flavor_flo.28.c

		add_prestige = prestige_weak_penalty
		add_government_power = government_power_mild_penalty
	}
}

flavor_flo.29 = { # The First Modern Engineer
	type = country_event
	title = flavor_flo.29.title
	desc = flavor_flo.29.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1397.1.1
		to = 1440.1.1
		monthly_chance = 2
	}

	trigger = {
		owns = location:florence
		location:florence = {
			OR = {
				has_building_with_at_least_one_level = arts_academy
				has_building_with_at_least_one_level = art_school
			}
		}
		months_of_income >= 4
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		create_character = {
			first_name = name_philip
			last_name = Brunelleschi
			birth_location = location:florence
			culture = culture:tuscan
			artist = architect
			artist_skill = 0.95
			add_trait = trait:prominent
			save_scope_as = target_artist
			age = 25
			estate = estate_type:burghers_estate
			script = flo_brunelleschi
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
	}

	option = {
		name = flavor_flo.29.a

	change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}

	option = {
		name = flavor_flo.29.b

		trigger = {
			exists = scope:target_country
		}

		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
	}
}

flavor_flo.30 = { # A Great Italian Painter
	type = country_event
	title = flavor_flo.30.title
	desc = flavor_flo.30.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1415.1.1
		to = 1425.1.1
		monthly_chance = 1
	}

	trigger = {
		owns = location:arezzo
		owns = location:florence
		location:florence = {
			OR = {
				has_building_with_at_least_one_level = arts_academy
				has_building_with_at_least_one_level = art_school
			}
		}
		months_of_income >= 4
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		create_character = {
			first_name = name_thomas
			last_name = di_Ser_Giovanni_di_Simone
			birth_location = location:arezzo
			culture = culture:tuscan
			artist = painter
			artist_skill = 0.7
			save_scope_as = target_artist
			age = 20
			add_trait = trait:adept
			estate = estate_type:burghers_estate
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
	}

	option = {
		name = flavor_flo.29.a

	change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}

	option = {
		name = flavor_flo.29.b

		trigger = {
			exists = scope:target_country
		}

		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
	}
}

flavor_flo.31 = { #"[target_artist.GetNameWithNoTooltip]"
	type = country_event
	title = flavor_flo.31.title
	desc = flavor_flo.31.desc
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1470.1.1
		to = 1475.1.1
		monthly_chance = 10
	}

	trigger = {
		owns = location:florence
		any_neighbor_country = {
			count > 0
		}
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		create_character = {
			first_name = name_leonard
			last_name = da_vinci
			adm = 75
			dip = 80
			mil = 65
			artist = painter
			birth_date = 1452.4.15
			artist_skill = 0.95
			culture = culture:tuscan
			birth_location = location:prato
			script = mlo_leonardo_script
			save_scope_as = target_artist
			estate = estate_type:burghers_estate
		}

		location:florence = { save_scope_as = target_location }
		
		random_neighbor_country = {
			save_scope_as = target_country
		}
	}

	option = {
		name = flavor_flo.31.a

		historical_option = yes

		change_gold_effect = { scale = -4 }
		add_research_progress = research_progress_extreme_bonus
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_large_move_to_right
		}
		custom_tooltip = flo_target_artist_joins_our_court_tt
	}

	option = {
		name = flavor_flo.31.b
		trigger = {
			exists = scope:target_country
		}
		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
	}
}

flavor_flo.32 = { #Leonardo Moves to Milano
	type = country_event
	title = flavor_flo.32.title
	desc = flavor_flo.32.desc

	fire_only_once = yes

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		location:florence = {
			save_scope_as = target_old_location
		}
		location:milano = {
			save_scope_as = target_location
		}
		character:mlo_leonardo_script = { save_scope_as = target_artist }
	}

	option = {
		name = flavor_flo.32.a
		culture = {
			add_cultural_influence = cultural_influence_mild_bonus
			add_cultural_tradition = cultural_tradition_mild_bonus
		}
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}

	option = {
		name = flavor_flo.32.b
		add_prestige = prestige_weak_penalty
		add_casus_belli = {
			type = casus_belli:cb_insulted_us
			target = character:mlo_leonardo_script.owner
		}
	}
}

flavor_flo.33 = { # Sandro Botticelli
	type = country_event
	title = flavor_flo.33.title
	desc = flavor_flo.33.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1465.1.1
		to = 1485.1.1
		monthly_chance = 10
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	trigger = {
		owns = location:florence
		location:florence = {
			OR = {
				has_building_with_at_least_one_level = arts_academy
				has_building_with_at_least_one_level = art_school
			}
		}
		months_of_income >= 4
	}

	immediate = {
		create_character = {
			first_name = name_alexander
			last_name = Botticelli
			birth_location = location:florence
			culture = culture:tuscan
			artist = painter
			artist_skill = 0.87
			birth_date = 1445.12.10
			add_trait = trait:prominent
			estate = estate_type:burghers_estate
			script = flo_sandro_boticelli_script
			save_scope_as = target_artist
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
	}

	option = {
		name = flavor_flo.33.a

	change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}

	option = {
		name = flavor_flo.33.b

		trigger = {
			exists = scope:target_country
		}
		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
	}
}

flavor_flo.34 = { # Gian Francesco Poggio Braccioloni
	type = country_event
	title = flavor_flo.34.title
	desc = flavor_flo.34.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1465.1.1
		to = 1485.1.1
		monthly_chance = 10
	}

	trigger = {
		owns = location:florence
		owns = location:arezzo
	}

	immediate = {
		create_character = {
			first_name = name_john
			last_name = Braccioloni
			birth_location = location:arezzo
			culture = culture:tuscan
			adm = 71
			dip = 74
			mil = 68
			birth_date = 1380.2.11
			estate = estate_type:burghers_estate
			script = flo_gian_braccioloni_script
			save_scope_as = target_artist
			artist = writer
			artist_skill = 0.75
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
	}

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"

	option = {
		name = flavor_flo.34.a

		historical_option = yes

		change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}

	option = {
		name = flavor_flo.34.b

		trigger = {
			exists = scope:target_country
		}
		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
	}
}

flavor_flo.35 = { # Manuel Chrysoloras
	type = country_event
	title = flavor_flo.35.title
	desc = flavor_flo.35.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1394.1.1
		to = 1415.12.30
		monthly_chance = 4
	}

	trigger = {
		owns = location:florence
	}

	immediate = {
		create_character = {
			first_name = name_emmanuel
			last_name = Chrysoloras
			birth_location = location:constantinople
			culture = culture:greek_culture
			adm = 80
			dip = 75
			mil = 41
			birth_date = 1350.2.11
			estate = estate_type:burghers_estate
			script = flo_manuel_chrysoloras
			save_scope_as = target_artist
			artist = writer
			artist_skill = 0.75
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
		location:florence = {
			save_scope_as = target_location
		}
	}

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"

	option = {
		name = flavor_flo.35.a

	change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}

	option = {
		name = flavor_flo.35.b

		trigger = {
			exists = scope:target_country
		}
		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
		scope:target_country = {
			add_research_progress = research_progress_severe_bonus
		}
	}
}

flavor_flo.36 = { # Niccolo Niccoli
	type = country_event
	title = flavor_flo.36.title
	desc = flavor_flo.36.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1384.1.1
		to = 1450.1.1
		monthly_chance = 4
	}

	trigger = {
		owns = location:florence
		location:florence = {
			has_building_with_at_least_one_level = library
		}
	}

	immediate = {
		create_character = {
			first_name = name_nicholas
			last_name = Niccoli
			birth_location = location:florence
			culture = culture:tuscan
			adm = 55
			dip = 91
			mil = 23
			birth_date = 1364.2.11
			estate = estate_type:clergy_estate
			script = flo_niccolo_niccoli_script
			save_scope_as = target_artist
			artist = writer
			artist_skill = 0.72
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
		location:florence = {
			save_scope_as = target_location
		}
	}

	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_books.dds"

	option = {
		name = flavor_flo.36.a

	change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
		add_research_progress = research_progress_severe_bonus
	}

	option = {
		name = flavor_flo.36.b

		trigger = {
			exists = scope:target_country
		}
		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
		scope:target_country = {
			add_research_progress = research_progress_severe_bonus
		}
	}
}

flavor_flo.37 = { # Donatello
	type = country_event
	title = flavor_flo.37.title
	desc = flavor_flo.37.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1405.1.1
		to = 1444.12.30
		monthly_chance = 4
	}

	trigger = {
		owns = location:florence
		location:florence = {
			OR = {
				has_building_with_at_least_one_level = art_school
				has_building_with_at_least_one_level = arts_academy
			}
		}
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		create_character = {
			first_name = name_donato
			last_name = di_Niccolo_di_Betto_Bardi
			birth_location = location:florence
			culture = culture:tuscan
			birth_date = 1386.2.11
			estate = estate_type:peasants_estate
			script = flo_donatello_script
			save_scope_as = target_artist
			artist = sculptor
			artist_skill = 0.74
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
		location:florence = {
			save_scope_as = target_location
		}
	}

	option = {
		name = flavor_flo.37.a

	change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_minor_move_to_right
		}
	}

	option = {
		name = flavor_flo.37.b

		trigger = {
			exists = scope:target_country
		}
		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_minor_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
		scope:target_country = {
		}
	}
}

flavor_flo.38 = { # Nuova Cronica
	type = country_event
	title = flavor_flo.38.title
	desc = flavor_flo.38.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1337.1.1
		to = 1348.12.30
		monthly_chance = 3
	}

	trigger = {
		owns = location:florence
		character:flo_giovanni_villani ?= {
			owner = ROOT
			is_alive = yes
		}
	}

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"

	immediate = {
		location:florence = {
			save_scope_as = target_location
		}
		location:rome = {
			save_scope_as = target_location_rome
		}
		character:flo_giovanni_villani = { save_scope_as = target_character }
	}

	option = {
		name = flavor_flo.38.a

	change_gold_effect = { scale = -4 }
		location:florence = {
			create_art = {
				quality = 81
				artist = scope:target_character
				type = work_of_art_type:chronicle
				key = nuova_cronica
			}
		}
	}

	option = {
		name = flavor_flo.38.b

		trigger = {
			country_exists = c:PAP
			c:PAP = {
				owns = location:rome
			}
		}

	change_gold_effect = { scale = -4 }
		location:rome = {
			create_art = {
				quality = 81
				artist = scope:target_character
				type = work_of_art_type:chronicle
				key = nuova_cronica
			}
		}
		add_religious_influence_if_valid = {
			VALUE = 20
		}
		add_prestige = prestige_mild_bonus
		add_legitimacy = legitimacy_weak_bonus
		c:PAP = {
			add_opinion = {
				target = root
				modifier = opinion_pleased
			}
		}
	}

	option = {
		name = flavor_flo.38.c

		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_minor_move_to_left
		}
	}
}

flavor_flo.39 = { #The First Modern Historian
	type = country_event
	title = flavor_flo.39.title
	desc = flavor_flo.39.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1390.1.1
		to = 1444.12.30
		monthly_chance = 2
	}

	trigger = {
		owns = location:florence
		owns = location:arezzo
	}

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"

	immediate = {
		create_character = {
			first_name = name_leonard
			last_name = Bruni
			birth_location = location:arezzo
			culture = culture:tuscan
			adm = 90
			dip = 54
			mil = 29
			birth_date = 1370.5.17
			estate = estate_type:peasants_estate
			script = flo_leonardo_bruni_script
			save_scope_as = target_artist
			artist = writer
			artist_skill = 0.71
		}
		random_neighbor_country = {
			save_scope_as = target_country
		}
	}

	option = {
		name = flavor_flo.39.a

		historical_option = yes
		change_gold_effect = { scale = -4 }
		custom_tooltip = flo_target_artist_joins_our_court_tt
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
		culture = {
			add_cultural_tradition = cultural_tradition_weak_bonus
			add_cultural_influence = cultural_influence_weak_bonus
		}
	}

	option = {
		name = flavor_flo.39.b

		trigger = {
			exists = scope:target_country
		}
		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
		scope:target_artist = {
			move_country = scope:target_country
		}
	}
}

flavor_flo.40 = { # The History of Florence by Leonardo Bruni
	type = country_event
	title = flavor_flo.40.title
	desc = flavor_flo.40.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1410.1.1
		to = 1445.12.30
		monthly_chance = 2
	}

	trigger = {
		owns = location:florence
		character:flo_leonardo_bruni_script = {
			owner = ROOT
			is_alive = yes
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		location:florence = {
			save_scope_as = target_location
		}
		character:flo_leonardo_bruni_script = { save_scope_as = target_character }
	}

	option = {
		name = flavor_flo.40.a

		historical_option = yes
		change_gold_effect = { scale = -4 }
		location:florence = {
			create_art = {
				quality = 83
				artist = scope:target_character
				type = work_of_art_type:chronicle
				key = history_of_the_florentine_people
			}
		}
	}


	option = {
		name = flavor_flo.40.b

		add_prestige = prestige_weak_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
	}
}

flavor_flo.42 = { #Societas Aluminum
	type = country_event
	title = flavor_flo.42.title
	desc = flavor_flo.42.desc

	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_alum.dds"

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1400.1.1
		to = 1499.12.30
		monthly_chance = 2
	}

	trigger = {
		has_advance = a_land_of_banks
		OR = {
			owns = location:viterbo
			location:viterbo.owner = {
				AND = {
					NOT = {
						is_rival_of = root
						is_enemy_of = root
					}
					opinion = {
						target = root
						value >= 50
					}
				}
			}
		}
	}

	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_alum.dds"

	immediate = {
		location:viterbo.owner = {
			save_scope_as = target_country
		}
		location:viterbo = {
			save_scope_as = target_location
		}
	}

	option = { #Buy mining rights
		name = flavor_flo.42.a
		change_gold_effect = { scale = -1 }
		add_prestige = prestige_weak_bonus
		scope:target_location = { change_raw_material = goods:alum }
		historical_option = yes
	}

	option = { #Don't buy
		name = flavor_flo.42.b
		add_prestige = prestige_mild_penalty
		if = {
			limit = {
				scope:target_country != root
			}
			scope:target_country = {
				add_opinion = {
					target = root
					modifier = flo_refused_buy_mine_rights
				}
			}
		}
	}
}

flavor_flo.43 = { #The Alum Mine of Volterra
	type = country_event
	title = flavor_flo.43.title
	desc = flavor_flo.43.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1450.1.1
		to = 1499.12.30
		monthly_chance = 2
	}

	trigger = {
		owns = location:volterra
		location:viterbo = { raw_material = goods:alum }
		location:volterra = { raw_material = goods:alum }
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		location:volterra = {
			save_scope_as = target_location
		}
	}

	option = { #Abandon the mine
		name = flavor_flo.43.a
		scope:target_location = {
			change_raw_material = goods:marble
			every_pop = {
				limit = {
					owner = root
					pop_type = pop_type:peasants
				}
				add_pop_satisfaction = pop_satisfaction_extreme_penalty
			}
		}
		change_societal_value = { type = capital_economy_vs_traditional_economy value = societal_value_move_to_left }
		historical_option = yes
	}

	option = { #Increase mining efforts
		name = flavor_flo.43.b
		change_gold_effect = { scale = -12 }
		change_societal_value = { type = capital_economy_vs_traditional_economy value = societal_value_move_to_right }
	}
}

flavor_flo.44 = { #The New Urban Planning Registration System
	type = country_event
	title = flavor_flo.44.title
	desc = flavor_flo.44.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1370.1.1
		to = 1500.12.30
		monthly_chance = 1
	}

	trigger = {
		societal_value:centralization_vs_decentralization < 15
		OR = {
			ruler ?= { adm >= 70 }
			has_variable = medici_in_power
			ruler ?= { total_abilities >= 130 }
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		capital = { save_scope_as = target_location }
	}

	option = {
		name = flavor_flo.44.a
		historical_option = yes

		capital.area = {
			every_location_in_area = {
				limit = {
					owner = ROOT
				}
				change_development = development_weak_bonus
			}

		}
		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_move_to_left
		}
		change_gold_effect = { scale = -2 }
	}

	option = {
		name = flavor_flo.44.b

		add_government_power = government_power_weak_penalty
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

flavor_flo.45 = { #Leonardo da Vinci Paints the Mona Lisa
	type = country_event
	title = flavor_flo.45.title
	desc = flavor_flo.45.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1480.1.1
		to = 1525.12.30
		monthly_chance = 1
	}

	trigger = {
		character:mlo_leonardo_script ?= {
			is_alive = yes
			owner = ROOT
		}
		has_embraced_institution = institution:renaissance
	}

	immediate = {
		character:mlo_leonardo_script = {
			save_scope_as = target_artist
		}
		capital = {
			save_scope_as = target_location
		}
	}

	option = {
		name = flavor_flo.45.a
		historical_option = yes

		scope:target_location = {
			create_art = {
				quality = 95
				artist = scope:target_artist
				type = work_of_art_type:painting
				key = mona_lisa
			}
		}
		add_prestige = prestige_mild_bonus
		change_gold_effect = { scale = -5 }
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	option = {
		name = flavor_flo.45.b

		add_prestige = prestige_weak_penalty
	}
}

flavor_flo.46 = { #Machiavelli
	type = country_event
	title = flavor_flo.46.title
	desc = flavor_flo.46.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1490.1.1
		to = 1515.1.1
		monthly_chance = 30
	}


	trigger = {
		owns = location:florence
		government_type = government_type:republic
	}

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"

	immediate = {
		create_character = {
			first_name = name_nicholas
			last_name = Machiavelli
			adm = 25
			dip = 30
			mil = 25
			birth_date = 1469.5.3
			birth_location = location:florence
			artist_skill = 0.90
			artist = philosopher
			estate = estate_type:burghers_estate
			culture = culture:tuscan
			script = flo_machiavelli
			save_scope_as = target_artist
			create_in_limbo = yes
		}

	}

	option = {
		name = flavor_flo.46.a
		add_prestige = prestige_mild_bonus
		scope:target_character = { move_country = root }

		trigger_event_silently = { id = flavor_flo.4601 days = { 500 2000 } }
	}

}

flavor_flo.4601 = {
	type = country_event
	title = flavor_flo.4601.title
	desc = flavor_flo.4601.desc

	trigger = {
		character:flo_machiavelli ?= {
			is_alive = yes
			owner = root
		}
	}

	immediate = {
		location:florence = {
			create_art = {
				artist = scope:target_artist
				quality = 92
				type = work_of_art_type:treatise
				key = the_prince
			}
		}
		work_of_art:the_prince = {
			save_scope_as = target_art
		}
	}

	image = "gfx/interface/illustrations/institutions/scientific_revolution.dds"

	option = {
		name = flavor_flo.4601.a
		add_prestige = prestige_mild_bonus

		if = {
			limit = {
				country_exists = c:MLO
			}
			c:MLO = { trigger_event_silently = { id = flavor_flo.4602  } }
		}
	}
}

flavor_flo.4602 = {
	type = country_event
	title = flavor_flo.4602.title
	desc = flavor_flo.4602.desc
	
	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_flo.4602.a
		add_prestige = prestige_extreme_bonus
	}
}


flavor_flo.47 = { #The Age of [target_character.GetNameWithNoTooltip] (Event for your "Cosimo" ruler)
	type = country_event
	title = flavor_flo.47.title
	desc = flavor_flo.47.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1400.1.1
		to = 1450.12.30
		monthly_chance = 25
	}

	trigger = {
		dynasty_exists = medici_dynasty
		ruler ?= {
			has_dynasty = yes
			dynasty = dynasty:medici_dynasty
			total_abilities >= 210
		}
		war_exhaustion <= 1
		total_debt <= 0.1
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler ?= {
			save_scope_as = target_character
			set_variable = golden_age_medici_variable
		}
		capital = { save_scope_as = target_location }
	}

	option = {
		name = flavor_flo.47.a

		trigger = {
			ruler ?= {
				adm >= 70
			}
		}

		ruler = {
			add_character_modifier = {
				modifier = golden_age_florence_adm_modifier
				months = -1
				mode = add
			}
		}
	}

	option = {
		name = flavor_flo.47.b

		trigger = {
			ruler ?= {
				dip >= 70
			}
		}

		ruler = {
			add_character_modifier = {
				modifier = golden_age_florence_dip_modifier
				months = -1
				mode = add
			}
		}
	}

	option = {
		name = flavor_flo.47.c

		trigger = {
			ruler ?= {
				mil >= 70
			}
		}

		ruler = {
			add_character_modifier = {
				modifier = golden_age_florence_mil_modifier
				months = -1
				mode = add
			}
		}
	}

	option = {
		name = flavor_flo.47.d

		ruler = {
			add_character_modifier = {
				modifier = golden_age_florence_balanced_modifier
				months = -1
				mode = add
			}
		}
	}
}

flavor_flo.48 = {
	type = country_event
	title = flavor_flo.48.title
	desc = flavor_flo.48.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1500.1.1
		to = 1599.12.30
		monthly_chance = 1
	}

	trigger = {
		location:florence = {
			owner = ROOT
			has_building_with_at_least_one_level = arts_academy
		}
		culture = {
			OR = {
				cultural_tradition >= 30
				cultural_influence >= 30
			}
		}
	}

	image = "gfx/interface/illustrations/institutions/renaissance.dds"

	immediate = {
		location:florence = { save_scope_as = target_location }
	}

	option = {
		name = flavor_flo.48.a

		culture = {
			add_cultural_influence = cultural_influence_mild_bonus
			add_cultural_tradition = cultural_tradition_mild_bonus
		}
	}

	option = {
		name = flavor_flo.48.b

		add_research_progress = research_progress_mild_bonus
	}

	option = {
		name = flavor_flo.48.c

		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}
}

flavor_flo.49 = { # The Consolidation of Power
	type = country_event
	title = flavor_flo.49.title
	desc = flavor_flo.49.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1400.1.1
		to = 1450.12.30
		monthly_chance = 5
	}

	trigger = {
		ruler ?= {
			has_variable = golden_age_medici_variable
		}
		government_type = government_type:republic
		NOT = { has_reform = government_reform:dynastic_signoria_reform }

		OR = {
			NOT = {
				any_current_reforms = { is_major_reform = yes }
			}
			any_current_reforms = { this = government_reform:signoria_reform }
		}
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:burghers_estate }
		ruler ?= {
			save_scope_as = target_character
		}
		capital = { save_scope_as = target_location }
	}

	option = {
		name = flavor_flo.49.a
		historical_option = yes

		remove_current_major_government_reform = yes

		add_reform = government_reform:dynastic_signoria_reform
		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_large_move_to_left
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}

	option = {
		name = flavor_flo.49.b

		add_government_power = government_power_extreme_bonus
		add_stability = stability_mild_bonus
	}
}

flavor_flo.50 = { # The Office of the Night
	hide_portraits = yes
	type = country_event
	title = flavor_flo.50.title
	desc = flavor_flo.50.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1400.1.1
		to = 1500.12.30
		monthly_chance = 1
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:burghers_estate }
		ruler ?= {
			save_scope_as = target_character
		}
		capital = { save_scope_as = target_location }
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	option = {
		name = flavor_flo.50.a
		historical_option = yes

		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_extreme_bonus
		}
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_large_move_to_left
		}
		add_stability = stability_weak_bonus
	}

	option = {
		name = flavor_flo.50.b

		add_stability = stability_mild_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_extreme_penalty
		}
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
	}
}

flavor_flo.51 = { # Medici Giraffe
	hide_portraits = yes
	type = country_event
	title = flavor_flo.51.title
	desc = flavor_flo.51.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1485.1.1
		to = 1500.12.30
		monthly_chance = 20
	}

	trigger = {
		has_ruler = yes
		OR = {
			country_exists = c:MAM
			region:egypt_region = {
				any_location_in_region = {
					is_capital = yes
				}
			}
		}
	}

	illustration_tags = {
        10 = happy
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler = { save_scope_as = country_ruler }
		if = {
			limit = {
				country_exists = c:MAM
			}
			c:MAM = { save_scope_as = egyptian_tag }
		}
		else = {
			region:egypt_region = {
				random_location_in_region = {
					limit = {
						is_capital = yes
					}
					owner = {
						save_scope_as = egyptian_tag
					}
				}
			}
		}
		c:PAP ?= {
			save_scope_as = papal_tag
		}
	}

	option = {
		name = flavor_flo.51.a

		historical_option = yes

		add_opinion_mutual_effect = {
			target = scope:egyptian_tag
			modifier = flo_medici_giraffe_opinion
		}

		add_country_modifier = {
			modifier = flo_medici_giraffe_renown
			years = -1
		}

		custom_tooltip = FLO_giraffe_death_information

		trigger_event_silently = {
			id = flavor_flo.52
			days = { 90 180 }
		}
	}

	option = {
		name = flavor_flo.51.b

		if = {
			limit = {
				religion = religion:catholic
				NOT = { scope:egyptian_tag.religion = ROOT.religion }
			}
			scope:papal_tag ?= {
				add_opinion = {
					modifier = flo_not_accepting_gifts_from_heathens
					target = ROOT
				}
			}
		}

		add_estate_satisfaction = {
			type = estate_type:clergy_estate
			value = estate_satisfaction_mild_bonus
		}
	}
}

flavor_flo.52 = { # Medici Giraffe dies
	type = country_event
	title = flavor_flo.52.title
	desc = flavor_flo.52.desc

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_flo.52.a

		remove_country_modifier = flo_medici_giraffe_renown
	}
}

scripted_effect tally_cost_of_loans = {
	set_local_variable = {
		name = loan_tally
		value = 0
	}
	every_loan = {
		limit = {
			owner ?= {
				is_in_list = banking_country_list
			}
		}
		PREV = {
			change_local_variable = {
				name = loan_tally
				add = prev.loan_amount
			}
		}
	}
}

flavor_flo.53 = { # Financial Troubles of Bardi and Peruzzi
	type = country_event
	title = flavor_flo.53.title
	desc = flavor_flo.53.desc
	historical_info = flavor_flo.53.historical_info
	fire_only_once = yes

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1340.1.1
		to = 1350.1.1
		monthly_chance = 10
	}

	trigger = {
		OR = {
			country_exists = c:PRZ
			country_exists = c:BRD
		}
		OR = {
			c:PRZ ?= {
				is_ai = yes
			}
			c:BRD ?= {
				is_ai = yes
			}
		}
	}

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		c:PRZ ?= {
			if = {
				limit = {
					is_ai = yes
				}
				add_to_list = banking_country_list
			}
		}
		c:BRD ?= {
			if = {
				limit = {
					is_ai = yes
				}
				add_to_list = banking_country_list
			}
		}

		set_local_variable = {
			name = debt_of_the_banking_countries
			value = 0
		}
		every_in_list = {
			list = banking_country_list
			every_lent_loan = {
				add_to_list = every_loan_lent_by_bardi_and_peruzzi
				change_local_variable = {
					name = debt_of_the_banking_countries
					add = loan_amount
				}
			}
			change_local_variable = {
				name = debt_of_the_banking_countries
				add = gold
			}
		}
		every_in_list = {
			list = every_loan_lent_by_bardi_and_peruzzi
			borrower = {
				add_to_list = every_borrower_of_the_banks
			}
		}
		save_scope_as = target_country
	}

	# Try to lighten the impact
	option = {
		name = flavor_flo.53.a

		historical_option = yes

		every_in_list = {
			list = banking_country_list
			hidden_effect = {
				every_lent_loan = {
					change_loan_owner = ROOT
					add_to_list = temp_list_for_moved_loans
				}
			}
			set_bankruptcy = yes
			hidden_effect = {
				every_in_list = {
					list = temp_list_for_moved_loans
					change_loan_owner = PREV
					remove_from_list = temp_list_for_moved_loans
				}
			}

		}

		add_country_modifier = {
			modifier = flo_economic_downturn
			years = 15
		}

		custom_tooltip = FLO_medici_will_be_stronger
		set_variable = stronger_medici

		if = {
			limit = {
				list_size = {
					name = every_borrower_of_the_banks
					value >= 1
				}
			}
			hidden_effect = {
				every_in_list = {
					list = every_borrower_of_the_banks
					trigger_event_non_silently = flavor_flo.54
				}
			}
			custom_tooltip = FLO_every_borrower_from_the_banks
			show_as_tooltip = {
				random_in_list = {
					list = every_borrower_of_the_banks
					trigger_event_non_silently = flavor_flo.54
				}
			}
		}
	}

	# Save the banks from collapse
	option = {
		name = flavor_flo.53.b

		add_gold = { value = local_var:debt_of_the_banking_countries multiply = -0.5 }

		every_in_list = {
			list = banking_country_list
			add_gold = { value = gold multiply = -0.5 }
		}

		if = {
			limit = {
				list_size = {
					name = every_borrower_of_the_banks
					value >= 1
				}
			}
			hidden_effect = {
				every_in_list = {
					list = every_borrower_of_the_banks
					trigger_event_non_silently = flavor_flo.55
				}
			}
			custom_tooltip = FLO_every_borrower_from_the_banks
			show_as_tooltip = {
				random_in_list = {
					list = every_borrower_of_the_banks
					trigger_event_non_silently = flavor_flo.55
				}
			}
		}
	}

	# Let them fall!
	option = {
		name = flavor_flo.53.c

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_large_move_to_left
		}

		every_in_list = {
			list = banking_country_list
			custom_tooltip = {
				text = FLO_this_will_cease_existing
				every_owned_foreign_building = {
					location = { destroy_building = prev }
				}
			}
		}

		add_country_modifier = {
			modifier = flo_economic_downturn
			years = 25
		}

		custom_tooltip = FLO_medici_will_be_stronger
		set_variable = stronger_medici

		if = {
			limit = {
				list_size = {
					name = every_borrower_of_the_banks
					value >= 1
				}
			}
			hidden_effect = {
				every_in_list = {
					list = every_borrower_of_the_banks
					trigger_event_non_silently = flavor_flo.56
				}
			}
			custom_tooltip = FLO_every_borrower_from_the_banks
			show_as_tooltip = {
				random_in_list = {
					list = every_borrower_of_the_banks
					trigger_event_non_silently = flavor_flo.56
				}
			}
		}
	}
}

flavor_flo.54 = { # Fall of the Banks - opportunity not to repay the loans at a stark diplomatic reputation penalty
	type = country_event
	title = flavor_flo.54.title
	desc = flavor_flo.54.desc
	historical_info = flavor_flo.54.historical_info
	
	illustration_tags = {
        10 = regular
        10 = interior
    }
	
	immediate = {
		tally_cost_of_loans = yes
		scope:target_country ?= {
			capital ?= {
				save_scope_as = target_location
			}
		}
	}

	option = {
		name = flavor_flo.54.a

		add_country_modifier = {
			modifier = flo_lack_of_financial_credibility
			years = 40
			size = {
				value = local_var:loan_tally
				multiply = 0.005
			}
		}
		every_loan = {
			limit = {
				owner ?= {
					is_in_list = banking_country_list
				}
			}
			cancel_loan = this
		}
	}
	option = {
		name = flavor_flo.54.b

		add_diplomats = 1
	}
}

flavor_flo.55 = { # Fall of the Banks - loans are transferred to florence
	type = country_event
	title = flavor_flo.55.title
	desc = flavor_flo.55.desc
	historical_info = flavor_flo.55.historical_info

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	option = {
		name = flavor_flo.55.a

		every_loan = {
			limit = {
				owner ?= {
					is_in_list = banking_country_list
				}
			}
			change_loan_owner = c:FLO
		}
	}
}

flavor_flo.56 = { # Fall of the Banks - loans are cancelled
	type = country_event
	title = flavor_flo.56.title
	desc = flavor_flo.56.desc
	historical_info = flavor_flo.56.historical_info

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	option = {
		name = flavor_flo.56.a

		every_loan = {
			limit = {
				owner ?= {
					is_in_list = banking_country_list
				}
			}
			cancel_loan = this
		}
	}
}

flavor_flo.57 = { # Formation of the Medici Bank https://en.wikipedia.org/wiki/Medici_Bank
	hide_portraits = yes
	type = country_event
	title = flavor_flo.57.title
	desc = flavor_flo.57.desc
	historical_info = flavor_flo.57.historical_info
	fire_only_once = yes

	major = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1390.1.1
		to = 1410.1.1
		monthly_chance = 10
	}

	trigger = {
		owns = location:florence
		dynasty_exists = medici_dynasty
		dynasty:medici_dynasty = {
			any_character_in_dynasty = {
				is_alive = yes
				is_ruler = no
				is_female = no
				age_in_years >= 20
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		location:florence = {
			save_scope_as = medici_hq
		}
		dynasty:medici_dynasty = {
			save_scope_as = medici_dynasty
		}

		dynasty:medici_dynasty = {
			random_character_in_dynasty = {
				limit = {
					is_alive = yes
					is_ruler = no
					is_female = no
					age_in_years >= 20
				}
				save_scope_as = medici_bank_founder
			}
		}

		scope:medici_hq = {
			create_building_country_in_location = {
				name = {
					name = MEDICI
				}
				reforms = {
					banking_country
				}
				save_scope_as = medici_bank_tag

				hidden_effect = {
					change_country_flag = MEDICI
					change_country_tag = MEDIC
					change_heir_selection = heir_selection:bank_selection
					change_government_type = government_type:republic

					set_new_ruler = scope:medici_bank_founder
				}
			}
			scope:medici_hq = {
				change_building_level_in_location = {
					building = building_type:banking_office
					value = 1
					owner = scope:medici_bank_tag
				}
			}
		}
		set_local_variable = {
			name = amount_of_gold_for_medici
			value = { 250 500 }
		}
		if = {
			limit = {
				has_variable = stronger_medici
			}
			change_local_variable = {
				name = amount_of_gold_for_medici
				add = { 500 1000 }
			}
		}
		set_global_variable = {
			name = medici_tag
			value = scope:medici_bank_tag
		}
	}

	option = {
		name = flavor_flo.57.a

		historical_option = yes

		show_as_tooltip = {
			scope:medici_hq = {
				change_building_level_in_location = {
					building = building_type:banking_office
					value = 1
					owner = scope:medici_bank_tag
				}
			}
		}
		location:rome = {
			if = {
				limit = {
					NOT = { this = scope:medici_hq }
				}
				change_building_level_in_location = {
					building = building_type:banking_office
					value = 1
					owner = scope:medici_bank_tag
				}
			}
		}

		change_gold_effect = { scale = 2 }
	}

	option = {
		name = flavor_flo.57.b

		show_as_tooltip = {
			scope:medici_hq = {
				change_building_level_in_location = {
					building = building_type:banking_office
					value = 1
					owner = scope:medici_bank_tag
				}
			}
		}
		location:rome = {
			if = {
				limit = {
					NOT = { this = scope:medici_hq }
				}
				change_building_level_in_location = {
					building = building_type:banking_office
					value = 1
					owner = scope:medici_bank_tag
				}
			}
		}
		change_gold_effect = { scale = 2 }

		change_player = scope:medici_bank_tag
	}

	after = {
		scope:medici_bank_tag = {
			trigger_event_non_silently = flavor_flo.58
		}
	}
}

flavor_flo.58 = { # Starting Event for Medici Bank https://en.wikipedia.org/wiki/Medici_Bank
	type = country_event
	title = flavor_flo.58.title
	desc = flavor_flo.58.desc
	historical_info = flavor_flo.58.historical_info

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	option = {
		name = flavor_flo.58.a

		add_gold = local_var:amount_of_gold_for_medici

		custom_tooltip = FLO_events_will_fire_to_give_more_banks
	}

	after = {
		set_variable = {
			name = flo_bank_counter
			value = 1
		}
		clear_saved_scope = medici_bank_founder
		trigger_event_silently = {
			id = flavor_flo.59
			years = { 2 4 }
		}
	}
}

# "Pulse" event for Medici tag
flavor_flo.59 = {
	type = country_event
	title = flavor_flo.59.title
	desc = flavor_flo.59.desc

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		switch = {
			trigger = var:flo_bank_counter
			1 = { location:venice = { save_scope_as = target_location } }
			2 = { location:naples = { save_scope_as = target_location } }
			3 = { location:geneve = { save_scope_as = target_location } }
			4 = { location:basel = { save_scope_as = target_location } }
			5 = { location:pisa = { save_scope_as = target_location } }
			6 = { location:bruges = { save_scope_as = target_location } }
			7 = { location:avignon = { save_scope_as = target_location } }
			8 = { location:lyon = { save_scope_as = target_location } }
			9 = { location:milano = { save_scope_as = target_location } }
			10 = { location:london = { save_scope_as = target_location } }
		}
	}

	option = {
		name = flavor_flo.59.a

		scope:target_location = {
			if = {
				limit = {
					NOT = {
						location_building_level = {
							building_type = building_type:banking_office
							value > 0
							owner = scope:medici_bank_tag
						}
					}
				}
				change_building_level_in_location = {
					building = building_type:banking_office
					value = 1
					owner = scope:medici_bank_tag
				}
			}
			else = {
				owner = {
					add_opinion = {
						modifier = flo_good_business
						target = ROOT
					}
				}
				ROOT = {
					add_gold = {
						value = PREV.location_tax_base
						multiply = 12
					}
				}
			}
		}
		if = {
			limit = {
				var:flo_bank_counter >= 11
			}
			custom_tooltip = FLO_end_of_events
		}
	}

	after = {
		change_variable = {
			name = flo_bank_counter
			add = 1
		}
		if = {
			limit = {
				var:flo_bank_counter >= 11
			}
			remove_variable = flo_bank_counter
		}
		else = {
			trigger_event_silently = {
				id = flavor_flo.59
				years = { 2 4 }
			}
		}
	}
}

flavor_flo.60 = {# Walter VI de Brienne on Florentine Throne
	type = country_event
	title = flavor_flo.60.title
	desc = flavor_flo.60.desc
	fire_only_once = yes
	major = yes
	
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1342.1.1
		to = 1345.1.1
		monthly_chance = 25
	}

	illustration_tags = {
		10 = happy
		10 = interior
	}

	trigger = {
		character:arg_gautier_vi_brienne ?= {
			is_alive = yes
			owner = {
				is_ai = yes
			}
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:burghers_estate }
		character:arg_gautier_vi_brienne = {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_flo.60.a

		historical_option = yes

		set_new_ruler = scope:target_character

		add_country_modifier = {
			modifier = flo_harsh_economic_policies
			years = 15
		}
		trigger_event_silently = {
			id = flavor_flo.61
			months = { 9 12 }
		}
	}

	option = {
		name = flavor_flo.60.b

		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = estate_satisfaction_extreme_penalty
		}
		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}
}

# Conspiracy against Walter
flavor_flo.61 = {
	type = country_event
	title = flavor_flo.61.title
	desc = flavor_flo.61.desc

	illustration_tags = {
		10 = angry
		10 = interior
	}

	trigger = {
		character:arg_gautier_vi_brienne ?= {
			is_alive = yes
		}
		has_ruler = yes
		ruler = character:arg_gautier_vi_brienne
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:burghers_estate }
		capital = {
			save_scope_as = capital_location
		}
	}

	option = {
		name = flavor_flo.61.a

		historical_option = yes

		scope:target_character = { remove_ruler = ROOT }
		add_stability = stability_severe_bonus
	}

	option = {
		name = flavor_flo.61.b

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_large_move_to_left
		}
		add_republican_tradition = republican_tradition_severe_penalty

		change_gold_effect = { scale = 6 }
	}
}

# Cosimo Medici (or rather his equivalent)
flavor_flo.62 = {
	type = country_event
	title = flavor_flo.62.title
	desc = flavor_flo.62.desc
	historical_info = flavor_flo.62.historical_info
	fire_only_once = yes

	trigger = {
		exists = global_var:medici_tag
	}

	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1430.1.1
		to = 1500.1.1
		monthly_chance = 5
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:burghers_estate }
		global_var:medici_tag = {
			save_scope_as = target_country
			ruler = {
				save_scope_as = target_character
			}
		}
	}

	option = {
		name = flavor_flo.62.a

		historical_option = yes

		set_new_ruler = scope:target_character
		add_stability = stability_severe_penalty

		global_var:medici_tag = {
			make_subject_of = {
				target = ROOT
				type = subject_type:state_bank
			}
		}
		if = {
			limit = {
				has_variable = stronger_medici
			}
			scope:target_character = {
				add_dip = 10
				add_mil = 10
				add_adm = 10
			}
		}
	}

	option = {
		name = flavor_flo.62.b

		add_republican_tradition = republican_tradition_severe_bonus
	}
	after = {
		remove_variable = stronger_medici
	}
}

#John Hawkwood
flavor_flo.63 = {
	type = country_event
	title = flavor_flo.63.title
	desc = flavor_flo.63.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = FLO
		tag = TUS
		from = 1365.1.1
		to = 1385.1.1
		monthly_chance = 10
	}

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
		create_character = {
			first_name = name_john
			last_name = Hawkwood
			adm = { 40 60 }
			dip = { 50 60 }
			mil = { 85 95 }
			estate = estate_type:burghers_estate
			birth_date = 1323.1.1
			birth_location = location:hedingham
			create_in_limbo = yes
			save_scope_as = target_character
		}
		create_mercenary = {
			name = flo_white_company
			home = location:florence
			categories = {
				army_infantry = 15
				army_cavalry = 5
			}
			cost_multiplier = 0.5
			save_scope_as = white_company_scope
		}
	}

	option = {
		name = flavor_flo.63.a
		historical_option = yes
		change_gold_effect = { scale = -6 }

		scope:target_character = {
			move_country = ROOT
		}
		hire_mercenary = scope:white_company_scope
		scope:white_company_scope = {
			random_mercenary_sub_unit = {
				owning_unit = {
					set_as_commander = scope:target_character
				}
			}
		}
	}

	option = {
		name = flavor_flo.63.b

		change_societal_value = {
			type = belligerent_vs_conciliatory
			value = societal_value_minor_move_to_right
		}
		hidden_effect = {
			destroy_mercenary = scope:white_company_scope	#The loc for the effect is a bit too intense in that context
		}
	}
}