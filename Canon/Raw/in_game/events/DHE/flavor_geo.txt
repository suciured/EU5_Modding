namespace = flavor_geo

#The [ShowCultureGroupNameWithNoTooltip('mongolian_group')] Expulsion
flavor_geo.1 = {
	hide_portraits = yes
	type = country_event
	title = flavor_geo.1.title
	desc = flavor_geo.1.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1337.1.1
		to = 1350.6.1
		monthly_chance = 25
	}

	trigger = {
		own_entire_province = province_definition:kakheti_province
	}

	illustration_tags = {
		10 = happy
		10 = exterior
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:nobles background = pop_type:soldiers }
		event_illustration_government_estate_effect = yes
		ruler_or_regent = { save_scope_as = target_character1 }
		character:chb_chupan = { save_scope_as = target_character2 }
		location:rustavi = {
			save_scope_as = target_location
			province = { save_scope_as = target_province }
		}
		random_estate_privilege = {
			limit = {
				estate_type = estate_type:nobles_estate
			}
			save_scope_as = first_privilege
		}
		random_estate_privilege = {
			limit = {
				estate_type = estate_type:nobles_estate
				this != scope:first_privilege
			}
			save_scope_as = second_privilege
		}
	}

	option = {
		name = flavor_geo.1.a
		custom_tooltip = {
			text = every_location_target_province_30_prosperity_tt
			scope:target_province = {
				every_location_in_province = {
					change_prosperity = prosperity_extreme_bonus
				}
			}
		}

		add_government_power = government_power_mild_bonus
		add_stability = stability_mild_bonus
		change_gold_effect = { scale = -1 }
	}

	option = {
		name = flavor_geo.1.b

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_radical_penalty
		}
		capital.province = {
			if = {
				limit = {
					any_location_in_province = {
						any_pop = { pop_type = pop_type:nobles }
					}
				}
				every_location_in_province = {
					every_pop = {
						limit = {
							owner = root
							pop_type = pop_type:nobles
						}
						add_pop_satisfaction = pop_satisfaction_radical_penalty
						add_pop_size = {
							value = pop_size
							multiply = -0.5
						}
					}
				}
			}
		}
		if = {
			limit = { exists = scope:first_privilege }
			revoke_estate_privilege = scope:first_privilege
		}
		if = {
			limit = { exists = scope:second_privilege }
			revoke_estate_privilege = scope:second_privilege
		}
	}
}

flavor_geo.2 = { #Trade with the West
	hide_portraits = yes
	type = country_event
	title = flavor_geo.2.title
	desc = flavor_geo.2.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1337.1.1
		to = 1370.3.14
		monthly_chance = 2
	}

	trigger = {
		country_exists = c:BYZ
		c:BYZ = { is_subject = no at_war = no is_during_bankruptcy = no }

		country_exists = c:VEN
		c:VEN = { is_subject = no at_war = no is_during_bankruptcy = no }

		country_exists = c:GEN
		c:GEN = { is_subject = no at_war = no is_during_bankruptcy = no }
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:nobles_estate }
		save_scope_as = target_country
		capital.market = { save_scope_as = target_location }
		ruler_or_regent = { save_scope_as = target_character }
		c:BYZ = {
			save_scope_as = target_country1
			ruler_or_regent = { save_scope_as = target_character1 }
		}
		c:VEN = {
			save_scope_as = target_country2
			ruler_or_regent = { save_scope_as = target_character2 }
		}
		c:GEN = {
			save_scope_as = target_country3
			ruler_or_regent = { save_scope_as = target_character3 }
		}

	}

	option = {
		name = flavor_geo.2.a

		c:BYZ = {
			trigger_event_non_silently = flavor_geo.3
		}
	}
	option = {
		name = flavor_geo.2.b

		c:VEN = {
			trigger_event_non_silently = flavor_geo.3
		}
	}

	option = {
		name = flavor_geo.2.c

		c:GEN = {
			trigger_event_non_silently = flavor_geo.3
		}
	}

	option = {
		name = flavor_geo.2.d

		add_legitimacy = legitimacy_weak_bonus
	}
}

flavor_geo.3 = { #Envoy from [GetCountry('GEO').GetNameWithNoTooltip]
	hide_portraits = yes
	type = country_event
	title = flavor_geo.3.title
	desc = flavor_geo.3.desc

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:nobles_estate }
		if = {
			limit = {
				tag = VEN
			}
			save_scope_as = target_country1
			ruler_or_regent = { save_scope_as = target_character1 }
		}
		else_if = {
			limit = {
				tag = GEN
			}
			save_scope_as = target_country1
			ruler_or_regent = { save_scope_as = target_character1 }
		}
	}

	option = {
		name = flavor_geo.3.a
		add_opinion_mutual_effect = {
			target = c:GEO
			modifier = opinion_traders_in_x
		}
		scope:target_location = {
			add_merchant_power = {
				country = ROOT
				power = merchant_power_severe_bonus
				months = 24
				key = trade_in_caucasus_key
			}
		}
		change_gold_effect = { scale = -2 }
		c:GEO = {
			add_gold = {
				value = prev.monthly_income_total
				multiply = 2
			}
		}

	}
	option = {
		name = flavor_geo.3.b

		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_extreme_penalty }
		c:GEO = {
			add_prestige = prestige_mild_bonus
		}
	}
}

flavor_geo.4 = { #Correspondence with a [target_country2.GetGovernment.GetRulerTitle]
	hide_portraits = yes
	type = country_event
	title = flavor_geo.4.title
	desc = flavor_geo.4.desc
	historical_info = flavor_geo.4.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1337.1.1
		to = 1363.3.14
		monthly_chance = 25
	}

	trigger = {
		religion.group = religion_group:christian
		country_exists = c:MAM
		c:MAM = {
			is_subject = no
			at_war = no
			is_during_bankruptcy = no
			any_owned_location = {
				area = area:levant_area
				any_pop = {
					religion.group = religion_group:christian
				}
			}
		}
		NOR = {
			is_rival_of = c:MAM
			is_enemy_of = c:MAM
			has_mutual_scripted_relation = {
				type = relation_type:alliance
				target = c:MAM
			}
		}
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		save_scope_as = target_country
		ruler_or_regent = { save_scope_as = target_character }
		c:MAM = {
			save_scope_as = target_country2
			ruler_or_regent = { save_scope_as = target_character2 }
			random_owned_location = {
				limit = {
					any_pop = {
						religion.group = religion_group:christian
					}
					area = area:levant_area
				}
				random_pop = {
					weight = {
						base = 1
						modifier = {
							add = pop_character_chance
						}
					}
					limit = {
						religion.group = religion_group:christian
					}
					save_scope_as = target_pop
					save_scope_as = target_pop_bckg
				}
			}
		}
	}

	option = {
		name = flavor_geo.4.a
		historical_option = yes

		c:MAM = {
			trigger_event_non_silently = flavor_geo.5
		}
		add_prestige = prestige_mild_penalty

	}
	option = {
		name = flavor_geo.4.b
		add_prestige = prestige_mild_bonus
	}
}

flavor_geo.5 = { #Letter from a [target_country.GetGovernment.GetRulerTitle]
	type = country_event
	title = flavor_geo.5.title
	desc = flavor_geo.5.desc
	historical_info = flavor_geo.5.historical_info
	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_geo.5.a
		historical_option = yes

		custom_tooltip = {
			text = every_christian_pop_gains_25_satisfaction_tt
			every_owned_location = {
				every_pop = {
					limit = {
						owner = root
						religion.group = religion_group:christian
					}
					add_pop_satisfaction = pop_satisfaction_extreme_bonus
				}
			}
		}

		add_opinion_mutual_effect = {
			target = c:GEO
			modifier = opinion_protected_christian_minorities
		}

		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		create_relation = {
			first = ROOT
			second = c:GEO
			type = relation_type:alliance
		}
	}
	option = {
		name = flavor_geo.5.b

		add_opinion_mutual_effect = {
			target = c:GEO
			modifier = opinion_refused_to_help_christian_minorities
		}

		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_left }
	}

	after = {
		c:GEO = { trigger_event_non_silently = flavor_geo.6 }
	}
}

flavor_geo.6 = { #The [target_country2.GetAdjectiveWithNoTooltip] Response
	type = country_event
	title = flavor_geo.6.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_mutual_scripted_relation = {
						type = relation_type:alliance
						target = c:MAM
					}
				}
				desc = flavor_geo.6.desc.a
			}
			triggered_desc = {
				desc = flavor_geo.6.desc.b
			}
		}
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_geo.6.a
		trigger = {
			has_mutual_scripted_relation = {
				type = relation_type:alliance
				target = c:MAM
			}
		}

		custom_tooltip = every_christian_pop_gains_25_satisfaction_tt
		show_as_tooltip = {
			add_opinion_mutual_effect = {
				target = c:MAM
				modifier = opinion_protected_christian_minorities
			}
			create_relation = {
				first = c:MAM
				second = c:GEO
				type = relation_type:alliance
			}
		}
	}
	option = {
		name = flavor_geo.6.b
		trigger = {
			NOT = {
				has_mutual_scripted_relation = {
					type = relation_type:alliance
					target = c:MAM
				}
			}
		}


		add_prestige = prestige_mild_penalty
		add_opinion_mutual_effect = {
			target = c:MAM
			modifier = denied_aid
		}
	}
}

flavor_geo.7 = { #Campaign Against the [target_country2.GetLongNameWithNoTooltip]
	hide_portraits = yes
	type = country_event
	title = flavor_geo.7.title
	desc = flavor_geo.7.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1337.1.1
		to = 1364.3.14
		monthly_chance = 1
	}

	trigger = {
		at_war = no
		is_during_bankruptcy = no
		c:SRV = { own_entire_province = province_definition:baku_province }
		NOT = {
			has_casus_belli_of_type_on = { type = casus_belli:cb_conquer_province target = c:SRV }
		}
		NOR = {
			has_mutual_scripted_relation = {
				type = relation_type:alliance
				target = c:SRV
			}
			c:SRV = { is_subject = yes }
			is_subject_of = c:SRV
		}
	}

	illustration_tags = {
		10 = exterior
		10 = regular
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
		save_scope_as = target_country
		ruler_or_regent = { save_scope_as = target_character }
		c:SRV = {
			save_scope_as = target_country2
			ruler_or_regent = { save_scope_as = target_character2 }
		}
	}

	option = {
		name = flavor_geo.7.a
		add_casus_belli =  { 
			type = casus_belli:cb_conquer_province 
			province = location:baku.province 
			target = c:SRV 
			years = 10 
		}
	}

	option = {
		name = flavor_geo.7.b

		add_stability = stability_weak_bonus
	}
}

flavor_geo.8 = { #Letters for [target_character2.GetLongName]
	hide_portraits = yes
	type = country_event
	title = flavor_geo.8.title
	desc = flavor_geo.8.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1340.1.1
		to = 1375.3.14
		monthly_chance = 1
	}

	trigger = {
		country_exists = c:FRA
		at_war = no
		c:FRA = {
			is_subject = no
			is_during_bankruptcy = no
		}
		location:jerusalem.top_owner = {
			NOR = {
				this = ROOT
				this = c:FRA
				is_subject_or_below_of = ROOT
				has_mutual_scripted_relation = {
					type = relation_type:alliance
					target = c:GEO
				}
			}
		}
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		save_scope_as = target_country
		ruler_or_regent = { save_scope_as = target_character }
		c:FRA = {
			save_scope_as = target_country2
			ruler_or_regent = { save_scope_as = target_character2 }
		}
		location:jerusalem = { save_scope_as = target_location }
	}

	option = {
		name = flavor_geo.8.a
		historical_option = yes

		c:FRA = { trigger_event_non_silently = flavor_geo.9 }
		change_gold_effect = { scale = -1 }
	}
	option = {
		name = flavor_geo.8.b

		add_prestige = prestige_weak_penalty
	}
}

flavor_geo.9 = { #[ShowReligionGroupNameWithNoTooltip('christian')] in the East
	type = country_event
	title = flavor_geo.9.title
	desc = flavor_geo.9.desc

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = flavor_geo.9.a

		change_gold_effect = { scale = -5 }
		c:GEO = {
			set_variable = received_money_variable
		}
	}
	option = {
		name = flavor_geo.9.b

		custom_tooltip = up_to_x_commoners_will_migrate_tt
	}

	option = {
		name = flavor_geo.9.c

		c:GEO = {
			set_variable = received_nothing_variable
		}
	}

	after = {
		c:GEO = {
			trigger_event_non_silently = {
				id = flavor_geo.10
				months = { 3 4 }
			}
		}
	}
}

flavor_geo.10 = { #The [target_country2.GetAdjectiveWithNoTooltip] [target_country2.GetGovernment.GetRulerTitle] Responds
	type = country_event
	title = flavor_geo.10.title
	desc = flavor_geo.10.desc

	fire_only_once = yes

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_geo.10.a

		trigger = {
			NOT = { has_variable = received_nothing_variable }
		}
		if = {
			limit = { has_variable = received_money_variable }
			hidden_effect = { remove_variable = received_money_variable }
			add_gold = {
				value = c:FRA.monthly_income_total
				multiply = 5
			}
		}
		else = {
			capital = {
				add_location_modifier = {
					modifier = influx_of_foreign_knights
					years = 20
					mode = add_and_extend
				}
				create_sub_unit = unit_type:a_late_crusader_knights
				create_sub_unit = unit_type:a_late_crusader_knights
			}
			add_migration = {
				owner = c:FRA
				from = c:FRA.capital.province_definition
				to = root.capital.province_definition
				religion = c:FRA.religion
				type = pop_type:peasants
				amount = 0.04
				months = 60
			}
		}
	}

	option = {
		name = flavor_geo.10.b

		trigger = {  has_variable = received_nothing_variable }
		hidden_effect = { remove_variable = received_nothing_variable }

		add_prestige = prestige_mild_penalty
	}
}

flavor_geo.11 = { #A Powerful Neighbor
	hide_portraits = yes
	type = country_event
	title = flavor_geo.11.title
	desc = flavor_geo.11.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1340.1.1
		to = 1390.6.1
		monthly_chance = 1
	}

	trigger = {
		at_war = no
		country_exists = c:CHB
		c:CHB = {
			is_subject = no
			at_war = no
			is_during_bankruptcy = no
		}
		NOR = {
			has_mutual_scripted_relation = {
				type = relation_type:alliance
				target = c:CHB
			}
			is_subject_of = c:CHB
		}
		relative_strength = {
			target = c:CHB
			value < 0.5
		}
	}

	illustration_tags = {
		10 = interior
		10 = angry
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		save_scope_as = target_country
		ruler_or_regent = { save_scope_as = target_character }
		c:CHB = {
			save_scope_as = target_country2
			ruler_or_regent = { save_scope_as = target_character2 }
		}
	}

	option = {
		name = flavor_geo.11.a

		c:CHB = {
			hidden_effect = {
				set_variable = geo_accepted_tribute
			}
		}
		make_subject_of = {
			target = c:CHB
			type = subject_type:tributary
		}

	}
	option = {
		name = flavor_geo.11.b

		c:CHB = {
			add_casus_belli = {
				type = casus_belli:cb_subject_broke_free
				target = ROOT
			}
		}
	}

	after = {
		c:CHB = {
			trigger_event_silently = flavor_geo.12
		}
	}
}

flavor_geo.12 = { #The [target_country.GetLongNameWithNoTooltip]
	type = country_event
	title = flavor_geo.12.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_variable = geo_accepted_tribute
				}
				desc = flavor_geo.12.desc.a
			}
			triggered_desc = {
				desc = flavor_geo.12.desc.b
			}
		}
	}

	fire_only_once = yes

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_geo.12.a
		trigger = { has_variable = geo_accepted_tribute }
		show_as_tooltip = {
			c:GEO = {
				make_subject_of = {
					target = c:CHB
					type = subject_type:tributary
				}
			}
		}
		add_prestige = prestige_extreme_bonus
	}

	option = {
		name = flavor_geo.12.b
		trigger = { NOT = { has_variable = geo_accepted_tribute } }
		show_as_tooltip = {
			root = {
				add_casus_belli = {
					type = casus_belli:cb_subject_broke_free
					target = c:GEO
				}
			}
		}
	}

	after = {
		remove_variable = geo_accepted_tribute
	}
}

flavor_geo.13 = { #Order Across [ShowProvinceDefinitionNameWithNoTooltip('kutaisi')]
	type = country_event
	title = flavor_geo.13.title
	desc = flavor_geo.13.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1345.1.1
		to = 1380.3.14
		monthly_chance = 1
	}

	trigger = {
		own_entire_province = province_definition:imereti_province
	}

	illustration_tags = {
		10 = exterior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		save_scope_as = target_country
		location:kutaisi.province = {
			ordered_location_in_province = {
				order_by = population
				check_range_bounds = no
				max = 1
				save_scope_as = target_location
			}
		}
	}

	option = {
		name = flavor_geo.13.a


		add_stability = stability_mild_penalty
		change_gold_effect = { scale = -5 }
		scope:target_location.province = {
			every_location_in_province = {
				add_location_modifier = {
					modifier = geo_centralization_efforts_modifier
					mode = add_and_extend
					years = 20
				}
			}
		}
		scope:target_location = {
			add_road_to = {
				target = root.capital
				type = gravel_road
			}
		}
		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_large_move_to_left
		}
	}

	option = {
		name = flavor_geo.13.b

		change_societal_value = { type = centralization_vs_decentralization value = societal_value_large_move_to_right }
		add_stability = stability_weak_bonus
	}
}

flavor_geo.14 = { #The Mint of Elegir
	type = country_event
	title = flavor_geo.14.title
	desc = flavor_geo.14.desc
	historical_info = flavor_geo.14.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1337.1.1
		to = 1385.3.14
		monthly_chance = 5
	}

	trigger = {
		any_owned_location = {
			OR = {
				integration_level = integrated
				integration_level = core
			}
			OR = {
				raw_material = goods:goods_gold
				raw_material = goods:silver
			}
		}
	}

	illustration_tags = {
		10 = exterior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:nobles_estate }
		ordered_owned_location = {
			limit = {
				OR = {
					raw_material = goods:goods_gold
					raw_material = goods:silver
				}
				OR = {
					integration_level = integrated
					integration_level = core
				}
			}
			order_by = rgo_workers
			max = 1
			check_range_bounds = no
			save_scope_as = target_location
		}
	}

	option = {
		name = flavor_geo.14.a
		historical_option = yes
		scope:target_location = {
			change_max_raw_material_workers = 3
			add_location_modifier = {
				modifier = mint_of_elentir_modifier
				years = 20
				mode = add_and_extend
			}
		}
		change_gold_effect = { scale = -3 }
		change_societal_value = {
			type = capital_economy_vs_traditional_economy
			value = societal_value_move_to_left
		}
	}
	option = {
		name = flavor_geo.14.b

		change_gold_effect = { scale = -0.5 	}
		scope:target_location = {
			change_prosperity = prosperity_severe_bonus
			every_pop = {
				limit = {
					owner = root
				}
				add_pop_satisfaction = pop_satisfaction_ultimate_bonus
			}
		}
	}
}

flavor_geo.15 = { #The Walls of [target_location.GetNameWithNoTooltip]
	type = country_event
	title = flavor_geo.15.title
	desc = flavor_geo.15.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1351.1.1
		to = 1380.3.14
		monthly_chance = 1
	}

	trigger = {
		owns = location:tmogvi
		location:tmogvi = {
			NOT = { has_building = building_type:castle }
			NOT = { has_building = building_type:bastion }
		}
		at_war = no
		is_during_bankruptcy = no
	}

	illustration_tags = {
		10 = exterior
		10 = regular
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
		location:tmogvi = { save_scope_as = target_location }
	}

	option = {
		name = flavor_geo.15.a

		scope:target_location = {
			construct_building = {
				building_type = building_type:castle
				instant = no
			}
		}
		scope:target_location.province = {
			every_location_in_province = { change_prosperity = prosperity_weak_bonus }
		}
	}
	option = {
		name = flavor_geo.15.b

		add_government_power = government_power_weak_penalty
	}
}

flavor_geo.16 = { #[ShowReligionAdjectiveWithNoTooltip('catholic')] Presence in [target_location.GetNameWithNoTooltip]
	type = country_event
	title = flavor_geo.16.title
	desc = flavor_geo.16.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1340.1.1
		to = 1375.3.14
		monthly_chance = 1
	}

	trigger = {
		any_owned_location = {
			has_building = building_type:missionary_building
		}
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		save_scope_as = target_country2
		ruler_or_regent = { save_scope_as = target_character1 }
		ordered_owned_location = {
			limit = {
				has_building = building_type:missionary_building
			}
			order_by = population
			max = 1
			check_range_bounds = no
			save_scope_as = target_location1
			event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		}
		c:PAP = {
			save_scope_as = target_country
			capital = { save_scope_as = target_location2 }
			ruler_or_regent = { save_scope_as = target_character2 }
		}
	}

	option = {
		name = flavor_geo.16.a
		historical_option = yes

		add_opinion_mutual_effect = {
			target = c:PAP
			modifier = opinion_catholic_presence_in_georgia
		}

		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_penalty }
	}

	option = {
		name = flavor_geo.16.b

		every_owned_location = {
			limit = {
				has_building = building_type:missionary_building
			}
			destroy_building = "building(building_type:missionary_building|scope:target_country)"
		}

		custom_tooltip = {
			text = suffer_20_opinion_with_every_catholic_in_range_tt
			every_known_country = {
				limit = {
					within_diplomatic_range = root
					religion = religion:catholic
				}
				add_opinion = {
					modifier = opinion_demolished_catholic_embassies
					target = root
				}
			}
		}

		c:PAP = { trigger_event_non_silently = flavor_geo.17 }
	}

	option = {
		name = flavor_geo.16.c

		trigger = { has_ruler = yes }

		ruler_or_regent = {
			change_character_religion = religion:catholic
			every_child = {
				limit = {
					is_alive = yes
				}
				change_character_religion = religion:catholic
			}
		}
		if = {
			limit = { has_consort = yes }
			consort = { change_character_religion = religion:catholic  }
		}
		if = {
			limit = { has_heir = yes }
			heir = { change_character_religion = religion:catholic  }
		}
		add_stability = stability_extreme_penalty
		add_all_estate_satisfaction = { value = estate_satisfaction_extreme_penalty }
		add_opinion_mutual_effect = {
			target = c:PAP
			modifier = opinion_royal_line_embraced_catholicism
		}

		c:PAP = { trigger_event_non_silently = flavor_geo.18 }
	}
}

flavor_geo.17 = { #A Messenger from the [target_country2.GetLongNameWithNoTooltip]
	type = country_event
	title = flavor_geo.17.title
	desc = flavor_geo.17.desc

	fire_only_once = yes

	illustration_tags = {
		10 = interior
		10 = angry
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = flavor_geo.17.a
		show_as_tooltip = {
			add_opinion = {
				modifier = opinion_demolished_catholic_embassies
				target = c:GEO
			}
		}
		add_government_power = government_power_weak_penalty
	}
}

flavor_geo.18 = { #A Messenger from the [target_country2.GetLongNameWithNoTooltip]
	type = country_event
	title = flavor_geo.17.title
	desc = flavor_geo.18.desc

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = flavor_geo.18.a

		add_government_power = government_power_weak_bonus
		add_prestige = prestige_mild_bonus
	}
}

flavor_geo.19 = { #[ShowReligionAdjectiveWithNoTooltip('catholic')] Spreads
	type = country_event
	title = flavor_geo.19.title
	desc = flavor_geo.19.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1365.1.1
		to = 1390.6.1
		monthly_chance = 1
	}

	trigger = {
		country_exists = c:PAP
		any_owned_location = {
			has_building = building_type:missionary_building
		}
		ruler_or_regent = { religion = religion:catholic }
		"religion_percentage_in_country(religion:catholic)" > 0
		NOT = { religion = religion:catholic }
		at_war = no
		is_during_bankruptcy = no
		any_owned_location = {
			NOT = {
				has_building = building_type:missionary_building
				NOT = { dominant_religion = religion:catholic }
			}
		}
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		save_scope_as = target_country
		ruler_or_regent = { save_scope_as = target_character }
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		ordered_owned_location = {
			limit = {
				NOT = {
					has_building = building_type:missionary_building
					NOT = { dominant_religion = religion:catholic }
				}
			}
			order_by = population
			max = 1
			check_range_bounds = no
			save_scope_as = target_location1
		}
		ordered_owned_location = {
			limit = {
				NOR = {
					has_building = building_type:missionary_building
					NOT = { dominant_religion = religion:catholic }
					this = scope:target_location1
				}
			}
			order_by = population
			max = 1
			check_range_bounds = no
			save_scope_as = target_location2
		}
		ordered_owned_location = {
			limit = {
				NOR = {
					has_building = building_type:missionary_building
					NOT = { dominant_religion = religion:catholic }
					this = scope:target_location1
					this = scope:target_location2
				}
			}
			order_by = population
			max = 1
			check_range_bounds = no
			save_scope_as = target_location3
		}
	}

	option = {
		name = flavor_geo.19.a
		every_owned_location = {
			limit = {
				has_building = building_type:missionary_building
			}
			destroy_building = "building(building_type:missionary_building|owner)"
		}

		custom_tooltip = {
			text = suffer_20_opinion_with_every_catholic_in_range_tt
			every_known_country = {
				limit = {
					within_diplomatic_range = root
					religion = religion:catholic
				}
				add_opinion = {
					modifier = opinion_demolished_catholic_embassies
					target = root
				}
			}
		}

		c:PAP = { trigger_event_non_silently = flavor_geo.17 }

		every_character = {
			limit = { religion = religion:catholic }
			change_character_religion = root.religion
		}
	}
	option = {
		name = flavor_geo.19.b


		change_religion = religion:catholic
		change_religion_for_ruler_and_family = { country = ROOT religion = religion:catholic }

		c:PAP = {
			trigger_event_non_silently = flavor_geo.20
		}
	}
}

flavor_geo.20 = { #[ShowReligionAdjectiveWithNoTooltip('catholic')] in the [target_country.GetLongNameWithNoTooltip]
	type = country_event
	title = flavor_geo.20.title
	desc = flavor_geo.20.desc

	fire_only_once = yes

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_geo.20.a

		scope:target_location1 = {
			construct_building = {
				building_type = building_type:missionary_building
				instant = no
				owner = c:PAP
				payer = c:PAP
			}
		}
		if = {
			limit = { exists = scope:target_location2 }
			scope:target_location2 = {
				construct_building = {
					building_type = building_type:missionary_building
					instant = no
					owner = c:PAP
					payer = c:PAP
				}
			}
		}
		if = {
			limit = { exists = scope:target_location3 }
			scope:target_location3 = {
				construct_building = {
					building_type = building_type:missionary_building
					instant = no
					owner = c:PAP
					payer = c:PAP
				}
			}
		}

		hidden_effect = {
			c:GEO = {
				set_variable = {
					name = agreed_to_finance_missionaries_variable
					years = 1
				}
			}
		}

		add_religious_influence_if_valid = { VALUE = religious_influence_extreme_bonus }

	}
	option = {
		name = flavor_geo.20.b
		trigger = {
			NOT = {
				has_mutual_scripted_relation = {
					type = relation_type:alliance
					target = c:GEO
				}
			}
		}

		create_relation = {
			first = this
			second = c:GEO
			type = relation_type:alliance
		}
	}

	option = {
		name = flavor_geo.20.c
		add_prestige = prestige_weak_bonus
		hidden_effect = {
			c:GEO = {
				set_variable = papacy_refused_help
			}
		}
	}

	after = {
		c:GEO = {
			trigger_event_non_silently = flavor_geo.21
		}
	}
}

flavor_geo.21 = { #Correspondence from the [target_country.GetLongNameWithNoTooltip]
	type = country_event
	title = flavor_geo.21.title
	desc = flavor_geo.21.desc

	fire_only_once = yes

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = flavor_geo.21.a

		trigger = {
			has_variable = agreed_to_finance_missionaries_variable
		}
		show_as_tooltip = {
			scope:target_location1 = {
				construct_building = {
					building_type = building_type:missionary_building
					instant = no
					owner = c:PAP
					payer = c:PAP
				}
			}
			if = {
				limit = { exists = scope:target_location2 }
				scope:target_location2 = {
					construct_building = {
						building_type = building_type:missionary_building
						instant = no
						owner = c:PAP
						payer = c:PAP
					}
				}
			}
			if = {
				limit = { exists = scope:target_location3 }
				scope:target_location3 = {
					construct_building = {
						building_type = building_type:missionary_building
						instant = no
						owner = c:PAP
						payer = c:PAP
					}
				}
			}
		}
	}

	option = {
		name = flavor_geo.21.b

		trigger = {
			NOT = { has_variable = agreed_to_finance_missionaries_variable }
			NOT = { has_variable = papacy_refused_help }
		}
		add_religious_influence_if_valid = { VALUE = religious_influence_mild_bonus }
		show_as_tooltip = {
			create_relation = {
				first = c:PAP
				second = c:GEO
				type = relation_type:alliance
			}
		}
	}

	option = {
		name = flavor_geo.21.c
		trigger = {
			has_variable = papacy_refused_help
		}
		add_prestige = prestige_mild_penalty
	}

	after = {
		if = {
			limit = { has_variable = agreed_to_finance_missionaries_variable }
			remove_variable = agreed_to_finance_missionaries_variable
		}
		if = {
			limit = { has_variable = papacy_refused_help }
			remove_variable = papacy_refused_help
		}
	}
}

flavor_geo.22 = { #Restoration of the [ROOT.GetCountry.GetGovernment.GetEstateNameWithNoTooltip('clergy_estate')]
	hide_portraits = yes
	type = country_event
	title = flavor_geo.22.title
	desc = flavor_geo.22.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1370.1.1
		to = 1400.3.14
		monthly_chance = 1
	}

	trigger = {
		"estate_power(estate_type:nobles_estate)" > "estate_power(estate_type:clergy_estate)"
		"estate_power(estate_type:nobles_estate)" > 0.4
		capital = {
			any_pop = {
				pop_type = pop_type:nobles
			}
		}
	}

	illustration_tags = {
		10 = interior
		10 = angry
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		ruler_or_regent = { save_scope_as = target_character}
		capital = {
			save_scope_as = target_location
			event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:clergy_estate }
		}
	}

	option = {
		name = flavor_geo.22.a

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_radical_penalty
		}
		add_estate_satisfaction = {
			type = estate_type:clergy_estate
			value = estate_satisfaction_radical_bonus
		}
		scope:target_location = {
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:nobles
				}
				add_pop_satisfaction = pop_satisfaction_extreme_penalty
				split_pop = {
					fraction = 0.75
					type = pop_type:peasants
				}
			}
		}
		add_stability = stability_extreme_penalty
	}
	option = {
		name = flavor_geo.22.b

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_severe_penalty
		}
		add_estate_satisfaction = {
			type = estate_type:clergy_estate
			value = estate_satisfaction_severe_bonus
		}
		scope:target_location = {
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:nobles
				}
				add_pop_satisfaction = pop_satisfaction_extreme_penalty
				split_pop = {
					fraction = 0.25
					type = pop_type:peasants
				}
			}
		}
	}

	option = {
		name = flavor_geo.22.c

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_mild_bonus
		}
		add_estate_satisfaction = {
			type = estate_type:clergy_estate
			value = estate_satisfaction_severe_penalty
		}
		scope:target_location = {
			random_pop = {
				limit = {
					owner = root
					pop_type = pop_type:clergy
				}
				add_pop_satisfaction = pop_satisfaction_ultimate_penalty
			}
		}
	}
}

flavor_geo.23 = { #Solar Eclipse of [GetCurrentYear]
	type = country_event
	title = flavor_geo.23.title
	desc = flavor_geo.23.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1357.1.1
		to = 1358.6.1
		monthly_chance = 20
	}
	major = yes
	major_trigger = {
		capital.region = region:caucasus_region
	}

	illustration_tags = {
		10 = exterior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:peasants_estate }
	}

	option = {
		name = flavor_geo.23.a

		trigger = {
			societal_value:traditionalist_vs_innovative < 50
		}

		add_stability = stability_extreme_penalty
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_large_move_to_right
		}
	}

	option = {
		name = flavor_geo.23.b
		trigger = {
			societal_value:traditionalist_vs_innovative >= 50
		}

		add_research_progress = research_progress_mild_bonus
	}
}

flavor_geo.24 = { #The Demands of [target_character2.GetShortNameWithNoTooltip]
	type = country_event
	title = flavor_geo.24.title
	desc = flavor_geo.24.desc
	historical_info = flavor_geo.24.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1337.1.1
		to = 1444.6.1
		monthly_chance = 1
	}

	trigger = {
		country_exists = c:TIM
		is_subject_of = c:TIM
		NOT = { religion = c:TIM.religion }
	}

	illustration_tags = {
		10 = interior
		10 = angry
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		save_scope_as = target_country1
		ruler_or_regent = { save_scope_as = target_character1 }
		c:TIM = {
			save_scope_as = target_country2
			ruler_or_regent = { save_scope_as = target_character2 }
			religion = { save_scope_as = target_religion }
		}
	}

	option = {
		name = flavor_geo.24.a
		historical_option = yes

		hidden_effect = {
			set_variable = timur_conversion_variable
		}
		ruler_or_regent = {
			change_character_religion = c:TIM.religion
			every_child = { change_character_religion = c:TIM.religion  }
		}
		if = {
			limit = { has_consort = yes }
			consort = { change_character_religion = c:TIM.religion  }
		}
		if = {
			limit = { has_heir = yes }
			heir = { change_character_religion = c:TIM.religion  }
		}

		add_opinion_mutual_effect = {
			modifier = opinion_embraced_true_faith
			target = c:TIM
		}
		add_liberty_desire = liberty_desire_severe_minus
	}
	option = {
		name = flavor_geo.24.b

		add_liberty_desire = liberty_desire_severe_plus

	}

	after = {
		scope:target_country2 = { trigger_event_non_silently = flavor_geo.25 }
	}
}

flavor_geo.25 = { #The Conversion of [target_country1.GetLongNameWithNoTooltip]
	type = country_event
	title = flavor_geo.25.title
	desc = flavor_geo.25.desc

	fire_only_once = yes

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		scope:target_country1.capital = {
			save_scope_as = target_location
			province = { save_scope_as = target_province }
		}
	}

	option = {
		name = flavor_geo.25.a

		trigger = {
			scope:target_country1 = {
				ruler_or_regent = {
					NOT = { religion = ROOT.religion }
				}
			}
		}

		scope:target_province = {
			every_location_in_province = { change_prosperity = prosperity_ultimate_penalty }
		}
		if = {
			limit = {
				scope:target_country1 = {
					any_owned_location = {
						is_capital = no
						OR = {
							location_rank = location_rank:town
							location_rank = location_rank:city
						}
					}
				}
			}
			scope:target_country1 = {
				every_owned_location = {
					limit = {
						OR = {
							location_rank = location_rank:town
							location_rank = location_rank:city
						}
					}
					ordered_pop = {
						limit = { pop_type = pop_type:peasants }
						order_by = pop_size
						max = 1
						check_range_bounds = no
						add_pop_size = {
							value = pop_size
							multiply = -0.25
						}
					}
				}
			}
		}
		else = {
			scope:target_country1 = { add_stability = stability_ultimate_penalty }
		}
		scope:target_country1 = { add_liberty_desire = liberty_desire_mild_plus }
	}

	option = {
		name = flavor_geo.25.b

		trigger = {
			scope:target_country1 = {
				ruler_or_regent = {
					NOT = { religion = ROOT.religion }
				}
			}
		}

		add_government_power = government_power_mild_penalty
	}
	option = {
		name = flavor_geo.25.c

		trigger = {
			scope:target_country1 = {
				ruler_or_regent = {
					religion = root.religion
				}
			}
		}

		show_as_tooltip = {
			add_opinion_mutual_effect = {
				modifier = opinion_embraced_true_faith
				target = scope:target_country1
			}
		}

		add_prestige = prestige_extreme_bonus
	}
}

flavor_geo.26 = { #[ROOT.GetCountry.GetNameWithNoTooltip]'s Religion Identity
	type = country_event
	title = flavor_geo.26.title
	desc = flavor_geo.26.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1350.1.1
		to = 1450.6.1
		monthly_chance = 50
	}

	trigger = {
		is_subject = no
		has_variable = timur_conversion_variable
		has_ruler = yes
		ruler = {
			NOT = { religion = root.religion }
		}
	}

	illustration_tags = {
		10 = interior
		10 = angry
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		remove_variable = timur_conversion_variable
		ruler = { save_scope_as = target_character }
	}

	option = {
		name = flavor_geo.26.a
		every_character = {
			limit = {
				dynasty = root.ruler.dynasty
				NOT = { religion = root.religion }
			}
			change_character_religion = root.religion
		}
		add_stability = stability_extreme_penalty
	}
	option = {
		name = flavor_geo.26.b

		add_government_power = government_power_ultimate_penalty
	}
}

flavor_geo.27 = { #Giorgi Saakadze
	type = country_event
	title = flavor_geo.27.title
	desc = flavor_geo.27.desc
	historical_info = flavor_geo.27.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1590.1.1
		to = 1629.3.14
		monthly_chance = 1
	}

	trigger = {
		at_war = no
		is_during_bankruptcy = no
		owns = location:gori
	}

	illustration_tags = {
		10 = exterior
		10 = regular
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
		location:gori = {
			event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
			save_scope_as = target_location
			create_dynasty_from_location = saakadze_dynasty
		}
		ruler_or_regent = { save_scope_as = target_character1 }
		create_character = {
			first_name = name_george
			dynasty = dynasty:saakadze_dynasty
			adm = { 50 90 }
			dip = { 50 90 }
			mil = { 50 90 }
			birth_date = 1570.3.10
			birth_location = location:gori
			estate = estate_type:nobles_estate
			save_scope_as = target_character2
			create_in_limbo = yes
		}
	}

	option = {
		name = flavor_geo.27.a
		historical_option = yes

		scope:target_character2 = { move_country = root }
		change_gold_effect = { scale = -3 }
		add_army_tradition = army_tradition_extreme_bonus
		change_societal_value = { type = offensive_vs_defensive value = societal_value_large_move_to_left }

	}
	option = {
		name = flavor_geo.27.b

		change_societal_value = { type = offensive_vs_defensive value = societal_value_large_move_to_right }
		hidden_effect = {
			kill_character_silently = scope:target_character2
		}
	}
}

flavor_geo.28 = { #Sulkhan-Saba Orbeliani
	type = country_event
	title = flavor_geo.28.title
	desc = flavor_geo.28.desc
	historical_info = flavor_geo.28.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = GEO
		from = 1678.1.1
		to = 1710.3.14
		monthly_chance = 1
	}

	trigger = {
		at_war = no
		is_during_bankruptcy = no
		owns = location:dmanisi
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		location:dmanisi = {
			event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
			save_scope_as = target_location
			create_dynasty_from_location = orbeliani_dynasty
		}
		ruler_or_regent = { save_scope_as = target_character1 }
		create_character = {
			first_name = name_sulkhan.name_saba
			dynasty = dynasty:orbeliani_dynasty
			birth_date = 1658.1.26
			birth_location = location:dmanisi
			estate = estate_type:nobles_estate
			artist = writer
			artist_skill = 0.81
			save_scope_as = target_character2
			create_in_limbo = yes
		}
	}

	option = {
		name = flavor_geo.28.a
		historical_option = yes

		scope:target_character2 = { move_country = root }
		change_gold_effect = { scale = -3 }

	}
	option = {
		name = flavor_geo.28.b

		culture = {
			add_cultural_tradition = cultural_tradition_mild_penalty
			add_cultural_influence = cultural_influence_mild_penalty
		}
		hidden_effect = {
   			kill_character_silently = scope:target_character2
  		}
	}
}