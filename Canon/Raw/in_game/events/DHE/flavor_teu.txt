scripted_effect TEU_increase_crusader_fervor_bonus = {
	add_army_tradition = army_tradition_mild_bonus
}

namespace = flavor_teu
flavor_teu.1 = {
	type = country_event
	title = flavor_teu.1.title
	desc = flavor_teu.1.desc


	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1450.1.1
		to = 1500.1.1
		monthly_chance = 5
	}

	trigger = {
		is_subject = no
		country_exists = c:POL
		is_neighbor_of = c:POL
		at_war = no

		c:POL = {
			num_of_non_rural >= 10
		}
		num_of_non_rural >= 5

		any_owned_non_rural_location = {
			area = area:prussia_area
		}
		government_type = government_type:theocracy

		"estate_power(estate_type:burghers_estate)" > 0.2
		"culture_percentage_in_country(culture:prussian)" > 0
	}

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		create_rebel = {
			category = nationalist
			name = prussian_confederation
			save_scope_as = prussian_confederation
			culture = culture:prussian
		}
		event_illustration_government_estate_effect = yes
	}

	option = {
		name = flavor_teu.1.a

		custom_tooltip = {
			text = prussian_confederation_support

			every_owned_location = {
				limit = {
					area = area:prussia_area
				}
				every_pop = {
					limit = {
						owner = root
						OR = {
							pop_type = pop_type:nobles
							pop_type = pop_type:burghers
						}
						culture = culture:prussian
					}
					add_pop_satisfaction = pop_satisfaction_ultimate_penalty
					change_pop_allegiance = scope:prussian_confederation
				}
			}


		}
		historical_option = yes
		custom_tooltip = flavor_teu.1.tooltip
		c:POL = { trigger_event_silently = { id = flavor_teu.2 }	}
	}
	option = {
		name = flavor_teu.1.b
		change_government_type = government_type:monarchy
		add_prestige = prestige_weak_penalty
		destroy_rebel = scope:prussian_confederation

	}
}

flavor_teu.2 = {
	type = country_event
	title = flavor_teu.2.title
	desc = flavor_teu.2.desc

	illustration_tags = {
		10 = armed
		10 = interior
	}

	immediate = {
		event_illustration_government_estate_effect = yes
	}

	option = {
		name = flavor_teu.2.a
		historical_option = yes
		support_rebel = scope:prussian_confederation
	}
	option = {
		name = flavor_teu.2.b
		add_prestige = prestige_mild_penalty
	}
}

# Lizard League
# https://en.wikipedia.org/wiki/Lizard_Union_(medieval)
flavor_teu.3 = {
	type = country_event
	title = flavor_teu.3.title
	desc = flavor_teu.3.desc
	historical_info = flavor_teu.3.historical_info

	dynamic_historical_event = {
		tag = TEU
		from = 1400.1.1
		to = 1420.1.1
		monthly_chance = 5
	}
	fire_only_once = yes

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	trigger = {
		own_entire_province = province_definition:chelmno_province
	}
	option = {
		name = flavor_teu.3.a

		historical_option = yes

		add_country_modifier = {
			modifier = teu_lizard_league
			years = 25
		}

		add_army_tradition = army_tradition_mild_bonus
	}
	option = {
		name = flavor_teu.3.b

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_severe_penalty
		}
	}
}

# Prussian Homage
# https://en.wikipedia.org/wiki/Prussian_Homage
flavor_teu.4 = {
	hide_portraits = yes
	type = country_event
	title = flavor_teu.4.title
	desc = flavor_teu.4.desc
	historical_info = flavor_teu.4.historical_info
	dynamic_historical_event = {
		tag = POL
		from = 1337.1.1
		to = 1525.1.1
		monthly_chance = 10
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	trigger = {
		NOT = {
			country_exists = c:PRU
		}
		OR = {
			NOT = { country_exists = c:TEU }
			c:TEU = { is_subject_of = ROOT }
		}
		at_war = no
		area:prussia_area = {
			any_location_in_area = {
				OR = {
					owner ?= ROOT
					AND = {
						country_exists = c:TEU
						owner ?= c:TEU
					}
				}
				percent >= 0.85
			}
		}
		has_ruler = yes
	}
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler = {
			save_scope_as = pol_ruler
		}
		province:lithuania_minor_province ?= {
			add_to_list = list_of_ducal_prussian_provs
		}
		province:lower_prussia_province ?= {
			add_to_list = list_of_ducal_prussian_provs
		}
		province:masuria_province ?= {
			add_to_list = list_of_ducal_prussian_provs
		}
		c:TEU ?= {
			province:lithuania_minor_province ?= {
				add_to_list = list_of_ducal_prussian_provs
			}
		}
		c:TEU ?= {
			province:lower_prussia_province ?= {
				add_to_list = list_of_ducal_prussian_provs
			}
		}
		c:TEU ?= {
			province:masuria_province ?= {
				add_to_list = list_of_ducal_prussian_provs
			}
		}


		location:kwidzyn = {
			add_to_list = list_of_ducal_prussian_locations
		}
		location:morag = {
			add_to_list = list_of_ducal_prussian_locations
		}
		location:dzierzgon = {
			add_to_list = list_of_ducal_prussian_locations
		}

		location:malbork = {
			add_to_list = list_of_royal_prussian_locations
		}
		location:elblag = {
			add_to_list = list_of_royal_prussian_locations
		}


		province:chelmno_province ?= {
			add_to_list = list_of_royal_prussian_provs
		}
		province:danzig_province ?= {
			add_to_list = list_of_royal_prussian_provs
		}
		province:tuchola_province ?= {
			add_to_list = list_of_royal_prussian_provs
		}
		province:warmia_province ?= {
			add_to_list = list_of_royal_prussian_provs
		}
		c:TEU = {
			save_scope_as = ducal_prussia_tag
		}
	}

	fire_only_once = yes

	option = {
		name = flavor_teu.4.a

		historical_option = yes

		every_in_list = {
			list = list_of_ducal_prussian_provs
			change_province_owner = scope:ducal_prussia_tag
			every_location_in_province = {
				add_core = scope:ducal_prussia_tag
			}
		}
		every_in_list = {
			list = list_of_ducal_prussian_locations
			limit = {
				OR = {
					owner = ROOT
					owner = c:TEU
				}
			}
			change_location_owner = scope:ducal_prussia_tag
			add_core = scope:ducal_prussia_tag
		}
		scope:ducal_prussia_tag = {
			make_subject_of = {
				target = ROOT
				type = subject_type:vassal
				additional_years_to_prevent_annexation = 100
			}
			form_country = formable_country:PRU_f
		}

		hidden_effect = {
			every_in_list = {
				list = list_of_royal_prussian_locations
				limit = { owner = ROOT }
				change_integration_progress = 75
			}

			every_in_list = {
				list = list_of_royal_prussian_provs
				every_location_in_province = {
					change_integration_progress = 75
				}
			}
		}
	}
	option = {
		name = flavor_teu.4.b

		add_prestige = prestige_mild_bonus
	}
}

# Crusader Fervor
flavor_teu.5 = {
	type = country_event
	title = flavor_teu.5.title
	desc = flavor_teu.5.desc

	trigger = {
		tag = TEU
		religion = religion:catholic
		any_neighbor_country = {
			NOR = {
				religion.group = religion_group:christian
				is_friendly_with = ROOT
				opinion = {
					target = ROOT
					value >= 100
				}
				is_allied_with = { target = ROOT }
			}
		}
	}

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:clergy background = pop_type:soldiers }
		random_neighbor_country = {
			limit = {
				NOR = {
					religion.group = religion_group:christian
					is_friendly_with = ROOT
					opinion = {
						target = ROOT
						value >= 100
					}
					is_allied_with = { target = ROOT }
				}
			}
			save_scope_as = target_nation
		}
	}

	fire_only_once = yes

	option = {
		name = flavor_teu.5.a

		historical_option = yes

		TEU_increase_crusader_fervor_bonus = yes

		add_casus_belli = {
			type = casus_belli:cb_annex
			target = scope:target_nation
		}

		add_devotion = devotion_mild_bonus
	}
	option = {
		name = flavor_teu.5.b

		change_societal_value = {
			type = spiritualist_vs_humanist
			value = societal_value_minor_move_to_left
		}
	}
}

# Local Baltic Discontent
flavor_teu.6 = {
	type = country_event
	title = flavor_teu.6.title
	desc = flavor_teu.6.desc

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	trigger = {
		religion.group = religion_group:christian
		any_owned_location = {
			teu_event_6_trigger = yes
		}
		can_build_building = building_type:castle
		NOT = { can_build_building = building_type:bastion }
	}

	immediate = {
		random_owned_location = {
			limit = {
				teu_event_6_trigger = yes
			}
			save_scope_as = target_location
			event_illustration_poptype_effect = {
				background = pop_type:peasants
				foreground = pop_type:nobles
			}
		}
	}

	option = {
		name = flavor_teu.6.a

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				gold <= {
					value = building_type:castle.building_base_cost_in_gold
					multiply = 0.75
				}
			}
		}

		scope:target_location = {
			change_control = control_mild_penalty
			construct_building = {
				building_type = building_type:castle
				cost_multiplier = 0.5
				cost_multiplier_reason = game_concept_event
			}
		}
	}

	option = {
		name = flavor_teu.6.b

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				gold > {
					value = building_type:castle.building_base_cost_in_gold
					multiply = 0.75
				}
			}
		}

		scope:target_location = {
			add_location_modifier = {
				mode = add_and_extend
				modifier = teu_baltic_opposition_brewing
				years = 20
			}
			province = {
				every_location_in_province = {
					change_control = control_severe_penalty
				}
			}
		}
	}

	after = {
		custom_tooltip = teuton_6_event_trigger_information
	}
}

# Danzig Joins Hanseatic League
flavor_teu.7 = {
	type = country_event
	title = flavor_teu.7.title
	desc = flavor_teu.7.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1340.1.1
		to = 1360.1.1
		monthly_chance = 10
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	trigger = {
		owns = location:gdansk
		location:gdansk = {
			exists = market
		}
		has_estate_privilege = estate_privilege:kulm_law
		country_exists = c:HSA
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		location:gdansk = {
			save_scope_as = target_location
		}

		c:HSA = {
			save_scope_as = target_country
		}
	}

	option = {
		name = flavor_teu.7.a

		historical_option = yes

		ai_chance = {
			factor = 0.75
		}

		add_navy_tradition = navy_tradition_mild_bonus
		scope:target_location = {
			add_location_modifier = {
				mode = add_and_extend
				modifier = teu_seat_of_strong_burghers
				years = 25
			}
		}

		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = estate_satisfaction_mild_bonus
		}
	}

	option = {
		name = flavor_teu.7.b

		ai_chance = {
			factor = 0.25
		}

		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_huge_move_to_left
		}

		change_societal_value = {
			type = aristocracy_vs_plutocracy
			value = societal_value_move_to_left
		}
	}
}

# Taxing the German Bailwicks
flavor_teu.8 = {
	type = country_event
	title = flavor_teu.8.title
	desc = flavor_teu.8.desc
	image = "gfx/interface/illustrations/institutions/banking.dds"

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1410.1.1
		to = 1600.1.1
		monthly_chance = 10
	}

	trigger = {
		total_effective_building_levels:order_commandery >= 10
		monthly_balance < 0
		gold <= yearly_gold
	}

	immediate = {
		set_local_variable = {
			name = 15_years_of_commanderies_income
			value = 0
		}

		every_owned_foreign_building = {
			limit = {
				building_type = building_type:order_commandery

			}
			change_local_variable = {
				name = 15_years_of_commanderies_income
				add = { 0.04 0.05 }
			}
		}

		change_local_variable = {
			name = 15_years_of_commanderies_income
			multiply = 180
		}
	}

	option = {
		name = flavor_teu.8.a

		ai_chance = {
			factor = 1
		}

		add_country_modifier = {
			mode = add_and_extend
			modifier = teu_extra_taxes_on_bailwicks
			size = 2.5
			years = 30
		}

		add_gold = {
			value = local_var:15_years_of_commanderies_income
			multiply = 2
		}

		add_stability = stability_mild_penalty
	}

	option = {
		name = flavor_teu.8.b

		ai_chance = {
			factor = 0.25
		}

		add_country_modifier = {
			mode = add_and_extend
			modifier = teu_extra_taxes_on_bailwicks
			years = 30
		}

		add_gold = {
			value = local_var:15_years_of_commanderies_income
		}
	}

	option = {
		name = flavor_teu.8.c

		ai_chance = {
			factor = 0
		}

		add_prestige = prestige_weak_bonus
		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_weak_bonus
		}
	}
}

# Black Death and the downturn in Immigration
flavor_teu.11 = {
	type = country_event
	title = flavor_teu.11.title
	desc = flavor_teu.11.desc
	image = "gfx/interface/illustrations/situation/black_death.dds"

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1350.1.1
		to = 1821.1.1
		monthly_chance = 10
	}

	illustration_tags = {
		10 = angry
		10 = exterior
	}

	trigger = {
		religion = religion:catholic
		situation:black_death = {
			situation_has_ended = yes
		}
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:burghers   background = pop_type:burghers }
	}

	# Revise Kulm Law
	option = {
		name = flavor_teu.11.a

		ai_chance = {
			factor = 0.75
		}

		set_variable = kulm_law_revised
		custom_tooltip = teu_impact_on_kulm_law
		if = {
			limit = {
				NOT = { has_estate_privilege = estate_privilege:kulm_law }
			}
			grant_estate_privilege = estate_privilege:kulm_law
		}
		if = {
			limit = {
				NOT = { has_estate_privilege = estate_privilege:invite_german_settlers }
			}
			grant_estate_privilege = estate_privilege:invite_german_settlers
		}
	}

	# We will need to cope with this.
	option = {
		name = flavor_teu.11.b

		ai_chance = {
			factor = 0.25
		}

		custom_tooltip = teu_impact_on_kulm_law_not_revised
		set_variable = did_not_revise_kulm_law
		add_prestige = prestige_weak_penalty
		culture = {
			add_cultural_influence = cultural_influence_mild_penalty
		}
	}
}

# Amber Monopoly
flavor_teu.12 = {
	type = country_event
	title = flavor_teu.12.title
	desc = flavor_teu.12.desc

	image = "gfx/interface/icons/trade_goods/illustrations/icon_goods_amber.dds"

	trigger = {
		produced_in_country:amber >= 5
	}

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1360.1.1
		to = 1660.1.1
		monthly_chance = 1
	}

	immediate = {
		goods:amber = {
			save_scope_as = target_goods
		}
		unlock_law_effect = {
			type = teu_amber_monopoly_law
		}
	}

	# Maintain Governmental Monopoly
	option = {
		name = flavor_teu.12.a

		ai_chance = {
			factor = 0.75
		}

		historical_option = yes

		add_policy = policy:state_controlled_amber_gathering

		capital.market = {
			add_merchant_power = {
				country = ROOT
				key = governmental_monopoly_renewed
				power = merchant_power_mild_bonus
				years = 10
			}
		}
	}

	# Encourage Burghers' Involvement
	option = {
		name = flavor_teu.12.b

		ai_chance = {
			factor = 0.25
		}

		add_policy = policy:burghers_controlled_amber_gathering

		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = estate_satisfaction_mild_bonus
		}

		if = {
			limit = {
				has_societal_value = societal_value_type:mercantilism_vs_free_trade
			}
			change_societal_value = {
				type = mercantilism_vs_free_trade
				value = societal_value_large_move_to_right
			}
		}
	}

	# Put Amber in the Hands of the Peasants
	option = {
		name = flavor_teu.12.c

		ai_chance = {
			factor = 0.25
		}

		add_policy = policy:peasant_controlled_amber_gathering

		add_estate_satisfaction = {
			type = estate_type:peasants_estate
			value = estate_satisfaction_severe_bonus
		}

		change_societal_value = {
			type = serfdom_vs_free_subjects
			value = societal_value_large_move_to_right
		}
	}
}

# Dorothea's Visions
flavor_teu.13 = {
	type = country_event
	title = flavor_teu.13.title
	desc = flavor_teu.13.desc

	trigger = {
		owns = location:malbork
		religion = religion:catholic
		culture = {
			has_culture_group = culture_group:german_group
		}
	}

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1385.1.1
		to = 1400.1.1
		monthly_chance = 10
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }

		create_character = {
			estate = estate_type:clergy_estate
			first_name = name_dorothy
			last_name = von_Montau
			female = yes
			birth_date = 1347.2.6
			birth_location = location:malbork
			religion = religion:catholic
			culture = root.culture
			save_scope_as = target_character
			create_in_limbo = yes
		}
	}

	option = {
		name = flavor_teu.13.a

		ai_chance = {
			factor = 1
		}

		add_government_power = government_power_extreme_bonus
		add_country_modifier = {
			mode = add_and_extend
			modifier = teu_anchoress_visions
			years = 20
		}

		change_societal_value = {
			type = spiritualist_vs_humanist
			value = societal_value_move_to_left
		}
		scope:target_character = { move_country = root }
	}

	option = {
		name = flavor_teu.13.b

		ai_chance = {
			factor = 0
		}

		add_religious_influence_if_valid = {
			VALUE = 15
		}
		kill_character = {
			target = scope:target_character
			reason = execution
		}
	}
}

# Johann von Posilge
flavor_teu.14 = {
	type = country_event
	title = flavor_teu.14.title
	desc = flavor_teu.14.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1370.1.1
		to = 1385.1.1
		monthly_chance = 10
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	trigger = {
		owns = location:malbork
		any_work_of_art_in_country = {
			this = work_of_art:terrae_prussiae
		}
		gold >= {
			value = monthly_income_trade_and_tax
			multiply = 3
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		create_character = {
			estate = estate_type:clergy_estate
			first_name = name_john
			last_name = von_Posilge
			birth_date = 1340.1.1
			birth_location = location:malbork
			religion = religion:catholic
			culture = culture:prussian
			artist = writer
			artist_skill = { 0.5 0.7 }
			create_in_limbo = yes
			save_scope_as = target_character
		}
		work_of_art:terrae_prussiae = {
			save_scope_as = target_work_of_art
		}
	}

	option = {
		name = flavor_teu.14.a

		historical_option = yes

		change_gold_effect = { scale = -3 }

		scope:target_character = {
			move_country = ROOT
		}

		culture = {
			add_cultural_tradition = cultural_tradition_weak_bonus
		}

		trigger_event_non_silently = {
			id = flavor_teu.15
			years = { 5 10 }
		}
		custom_tooltip = teu_event_within_5_to_10_years
	}

	option = {
		name = flavor_teu.14.b

		add_prestige = prestige_mild_penalty

		hidden_effect = {
			kill_character_silently = {
				target = scope:target_character
			}
		}
	}
}

# Chronik des Landes Preussen
flavor_teu.15 = {
	type = country_event
	title = flavor_teu.15.title
	desc = flavor_teu.15.desc

	illustration_tags = {
		10 = happy
		10 = interior
	}

	trigger = {
		scope:target_character ?= {
			is_alive = yes
		}
	}

	immediate = {
		event_illustration_government_estate_effect = yes
		set_local_variable = {
			name = work_of_art_quality
			value = { 60 70 }
		}
		capital = {
			create_art = {
				artist = scope:target_character
				key = chronik_des_land_preussens
				quality = local_var:work_of_art_quality
				type = work_of_art_type:chronicle
			}
			work_of_art:chronik_des_land_preussens = {
				save_scope_as = target_work_of_art
			}
		}
	}

	option = {
		name = flavor_teu.15.a

		show_as_tooltip = {
			capital = {
				create_art = {
					artist = scope:target_character
					key = chronik_des_land_preussens
					quality = local_var:work_of_art_quality
					type = work_of_art_type:chronicle
				}
			}
		}
		culture = {
			add_cultural_influence = cultural_influence_mild_bonus
		}
	}
}

# The Großschäffer
flavor_teu.16 = {
	type = country_event
	title = flavor_teu.16.title
	desc = flavor_teu.16.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1350.1.1
		to = 1450.1.1
		monthly_chance = 1
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	trigger = {
		area:prussia_area = {
			any_location_in_area = {
				owner ?= ROOT
				OR = {
					location_rank = location_rank:city
					location_rank = location_rank:town
				}
				count >= 2
			}
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:burghers_estate }

		set_local_variable = {
			name = exploitation_benefit
			value = 0
		}
		area:prussia_area = {
			ordered_location_in_area = {
				limit = {
					owner ?= ROOT
					OR = {
						location_rank = location_rank:city
						location_rank = location_rank:town
					}
				}
				max = 5
				check_range_bounds = no
				order_by = population
				add_to_list = affected_cities
				change_local_variable = {
					name = exploitation_benefit
					add = development
				}
			}
		}
		change_local_variable = {
			name = exploitation_benefit
			multiply = 5
		}
	}

	option = {
		name = flavor_teu.16.a

		every_in_list = {
			list = affected_cities
			change_development = development_mild_bonus
			change_prosperity = prosperity_mild_bonus
		}
	}

	option = {
		name = flavor_teu.16.b

		every_in_list = {
			list = affected_cities
			change_development = development_severe_penalty
		}

		add_gold = local_var:exploitation_benefit
	}

	option = {
		name = flavor_teu.16.c

		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = estate_satisfaction_weak_bonus
		}

		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = estate_satisfaction_weak_bonus
		}
	}
}

flavor_teu.17 = {
	type = country_event
	title = flavor_teu.17.title
	desc = flavor_teu.17.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = POL
		tag = PLC
		tag = TEU
		from = 1430.1.1
		to = 1460.1.1
		monthly_chance = 10
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	trigger = {
		owns = location:grudziadz
		gold >= {
			value = monthly_income_trade_and_tax
			multiply = 3
		}
		location:krakow = {
			has_building = building_type:university
		}
	}

	immediate = {
		#event_illustration_estate_background_effect = { background = estate_type:crown_estate }
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		create_character = {
			estate = estate_type:clergy_estate
			first_name = name_peter
			last_name = of_Grudziadz
			birth_date = 1392.1.1 #approximate
			birth_location = location:grudziadz
			artist = composer
			artist_skill = { 0.65 0.75 }
			create_in_limbo = yes
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_teu.17.a

		change_gold_effect = { scale = -3 }

		scope:target_character = {
			move_country = ROOT
		}

		culture = {
			add_cultural_influence = cultural_influence_mild_bonus
		}
	}

	option = {
		name = flavor_teu.17.b

		add_government_power = government_power_mild_penalty
		add_prestige = prestige_mild_penalty

		hidden_effect = {
			kill_character_silently = {
				target = scope:target_character
			}
		}
	}
}

# End of the Prussian Crusade for Character
flavor_teu.100 = {
	type = country_event
	title = flavor_teu.100.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:target
					scope:target ?= { is_alive = yes }
				}
				desc = flavor_teu.100.desc.crusader_returns
			}
			triggered_desc = {
				trigger = {
					exists = scope:target
					scope:target ?= { is_alive = no }
				}
				desc = flavor_teu.100.desc.crusader_dead
			}
			triggered_desc = {
				trigger = { NOT = { exists = scope:target } }
				desc = flavor_teu.100.desc.fallback
			}
		}
	}
	trigger = {
		has_variable_list = pr_cr_characters
		any_in_list = {
			variable = pr_cr_characters
			is_alive = yes
			NOT = { has_character_modifier = on_prussian_crusade }
			has_variable = pr_cr_home_country
		}
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
		save_scope_as = target_country
		random_in_list = {
			variable = pr_cr_characters
			limit = {
				is_alive = yes
				NOT = { has_character_modifier = on_prussian_crusade }
				has_variable = pr_cr_home_country
			}
			save_scope_as = target
		}
	}
	after = {
		remove_list_variable = {
			name = pr_cr_characters
			target = scope:target
		}
		scope:target = { remove_variable = pr_cr_home_country }
	}

	option = {
		name = flavor_teu.100.a
		trigger = {
			scope:target ?= {
				is_alive = yes
			}
		}
		scope:target = {
			add_character_modifier = {
				modifier = completed_prussian_crusade
				years = -1
				mode = add_and_extend
			}
			move_country = scope:target_country
			if = {
				limit = { has_variable = pr_cr_is_original_monarch }
				scope:target_country = {
					set_new_ruler = scope:target
				}
				remove_variable = pr_cr_is_original_monarch
			}
		}
		add_army_tradition = army_tradition_extreme_bonus
	}

	option = {
		name = flavor_teu.100.b
		trigger = {
			scope:target ?= {
				is_alive = no
			}
		}
		add_army_tradition = army_tradition_extreme_bonus
		scope:target = {
			move_country = scope:target_country
		}
	}

	option = {
		name = flavor_teu.100.c
		trigger = {
			not = { exists = scope:target }
		}
	}
}

#Death of a Crusader
flavor_teu.101 = { #GRAVEYARD
	type = country_event
	title = flavor_teu.101.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = infection_death }
				desc = flavor_teu.101.desc.infection_death
			}
			triggered_desc = {
				trigger = { has_variable = training_accident_death }
				desc = flavor_teu.101.desc.training_accident_death
			}
			triggered_desc = {
				trigger = { has_variable = river_drowning_death }
				desc = flavor_teu.101.desc.river_drowning_death
			}
			triggered_desc = {
				trigger = {
					not = { has_variable = infection_death }
					not = { has_variable = training_accident_death }
					not = { has_variable = river_drowning_death }
				}
				desc = flavor_teu.101.desc.fallback
			}
		}
	}
	trigger = {
		culture = culture:prussian
		has_reform = government_reform:military_order_reform
		OR = {
			current_age = age_1_traditions
			current_age = age_2_renaissance
		}
		any_character = {
			has_character_modifier = on_prussian_crusade
			is_alive = yes
		}
	}
	immediate = {
		hidden_effect = {
			random_character = {
				limit = {
					has_character_modifier = on_prussian_crusade
					is_alive = yes
				}
				save_scope_as = target
				if = {
					limit = { has_variable = pr_cr_home_country }
					var:pr_cr_home_country = {
						save_scope_as = target_country
					}
				}
			}
			random_list = {
				50 = { set_variable = { name = infection_death value = yes } }
				35 = { set_variable = { name = training_accident_death value = yes } }
				15 = { set_variable = { name = river_drowning_death value = yes } }
			}
			capital = { save_scope_as = capital }
		}
	}
	after = {
		hidden_effect = {
			if = { limit = { has_variable = infection_death }			remove_variable = infection_death }
			if = { limit = { has_variable = training_accident_death }	remove_variable = training_accident_death }
			if = { limit = { has_variable = river_drowning_death }		remove_variable = river_drowning_death }
		}
		if = {
			limit = { exists = scope:target_country }
			scope:target_country = {
				trigger_event_non_silently = {
					id = flavor_teu.102
					days = 10
				}
			}
		}
	}
	#infection_death
	option = {
		name = flavor_teu.101.a
		trigger = { has_variable = infection_death }
		kill_character = { target = scope:target reason = fever location = scope:capital }
	}
	#training_accident_death
	option = {
		name = flavor_teu.101.b
		trigger = { has_variable = training_accident_death }
		kill_character = { target = scope:target reason = beheading location = scope:capital }
	}
	#river_drowning_death
	option = {
		name = flavor_teu.101.c
		trigger = { has_variable = river_drowning_death }
		kill_character = { target = scope:target reason = drowning_river location = scope:capital }
	}
	#fallback
	option = {
		name = flavor_teu.101.zzz
		trigger = {
			not = { has_variable = infection_death }
			not = { has_variable = training_accident_death }
			not = { has_variable = river_drowning_death }
		}
		kill_character = scope:target
	}
}

#Death of a Crusader Notification
flavor_teu.102 = { #GRAVEYARD
	type = country_event
	title = flavor_teu.102.title
	desc = flavor_teu.102.desc

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
	}

	option = {
		name = flavor_teu.102.a
	}

	after = {
		remove_list_variable = {
			name = pr_cr_characters
			target = scope:target
		}
	}
}

# Two Naked Swords
# https://en.wikipedia.org/wiki/Grunwald_Swords
flavor_teu.300 = {
	hide_portraits = yes
	type = country_event
	title = flavor_teu.300.title
	desc = flavor_teu.300.desc
	historical_info = flavor_teu.300.historical_info

	fire_only_once = yes
	dynamic_historical_event = {
		tag = TEU
		from = 1400.1.1
		to = 1420.1.1
		monthly_chance = 5
	}

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	trigger = {
		country_exists = c:POL
		NOT = { has_truce_with = c:POL }
		NOT = { is_at_war_with = c:POL }
		c:POL = {
			is_neighbor_of = ROOT
			OR = {
				is_enemy_of = ROOT
				is_rival_of = ROOT
			}
		}
		OR = {
			has_ruler = yes
			has_regent = yes
		}
		c:POL = {
			OR = {
				has_ruler = yes
				has_regent = yes
			}
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler_or_regent = {
			save_scope_as = teu_ruler
		}
		save_scope_as = teu_from
		c:POL = {
			ruler_or_regent = {
				save_scope_as = pol_ruler
			}
		}
	}

	option = {
		name = flavor_teu.300.a

		historical_option = yes

		change_societal_value = {
			type = belligerent_vs_conciliatory
			value = societal_value_large_move_to_left
		}

		show_as_tooltip = {
			c:POL = {
				add_casus_belli = { type = casus_belli:cb_insulted_us target = c:TEU }
			}
		}
		hidden_effect = {
			c:POL = {
				trigger_event_non_silently = flavor_teu.301
			}
		}
	}
	option = {
		name = flavor_teu.300.b

		change_societal_value = {
			type = offensive_vs_defensive
			value = societal_value_minor_move_to_right
		}

		scope:teu_ruler = {
			add_dip = 5
		}
	}
}

# Two Naked Swords - Polish CB
# https://en.wikipedia.org/wiki/Grunwald_Swords
flavor_teu.301 = {
	type = country_event
	title = flavor_teu.301.title
	desc = flavor_teu.301.desc
	historical_info = flavor_teu.300.historical_info

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_teu.301.a

		add_casus_belli =  { type = casus_belli:cb_insulted_us target = c:TEU }

		set_variable = TEU_received_naked_swords
		custom_tooltip = POL_after_next_war_is_won
		show_as_tooltip = {
			capital = {
				create_art = {
					quality = { 85 95 }
					type = work_of_art_type:regalia
					key = TEU_swords_of_grunwald
				}
			}
		}
	}
}

# Two Naked Swords - The Polish Win the War
# https://en.wikipedia.org/wiki/Grunwald_Swords
flavor_teu.302 = {
	type = country_event
	title = flavor_teu.302.title
	desc = flavor_teu.302.desc


	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_teu.302.a

		capital = {
			create_art = {
				quality = { 85 95 }
				type = work_of_art_type:regalia
				key = TEU_swords_of_grunwald
			}
		}
	}
}