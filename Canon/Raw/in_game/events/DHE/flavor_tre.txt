namespace = flavor_tre

#Expanding the Citadel of Trebizond
flavor_tre.1 = {
	hide_portraits = yes
	type = country_event
	title = flavor_tre.1.title
	desc = flavor_tre.1.desc
	historical_info = flavor_tre.1.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = TRE
		from = 1370.1.1
		to = 1395.6.1
		monthly_chance = 1
	}
	
	trigger = {
		owns = location:trebizond
		at_war = no
		is_during_bankruptcy = no
	}

	illustration_tags = {
		10 = exterior
		10 = happy
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler_or_regent = { save_scope_as = target_character1 }
		location:trebizond = { save_scope_as = target_location }
	}

	option = {
		name = flavor_tre.1.a
		historical_option = yes

		change_gold_effect = { scale = -4 }
		scope:target_location = { change_development = development_mild_bonus change_prosperity = prosperity_weak_bonus }
	}
	option = {
		name = flavor_tre.1.b
		
		scope:target_location = { change_prosperity = prosperity_weak_penalty }
	}
}

flavor_tre.2 = {	#Scholarioi in Insubordination
	hide_portraits = yes
	type = country_event
	title = flavor_tre.2.title
	desc = flavor_tre.2.desc
	historical_info = flavor_tre.2.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = TRE
		from = 1337.1.1
		to = 1395.6.1
		monthly_chance = 1
	}
	
	trigger = {
		owns = location:trebizond
		at_war = no
		"estate_power(estate_type:nobles_estate)" > "estate_power(estate_type:crown_estate)"
		"estate(estate_type:nobles_estate)" = { num_privileges > 3 }
	}

	illustration_tags = {
		10 = interior
		10 = angry
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler_or_regent = { save_scope_as = target_character1 }
		random_estate_privilege = {
			limit = {
				estate_type = estate_type:nobles_estate
			}
			save_scope_as = first_privilege
		}
		random_estate_privilege = {
			limit = {
				estate_type = estate_type:nobles_estate
				this != scope:first_privilege
			}
			save_scope_as = second_privilege
		}
		random_estate_privilege = {
			limit = {
				estate_type = estate_type:nobles_estate
				this != scope:first_privilege
				this != scope:second_privilege
			}
			save_scope_as = third_privilege
		}
		location:trebizond = { save_scope_as = target_location }
	}

	option = {
		name = flavor_tre.2.a

		historical_option = yes

		add_stability = stability_ultimate_penalty
		if = {
			limit = { exists = scope:first_privilege }
			revoke_estate_privilege = scope:first_privilege
		}
		if = {
			limit = { exists = scope:second_privilege }
			revoke_estate_privilege = scope:second_privilege
		}
		if = {
			limit = { exists = scope:third_privilege }
			revoke_estate_privilege = scope:third_privilege
		}
		
	}
	
	option = {
		name = flavor_tre.2.b
		
	
		add_government_power = government_power_ultimate_penalty
	}
}

flavor_tre.3 = {	#Poisoning of Basil Megas Komnenos
	type = country_event
	title = flavor_tre.3.title
	desc = flavor_tre.3.desc
	historical_info = flavor_tre.3.historical_info
	fire_only_once = yes
	dynamic_historical_event = {
		tag = TRE
		from = 1339.1.1
		to = 1340.6.1
		monthly_chance = 2
	}
	
	trigger = {
		character:tre_basil_komnenos = { 
			owner = root
			is_alive = yes
			is_ruler = yes
			any_spouse = {
				this = character:tre_irene_palaiologos
				is_alive = yes
			}
		}
		at_war = no
	}

	illustration_tags = {
		10 = interior
		10 = angry
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler_or_regent = { save_scope_as = target_character1 }
		character:tre_irene_palaiologos = { save_scope_as = target_character2 }
		kill_character = {
			target = scope:target_character1
			reason = assassination
			killer = scope:target_character2
		}
	}

	option = {
		name = flavor_tre.3.a

		historical_option = yes

		set_new_ruler = scope:target_character2
		add_stability = stability_severe_penalty
		add_government_power = government_power_ultimate_penalty
	}

	option = {
		name = flavor_tre.3.b

		kill_character = {
			target = scope:target_character2
			reason = execution
		}
		if = { 
			limit = { 
				has_mutual_scripted_relation = {
					type = relation_type:alliance
					target = c:BYZ
				}
			}
			remove_relation = {
				first = ROOT
				second = c:BYZ
				type = relation_type:alliance
			}	
		}
		add_stability = stability_extreme_penalty
		add_government_power = government_power_ultimate_penalty
	}
}