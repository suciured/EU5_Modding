namespace = flavor_bng

flavor_bng.1 = { #Nur Qutb Alam and the Chishti Order
	type = country_event
	title = flavor_bng.1.title
	desc = flavor_bng.1.desc
	historical_info = flavor_bng.1.historical_info
	fire_only_once = yes

	dynamic_historical_event = {
		tag = BNG
		from = 1380.1.1
		to = 1410.1.1
		monthly_chance = 2
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		create_character = {
			first_name = name_nur.name_qutb
			last_name = Alam
			adm = 45
			dip = 87
			mil = 22
			min_age = 35
			birth_location = location:pandua
			artist_skill = 0.85
			artist = writer
			estate = estate_type:clergy_estate
			save_scope_as = target_artist
			create_in_limbo = yes
		}
	}

	trigger = {
		religion.group = religion_group:muslim
		owns = location:pandua
	}

	option = {
		name = flavor_bng.1.a
		historical_option = yes

		add_legitimacy = legitimacy_mild_bonus
		scope:target_artist = { move_country = root }
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_right }
		change_societal_value = { type = spiritualist_vs_humanist value = societal_value_move_to_right }
	}
	option = {
		name = flavor_bng.1.b

		add_prestige = prestige_mild_bonus
		change_societal_value = { type =mysticism_vs_jurisprudence value = societal_value_move_to_left }
		scope:target_artist = {
			banish_character = yes
		}
	}
}

flavor_bng.2 = { #Syed Sultan finishes the Nabibangsha
	type = country_event
	title = flavor_bng.2.title
	desc = flavor_bng.2.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = BNG
		from = 1575.1.1
		to = 1650.1.1
		monthly_chance = 2
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		create_character = {
			first_name = Syed
			last_name = Sultan
			birth_location = capital
			religion = religion:sunni
			adm = 54
			dip = 77
			mil = 34
			birth_date = 1550.1.1
			estate = estate_type:clergy_estate
			save_scope_as = target_artist
			artist = writer
			artist_skill = 0.80
			create_in_limbo = yes
		}
	}

	trigger = {
		religion.group = religion_group:muslim
		has_advance = bng_bengali_poetry
	}

	option = {
		name = flavor_bng.2.a
		historical_option = yes

		change_gold_effect = { scale = -1 }
		scope:target_artist = { move_country = root }
		capital = {
			create_art = {
				quality = 80
				artist = scope:target_artist
				type = work_of_art_type:chronicle
				key = bng_nabibangsha
			}
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_penalty }

	}
	option = {
		name = flavor_bng.2.b
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_bonus }
		scope:target_artist = {
			banish_character = yes
		}
	}
}

flavor_bng.3 = { #Khan Jahan Ali - Khalifatabad
	type = country_event
	title = flavor_bng.3.title
	desc = flavor_bng.3.desc

	fire_only_once = yes
	dynamic_historical_event = {
		tag = BNG
		from = 1410.1.1
		to = 1450.1.1
		monthly_chance = 2
	}

	illustration_tags = {
		10 = happy
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		create_character = {
			first_name = name_khan.name_jahan
			last_name = name_ali
			birth_location = location:samarkand #unknown
			religion = religion:sunni
			adm = 43
			dip = 76
			mil = 74
			birth_date = 1380.1.1
			estate = estate_type:nobles_estate
			save_scope_as = target_character
		}
	}

	trigger = {
		owns = location:khalifatabad
		location:khalifatabad = {
			integration_level = core
		}
		religion.group = religion_group:muslim
		has_advance = bng_rupees
	}

	option = {
		name = flavor_bng.3.a
		location:khalifatabad = {
			if = {
				limit = {
					location_rank = location_rank:rural_settlement
				}
				change_location_rank = location_rank:town
			}

			change_development = development_mild_bonus
			change_prosperity = prosperity_severe_bonus
		}
	}
}

flavor_bng.4 = { #Minting Towns in Bengal
	type = country_event
	title = flavor_bng.4.title
	desc = flavor_bng.4.desc
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = BNG
		from = 1390.1.1
		to = 1450.1.1
		monthly_chance = 5
	}

	trigger = {
		has_advance = bng_rupees
	}

	illustration_tags = {
        10 = happy
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}
	
	option = {
		name = flavor_bng.4.a
		change_gold_effect = { scale = 6 }
		change_societal_value = { type = capital_economy_vs_traditional_economy value = societal_value_move_to_left }
	}
}

flavor_bng.5 = { #Adina Mosque Pandua
	type = country_event
	title = flavor_bng.5.title
	desc = flavor_bng.5.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = BNG
		from = 1370.1.1
		to = 1440.1.1
		monthly_chance = 5
	}
	
	historical_info = flavor_bng.5.historical_info

	trigger = {
		religion.group = religion_group:muslim
		has_advance = cathedral_advance
		owns = location:pandua
		is_subject = no
		has_ruler = yes
	}

	illustration_tags = {
        10 = happy
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		location:pandua = { save_scope_as = target_location }
		ruler = { save_scope_as = target_character }
	}

	option = {
		name = flavor_bng.5.a
		historical_option = yes

		scope:target_location = {
			if = {
				limit = {
					NOT = { has_building = building_type:cathedral }
				}
				construct_building = {
					building_type = building_type:cathedral
					cost_multiplier = 0.5
					cost_multiplier_reason = "clergy_cheap_sponsorship"
				}
				random_pop = {
					limit = {
						pop_type = pop_type:burghers
						religion = root.religion
					}
					change_pop_type = pop_type:clergy
				}
			}
			else = {
				change_development = development_mild_bonus
				change_prosperity = prosperity_severe_bonus
			}
		}

		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_extreme_bonus }
		add_religious_influence_if_valid = { VALUE = 20.00 }

		change_gold_effect = { scale = -3 }

	}

	option = {
		name = flavor_bng.5.b

		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_extreme_penalty }
		add_government_power = government_power_mild_penalty

	}
}

flavor_bng.6 = {
	type = country_event
	title = flavor_bng.6.title
	desc = flavor_bng.6.desc
	fire_only_once = yes

	dynamic_historical_event = {
		tag = STN
		from = 1337.4.1
		to = 1821.1.1
		monthly_chance = 10
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	trigger = {
		OR = {
			c:SGN ?= {
				is_subject = no
			}
			c:GAU ?= {
				is_subject = no
			}
			c:TRF ?= {
				is_subject = no
			}
		}
	}

	immediate = {
		event_illustration_poptype_effect = { foreground = pop_type:soldiers background = pop_type:soldiers }
		c:SGN ?= {
			save_scope_as = target_country1
		}
		c:GAU ?= {
			save_scope_as = target_country2
		}
		c:TRF ?= {
			save_scope_as = target_country3
		}

		ruler_or_regent ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_bng.6.a

		if = {
			limit = {
				exists = scope:target_country1
			}
			add_casus_belli = {
				target = scope:target_country1
				type = casus_belli:cb_annex
			}
		}
		if = {
			limit = {
				exists = scope:target_country2
			}
			add_casus_belli = {
				target = scope:target_country2
				type = casus_belli:cb_annex
			}
		}
		if = {
			limit = {
				exists = scope:target_country3
			}
			add_casus_belli = {
				target = scope:target_country3
				type = casus_belli:cb_annex
			}
		}

		change_societal_value = {
			type = belligerent_vs_conciliatory
			value = societal_value_move_to_left
		}
	}

	option = {
		name = flavor_bng.6.b

		change_societal_value = {
			type = belligerent_vs_conciliatory
			value = societal_value_huge_move_to_right
		}
	}
}

flavor_bng.7 = { #Pandua as the capital
	type = country_event
	title = flavor_bng.7.title
	desc = flavor_bng.7.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1337.1.1
		to = 1450.1.1
		monthly_chance = 1
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	fire_only_once = yes

	trigger = {
		location:pandua.owner ?= root
		location:pandua = {
			is_capital = no
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		location:pandua = {
			save_scope_as = target_location
		}

		ruler_or_regent ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_bng.7.a

		set_capital = scope:target_location

		scope:target_location = {
			change_development = development_mild_bonus
		}
	}

	option = {
		name = flavor_bng.7.b

		capital ?= {
			change_development = development_mild_bonus
		}
	}
}

flavor_bng.8 = { #Hindu pretender
	type = country_event
	title = flavor_bng.8.title
	desc = flavor_bng.8.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1440.1.1
		to = 1500.1.1
		monthly_chance = 2
	}

	illustration_tags = {
		10 = armed
		10 = exterior
	}

	fire_only_once = yes

	trigger = {
		religion != religion:hindu
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
		create_character = {
			birth_date = 1421.6.1
			artist_skill = 0.79
			estate = estate_type:clergy_estate
			religion = religion:hindu
			save_scope_as = target_character
			create_in_limbo = yes
		}

		ruler_or_regent ?= {
			save_scope_as = target_character2
		}
	}

	option = {
		name = flavor_bng.8.a

		scope:target_character = { move_country = root }
		set_new_ruler = scope:target_character

		custom_tooltip = {
			text = bng_muslim_nobles_become_disloyal_tt
			every_owned_location = {
				limit = {
					any_pop = {
						pop_type = pop_type:nobles
						religion != religion:hindu
					}
				}
				every_pop = {
					limit = {
						owner = root
						pop_type = pop_type:nobles
						religion != religion:hindu
					}
					add_pop_satisfaction = pop_satisfaction_ultimate_penalty
				}
			}
		}
	}

	option = {
		name = flavor_bng.8.b

		scope:target_character = {
			banish_character = yes
		}

		custom_tooltip = {
			text = bng_hindus_become_disloyal_tt
			every_owned_location = {
				limit = {
					any_pop = {
						religion = religion:hindu
					}
				}
				every_pop = {
					limit = {
						owner = root
						religion = religion:hindu
					}
					add_pop_satisfaction = pop_satisfaction_extreme_penalty
				}
			}
		}
	}
}

#Promotion of Sufism
flavor_bng.9 = {
	type = country_event
	title = flavor_bng.9.title
	desc = flavor_bng.9.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1350.1.1
		to = 1450.1.1
		monthly_chance = 2
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	fire_only_once = yes

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }

		create_character = {
			adm = { 50 90 }
			dip = { 40 80 }
			mil = { 10 30 }
			min_age = 30
			birth_location = root.capital
			estate = estate_type:clergy_estate
			religious_school = religious_school:naqshbandi_school
			religious_figure = religious_figure:muslim_scholar
			save_scope_as = target_character
			create_in_limbo = yes
		}

		create_character = {
			adm = { 50 90 }
			dip = { 40 80 }
			mil = { 10 30 }
			min_age = 30
			birth_location = root.capital
			estate = estate_type:clergy_estate
			religious_school = religious_school:naqshbandi_school
			religious_figure = religious_figure:muslim_scholar
			save_scope_as = target_character2
			create_in_limbo = yes
		}
	}

	trigger = {
		religion.group = religion_group:muslim
	}

	option = {
		name = flavor_bng.9.a

		scope:target_character = { move_country = root }
		scope:target_character2 = { move_country = root }
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_left }
	}

	option = {
		name = flavor_bng.9.b

		scope:target_character = {
			banish_character = yes
		}
		scope:target_character2 = {
			banish_character = yes
		}

		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_right }
	}
}

#Bengal Subah
flavor_bng.10 = {
	type = country_event
	title = flavor_bng.10.title
	desc = flavor_bng.10.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1337.1.1
		to = 1500.1.1
		monthly_chance = 1
	}

	illustration_tags = {
		10 = exterior
		10 = happy
	}

	trigger = {
		total_population >= 20000
		monthly_balance >= 300
	}

	fire_only_once = yes

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		ruler_or_regent ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_bng.10.a

		unlock_government_reform_effect = {
			type = bng_industralized_provinces
		}

		add_estate_satisfaction = {
			type = estate_type:peasants_estate
			value = estate_satisfaction_extreme_penalty
		}
	}

	option = {
		name = flavor_bng.10.b

		add_legitimacy = legitimacy_mild_bonus
		add_estate_satisfaction = {
			type = estate_type:peasants_estate
			value = estate_satisfaction_extreme_bonus
		}
	}
}

#Shipbuilding Tradition
flavor_bng.11 = {
	type = country_event
	title = flavor_bng.11.title
	desc = flavor_bng.11.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1400.1.1
		to = 1500.1.1
		monthly_chance = 1
	}

	illustration_tags = {
		10 = happy
		10 = exterior
	}

	fire_only_once = yes

	trigger = {
		any_port_in_country = {
			count >= 5
			region = region:bengal_region
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		ordered_port_in_country = {
			limit = {
				region = region:bengal_region
			}
			order_by = population
			max = 1
			save_scope_as = target_location
		}
	}

	option = {
		name = flavor_bng.11.a

		if = {
			limit = {
				exists = scope:target_location
			}
			scope:target_location = {
				change_development = development_mild_bonus
			}
		}

		custom_tooltip = {
			text = bng_buff_naval_parliament_debate_tt
			set_variable = {
				name = bng_buffed_naval_parliament_debate_flag
				years = 20
			}
		}
	}

	option = {
		name = flavor_bng.11.b


		change_societal_value = {
			type = land_vs_naval
			value = societal_value_large_move_to_right
		}
	}
}

#Firoz Minar
flavor_bng.12 = {
	type = country_event
	title = flavor_bng.12.title
	desc = flavor_bng.12.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1450.1.1
		to = 1500.1.1
		monthly_chance = 3
	}

	illustration_tags = {
		10 = exterior
		10 = happy
	}

	fire_only_once = yes

	trigger = {
		location:gaur.owner ?= root
		ruler_or_regent ?= {
			has_trait = architectural_visionary
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		location:gaur = {
			save_scope_as = target_location
		}
		ruler_or_regent ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_bng.12.a

		scope:target_location = {
			create_art = {
				quality = 75
				artist = scope:target_character
				type = work_of_art_type:monument
				key = firoz_minar
			}
		}

		change_gold_effect = { scale = -2 }
	}

	option = {
		name = flavor_bng.12.b

		add_prestige = prestige_mild_penalty
	}
}

#Dakhil Darwaza
flavor_bng.13 = {
	type = country_event
	title = flavor_bng.13.title
	desc = flavor_bng.13.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1500.1.1
		to = 1550.1.1
		monthly_chance = 3
	}

	illustration_tags = {
		10 = exterior
		10 = happy
	}

	fire_only_once = yes

	trigger = {
		location:gaur.owner ?= root
		ruler_or_regent ?= {
			has_trait = architectural_visionary
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		location:gaur = {
			save_scope_as = target_location
		}

		ruler_or_regent ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_bng.13.a

		scope:target_location = {
			create_art = {
				quality = 60
				artist = scope:target_character
				type = work_of_art_type:monument
				key = dakhil_darwaza
			}
		}

		change_gold_effect = { scale = -1 }
	}

	option = {
		name = flavor_bng.13.b

		add_prestige = prestige_mild_penalty
	}
}

#Kusumba Mosque
flavor_bng.14 = {
	type = country_event
	title = flavor_bng.14.title
	desc = flavor_bng.14.desc
	historical_info = flavor_bng.14.historical_info

	dynamic_historical_event = {
		tag = BNG
		from = 1550.1.1
		to = 1600.1.1
		monthly_chance = 3
	}

	illustration_tags = {
		10 = exterior
		10 = happy
	}

	fire_only_once = yes

	trigger = {
		religion.group = religion_group:muslim
		location:naogaon.owner ?= root
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		location:naogaon = {
			save_scope_as = target_location
		}

		ruler_or_regent ?= {
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_bng.14.a

		historical_option = yes

		scope:target_location = {
			create_art = {
				key = kusumba_mosque
				quality = 60
				type = work_of_art_type:monument
				artist = scope:target_character
			}
		}

		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_right }
		change_gold_effect = { scale = -2 }
	}

	option = {
		name = flavor_bng.14.b

		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_left }
		add_prestige = prestige_mild_penalty
	}

	option = {
		name = flavor_bng.14.c

		trigger = {
			ruler_or_regent ?= {
				has_trait = scholar
			}
		}

		scope:target_location = {
			create_art = {
				key = kusumba_mosque
				quality = 75
				type = work_of_art_type:monument
				artist = scope:target_character
			}

			add_location_modifier = { modifier = sufi_shrine months = -1 mode = add_and_extend }
		}

		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_move_to_right }
		change_gold_effect = { scale = -3 }
	}
}

flavor_bng.1000 = { #China relations event chain
	type = country_event
	title = flavor_bng.1000.title
	desc = flavor_bng.1000.desc

	dynamic_historical_event = {
		tag = BNG
		from = 1360.1.1
		to = 1600.1.1
		monthly_chance = 3
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	fire_only_once = yes

	trigger = {
		exists = international_organization:middle_kingdom
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		
		international_organization:middle_kingdom.leader_country ?= {
			save_scope_as = target_country
		}

		save_scope_as = target_country2
	}

	option = {
		name = flavor_bng.1000.a

		show_as_tooltip = {
			capital ?= {
				change_institution_progress = {
					type = institution:meritocracy
					value = institution_progress_severe_bonus
				}
			}

			add_opinion = {
				modifier = bng_chinese_ties
				target = scope:target_country
			}
			scope:target_country = {
				add_opinion = {
					modifier = bng_chinese_ties
					target = root
				}
			}
		}

		scope:target_country = {
			trigger_event_non_silently = flavor_bng.1001
		}
	}

	option = {
		name = flavor_bng.1000.b

		custom_tooltip = bng_no_diplomatic_ties_tt

		change_societal_value = {
			type = belligerent_vs_conciliatory
			value = societal_value_large_move_to_left
		}
	}
}

flavor_bng.1001 = {
	type = country_event
	title = flavor_bng.1001.title
	desc = flavor_bng.1001.desc
	major = yes
	major_trigger = {
		this = scope:target_country2
	}

	illustration_tags = {
		10 = interior
		10 = regular
	}

	immediate = {
		if = {
			limit = {
				is_ai = no
			}
			event_illustration_estate_background_effect = { background = estate_type:nobles_estate }
			c:BNG = {
				event_illustration_estate_foreground_effect = { foreground = estate_type:nobles_estate }
			}
		}
	}

	option = {
		name = flavor_bng.1001.a

		scope:target_country2 = {
			capital ?= {
				change_institution_progress = {
					type = institution:meritocracy
					value = institution_progress_severe_bonus
				}
			}

			add_opinion = {
				modifier = bng_chinese_ties
				target = scope:target_country
			}
		}
		add_opinion = {
			modifier = bng_chinese_ties
			target = scope:target_country2
		}
	}

	option = {
		name = flavor_bng.1001.b

		custom_tooltip = bng_rejected_agreement_tt

		if = {
			limit = {
				NOR = {
					current_age = age_1_traditions
					current_age = age_2_renaissance
				}
			}
			change_societal_value = {
				type = outward_vs_inward
				value = societal_value_minor_move_to_right
			}
		}
		else = {
			add_prestige = prestige_weak_bonus
		}
	}
}