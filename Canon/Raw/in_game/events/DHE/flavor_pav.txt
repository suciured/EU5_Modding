namespace = flavor_pav
# Expulsion of the Beccaria
flavor_pav.1 = {
	type = country_event
	title = flavor_pav.1.title
	desc = flavor_pav.1.desc
	historical_info = flavor_pav.1.historical_info

	fire_only_once = yes
	dynamic_historical_event = {
		tag = PAV
		from = 1350.1.1
		to = 1370.1.1
		monthly_chance = 10
	}

	trigger = {
		has_ruler = yes
		government_type = c:MLO.government_type
		ruler = { has_dynasty = yes }
		ruler.dynasty = dynasty:beccaria_dynasty
	}

	illustration_tags = {
        10 = angry
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		ruler = {
			save_scope_as = expelled_ruler
		}
		create_character = {
			first_name = name_james
			last_name = Bussolari
			adm = 67 dip = 94 mil = 53
			birth_date = 1312.1.1
			birth_location = location:pavia
			estate = estate_type:clergy_estate
			create_in_limbo = yes
			save_scope_as = pav_iacopo_bussolari_scope
		}
		save_scope_as = target_country
	}

	option = {
		name = flavor_pav.1.a

		historical_option = yes

		set_new_ruler = scope:pav_iacopo_bussolari_scope

		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_extreme_bonus }

		c:MLO ?= {
			trigger_event_non_silently = flavor_pav.2
		}
	}

	option = {
		name = flavor_pav.1.b

		add_stability = stability_extreme_penalty
		add_legitimacy = legitimacy_severe_penalty

		hidden_effect = {
			kill_character_silently = scope:pav_iacopo_bussolari_scope
		}
	}
}

# Expulsion of the Beccaria - Milanese support of the Beccaria and CB
flavor_pav.2 = {
	type = country_event
	title = flavor_pav.2.title
	desc = flavor_pav.2.desc
	historical_info = flavor_pav.2.historical_info

	illustration_tags = {
        10 = angry
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		scope:expelled_ruler = {
			move_country = ROOT
			every_descendant = {
				move_country = ROOT
			}
			every_spouse = {
				move_country = ROOT
			}
		}
	}

	#Exploit the chaos.
	option = {
		name = flavor_pav.2.a

		historical_option = yes

		add_casus_belli = {
			target = scope:target_country
			type = casus_belli:cb_subjugation
		}

		drop_antagonism_bomb = {
			target = scope:target_country.capital
			modifier = antagonism_pressed_claim
			value = 2
		}
	}

	#Not our concern.
	option = {
		name = flavor_pav.2.b

		add_prestige = prestige_severe_bonus
	}
}