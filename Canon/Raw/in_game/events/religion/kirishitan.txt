namespace = kirishitan

kirishitan.1 = { #A New Buddha?
	type = country_event
	title = kirishitan.1.title
	desc = kirishitan.1.desc

	trigger = {
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		international_organization:japanese_shogunate ?= {
			has_variable = nanban_trade
		}
		has_ruler = yes
		NOT = { has_country_modifier = shinto_harsh_initial_stance_on_christianity }
		NOT = { has_country_modifier = shinto_religious_tensions }
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		ruler ?= { save_scope_as = target_ruler }
	}

	option = {
		name = kirishitan.1.a
		add_country_modifier = { modifier = shinto_harsh_initial_stance_on_christianity years = 10 mode = add_and_extend }  
	}
	option = {
		name = kirishitan.1.b
		add_legitimacy = legitimacy_mild_bonus
	}
	option = {
		name = kirishitan.1.c
		add_country_modifier = { modifier = shinto_religious_tensions years = 10 mode = add_and_extend }  
	}
}

kirishitan.2 = { #Missions in Capital
	type = country_event
	title = kirishitan.2.title
	desc = kirishitan.2.desc

	trigger = {
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		international_organization:japanese_shogunate ?= {
			has_variable = nanban_trade
		}
		has_heir = yes
		heir ?= { 
			character_age >= 10
			religion.group != religion_group:christian
		}
		NOT = { has_country_modifier = shinto_harsh_initial_stance_on_christianity }
		capital ?= { NOT = { has_location_modifier = shinto_local_christian_mission } }
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:nobles_estate }
		heir ?= { save_scope_as = target_heir }
		capital ?= { save_scope_as = target_location }
	}
	
	option = {
		name = kirishitan.2.a
		capital = {
			add_location_modifier = { modifier = shinto_local_christian_mission years = 10 mode = add_and_extend }
		}
		scope:target_heir = {
			random_list = {
				33 = { add_adm = 10 }
				33 = { add_dip = 10 }
				33 = { add_mil = 10 }
			}
		}
	}
	option = {
		name = kirishitan.2.b
		capital = {
			add_location_modifier = { modifier = shinto_local_christian_mission years = 20 mode = add_and_extend }
			convert_pops_in_location_to_catholic = yes
		}
	}
	option = {
		name = kirishitan.2.c
		add_stability = stability_extreme_bonus
		add_country_modifier = { modifier = shinto_harsh_initial_stance_on_christianity years = 10 mode = add_and_extend }
	}
}

kirishitan.3 = { #Trade Privileges
	type = country_event
	title = kirishitan.3.title
	desc = kirishitan.3.desc

	trigger = {
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		has_ruler = yes
		NOT = { has_country_modifier = shinto_strengthened_local_traders }
		any_port_in_country = {
			NOT = { has_location_modifier = shinto_local_christian_mission }
		}
		"religion_percentage_in_country(religion:catholic)" > 0
	}
	
	illustration_tags = {
        10 = regular
        10 = exterior
    }
	
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		ruler ?= { save_scope_as = target_ruler }
		random_port_in_country = {
			limit = {
				NOT = { has_location_modifier = shinto_local_christian_mission }
			}
			save_scope_as = target_location
		}
	}

	option = {
		name = kirishitan.3.a
		scope:target_location = {
			convert_pops_in_location_to_catholic = yes
			add_location_modifier = { modifier = shinto_local_christian_mission years = 10 mode = add_and_extend }
		} 
	}
	option = {
		name = kirishitan.3.b
		add_country_modifier = { modifier = shinto_strengthened_local_traders years = 10 mode = add_and_extend }  
	}
}

kirishitan.4 = { #Letter of Recommendation
	type = country_event
	title = kirishitan.4.title
	desc = kirishitan.4.desc

	trigger = {
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		"religion_percentage_in_country(religion:catholic)" > 0
		religion:catholic = {
			any_country_in_religion = {
				capital.continent = continent:europe
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		religion:catholic = {
			random_country_in_religion = {
				limit = { capital.continent = continent:europe }
				save_scope_as = target_catholic_country
			}
		}
		create_character = {
			adm = {50 70}
			dip = {50 70}
			mil = {50 70}
			religion = religion:catholic
			culture = scope:target_catholic_country.culture
            estate = estate_type:clergy_estate
			create_in_limbo = yes
			save_scope_as = target_character
		}
	}

	option = {
		name = kirishitan.4.a
		add_prestige = prestige_mild_penalty
		scope:target_character = { move_country = root }
	}
	option = {
		name = kirishitan.4.b
   		kill_character_silently = scope:target_character
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_weak_bonus }
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_bonus }
	}
}

kirishitan.5 = { #Christianity on Trial
	type = country_event
	title = kirishitan.5.title
	desc = kirishitan.5.desc

	trigger = {
		country_has_estate = estate_type:clergy_estate
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		"religion_percentage_in_country(religion:catholic)" > 0
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}
	
	option = {
		name = kirishitan.5.a
		custom_tooltip = {
			text = kirishitan.5.a.tt
			random_list = {
				50 = {
					trigger_event_silently = { id = kirishitan.6 }
				}
				50 = {
					trigger_event_silently = { id = kirishitan.7 }
				}
			}
		}
	}
	option = {
		name = kirishitan.5.b
		add_prestige = prestige_mild_bonus
		add_legitimacy = legitimacy_weak_penalty
	}
}

kirishitan.6 = { #The Nature of God
	type = country_event
	title = kirishitan.6.title
	desc = kirishitan.6.desc

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}
	
	option = {
		name = kirishitan.6.a
		add_stability = stability_severe_bonus
		ordered_character = {
			limit = {
				is_adult = yes
				is_ruler = no
				is_heir = no
				is_female = no
			}
			order_by = total_abilities
			max = 3
			change_character_religion = religion:catholic
		}
	}
	option = {
		name = kirishitan.6.b
		add_stability = stability_severe_penalty
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_severe_bonus }
		add_estate_satisfaction = { type = estate_type:nobles_estate value = estate_satisfaction_severe_bonus }
	}
}

kirishitan.7 = { #Christianity Derided
	type = country_event
	title = kirishitan.7.title
	desc = kirishitan.7.desc

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}
	
	option = {
		name = kirishitan.7.a
		add_stability = stability_mild_penalty
	}
	option = {
		name = kirishitan.7.b
		add_legitimacy = legitimacy_mild_penalty
	}
}

kirishitan.8 = { #Kirishitan Community Attacked
	type = country_event
	title = kirishitan.8.title
	desc = kirishitan.8.desc

	trigger = {
		any_owned_location = {
			has_location_modifier = shinto_local_christian_mission
		}
	}

	illustration_tags = {
        10 = angry
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
		random_owned_location = {
			limit = { has_location_modifier = shinto_local_christian_mission }
			save_scope_as = christian_port_event_target
		}
	}

	option = {
		name = kirishitan.8.a
		change_gold_effect = { scale = -1 }
		add_legitimacy = legitimacy_mild_penalty
	}
	option = {
		name = kirishitan.8.b
		scope:christian_port_event_target = {
			remove_location_modifier = shinto_local_christian_mission
			change_prosperity = prosperity_weak_penalty
		}
	}
}

kirishitan.9 = { #A Break with Tradition?
	type = country_event
	title = kirishitan.9.title
	desc = kirishitan.9.desc
	
	trigger = {
		country_has_estate = estate_type:clergy_estate
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		"religion_percentage_in_country(religion:catholic)" > 0.1
		has_ruler = yes
		ruler.religion = religion:catholic
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		ruler ?= { save_scope_as = target_ruler }
        capital = { save_scope_as = target_location }
	}

	option = {
		name = kirishitan.9.a
		add_prestige = prestige_mild_bonus
		if = {
			limit = {
				religion = { has_honor = yes }
			}
			add_honor = honor_mild_bonus
		}
		scope:target_ruler = {
			change_character_religion = root.religion
		}
	}
	option = {
		name = kirishitan.9.b
		change_religion = religion:catholic
		change_religion_for_ruler_and_family = { country = ROOT religion = religion:catholic }
		capital = {
			convert_pops_in_location_to_catholic = yes
		}
		add_country_modifier = { modifier = shinto_converted_to_christianity years = 20 mode = add_and_extend }
		hidden_effect = {
			if = {
				limit = {
					has_country_modifier = limited_kirishitan_movement
				}
				remove_country_modifier = limited_kirishitan_movement
			}
		}
	}
}

kirishitan.10 = { #A Kirishitan Realm
	type = country_event
	title = kirishitan.10.title
	desc = kirishitan.10.desc

	trigger = {
		culture = { has_culture_group = culture_group:japanese_group }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		OR = {
			religion.group = religion_group:christian
			"religion_percentage_in_country(religion:catholic)" > 0.3
		}
		NOT = { has_country_modifier = shinto_kirishitan_realm }
	}

	illustration_tags = {
        10 = happy
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}
	
	option = {
		name = kirishitan.10.a
		add_country_modifier = { modifier = shinto_kirishitan_realm years = 50 mode = add_and_extend }  
	}
}

kirishitan.11 = { #Christianity Repelled
	type = country_event
	title = kirishitan.11.title
	desc = kirishitan.11.desc

	trigger = {
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		international_organization:japanese_shogunate ?= {
			has_variable = nanban_trade
		}
		NOT = { has_country_modifier = christianity_opposed }
		"religion_percentage_in_country(religion:catholic)" = 0
		trigger_if = {
			limit = { has_ruler = yes }
			ruler.religion.group != religion_group:christian
		}
		trigger_if = {
			limit = { has_heir = yes }
			heir.religion.group != religion_group:christian
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}
	
	option = {
		name = kirishitan.11.a
		add_country_modifier = { modifier = christianity_opposed years = 10 mode = add_and_extend }  
	}
}

kirishitan.12 = { #Baptize the Ruler
	type = country_event
	title = kirishitan.12.title
	desc = kirishitan.12.desc

	trigger = {
		culture = { has_culture_group = culture_group:japanese_group }
		NOT = { religion.group = religion_group:christian }
		exists = international_organization:japanese_shogunate
		is_member_of_international_organization = international_organization:japanese_shogunate
		international_organization:japanese_shogunate ?= {
			has_variable = nanban_trade
		}
		NOT = { has_country_modifier = christianity_opposed }
		NOT = { has_country_modifier = significant_christian_presence }
		has_ruler = yes
		ruler ?= {
			is_adult = yes
			religion.group != religion_group:christian
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
		ruler ?= { save_scope_as = target_ruler }
	}

	option = {
		name = kirishitan.12.a
		scope:target_ruler = {
			change_character_religion = religion:catholic
		}
		add_country_modifier = { modifier = significant_christian_presence years = 5 mode = add_and_extend }
	}

	option = {
		name = kirishitan.12.b
		add_legitimacy = legitimacy_mild_bonus
		add_estate_satisfaction = { type = estate_type:clergy_estate value = estate_satisfaction_mild_bonus }
	}
}

kirishitan.13 = { #Kirishitan monks faction enabled notification
	type = country_event
	title = kirishitan.13.title
	desc = kirishitan.13.desc

	illustration_tags = {
        10 = regular
        10 = exterior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}
	
	option = {
		name = kirishitan.13.a
		custom_tooltip = kirishitan_enabled.tt
	}
}