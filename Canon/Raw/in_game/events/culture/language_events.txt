namespace = language

# Our court language is the same as a war enemy, should we change it?
language.1 = {
	type = country_event	
	title = language.1.title
	desc = language.1.desc
	
	trigger = {
		is_subject = no

		NOT = { court_language = culture.language }

		has_ruler = yes
		any_country_at_war_with = {
			culture = {
				language = root.court_language
				NOT = { language = root.culture.language }
			}
		}
	}

	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		save_scope_as = overlord
		ordered_country_at_war_with = {
			max = 1
			order_by = great_power_score
			limit = { 
				culture = {
					language = root.court_language
					NOT = { language = root.culture.language }
				}
			}
			save_scope_as = enemy_country
		}
		court_dialect = {
			save_scope_as = enemy_dialect
		}
		liturgical_dialect = {
			save_scope_as = liturgical_dialect
		}
		culture.dialect = {
			save_scope_as = common_dialect
		}
		ruler.culture.dialect = {
			save_scope_as = ruler_language
		}
	}

	# Yes! Adopt our common language!
	option = {
		name = language.1.a
		set_court_language = scope:common_dialect
		court_language = { save_scope_as = new_dialect }
		add_prestige = prestige_mild_bonus
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_right
		}
		custom_tooltip = {
			text = language.1.a.subject
			every_subject = {
				limit = {
					court_language = scope:enemy_dialect
					NOT = { court_language = culture.language }
				}
				trigger_event_silently = language.2
			}
		}
	}

	# Yes! Adopt our Liturgical language!
	option = {
		name = language.1.b
		trigger = {
			NOT = { scope:liturgical_dialect = scope:enemy_dialect }
			NOT = { scope:liturgical_dialect = scope:common_dialect }
		}
		set_court_language = scope:liturgical_dialect
		court_language = { save_scope_as = new_dialect }
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		change_societal_value = {
			type = spiritualist_vs_humanist
			value = societal_value_move_to_left
		}
		custom_tooltip = {
			text = language.1.a.subject
			every_subject = {
				limit = {
					court_dialect = scope:enemy_dialect
					NOT = { court_language = culture.language }
				}
				trigger_event_silently = language.2
			}
		}
	}

	# Yes! Adopt the king's language!
	option = {
		name = language.1.c
		trigger = {
			NOT = { scope:ruler_language = scope:enemy_dialect }
			NOT = { scope:ruler_language = scope:common_dialect }
			NOT = { scope:ruler_language = scope:liturgical_dialect }
		}
		set_court_language = scope:ruler_language
		court_language = { save_scope_as = new_dialect }
		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_move_to_left
		}

		custom_tooltip = {
			text = language.1.a.subject
			every_subject = {
				limit = {
					court_language = scope:enemy_dialect
					NOT = { court_language = culture.language }
				}
				trigger_event_silently = language.2
			}
		}
	}

	# No! Secular
	option = {
		name = language.1.d
		trigger = {
			NOT = { scope:enemy_dialect = scope:liturgical_dialect }
		}
		change_societal_value = {
			type = belligerent_vs_conciliatory
			value = societal_value_move_to_right
		}
	}

	# No! Religious
	option = {
		name = language.1.e
		trigger = {
			scope:enemy_dialect = scope:liturgical_dialect
		}
		change_societal_value = { type = mysticism_vs_jurisprudence value = societal_value_tiny_move_to_right }
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = societal_value_move_to_left
		}
	}
}

language.2 = {
	type = country_event	
	title = language.2.title
	desc = language.2.desc
	
	illustration_tags = {
        10 = regular
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		culture = {
			save_scope_as = primary_culture
		}	
	}

	option = {
		name = language.2.a
		trigger = {
			culture.dialect = scope:new_dialect
		}
		set_court_language = culture.dialect
	}
	option = {
		name = language.2.b
		trigger = {
			NOT = { culture.dialect = scope:new_dialect }
		}
		set_court_language = scope:new_dialect
	}
	option = {
		name = language.2.c
		trigger = {
			NOT = { culture.dialect = scope:new_dialect }
		}
		set_court_language = culture.dialect
	}
	option = {
		name = language.2.d
	}
}

# The King's Speech
language.10 = {
	type = country_event	
	title = language.10.title
	desc = language.10.desc
	
	trigger = {
		is_subject = no
		has_ruler = yes
		ruler = { 
			culture = { 
				language = { NOT = { this = root.court_language } }
			}
		}
	}

	illustration_tags = {
        10 = angry
        10 = interior
    }

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
		save_scope_as = country
		ruler = {
			save_scope_as = ruler
			culture = {
				save_scope_as = ruler_culture
				dialect = {
					save_scope_as = ruler_language
				}
			}
		}
		court_language = {
			save_scope_as = court_language
		}
	}

	option = {
		name = language.10.a
		set_court_language = scope:ruler_language
	}

	option = {
		name = language.10.b
		add_prestige = prestige_mild_bonus
	}
}


# The Pleading in English Act
language.20 = {
	type = country_event	
	title = language.20.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = { culture = culture:norman }
					capital.region = region:ireland_region
					court_language = language:french_language
				}
				desc = language.20.desc_IRE
			}
			triggered_desc = {
				trigger = {
					tag = ENG
					court_language = language:french_language
				}
				desc = language.20.desc_ENG
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = language.20.desc
			}
		}
	}
	
	illustration_tags = {
        10 = angry
        10 = interior
    }

	trigger = {
		NOT = { has_variable = language_20_flag  }
		has_embraced_institution = institution:legalism
		has_policy = language_of_pleading_court
		any_core_location = {
			any_pop = {
				culture = root.culture
				pop_type = pop_type:peasants
			}
		}
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:peasants_estate background = estate_type:peasants_estate }
		set_variable = { name = language_20_flag value = 1 }
		court_language = { save_scope_as = court_language }
		culture:norman = { save_scope_as = norman_culture } # used in some country-specific loc
		region:ireland_region = { save_scope_as = ireland_region } # used in some country-specific loc
		
		culture ?= { 
			save_scope_as = primary_culture
			dialect = { save_scope_as = common_language }
		}
	}

	option = {
		name = language.20.a
		if = {
			limit = { exists = scope:common_language }
			set_court_language = scope:common_language
		}
		remove_law = law:language_of_pleading
		add_government_power = government_power_extreme_penalty
	}

	option = {
		name = language.20.b

		add_policy = policy:language_of_pleading_common
		add_government_power = government_power_mild_penalty
		add_stability = stability_weak_bonus
	}

	option = {
		name = language.20.c
		add_government_power = government_power_mild_bonus
		add_stability = stability_weak_penalty
	}
}